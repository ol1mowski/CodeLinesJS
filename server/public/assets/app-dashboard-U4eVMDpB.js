const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-components-D84h3M0f.js","assets/vendor-react-DZ1J58UA.js","assets/vendor-other-XGstp20-.js","assets/vendor-monaco-CDW1p9tA.js","assets/vendor-framer-motion-dJ_xQJ9S.js","assets/app-auth-DqGUlsJL.js","assets/app-services-BZaIHWXD.js","assets/app-community-CZ812maw.js","assets/vendor-charts-BZPlmQu5.js"])))=>i.map(i=>d[i]);
var Ei=Object.defineProperty,Ci=Object.defineProperties;var Ai=Object.getOwnPropertyDescriptors;var ds=Object.getOwnPropertySymbols;var $i=Object.prototype.hasOwnProperty,Ri=Object.prototype.propertyIsEnumerable;var ms=(s,t,a)=>t in s?Ei(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,k=(s,t)=>{for(var a in t||(t={}))$i.call(t,a)&&ms(s,a,t[a]);if(ds)for(var a of ds(t))Ri.call(t,a)&&ms(s,a,t[a]);return s},z=(s,t)=>Ci(s,Ai(t));var L=(s,t,a)=>new Promise((i,n)=>{var o=d=>{try{l(a.next(d))}catch(u){n(u)}},c=d=>{try{l(a.throw(d))}catch(u){n(u)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(o,c);l((a=a.apply(s,t)).next())});import{_ as K,u as F,A}from"./app-auth-DqGUlsJL.js";import{r,_ as Ae,j as e,$ as xs,H as Y,a0 as Fi,a1 as us,p as O,z as _i,a2 as Di,y as Ke,Q as Ze,n as ys,a3 as gs,a4 as fs,u as ce,a5 as bs,U as G,a6 as de,a7 as ae,a8 as Ve,A as Oi,D as ee,L as fe,a9 as Ii,aa as ws,q as D,P as Ns,s as vs,ab as V,c as X,ac as ks,v as me,M as I,h as Z,ad as Ss,ae as Xe,af as Ye,ag as Bi,ah as Mi,ai as zs,aj as be,ak as P,al as Ls,am as Gi,an as Hi,ao as Ui,w as Ts,d as es,N as Ps,m as Es,ap as ss,e as $e,g as Wi,aq as Ji,ar as Cs,as as qi,at as Qi,f as Ki,au as xe,av as As,aw as $s,ax as Zi,ay as Vi,az as Xi,aA as Yi,aB as er,aC as sr,aD as tr,aE as ts,aF as as,aG as ar,aH as ir,aI as rr,aJ as nr,aK as or,aL as lr,J as cr,O as dr,aM as mr}from"./vendor-react-DZ1J58UA.js";import{L as Ce,f as is,g as U,h as xr,i as ur,c as le,B as ye}from"./app-components-D84h3M0f.js";import{m,A as B,a as pr}from"./vendor-framer-motion-dJ_xQJ9S.js";import{u as Rs,M as hr}from"./app-community-CZ812maw.js";import{f as Fs,p as _s,z as _,t as Re,c as We}from"./vendor-other-XGstp20-.js";import{R as jr,L as yr,C as gr,X as fr,Y as br,T as wr,b as Nr}from"./vendor-charts-BZPlmQu5.js";import{l as vr}from"./vendor-monaco-CDW1p9tA.js";import{h as kr}from"./app-services-BZaIHWXD.js";const Sr={activeView:"community"},zr=(s,t)=>{switch(t.type){case"SET_ACTIVE_VIEW":return z(k({},s),{activeView:t.payload});default:return s}},Lr=()=>{const[s,t]=r.useReducer(zr,Sr),a=r.useCallback(i=>{t({type:"SET_ACTIVE_VIEW",payload:i})},[]);return{state:s,setActiveView:a}},Ds=r.memo(()=>{const t=Ae().pathname,a=t==="/dashboard/community"||t==="/dashboard/community/"||/^\/dashboard\/community\/?$/.test(t),i=t.includes("/dashboard/community/ranking");return e.jsxs("div",{className:"flex gap-4 mb-8 pb-2",children:[e.jsxs(xs,{to:"/dashboard/community",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${a?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-newspaper"}),"Aktualności"]}),e.jsxs(xs,{to:"/dashboard/community/ranking",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${i?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-trophy"}),"Ranking"]})]})});Ds.displayName="CommunityNavigation";const Tr=r.lazy(()=>K(()=>Promise.resolve().then(()=>bo),void 0)),Pr=r.lazy(()=>K(()=>Promise.resolve().then(()=>vo),void 0)),Os=r.memo(()=>{const s=Ae(),{state:{activeView:t},setActiveView:a}=Lr();return r.useEffect(()=>{const i=s.pathname.split("community").pop()||"community";i!==t&&a(i)},[s.pathname,t,a]),e.jsxs("div",{className:"p-8 w-full min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Community | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Community CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx(Ds,{}),e.jsxs(Fi,{children:[e.jsx(us,{index:!0,element:e.jsx(r.Suspense,{fallback:e.jsx(Ce,{text:"Ładowanie aktualności..."}),children:e.jsx(Tr,{})})}),e.jsx(us,{path:"ranking",element:e.jsx(r.Suspense,{fallback:e.jsx(Ce,{text:"Ładowanie rankingu..."}),children:e.jsx(Pr,{})})})]})]})})]})});Os.displayName="CommunitySection";const cl=Object.freeze(Object.defineProperty({__proto__:null,CommunitySection:Os},Symbol.toStringTag,{value:"Module"})),Er=()=>{const[s,t]=r.useState(!1),[a,i]=r.useState("dashboard"),n=Ae();return r.useEffect(()=>{const c=n.pathname.split("/").pop()||"dashboard";i(c)},[n]),r.useEffect(()=>{const o=()=>{window.innerWidth<768&&t(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]),{isExpanded:s,setIsExpanded:t,activeItem:a,setActiveItem:i}},Cr={expanded:{width:"240px",transition:{type:"spring",stiffness:300,damping:30}},collapsed:{width:"100px",transition:{type:"spring",stiffness:300,damping:30}}},rs={expanded:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:30}},collapsed:{opacity:0,x:-10,transition:{duration:.2}}},Is=r.memo(({isExpanded:s})=>e.jsx("div",{className:"px-4 mb-8",children:e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-js/20 flex items-center justify-center",children:e.jsx(O,{className:"text-xl text-js"})}),e.jsx(B,{mode:"wait",children:s&&e.jsx(m.span,{variants:rs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-bold text-js font-space",children:"CodeLinesJS"})})]})}));Is.displayName="NavigationLogo";const ns=r.memo(({icon:s,label:t,isActive:a=!1,isExpanded:i,onClick:n,variant:o="default",id:c})=>e.jsxs(m.button,{onClick:n,"data-testid":`nav-button-${t==null?void 0:t.toLowerCase().replace(/\s/g,"-")}`,className:`
      ${c==="code"&&"hidden lg:flex"}
      w-full flex items-center gap-3 px-4 py-3 
      rounded-lg transition-all duration-200
      backdrop-blur-sm
      ${o==="default"?a?"bg-js/20 border-l-2 border-js text-js":"text-gray-400 hover:text-js hover:bg-js/10":a?"bg-red-500/20 text-red-400":"text-red-400 hover:bg-red-500/10"}
    `,whileHover:{scale:1.02,x:5},whileTap:{scale:.98},children:[e.jsx(m.span,{className:"text-xl min-w-[24px]",whileHover:{rotate:10},style:{color:"currentColor"},children:s}),e.jsx(B,{mode:"wait",children:i&&t&&e.jsx(m.span,{variants:rs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-medium font-space whitespace-nowrap",style:{color:"currentColor"},children:t})})]}));ns.displayName="NavigationButton";const Bs=r.memo(({title:s,items:t,isExpanded:a,activeItem:i,onItemClick:n,index:o,isLastSection:c})=>e.jsxs(m.div,{className:"space-y-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:[a&&e.jsx(m.h2,{variants:rs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"text-xs font-bold text-js/60 uppercase tracking-wider px-3 mb-2",children:s}),t.map(l=>e.jsx(ns,{id:l.id,icon:l.icon,label:l.label,isActive:i===l.id,isExpanded:a,onClick:()=>n(l)},l.id)),!c&&e.jsx("div",{className:"mx-3 my-4",children:e.jsx("div",{className:"border-t border-js/5"})})]},s));Bs.displayName="NavigationSection";const H="/dashboard",Ar=[`${H}/community`,`${H}/community/ranking`,`${H}/community/groups`,`${H}/learn`,`${H}/play`,`${H}/play/regex-raider`,`${H}/play/async-quest`,`${H}/play/js-typo-hunter`,`${H}/play/scope-explorer`,`${H}/settings`],Ms=()=>{const s=Ae();return r.useMemo(()=>{const t=s.pathname,a=Ar.includes(t),i=t.startsWith(`${H}/learn/lesson/`);return a||i},[s.pathname])},$r=[{id:"dashboard",label:"Dashboard",icon:e.jsx(_i,{}),section:"main",path:"/dashboard"},{id:"stats",label:"Statystyki",icon:e.jsx(Di,{}),section:"main",path:"/dashboard/stats"},{id:"play",label:"Graj",icon:e.jsx(Ke,{}),section:"game",path:"/dashboard/play"},{id:"learn",label:"Nauka",icon:e.jsx(Ze,{}),section:"game",path:"/dashboard/learn"},{id:"code",label:"Edytor",icon:e.jsx(O,{}),section:"game",path:"/dashboard/code"},{id:"community",label:"Społeczność",icon:e.jsx(ys,{}),section:"social",path:"/dashboard/community"},{id:"settings",label:"Ustawienia",icon:e.jsx(gs,{}),section:"social",path:"/dashboard/settings"},{id:"report",label:"Zgłoś błąd",icon:e.jsx(fs,{}),section:"social",path:"/dashboard/report"}],Rr={main:"Główne",game:"Nauka",social:"Społeczność"},Gs=r.memo(()=>{const s=ce(),{isExpanded:t,setIsExpanded:a,activeItem:i,setActiveItem:n}=Er(),{logout:o}=F(),c=Ms(),l=Rs(),d=r.useCallback(p=>{n(p.id),p.path&&s(p.path)},[s,n]),u=r.useCallback(()=>{a(p=>!p)},[a]),x=r.useMemo(()=>Object.entries($r.reduce((p,j)=>(p[j.section]||(p[j.section]=[]),p[j.section].push(j),p),{})),[]),h=r.useMemo(()=>c||l?"hidden md:flex":"",[c,l]);return c&&window.innerWidth<hr?null:e.jsx(is,{children:e.jsxs(m.nav,{initial:"collapsed",animate:t?"expanded":"collapsed",variants:Cr,className:`${h} fixed left-0 top-0 bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg border-r border-js/10 flex flex-col py-6 z-40 shadow-xl shadow-black/10 h-full`,"aria-label":"Menu nawigacyjne",children:[e.jsx(Is,{isExpanded:t}),e.jsx(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u,className:"absolute -right-3 top-8 w-6 h-6 bg-js rounded-full flex items-center justify-center hover:opacity-90 transition-all shadow-lg shadow-js/20","aria-label":t?"Zwiń menu":"Rozwiń menu",children:e.jsx(m.span,{animate:{rotate:t?180:0},className:"text-dark text-sm font-bold",initial:"collapsed","aria-hidden":"true",children:"→"})}),e.jsx("div",{className:"overflow-x-hidden flex-1 px-3 space-y-6",children:e.jsx(B,{mode:"sync",children:x.map(([p,j],w)=>e.jsx(Bs,{title:Rr[p]||p,items:j,isExpanded:t,activeItem:i,onItemClick:d,index:w,isLastSection:w===x.length-1},p))})}),e.jsx("div",{className:"pt-4 border-t border-js/10",children:e.jsx(ns,{id:"logout",icon:e.jsx(bs,{"aria-hidden":"true"}),label:"Wyloguj się",isExpanded:t,onClick:o,variant:"danger"})})]})})});Gs.displayName="DashboardNavigation";const Hs=r.memo(({username:s})=>e.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-js font-bold text-xl",children:["Witaj, ",s,"! 👋"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Miło Cię znów widzieć"})]})}));Hs.displayName="WelcomeSection";const Fr=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak autoryzacji");const t=yield fetch(`${A}users/stats`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok){if(t.status===401)throw new Error("Brak autoryzacji - zaloguj się ponownie");const a=yield t.json();throw new Error(a.message||"Błąd podczas pobierania danych")}return t.json()}),os=()=>{const{token:s}=F();return G({queryKey:["userProgress"],queryFn:()=>Fr(s||""),enabled:!!s,staleTime:1e3*60*5,refetchInterval:1e3*60,retry:(t,a)=>t<2&&!a.message.includes("autoryzacji")})},R={dropdown:{container:`
      absolute right-0 top-12 w-80 bg-dark/95 rounded-xl 
      border border-js/10 shadow-xl backdrop-blur-sm z-[2147483647]
    `,header:{wrapper:"flex justify-between items-center mb-4 p-4",title:"text-xl font-bold text-js",badge:"px-2 py-1 text-xs bg-js/20 text-js rounded-full"},content:{wrapper:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar p-4",loading:"py-8 text-center text-gray-400",empty:"py-8 text-center text-gray-400",item:{wrapper:`
          p-3 rounded-lg bg-dark/50 hover:bg-dark/70
          border border-js/10 hover:border-js/20
          cursor-pointer transition-all duration-200
        `,content:"flex items-start gap-3",icon:"mt-1",text:{wrapper:"flex-1",message:"text-white",time:"text-sm text-gray-400 mt-1"}}}},button:{wrapper:"hidden xl:block relative",base:`
      relative p-2 rounded-lg
      hover:bg-js/5 transition-colors duration-200
    `,active:"bg-dark/50",icon:{base:"w-5 h-5",active:"text-js",inactive:"text-gray-400"},badge:`
      absolute -top-1 -right-1 bg-red-500 text-white 
      rounded-full min-w-[18px] h-[18px] text-xs 
      flex items-center justify-center px-1 font-medium
    `}},_r=()=>{const{token:s}=F(),t=de();return{markAsRead:ae({mutationFn:i=>L(void 0,null,function*(){const n=yield fetch(`${A}/dashboard/notifications/${i}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Nie udało się oznaczyć jako przeczytane");return n.json()}),onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard"]})}})}},Dr=s=>{try{const t=s instanceof Date?s:new Date(s);return isNaN(t.getTime())?"Nieprawidłowa data":Fs(t,"dd MMM, HH:mm",{locale:_s})}catch(t){return console.error("Error formatting date:",t),"Nieprawidłowa data"}},Or=s=>{switch(s){case"challenge":return e.jsx(ee,{className:"text-yellow-500"});case"achievement":return e.jsx(Oi,{className:"text-green-500"});case"social":return e.jsx(ys,{className:"text-blue-500"});default:return e.jsx(Ve,{className:"text-gray-400"})}},Us=r.memo(({notification:s,onRead:t})=>e.jsx(m.div,{className:`
      ${R.dropdown.content.item.wrapper}
      ${s.read?"opacity-60":""}
    `,whileHover:{x:5},onClick:()=>!s.read&&t(s._id),children:e.jsxs("div",{className:R.dropdown.content.item.content,children:[e.jsx("div",{className:R.dropdown.content.item.icon,children:Or(s.type)}),e.jsxs("div",{className:R.dropdown.content.item.text.wrapper,children:[e.jsx("p",{className:R.dropdown.content.item.text.message,children:s.message}),e.jsx("span",{className:R.dropdown.content.item.text.time,children:Dr(s.createdAt)})]})]})}));Us.displayName="NotificationItem";const Ws=r.memo(({unreadCount:s})=>e.jsxs("div",{className:R.dropdown.header.wrapper,children:[e.jsx("h3",{className:R.dropdown.header.title,children:"Powiadomienia"}),s>0&&e.jsxs("span",{className:R.dropdown.header.badge,children:[s," nowe"]})]}));Ws.displayName="NotificationsHeader";const Js=r.memo(({onClose:s})=>{var n,o;const{data:t,isLoading:a}=os(),{markAsRead:i}=_r();return r.useEffect(()=>{const c=l=>{l.key==="Escape"&&s()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[s]),e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:R.dropdown.container,onClick:c=>c.stopPropagation(),children:[e.jsx(Ws,{unreadCount:(n=t==null?void 0:t.unreadCount)!=null?n:0}),a?e.jsx("div",{className:R.dropdown.content.loading,children:"Ładowanie powiadomień..."}):(o=t==null?void 0:t.notifications)!=null&&o.length?e.jsx("div",{className:R.dropdown.content.wrapper,children:t.notifications.map(c=>e.jsx(Us,{notification:c,onRead:l=>i.mutate(l)},c._id))}):e.jsx("div",{className:R.dropdown.content.empty,children:"Brak nowych powiadomień"})]})});Js.displayName="NotificationsDropdown";const qs=r.memo(()=>{var c;const[s,t]=r.useState(!1),{data:a}=os(),i=(c=a==null?void 0:a.unreadCount)!=null?c:0,n=r.useCallback(()=>t(!1),[]),o=r.useCallback(l=>{l.stopPropagation(),t(d=>!d)},[]);return e.jsxs("div",{className:R.button.wrapper,children:[e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:`${R.button.base} ${s?R.button.active:""}`,children:[e.jsx(Ve,{className:`
          ${R.button.icon.base}
          ${s?R.button.icon.active:R.button.icon.inactive}
        `}),e.jsx(B,{children:i>0&&e.jsx(m.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:R.button.badge,children:i>9?"9+":i})})]}),e.jsx(B,{children:s&&e.jsx(Js,{onClose:n})})]})});qs.displayName="NotificationsButton";const Oe={container:`
    w-[90%]
    xl:w-full
    flex justify-between items-center
    xl:block
    mt-5
    pb-2
    bg-dark/50 backdrop-blur-sm
    border-b border-js/10 
    fixed top-0
    md:top-4 right-0
    h-14
    z-[0]
    rounded-lg mx-4
  `,content:`
    h-full
    ml-32
    sm:ml-auto
    flex justify-between items-center
    max-w-[1000px]
    mx-auto
    relative
  `,actions:"flex items-center gap-3 absolute right-6",gradients:{text:"bg-gradient-to-r from-js to-js/80 bg-clip-text text-transparent",hover:"hover:bg-js/5",base:"bg-gradient-to-br from-js/5 to-js/10"},borders:{base:"border-js/20",hover:"hover:border-js/30"},transitions:{base:"transition-all duration-200"},text:{heading:"text-lg font-bold text-js",primary:"text-white",secondary:"text-gray-400"}},Ir=()=>r.useMemo(()=>({container:{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}}}}),[]),Br=s=>L(void 0,null,function*(){const t=yield fetch(`${A}users/profile`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Nie udało się pobrać danych użytkownika");return t.json()}),Mr=["userProfile"],Gr=()=>{const{token:s}=F();return G({queryKey:Mr,queryFn:()=>Br(s)})},Qs=r.memo(()=>{const s=Ir(),{data:t,isLoading:a,error:i}=Gr(),n=r.useMemo(()=>i?"Użytkowniku":a?"Ładowanie...":(t==null?void 0:t.data.user.username)||"Użytkowniku",[t==null?void 0:t.data.user.username,a,i]);return e.jsx(is,{children:e.jsx(m.nav,{variants:s.container,initial:"initial",animate:"animate",className:Oe.container,"aria-label":"Górna nawigacja",children:e.jsxs("div",{className:Oe.content,children:[e.jsx(Hs,{username:n}),e.jsx("div",{className:Oe.actions,children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 animate-pulse"}),children:e.jsx(qs,{})})})]})})})});Qs.displayName="TopNavigation";const Hr=r.lazy(()=>K(()=>import("./app-components-D84h3M0f.js").then(s=>s.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ur=r.lazy(()=>K(()=>import("./app-components-D84h3M0f.js").then(s=>s.q),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>({default:s.LoadingSpinner}))),Ks=r.memo(()=>{const s=Ms(),t=Rs(),{logout:a}=F();return e.jsx(is,{fallback:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Ładowanie..."}),children:e.jsx(Hr,{})}),children:e.jsxs("main",{className:"bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg flex min-h-screen",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Dashboard | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Panel użytkownika CodeLinesJS - dostęp do kursów, gier i statystyk nauki."})]}),e.jsx(Gs,{}),e.jsxs("div",{className:`flex-1 ${!s&&!t?"ml-[100px]":""} md:ml-[100px]`,children:[e.jsx(Qs,{}),e.jsx("div",{className:"mt-20 p-6",children:e.jsxs("div",{className:`${s||t?"flex":""} flex-col justify-center items-center gap-4 md:block`,children:[s||t?e.jsxs("div",{className:"flex flex-col gap-2 mb-4 md:hidden",children:[e.jsx(fe,{to:"/dashboard",children:e.jsx("button",{"aria-label":"Wróć do strony głównej",className:"bg-js text-dark px-4 py-2 rounded-md w-full flex items-center justify-center",children:"Wróć do Home"})}),e.jsxs("button",{onClick:a,"aria-label":"Wyloguj się",className:"bg-red-600 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2",children:[e.jsx(bs,{"aria-hidden":"true"}),"Wyloguj się"]})]}):null,e.jsx(r.Suspense,{fallback:e.jsx(Ur,{text:"Ładowanie zawartości..."}),children:e.jsx(Ii,{})})]})})]})]})})});Ks.displayName="Dashboard";const dl=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"})),pe={text:{heading:"font-bold text-js"},grid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",card:{base:"bg-dark/50 backdrop-blur-sm border border-js/10 shadow-xl",community:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-2 lg:order-1
    `,game:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-1 lg:order-2
    `,stats:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-3
    `}},$={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-6",title:"text-xl font-bold text-js flex items-center gap-2",icon:"w-5 h-5"},content:{wrapper:"space-y-6",description:"text-gray-400 text-sm leading-relaxed",button:{wrapper:"flex justify-center",base:"px-6 py-3 bg-js text-dark font-medium rounded-lg transition-all duration-200",hover:"hover:bg-js/90 hover:shadow-lg hover:shadow-js/20",active:"active:scale-95"}}},Zs=()=>r.useMemo(()=>({container:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},button:{hover:{scale:1.05},tap:{scale:.95}}}),[]),Vs=r.memo(()=>{const s=ce(),t=Zs(),a=()=>{s("/dashboard/learn")};return e.jsxs(m.div,{variants:t.container,initial:"hidden",animate:"show",className:$.container,children:[e.jsx("div",{className:$.header.wrapper,children:e.jsxs("h2",{className:$.header.title,children:[e.jsx(Ze,{className:$.header.icon}),"Nauka"]})}),e.jsxs("div",{className:$.content.wrapper,children:[e.jsx("p",{className:$.content.description,children:"Sprawdź najnowsze informacje i aktualności związane z nauką."}),e.jsx("div",{className:$.content.button.wrapper,children:e.jsx(m.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:t.button,className:`
              ${$.content.button.base}
              ${$.content.button.hover}
              ${$.content.button.active}
            `,children:"Sprawdź aktualności"})})]})]})});Vs.displayName="CommunityBlock";const Xs=r.memo(()=>{const s=ce(),t=Zs(),a=()=>{s("/dashboard/play")};return e.jsxs(m.div,{variants:t.container,initial:"hidden",animate:"show",className:$.container,children:[e.jsx("div",{className:$.header.wrapper,children:e.jsxs("h2",{className:$.header.title,children:[e.jsx(Ke,{className:$.header.icon}),"Tryb Gry"]})}),e.jsxs("div",{className:$.content.wrapper,children:[e.jsx("p",{className:$.content.description,children:"Rozpocznij nową sesję gry, rozwiązuj wyzwania i zdobywaj punkty. Sprawdź swoje umiejętności w praktyce!"}),e.jsx("div",{className:$.content.button.wrapper,children:e.jsx(m.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:t.button,className:`
              ${$.content.button.base}
              ${$.content.button.hover}
              ${$.content.button.active}
            `,children:"Rozpocznij Grę"})})]})]})});Xs.displayName="GameBlock";const te={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-4",title:"text-xl font-bold text-js",refreshButton:"p-2 text-js hover:text-js/80 transition-colors cursor-pointer"},stats:{grid:"grid grid-cols-1 sm:grid-cols-2 gap-4",item:{wrapper:"flex items-center gap-4 p-4 bg-dark/30 rounded-lg",icon:"text-2xl text-js",content:{wrapper:"flex flex-col",label:"text-sm text-gray-400",value:"text-xl font-bold text-js"}}},lastActive:"text-sm text-gray-400 mt-4"},Wr=()=>r.useCallback(s=>{try{if(!s)return"Brak danych";const t=new Date(s);return isNaN(t.getTime())?"Nieprawidłowa data":Fs(t,"dd MMM, HH:mm",{locale:_s})}catch(t){return console.error("Error formatting date:",t),"Nieprawidłowa data"}},[]),Le=r.memo(({icon:s,label:t,value:a})=>e.jsxs("div",{className:te.stats.item.wrapper,children:[e.jsx("div",{className:te.stats.item.icon,children:s}),e.jsxs("div",{className:te.stats.item.content.wrapper,children:[e.jsx("p",{className:te.stats.item.content.label,children:t}),e.jsx("p",{className:te.stats.item.content.value,children:a})]})]}));Le.displayName="StatItem";const Ys=r.memo(({stats:s})=>{const t=Wr();return e.jsxs("div",{className:te.container,children:[e.jsxs("div",{className:te.stats.grid,children:[e.jsx(Le,{icon:e.jsx(ws,{}),label:"Poziom",value:s.progress.level}),e.jsx(Le,{icon:e.jsx(D,{}),label:"Punkty",value:s.progress.points}),e.jsx(Le,{icon:e.jsx(Ns,{}),label:"Seria",value:`${s.achievements.streak.current} dni`})]}),e.jsxs("p",{className:te.lastActive,children:["Ostatnia aktywność: ",t(s.user.lastActive)]})]})});Ys.displayName="StatsBlock";const ge=r.memo(({type:s,message:t})=>{const a=()=>{switch(s){case"error":return"text-red-400";default:return"text-gray-400"}};return e.jsx("div",{className:"p-8 w-full flex items-center justify-center min-h-[400px]",children:e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:`text-xl ${a()}`,children:t||(s==="loading"?"Ładowanie danych...":s==="error"?"Wystąpił błąd podczas ładowania danych":"Brak danych do wyświetlenia")})})});ge.displayName="DashboardState";const Jr=()=>r.useMemo(()=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}}),[]),et=r.memo(()=>{const{data:s,isLoading:t,error:a}=os(),i=Jr();return t?e.jsx(U,{}):a?e.jsx(ge,{type:"error",message:a.message}):s?e.jsxs(m.div,{className:"p-1 md:p-12 w-full overflow-y-auto",variants:i.container,initial:"hidden",animate:"visible",children:[e.jsx(m.h1,{className:`${pe.text.heading} text-3xl mb-12`,variants:i.item,children:"Dashboard"}),e.jsxs("div",{className:pe.grid,children:[e.jsx(m.div,{variants:i.item,className:pe.card.community,children:e.jsx(Vs,{})}),e.jsx(m.div,{variants:i.item,className:pe.card.game,children:e.jsx(Xs,{})}),e.jsx(m.div,{variants:i.item,className:pe.card.stats,children:e.jsx(Ys,{stats:s.data})})]})]}):e.jsx(ge,{type:"empty"})});et.displayName="DashboardContent";const ml=Object.freeze(Object.defineProperty({__proto__:null,DashboardContent:et},Symbol.toStringTag,{value:"Module"})),qr=s=>L(void 0,null,function*(){var i,n;const t=yield fetch(`${A}users/stats`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok)throw t.status===401?new Error("Brak autoryzacji"):new Error("Błąd podczas pobierania statystyk");const a=yield t.json();return z(k({},a),{chartData:{daily:((i=a.chartData)==null?void 0:i.daily)||[],categories:((n=a.chartData)==null?void 0:n.categories)||[]}})}),ls=()=>{const{token:s,isAuthenticated:t}=F(),{data:a,isLoading:i,error:n}=G({queryKey:["userProgress"],queryFn:()=>qr(s),enabled:t&&!!s,staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(o,c)=>c.message==="Brak autoryzacji"?!1:o<3});return{stats:a,isLoading:i,error:n}},ne={card:{base:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",title:"text-xl font-bold text-js mb-6",content:"h-full"},text:{heading:"text-3xl font-bold font-space text-js",subtitle:"text-gray-400 text-sm"}},st=r.memo(({level:s,experience:t,nextLevel:a})=>{const i=t/a*100;return e.jsxs("div",{className:ne.card.base,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:ne.card.title,children:["Poziom ",s]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[t," / ",a," XP do następnego poziomu"]})]}),e.jsx("div",{className:"hidden w-16 h-16 rounded-full bg-js/20 md:flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-js",children:s})})]}),e.jsx("div",{className:"relative h-4 bg-dark/50 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:1,ease:"easeOut"},className:"absolute top-0 left-0 h-full bg-js/50"})})]})});st.displayName="LevelProgress";const Qr={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},tt=r.memo(({icon:s,label:t,value:a,subValue:i})=>e.jsx(m.div,{variants:Qr,className:`${ne.card.base} hover:border-js/30 transition-all p-3 md:p-4`,children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"p-2 md:p-3 rounded-lg bg-js/10 shrink-0",children:e.jsx(s,{className:"w-5 h-5 md:w-6 md:h-6 text-js"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-0.5 md:mb-1",children:t}),e.jsx("p",{className:"text-xl md:text-2xl font-bold font-space text-js truncate",children:a}),i&&e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5 md:mt-1",children:i})]})]})}));tt.displayName="StatCard";const Kr=()=>s=>{try{const t=new Date(s);return isNaN(t.getTime())?"Data nieznana":t.toLocaleDateString("pl-PL",{year:"numeric",month:"short",day:"numeric"})}catch(t){return"Data nieznana"}},Zr={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Vr={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},at=r.memo(({badge:s})=>{const t=Kr();return e.jsxs(m.div,{variants:Vr,className:"min-w-[8rem] flex flex-col items-center p-4 bg-dark/30 rounded-lg border border-js/10 hover:border-js/30 transition-colors",children:[e.jsx("span",{className:"text-3xl mb-2",children:s.icon||"🏆"}),e.jsx("h4",{className:"text-js font-medium text-sm text-center",children:s.name}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:t(s.earnedAt)}),s.description&&e.jsx("p",{className:"text-gray-400 text-xs mt-1 text-center",children:s.description},`${s.id}-description`)]})});at.displayName="BadgeCard";const it=r.memo(()=>e.jsxs("div",{className:ne.card.base,children:[e.jsx("h3",{className:ne.card.title,children:"Odznaki"}),e.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nie zdobyto jeszcze żadnych odznak"})]}));it.displayName="EmptyBadges";const rt=r.memo(({badges:s})=>s!=null&&s.length?e.jsxs("div",{className:ne.card.base,children:[e.jsx("h3",{className:ne.card.title,children:"Odznaki"}),e.jsx(m.div,{variants:Zr,initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:s.map(t=>e.jsx(at,{badge:t},t.name))})]}):e.jsx(it,{}));rt.displayName="BadgesGrid";const nt=r.memo(({message:s})=>e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-500",children:s})}));nt.displayName="ErrorState";const Xr=s=>r.useMemo(()=>{var t;return s?[{id:"completed-lessons",icon:ee,label:"Ukończone Lekcje",value:((t=s.data.achievements.completedChallenges)==null?void 0:t.toString())||"0",gradient:"from-amber-500 to-orange-500"},{id:"current-streak",icon:vs,label:"Aktualny Streak",value:`${s.data.achievements.streak.current||0} dni`,subValue:`Najlepszy: ${s.data.achievements.streak.best||0} dni`,gradient:"from-red-500 to-pink-500"}]:[]},[s]),Yr={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ot=r.memo(({stats:s,isLoading:t,error:a})=>{const i=Xr(s);return t?e.jsx(U,{}):a?e.jsx(nt,{message:`Wystąpił błąd podczas ładowania statystyk: ${a.message}`}):s?e.jsxs(m.div,{variants:Yr,initial:"hidden",animate:"show",className:"space-y-6",children:[e.jsx(st,{level:s.data.progress.level,experience:s.data.progress.points,nextLevel:s.data.progress.pointsToNextLevel}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map(n=>e.jsx(tt,k({},n),n.id))}),e.jsx(rt,{badges:s.data.achievements.badges})]}):e.jsx("div",{className:"p-4 bg-dark/50 rounded-lg",children:e.jsx("p",{className:"text-gray-400",children:"Brak dostępnych statystyk"})})});ot.displayName="StatsOverview";const lt=r.memo(({data:s})=>e.jsx(jr,{width:"100%",height:300,children:e.jsxs(yr,{data:s,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(gr,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),e.jsx(fr,{dataKey:"date",stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"}}),e.jsx(br,{stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"},label:{value:"Punkty",angle:-90,position:"insideLeft",fill:"#666"}}),e.jsx(wr,{contentStyle:{background:"#1A1A1A",border:"1px solid #333",borderRadius:"4px",padding:"8px"},labelStyle:{color:"#666"},itemStyle:{color:"#F7DF1E"}}),e.jsx(Nr,{type:"monotone",dataKey:"points",stroke:"#F7DF1E",strokeWidth:2,dot:{fill:"#F7DF1E",strokeWidth:2},activeDot:{r:6,fill:"#F7DF1E"}})]})}));lt.displayName="DailyChart";const ct=r.memo(({data:s,isLoading:t})=>t?e.jsx(U,{}):s?e.jsx("div",{className:"hidden md:flex flex-col gap-6 h-full",children:e.jsxs("div",{className:"bg-dark/50 rounded-lg p-6 flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-6",children:"Aktywność"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(lt,{data:s.daily})})]})}):null);ct.displayName="StatsCharts";const dt=r.memo(()=>{var d;const{stats:s,isLoading:t,error:a}=ls(),[i,n]=r.useState(!1),[o,c]=r.useState(null);if(r.useEffect(()=>{var u,x,h;(x=(u=s==null?void 0:s.data)==null?void 0:u.progress)!=null&&x.levelUp&&(c({level:s.data.progress.level,rewards:((h=s.data.achievements)==null?void 0:h.badges)||[]}),n(!0))},[s]),t)return e.jsx(U,{});if(a)return e.jsx(ge,{type:"error",message:"Nie udało się załadować statystyk. Spróbuj ponownie później."});if(!s)return e.jsx(ge,{type:"empty",message:"Brak dostępnych statystyk."});const l={data:{progress:{level:s.data.progress.level,points:s.data.progress.points,pointsToNextLevel:s.data.progress.pointsToNextLevel},achievements:{streak:{current:s.data.achievements.streak.current,best:s.data.achievements.streak.best},completedChallenges:s.data.achievements.completedChallenges,badges:s.data.achievements.badges},badges:s.data.achievements.badges,unlockedFeatures:[],levelUp:s.data.progress.levelUp,rewards:(d=s.data.achievements.badges)!=null&&d.length?{badges:s.data.achievements.badges,bonusPoints:0,unlockedFeatures:[]}:void 0,chartData:{daily:s.data.stats.daily,categories:[]}}};return e.jsxs(e.Fragment,{children:[e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(V,{children:[e.jsx("title",{children:"Statystyki i Postępy | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Statystyki i Postępy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(m.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Statystyki i Postępy"})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 flex-1",children:[e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx(ot,{stats:l,isLoading:t,error:a})}),e.jsx("div",{className:"flex flex-col gap-6 h-full",children:e.jsx(ct,{data:s.data.stats,isLoading:t})})]})]}),e.jsx(xr,{isVisible:i,onClose:()=>n(!1),level:(o==null?void 0:o.level)||0,rewards:{badges:(o==null?void 0:o.rewards)||[],bonusPoints:0,unlockedFeatures:[]}})]})});dt.displayName="StatsSection";const xl=Object.freeze(Object.defineProperty({__proto__:null,StatsSection:dt},Symbol.toStringTag,{value:"Module"})),Fe=r.memo(({message:s,onRetry:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(X,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-gray-400 mb-4",children:s}),t&&e.jsx("button",{onClick:t,className:"px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:"Spróbuj ponownie"})]})),en=[{id:"all",label:"Wszystkie"},{id:"beginner",label:"Podstawowe"},{id:"intermediate",label:"Średnie"},{id:"advanced",label:"Zaawansowane"}],mt=r.memo(({onFilterChange:s,className:t=""})=>{const[a,i]=ks(),n=a.get("filter")||"all";r.useEffect(()=>{s(n)},[n,s]);const o=c=>{i(c==="all"?{tab:"lessons"}:{filter:c,tab:"lessons"})};return e.jsx("div",{className:`flex gap-2 flex-wrap ${t}`,children:en.map(c=>{const l=n===c.id;return e.jsx(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(c.id),className:`w-fit px-3 py-1.5 rounded-lg text-sm font-medium transition-all
              ${l?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:c.label},c.id)})})});mt.displayName="LessonsFilter";const xt=r.memo(({onFilterChange:s})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Dostępne lekcje"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz interesującą Cię lekcję i rozpocznij naukę"})]}),e.jsx(mt,{onFilterChange:s})]}));xt.displayName="LessonsHeader";const sn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},ut=r.memo(({lesson:s})=>{const{title:t,description:a,duration:i,slug:n,isCompleted:o,isLocked:c,requiredLevel:l=1}=s,d=e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${c?"text-gray-500":"text-js"}`,children:t}),o&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-js/10 text-js",children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),"Ukończono"]})]}),e.jsx("p",{className:`text-sm ${c?"text-gray-600":"text-gray-400"} line-clamp-2`,children:a})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${c?"text-gray-600":"text-gray-400"}`,children:[e.jsx(I,{className:"w-3.5 h-3.5"}),i," min"]}),c&&e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),"Poziom ",l]})]}),!c&&e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx("span",{children:o?"Powtórz":"Rozpocznij"}),e.jsx(Ss,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]});return e.jsx(m.div,{variants:sn,className:`group relative ${c?"opacity-75":""}`,children:c?e.jsx("div",{className:"block p-6 rounded-xl bg-dark-800 border border-gray-800 cursor-not-allowed",children:d}):e.jsx(fe,{to:`/dashboard/learn/lesson/${n}`,className:"block p-6 rounded-xl bg-dark-800 border border-js/10 hover:border-js/20 transition-colors",children:d})})});ut.displayName="LessonCard";const tn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},an=s=>{switch(s){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},pt=r.memo(({lessons:s,filter:t,userData:a})=>{const i=s.map(n=>z(k({},n),{isLocked:n.requiredLevel?n.requiredLevel>a.userLevel:!1}));return i.length===0?e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Xe,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(Ye,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:t==="all"?"Brak dostępnych lekcji":`Brak lekcji o poziomie ${an(t)}`}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:t==="all"?"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później.":"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności."})]}):e.jsxs(m.div,{variants:tn,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(V,{children:[e.jsx("title",{children:"Lekcje | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Lekcje JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),i.map(n=>e.jsx(ut,{lesson:n},n.slug))]})});pt.displayName="LessonsList";const rn=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${A}lessons/${s}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!a.ok)throw a.status===404?new Error("lesson_not_found"):new Error("Błąd podczas pobierania lekcji");const i=yield a.json();return i.data?i.data:i}),nn=i=>L(void 0,[i],function*({lessonId:s,pathId:t,token:a}){if(!a)throw new Error("Brak tokenu autoryzacji");const n=yield fetch(`${A}lessons/${s}/complete`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({pathId:t})});if(!n.ok){const o=yield n.text();throw console.error("API error:",o),new Error(o||"Błąd podczas zakończenia lekcji")}return n.json()}),on=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${A}lessons`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania lekcji");return yield t.json()}),ps=s=>{switch(s){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},ln=()=>{var w,b,y;const[s,t]=r.useState("all"),[a]=r.useState("javascript"),{token:i}=F(),{data:n,isLoading:o,error:c,refetch:l}=G({queryKey:["lessons"],queryFn:()=>on(i||""),retry:2,staleTime:1e3*60*5,refetchOnWindowFocus:!0,enabled:!!i}),d=(b=(w=n==null?void 0:n.data.lessons)==null?void 0:w[a])!=null?b:[],u=(y=n==null?void 0:n.data.stats)!=null?y:{total:0,completed:0,progress:0},x=r.useMemo(()=>s==="all"?d:d.filter(g=>g.difficulty===s),[d,s]),h=!d||d.length===0,p=!h&&x.length===0,j={currentFilter:s,label:ps(s),isEmpty:h,hasNoLessonsForFilter:p,messages:{title:p?`Brak lekcji o poziomie ${ps(s)}`:"Brak dostępnych lekcji",description:p?"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności lub wyświetl wszystkie lekcje.":"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później."}};return{filteredLessons:x,filter:s,setFilter:t,resetFilter:()=>t("all"),isLoading:o,error:c,refetch:l,isEmpty:h,hasNoLessonsForFilter:p,filterState:j,requiredLevel:n==null?void 0:n.data.requiredLevel,stats:u}},ht=r.memo(()=>{var h,p;const{user:s}=F(),{stats:t}=ls(),a=(s==null?void 0:s.id)||"current-user",i=((p=(h=t==null?void 0:t.data)==null?void 0:h.progress)==null?void 0:p.level)||1,{filteredLessons:n,filter:o,setFilter:c,isLoading:l,requiredLevel:d,error:u,refetch:x}=ln();return u?e.jsx(Fe,{message:"Nie udało się pobrać listy lekcji. Spróbuj ponownie później.",onRetry:()=>x()}):l&&!t?e.jsx(U,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(xt,{onFilterChange:c}),e.jsx(pt,{lessons:n,filter:o,userId:a,userData:{userLevel:i,requiredLevel:d||1}})]})});ht.displayName="Lessons";const cn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},jt=r.memo(({resource:s,isRecommended:t})=>e.jsxs(m.div,{variants:cn,whileHover:{scale:1.02},className:"group relative bg-dark-800/50 border border-js/10 rounded-xl p-5 hover:border-js/20 transition-colors",children:[t&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-js text-dark px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),"Polecane"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-js mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.type==="documentation"?"bg-blue-500/10 text-blue-400":s.type==="tutorial"?"bg-green-500/10 text-green-400":s.type==="video"?"bg-red-500/10 text-red-400":"bg-purple-500/10 text-purple-400"}`,children:s.type==="documentation"?"Dokumentacja":s.type==="tutorial"?"Tutorial":s.type==="video"?"Wideo":"Artykuł"}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.difficulty==="beginner"?"bg-green-500/10 text-green-400":s.difficulty==="intermediate"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:s.difficulty==="beginner"?"Podstawowy":s.difficulty==="intermediate"?"Średni":"Zaawansowany"})]}),e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors text-sm",children:["Otwórz materiał",e.jsx(Bi,{className:"w-3 h-3"})]})]})]}));jt.displayName="ResourceCard";const dn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Je=r.memo(({title:s,subtitle:t,resources:a,isRecommended:i})=>e.jsxs("section",{children:[e.jsxs(V,{children:[e.jsx("title",{children:"Zasoby | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zasoby JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:s}),e.jsx("p",{className:"text-gray-400 text-sm",children:t})]}),e.jsx(m.div,{variants:dn,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(n=>e.jsx(jt,{resource:n,isRecommended:i},n.id))})]}));Je.displayName="ResourceSection";const mn=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${A}resources`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania zasobów");return yield t.json()}),xn=()=>{var d;const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=G({queryKey:["resources"],queryFn:()=>mn(s||""),retry:2,staleTime:1e3*60*5,enabled:!!s}),o=((d=t==null?void 0:t.data)==null?void 0:d.resources)||[],c=o.filter(u=>u.isRecommended)||[],l=o.filter(u=>!u.isRecommended)||[];return{recommendedResources:c,otherResources:l,isLoading:a,error:i,refetch:n}},yt=r.memo(()=>{const{recommendedResources:s,otherResources:t,isLoading:a,error:i,refetch:n}=xn();return i?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsx(Fe,{message:"Nie udało się pobrać materiałów. Spróbuj ponownie później.",onRetry:()=>n()})})}):a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(U,{})}):!(s!=null&&s.length)&&!(t!=null&&t.length)?e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Mi,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(Ye,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Brak dostępnych materiałów"}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"Aktualnie nie ma żadnych dostępnych materiałów. Sprawdź ponownie później lub skontaktuj się z administratorem."}),e.jsx(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(),className:"mt-6 px-4 py-2 bg-js/10 text-js border border-js/20 rounded-lg text-sm font-medium hover:bg-js/20 transition-colors",children:"Odśwież materiały"})]}):e.jsxs("div",{className:"space-y-8",children:[(s==null?void 0:s.length)>0&&e.jsx(Je,{title:"Polecane materiały",subtitle:"Wyselekcjonowane materiały, które pomogą Ci w nauce",resources:s,isRecommended:!0}),(t==null?void 0:t.length)>0&&e.jsx(Je,{title:"Wszystkie materiały",subtitle:"Przeglądaj wszystkie dostępne materiały",resources:t})]})});yt.displayName="Resources";const Ie=r.memo(({icon:s,title:t,label:a,value:i})=>e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(s,{className:"w-5 h-5 text-js"}),e.jsx("h4",{className:"font-medium text-gray-200",children:t})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsx("span",{className:"text-js",children:i})]})]})),un=r.memo(({stats:s})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ie,{icon:zs,title:"Postęp nauki",label:"Ukończone ścieżki",value:`${s.completedPaths}/${s.totalPaths}`}),e.jsx(Ie,{icon:Ns,title:"Punkty XP",label:"Zdobyte punkty",value:`${s.totalPoints} XP`}),e.jsx(Ie,{icon:I,title:"W trakcie",label:"Aktywne ścieżki",value:s.pathsInProgress})]})),pn=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${A}Learning-paths`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania ścieżek nauki");return yield t.json()}),gt=()=>{const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=G({queryKey:["learningPaths","userProgress"],queryFn:()=>pn(s||""),staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!!s});return{paths:(t==null?void 0:t.data.paths)||[],userStats:t==null?void 0:t.data.userStats,isLoading:a,error:i,refetch:n,isEmpty:!(t!=null&&t.data.paths)||t.data.paths.length===0}},hn=r.memo(()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-2",children:"Brak dostępnych ścieżek nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Aktualnie nie ma żadnych dostępnych ścieżek nauki. Sprawdź ponownie później."})]})),jn=s=>{const t=r.useMemo(()=>{var n,o,c,l;return{id:s.id,title:s.title||"Brak tytułu",description:s.description||"Brak opisu",estimatedTime:s.estimatedTime||0,isLocked:s.isLocked,requiredLevel:s.requiredLevel,progress:{completed:Array.isArray((n=s.progress)==null?void 0:n.completed)?s.progress.completed.length:Number((o=s.progress)==null?void 0:o.completed)||0,total:Number((c=s.progress)==null?void 0:c.total)||0,percentage:Number((l=s.progress)==null?void 0:l.percentage)||0},outcomes:Array.isArray(s.outcomes)?s.outcomes.map(d=>String(d)):[],requirements:Array.isArray(s.requirements)?s.requirements.map(d=>String(d)):[]}},[s]),a=r.useMemo(()=>`
    bg-dark-800/50 border rounded-xl p-6 transition-all
    ${t.isLocked?"border-gray-700/50 opacity-75":"border-js/10 hover:border-js/20"}
  `,[t.isLocked]),i=r.useMemo(()=>t.isLocked?{}:{scale:1.02},[t.isLocked]);return{safeData:t,cardStyles:a,hoverAnimation:i}},ft=r.memo(({title:s,isLocked:t,requiredLevel:a})=>e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-gray-400":"text-js"}`,children:s}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsxs("span",{children:["Poziom ",a]})]})]}));ft.displayName="PathHeader";const bt=r.memo(({description:s,outcomes:t,requirements:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Czego się nauczysz:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:t.map((i,n)=>e.jsx("li",{children:i},n))})]}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Wymagania:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:a.map((i,n)=>e.jsx("li",{children:i},n))})]})]}));bt.displayName="PathContent";const wt=r.memo(({progress:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${s.percentage}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[e.jsxs("span",{children:[s.completed,"/",s.total," ukończone"]}),e.jsxs("span",{children:[s.percentage,"%"]})]})]}));wt.displayName="ProgressBar";const Nt=r.memo(({id:s,isLocked:t,estimatedTime:a,progress:i})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(I,{className:"w-4 h-4"}),a," min"]}),!t&&e.jsx(fe,{to:`/dashboard/learn?tab=lessons&pathId=${s}`,className:"text-js hover:text-js/80 transition-colors",children:e.jsx(Ss,{className:"w-4 h-4"})})]}),e.jsx(wt,{progress:i})]}));Nt.displayName="PathFooter";const vt=r.memo(({path:s})=>{const{safeData:t,cardStyles:a,hoverAnimation:i}=jn(s);return e.jsx(m.div,{whileHover:i,className:a,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ft,{title:t.title,isLocked:t.isLocked,requiredLevel:t.requiredLevel}),e.jsx(bt,{description:t.description,outcomes:t.outcomes,requirements:t.requirements}),e.jsx(Nt,{id:t.id,isLocked:t.isLocked,estimatedTime:t.estimatedTime,progress:t.progress})]})})});vt.displayName="PathCard";const kt=r.memo(()=>{const{paths:s,userStats:t,isLoading:a,error:i,refetch:n,isEmpty:o}=gt();return a?e.jsx(U,{}):i?(console.error("Learning paths error:",i),e.jsx(Fe,{message:"Nie udało się pobrać ścieżek nauki. Spróbuj ponownie później.",onRetry:n})):o?e.jsx(hn,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(un,{stats:t||{completedPaths:0,totalPaths:0,totalPoints:0,pathsInProgress:0,recentActivity:[]}}),e.jsxs("section",{children:[e.jsx("header",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Ścieżki nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz ścieżkę nauki dopasowaną do Twoich potrzeb"})]})}),e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(c=>e.jsx(vt,{path:c},c.id))})]})]})});kt.displayName="LearningPaths";const yn=[{id:"paths",label:"Ścieżki nauki",icon:zs},{id:"lessons",label:"Lekcje",icon:Ze},{id:"resources",label:"Materiały",icon:be}],St=r.memo(({activeTab:s,onTabChange:t})=>e.jsx("div",{className:"flex gap-2 flex-wrap",children:yn.map(a=>e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(a.id),className:`relative flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all
            ${s===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label,s===a.id&&e.jsx(m.div,{layoutId:"activeTab",className:"absolute inset-0 bg-js/5 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},a.id))}));St.displayName="LearnTabs";const zt=()=>{const[s,t]=r.useState(()=>localStorage.getItem("token")||sessionStorage.getItem("token")),i=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}").id;return r.useEffect(()=>{const n=()=>{t(localStorage.getItem("token")||sessionStorage.getItem("token"))};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[]),{token:s,isAuthenticated:!!s,userId:i}},Lt=r.memo(()=>{const[s,t]=ks(),{isAuthenticated:a}=zt(),i=s.get("tab")||"paths",n=c=>{t(l=>(c==="paths"?(l.delete("tab"),l.delete("filter")):l.set("tab",c),l))},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return a?e.jsxs(m.div,{variants:o,initial:"hidden",animate:"visible",className:"min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(V,{children:[e.jsx("title",{children:"Nauka | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Nauka JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ur,{title:"Nauka JavaScript",subtitle:"Wybierz swoją ścieżkę nauki i rozpocznij przygodę z JS",className:"mb-8",titleClassName:"text-js drop-shadow-lg",subtitleClassName:"text-gray-400"}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6",children:[e.jsx(St,{activeTab:i,onTabChange:n}),e.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,type:"spring",stiffness:200,damping:20},className:"mt-8",children:[i==="paths"&&e.jsx(kt,{}),i==="lessons"&&e.jsx(ht,{}),i==="resources"&&e.jsx(yt,{})]},i)]})]})]}):e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(U,{})})});Lt.displayName="LearnSection";const ul=Object.freeze(Object.defineProperty({__proto__:null,LearnSection:Lt},Symbol.toStringTag,{value:"Module"})),gn=(s,t,a,i)=>L(void 0,null,function*(){const n=yield fetch(`${A}users/${s}/lessons/${t}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(a)});if(!n.ok)throw new Error("Błąd podczas aktualizacji postępu");return n.json()}),fn=s=>{const{userId:t,token:a}=zt(),i=de(),{refetch:n}=gt(),[o,c]=r.useState(0),{data:l,isLoading:d,error:u,refetch:x}=G({queryKey:["lesson",s],queryFn:()=>rn(s,a),enabled:!!s,retry:!1}),h=(u==null?void 0:u.message)==="lesson_not_found",p=ae({mutationFn:nn,onSuccess:()=>{i.invalidateQueries({queryKey:["userProgress"]}),i.invalidateQueries({queryKey:["lessons"]}),i.invalidateQueries({queryKey:["lesson",s]}),n()}}),j=ae({mutationFn:S=>gn(t,s,S,a),onSuccess:()=>{i.invalidateQueries({queryKey:["userProgress"]})}}),w=S=>{c(S)},b=S=>L(void 0,null,function*(){!t||!s||(yield j.mutateAsync({completedSections:[...(l==null?void 0:l.completedSections)||[],S],isCompleted:!1,points:0}))}),y=S=>L(void 0,null,function*(){!t||!s||(yield j.mutateAsync({completedSections:(l==null?void 0:l.completedSections)||[],isCompleted:!1,points:S}))}),g=()=>L(void 0,null,function*(){if(!s||!l)return console.error("Brak wymaganych danych:",{lessonSlug:s,lesson:l}),Promise.reject(new Error("Brak wymaganych danych"));try{const S=yield p.mutateAsync({lessonId:l.id,pathId:l.pathId,token:a});return yield x(),yield n(),P.success("Lekcja ukończona!",{duration:3e3,position:"bottom-right"}),S}catch(S){throw console.error("Błąd podczas kończenia lekcji:",S),P.error("Nie udało się ukończyć lekcji. Spróbuj ponownie.",{duration:4e3,position:"bottom-right"}),S}});return{lesson:l,isLoading:d,error:u,isNotFound:h,activeSection:o,progress:l==null?void 0:l.progress,refetch:x,handleSectionChange:w,handleSectionComplete:b,handleQuizComplete:y,handleLessonComplete:g,completeLessonMutation:p}},we=r.memo(({children:s})=>e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s})}));we.displayName="LessonLayout";const Tt=r.memo(()=>e.jsxs(fe,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors mb-6",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Wróć do listy lekcji"]}));Tt.displayName="BackToLessons";const Be={BEGINNER:"beginner",INTERMEDIATE:"intermediate",ADVANCED:"advanced"},bn={[Be.BEGINNER]:"bg-green-500/10 text-green-400",[Be.INTERMEDIATE]:"bg-yellow-500/10 text-yellow-400",[Be.ADVANCED]:"bg-red-500/10 text-red-400"},Pt=r.memo(({difficulty:s})=>e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${bn[s]}`,children:s==="beginner"?"Podstawowy":s==="intermediate"?"Średni":"Zaawansowany"}));Pt.displayName="DifficultyBadge";const Et=r.memo(({xp:s})=>e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2.5 py-1 rounded-lg text-sm",children:[e.jsx(D,{className:"w-4 h-4"}),s," XP"]}));Et.displayName="XpBadge";const wn=r.memo(({title:s,duration:t,difficulty:a,xp:i})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Pt,{difficulty:a}),e.jsx(Et,{xp:i})]}),e.jsx("h1",{className:"text-3xl font-bold text-js mb-4",children:s}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),t," min"]})})]})),Nn=s=>s?s.replace(/<!--[\s\S]*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"nodata:").replace(/eval\s*\(/gi,"").replace(/new\s+Function\s*\(/gi,""):"",vn=Ui,Ct=r.memo(({code:s,language:t,showLineNumbers:a=!0,className:i})=>{const n=Nn(s),o=()=>{navigator.clipboard.writeText(n)};return e.jsxs("div",{className:`relative group ${i}`,children:[e.jsx("button",{onClick:o,className:`absolute right-2 top-2 p-2 rounded-lg bg-dark/50 text-gray-400 \r
          opacity-0 group-hover:opacity-100 transition-opacity hover:text-js`,title:"Kopiuj kod",children:e.jsx(Gi,{className:"w-4 h-4"})}),e.jsx(vn,{language:t,style:Hi,showLineNumbers:a,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.5rem",background:"transparent"},codeTagProps:{style:{fontFamily:"JetBrains Mono, monospace"}},children:n})]})});Ct.displayName="CodeBlock";const kn=r.memo(({example:s,index:t})=>s.code?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-200",children:["Przykład ",t+1,":"]}),e.jsx(Ct,{code:s.code,language:s.language||"javascript",showLineNumbers:!0,className:"rounded-lg border border-js/10"}),s.explanation&&e.jsx("p",{className:"text-gray-400 text-sm",children:s.explanation})]}):e.jsx("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-js/10",children:e.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Ten przykład nie zawiera jeszcze kodu."})})),At=r.memo(({section:s,index:t})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-js",children:[t+1,". ",s.title]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:s.content}),e.jsx("div",{className:"space-y-8 mt-8",children:s.examples&&s.examples.length>0&&e.jsx("div",{className:"space-y-8 mt-8",children:s.examples.map((a,i)=>e.jsx(kn,{example:a,index:i},i))})})]}));At.displayName="LessonSection";const Me={perfect:{icon:ee,label:"Perfekcyjnie!",color:"text-yellow-500"},excellent:{icon:ws,label:"Świetnie!",color:"text-js"},good:{icon:D,label:"Mogło być lepiej!",color:"text-blue-500"}},Sn=s=>s===100?Me.perfect:s>=80?Me.excellent:Me.good,$t=r.memo(({correctAnswers:s,totalQuestions:t})=>{const a=s/t*100,i=Sn(a),n=i.icon;return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:`w-12 h-12 ${i.color}`}),e.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},className:"absolute -right-2 -bottom-2",children:e.jsx(D,{className:"w-6 h-6 text-yellow-500 animate-pulse"})})]})}),e.jsx("h3",{className:`text-xl font-bold ${i.color} mb-2`,children:i.label}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Poprawne odpowiedzi: ",s," z ",t]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m.div,{initial:{width:0},animate:{width:"100%"},className:"h-2 bg-dark rounded-full overflow-hidden mx-auto",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${a}%`},className:`h-full ${a===100?"bg-yellow-500":"bg-js"}`,transition:{delay:.5,duration:.8}})}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Math.round(a),"% poprawnych odpowiedzi"]})]})]})}),Rt=r.memo(({questions:s,onComplete:t})=>{const[a,i]=r.useState(0),[n,o]=r.useState(null),[c,l]=r.useState(0),[d,u]=r.useState(!1),[x,h]=r.useState(!1),p=100,j=a/s.length*100,w=y=>{o(y),h(!0),y===s[a].correctAnswer&&l(g=>g+1)},b=()=>{a<s.length-1?(i(y=>y+1),o(null),h(!1)):(t(c,s.length),u(!0))};return d?e.jsx($t,{correctAnswers:c,totalQuestions:s.length,earnedXP:Math.round(c/s.length*p)}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Pytanie ",a+1," z ",s.length]}),e.jsx("span",{className:"text-js",children:"•"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(j),"% ukończone"]})]}),x&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg text-gray-400 text-sm",children:s[a].explanation}),n!==null&&e.jsx(m.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,className:"w-full py-3 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:a<s.length-1?"Następne pytanie":"Zakończ quiz"}),e.jsx("div",{className:"text-lg font-medium text-gray-200",children:s[a].question}),e.jsx("div",{className:"space-y-3",children:s[a].options.map((y,g)=>e.jsx(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:n!==null,onClick:()=>w(g),className:`w-full p-4 rounded-lg border text-left transition-colors
              ${n===null?"border-js/10 hover:border-js/20":g===s[a].correctAnswer?"border-green-500 bg-green-500/10 text-green-400":n===g?"border-red-500 bg-red-500/10 text-red-400":"border-js/10 opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:y}),n!==null&&(g===s[a].correctAnswer?e.jsx(me,{className:"w-4 h-4 text-green-400"}):n===g?e.jsx(Ts,{className:"w-4 h-4 text-red-400"}):null)]})},g))})]})});Rt.displayName="LessonQuiz";$t.displayName="QuizSummary";const Ft=r.memo(({lesson:s,onQuizComplete:t})=>{if(!s)return null;if(!s.content)return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8 text-center",children:[e.jsx("h2",{className:"text-xl text-js mb-4",children:"Brak treści lekcji"}),e.jsx("p",{className:"text-gray-400",children:"Treść lekcji jest niedostępna. Spróbuj ponownie później."})]})});const{sections:a=[]}=s.content;return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsx(m.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(wn,{title:s.title,duration:String(s.duration),difficulty:s.difficulty,xp:s.points}),e.jsxs("div",{className:"space-y-8",children:[a.map((i,n)=>e.jsx(At,{section:i,index:n},n)),s.content.quiz&&e.jsx(Rt,{questions:s.content.quiz,onComplete:t})]})]})})})});Ft.displayName="LessonMainContent";const _t=r.memo(({isCompleted:s,onComplete:t})=>{const[a,i]=r.useState(0),[n,o]=r.useState(!1),c=pr(0),l=ce();r.useEffect(()=>{const x=document.querySelector(".lesson-content");if(!x)return;const h=()=>{const{scrollTop:p,scrollHeight:j,clientHeight:w}=x,b=p/(j-w)*100;i(Math.min(b,100)),c.set(Math.min(b,100))};return x.addEventListener("scroll",h),h(),()=>x.removeEventListener("scroll",h)},[c]);const d=a>=98&&!s,u=()=>L(void 0,null,function*(){if(!d||n){console.log("Nie można ukończyć lekcji:",{isLessonCompleted:d,isSubmitting:n});return}try{o(!0),yield t(),l("/dashboard/learn?tab=lessons")}catch(x){}finally{o(!1)}});return e.jsx("div",{className:"mb-5 fixed bottom-0 left-0 right-0 bg-dark-800/95 border-t border-js/10 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 mr-8",children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(m.div,{style:{width:`${a}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsx("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:e.jsxs("span",{children:[Math.round(a),"% przeczytane"]})})]}),e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:!d||n,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors
            ${d&&!n?"bg-js/10 text-js hover:bg-js/20":"bg-gray-800/50 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(me,{className:"w-4 h-4"}),n?"Zapisywanie...":d?"Zakończ lekcję":"Przeczytaj całą lekcję"]})]})})});_t.displayName="LessonProgress";const Dt=r.memo(({lesson:s,activeSection:t,progress:a,onSectionComplete:i,onQuizComplete:n,onLessonComplete:o})=>{if(!s)return null;const l=(s.sections||[]).length;return e.jsx(e.Fragment,{children:e.jsxs(we,{children:[e.jsx(Tt,{}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(Ft,{lesson:s,onSectionComplete:i,onQuizComplete:n})}),e.jsx(_t,{currentSection:t,totalSections:l,progress:a,isCompleted:s.isCompleted||!1,onComplete:o})]})})});Dt.displayName="LessonContent";const qe=r.memo(()=>e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4",children:"Lekcja nie została znaleziona"}),e.jsxs(fe,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})]})})}));qe.displayName="LessonNotFound";const Ot=()=>{var j;const{lessonSlug:s}=es(),{stats:t,isLoading:a}=ls();if(!s)return e.jsx(Ps,{to:"/dashboard/learn",replace:!0});const{lesson:i,isLoading:n,error:o,isNotFound:c,activeSection:l,progress:d,handleSectionComplete:u,handleQuizComplete:x,handleLessonComplete:h}=fn(s);if(n||a)return e.jsx(Ln,{});if(c)return e.jsx(qe,{});if(o)return e.jsx(Tn,{onRetry:()=>window.location.reload()});if(!i)return e.jsx(qe,{});const p=((j=t==null?void 0:t.data)==null?void 0:j.progress.level)||0;return i.requiredLevel&&p<i.requiredLevel?e.jsx(zn,{requiredLevel:i.requiredLevel,userLevel:p}):e.jsxs(e.Fragment,{children:[e.jsxs(V,{children:[e.jsxs("title",{children:[i.title," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:i.description})]}),e.jsx(Dt,{lesson:i,activeSection:l,progress:typeof d=="number"?d:0,onSectionComplete:u,onQuizComplete:x,onLessonComplete:h})]})},zn=({requiredLevel:s,userLevel:t})=>e.jsx(we,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:e.jsxs("div",{className:"bg-dark-800/50 p-8 rounded-xl border border-js/10 max-w-md",children:[e.jsx("div",{className:"mb-4 bg-js/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto",children:e.jsx(Z,{className:"text-js text-2xl"})}),e.jsx("h2",{className:"text-xl font-bold text-js mb-2",children:"Lekcja zablokowana"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Aby odblokować tę lekcję, musisz osiągnąć poziom ",s,"."]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Twój obecny poziom: ",e.jsx("span",{className:"text-js font-medium",children:t})]}),e.jsx("button",{onClick:()=>window.location.href="/dashboard/learn",className:"mt-4 px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors w-full",children:"Wróć do listy lekcji"})]})})}),Ln=()=>e.jsx(we,{children:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(U,{})})}),Tn=({onRetry:s})=>e.jsx(we,{children:e.jsx(Fe,{message:"Nie udało się pobrać lekcji. Spróbuj ponownie później.",onRetry:s})});Ot.displayName="LessonPage";const pl=Object.freeze(Object.defineProperty({__proto__:null,LessonPage:Ot},Symbol.toStringTag,{value:"Module"})),Pn=[{id:"profile",label:"Profil",icon:Es},{id:"security",label:"Bezpieczeństwo",icon:Z},{id:"preferences",label:"Preferencje",icon:gs},{id:"delete",label:"Usuń konto",icon:ss}],ke={container:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 h-fit shadow-lg",nav:"flex flex-col gap-2",button:s=>`
    flex items-center gap-3 p-3 rounded-lg text-left
    transition-colors duration-200
    ${s?"bg-js/20 text-js":"text-gray-400 hover:text-js hover:bg-js/10"}
  `,icon:"w-5 h-5"},It=r.memo(({activeView:s,onViewChange:t})=>{const a=r.useCallback(i=>{t(i)},[t]);return e.jsx("div",{className:ke.container,children:e.jsx("nav",{className:ke.nav,children:Pn.map(i=>e.jsxs(m.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:()=>a(i.id),className:ke.button(s===i.id),children:[e.jsx(i.icon,{className:ke.icon}),i.label]},i.id))})})});It.displayName="SettingsSidebar";const Bt=s=>({Authorization:`Bearer ${s}`,"Content-Type":"application/json"}),En=s=>L(void 0,null,function*(){var o;const t=yield fetch(`${A}settings/profile`,{headers:Bt(s)});if(!t.ok)throw new Error("Błąd podczas pobierania profilu");const a=yield t.json(),i=a.data||a,n=i.user||i;return{username:n.username||"",email:n.email||"",profile:{bio:n.bio||((o=i.profile)==null?void 0:o.bio)||""}}}),Cn=(s,t)=>L(void 0,null,function*(){var n;const a={username:s.username,email:s.email,bio:((n=s.profile)==null?void 0:n.bio)||""},i=yield fetch(`${A}settings/profile`,{method:"PUT",headers:Bt(t),body:JSON.stringify(a)});if(!i.ok){const o=yield i.json().catch(()=>({}));throw new Error(o.message||"Błąd podczas aktualizacji profilu")}return i.json()}),Te=["profile"],Mt=()=>{var c;const s=de(),{token:t}=F(),{data:a,isLoading:i,error:n}=G({queryKey:Te,queryFn:()=>En(t||""),enabled:!!t,staleTime:1e3*60*5}),o=ae({mutationFn:l=>Cn(l,t||""),onSuccess:l=>{s.setQueryData(Te,l),s.invalidateQueries({queryKey:Te})}});return{profile:a,username:(a==null?void 0:a.username)||"",email:(a==null?void 0:a.email)||"",bio:((c=a==null?void 0:a.profile)==null?void 0:c.bio)||"",isLoading:i,error:n,updateProfile:o}},An=_.object({username:_.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika może mieć maksymalnie 20 znaków"),email:_.string().email("Nieprawidłowy adres email"),profile:_.object({bio:_.string().max(160,"Bio może mieć maksymalnie 160 znaków").optional(),avatar:_.string().optional()})}),$n=({onSubmit:s,defaultValues:t})=>{var n,o;const a=$e({resolver:Re(An),defaultValues:{username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",profile:{bio:((n=t==null?void 0:t.profile)==null?void 0:n.bio)||"",avatar:((o=t==null?void 0:t.profile)==null?void 0:o.avatar)||""}}}),i=c=>L(void 0,null,function*(){try{yield s(c)}catch(l){console.error("Failed to update profile:",l)}});return{form:a,onSubmit:a.handleSubmit(i)}},Rn=s=>{var c;const{updateProfile:t}=Mt(),a=r.useCallback(l=>L(void 0,null,function*(){var d;try{yield t.mutateAsync({username:l.username,email:l.email,profile:{bio:((d=l.profile)==null?void 0:d.bio)||""}})}catch(u){throw console.error("Błąd w useProfileFormLogic:",u),u}}),[t]),i={username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",profile:{bio:((c=s==null?void 0:s.profile)==null?void 0:c.bio)||""}},{form:n,onSubmit:o}=$n({onSubmit:a,defaultValues:i});return{form:n,onSubmit:o}},oe={form:`w-full max-w-2xl sm:ml-0 sm:mr-auto 
    space-y-8 px-4 sm:px-0`,usernameContainer:"flex flex-col gap-4",container:`bg-dark/30 backdrop-blur-sm rounded-xl 
    p-4 sm:p-6 md:p-8 border border-js/10 
    space-y-6 md:space-y-8`,header:"flex flex-col md:flex-row gap-6 md:gap-8",infoSection:"w-full md:w-2/3 space-y-6",bioSection:"space-y-4",bioLabel:`block text-gray-400 
    text-sm sm:text-base 
    font-medium`,bioTextarea:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-sm sm:text-base 
    min-h-[120px] max-h-[240px] 
    resize-y
    transition-colors duration-200`,error:"text-red-500 text-sm mt-1",successMessage:"text-green-500 mt-2 text-sm font-medium"},Gt=r.memo(({register:s,errors:t})=>{var a,i;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:oe.usernameContainer,children:e.jsx(le,k({type:"text",label:"Nazwa użytkownika",placeholder:"Wprowadź nazwę użytkownika",icon:e.jsx(Es,{}),error:(a=t.username)==null?void 0:a.message},s("username")))}),e.jsx(le,k({type:"email",label:"Email",placeholder:"Wprowadź adres email",icon:e.jsx(Wi,{}),error:(i=t.email)==null?void 0:i.message},s("email")))]})});Gt.displayName="UserInfoFields";const Se={container:"space-y-2",label:"block text-gray-400 text-sm",textarea:`w-full h-32 px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    resize-none`,error:"text-red-500 text-sm"},Ht=r.memo(({register:s,errors:t,defaultValue:a})=>{var i;return e.jsxs("div",{className:Se.container,children:[e.jsx("label",{className:Se.label,children:"Bio"}),e.jsx("textarea",z(k({},s("profile.bio")),{className:Se.textarea,placeholder:a||"Napisz coś o sobie..."})),((i=t.profile)==null?void 0:i.bio)&&e.jsx("span",{className:Se.error,children:t.profile.bio.message})]})});Ht.displayName="BioField";const Ge={container:`flex flex-col-reverse sm:flex-row justify-end gap-3 sm:gap-4
    w-full sm:w-auto mt-6 sm:mt-8`,cancelButton:`w-full sm:w-auto order-1 sm:order-none
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10 hover:border-js/30 hover:bg-dark/60
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
  `,submitButton:`w-full sm:w-auto
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-js text-dark
    hover:bg-js/90
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200
    text-sm sm:text-base font-medium
    flex items-center justify-center
  `},_e=r.memo(({onCancel:s,isSubmitting:t,submitText:a="Zapisz zmiany",loadingText:i="Zapisywanie",disabled:n=!1})=>e.jsxs("div",{className:Ge.container,children:[e.jsx(ye,{type:"button",onClick:s,className:Ge.cancelButton,disabled:t,children:"Anuluj zmiany"}),e.jsx(ye,{type:"submit",disabled:t||n,className:Ge.submitButton,children:t?e.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-[100px]",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:i})]}):e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:a})})]}));_e.displayName="FormButtons";const Ut=r.memo(({handleCancel:s,register:t,errors:a,defaultBio:i,isSubmitting:n,isPending:o,onSubmit:c,isSaved:l=!1,isDirty:d=!1})=>e.jsxs(m.form,{onSubmit:c,className:oe.form,initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:oe.container,children:e.jsxs("div",{className:oe.header,children:[e.jsxs("div",{className:oe.infoSection,children:[e.jsx(Gt,{register:t,errors:a}),e.jsx(Ht,{register:t,errors:a,defaultValue:i})]}),l&&!d&&e.jsx("div",{className:oe.successMessage,children:"✓ Zapisano zmiany"})]})}),e.jsx(_e,{onCancel:s,isSubmitting:n||o,submitText:"Zapisz profil",loadingText:"Zapisywanie",disabled:!d||n})]}));Ut.displayName="ProfileFormContent";const Wt=r.memo(()=>{const{profile:s,username:t,email:a,bio:i,isLoading:n,updateProfile:o}=Mt(),{form:c,onSubmit:l}=Rn(s||null),d=de(),[u,x]=r.useState(!1),[h,p]=r.useState(!1),{register:j,formState:{errors:w,isDirty:b},reset:y,setValue:g,watch:S}=c,T=S();r.useEffect(()=>{b&&p(!1)},[T,b]),r.useEffect(()=>{s&&(g("username",t),g("email",a),g("profile.bio",i))},[s,g,t,a,i]);const v=r.useCallback(()=>{try{s&&(y(s),P.success("Zmiany zostały anulowane"),p(!1))}catch(f){P.error("Nie udało się anulować zmian")}},[s,y]),N=f=>L(void 0,null,function*(){if(!b){P.success("Nie wprowadzono żadnych zmian");return}try{x(!0),yield l(f),yield d.invalidateQueries({queryKey:Te}),p(!0),P.success("Profil został zaktualizowany pomyślnie")}catch(E){E instanceof Error?P.error(E.message||"Wystąpił błąd podczas aktualizacji profilu"):P.error("Wystąpił nieznany błąd podczas aktualizacji profilu")}finally{x(!1)}});return n?e.jsx(U,{}):e.jsxs(e.Fragment,{children:[h&&!b&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-2 rounded-lg mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Twój profil został zaktualizowany pomyślnie"]}),e.jsx(Ut,{handleCancel:v,register:j,errors:w,defaultBio:i,isSubmitting:u||o.isPending,isPending:o.isPending,onSubmit:N,isSaved:h,isDirty:b})]})});Wt.displayName="ProfileForm";const Jt=r.memo(({form:s,errors:t})=>{var i,n,o;const{register:a}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(le,k({type:"password",label:"Aktualne hasło",placeholder:"Wprowadź aktualne hasło",icon:e.jsx(Z,{}),error:(i=t.currentPassword)==null?void 0:i.message},a("currentPassword"))),e.jsx(le,k({type:"password",label:"Nowe hasło",placeholder:"Wprowadź nowe hasło",icon:e.jsx(Z,{}),error:(n=t.newPassword)==null?void 0:n.message},a("newPassword"))),e.jsx(le,k({type:"password",label:"Powtórz nowe hasło",placeholder:"Powtórz nowe hasło",icon:e.jsx(Z,{}),error:(o=t.confirmPassword)==null?void 0:o.message},a("confirmPassword")))]})});Jt.displayName="PasswordFields";const Fn=_.object({currentPassword:_.string().min(1,"Aktualne hasło jest wymagane").min(8,"Hasło musi mieć minimum 8 znaków"),newPassword:_.string().min(1,"Nowe hasło jest wymagane").min(8,"Nowe hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać wielką literę").regex(/[0-9]/,"Hasło musi zawierać cyfrę"),confirmPassword:_.string().min(1,"Potwierdzenie hasła jest wymagane")}).refine(s=>s.newPassword===s.confirmPassword,{message:"Hasła muszą być takie same",path:["confirmPassword"]});class qt extends Error{constructor(t,a){super(a),this.code=t,this.name="SecurityError"}}const _n=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${A}settings/security/password`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const i=yield a.json(),n=i.message||"Wystąpił błąd podczas zmiany hasła",o=i.code||"UNKNOWN_ERROR";throw new qt(o,n)}}),Dn=({onSuccess:s,onError:t}={})=>{const{token:a}=F(),i=$e({resolver:Re(Fn),mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),n=ae({mutationFn:o=>_n({currentPassword:o.currentPassword,newPassword:o.newPassword},a||""),onSuccess:()=>{i.reset(),s==null||s()},onError:t});return{form:i,onSubmit:i.handleSubmit(o=>n.mutateAsync(o)),isUpdating:n.isPending}},On=()=>{const s=r.useCallback(()=>{P.success("Hasło zostało zmienione")},[]),t=r.useCallback(n=>{if(n instanceof qt){P.error(n.message);return}P.error("Wystąpił błąd podczas zmiany hasła")},[]),a=r.useCallback(()=>{P.success("Zmiany zostały anulowane")},[]),i=r.useCallback(()=>{P.error("Nie udało się anulować zmian")},[]);return{handleSuccess:s,handleError:t,handleCancel:a,handleCancelError:i}},In={initial:{opacity:0},animate:{opacity:1}},Qt=r.memo(()=>{const{handleSuccess:s,handleError:t,handleCancel:a,handleCancelError:i}=On(),{form:n,onSubmit:o,isUpdating:c}=Dn({onSuccess:()=>{s(),n.reset()},onError:t}),{formState:{errors:l,isSubmitting:d},reset:u}=n,x=r.useCallback(()=>{try{u(),a()}catch(h){i()}},[u,a,i]);return e.jsxs(m.form,z(k({onSubmit:o,className:"w-full max-w-md sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0"},In),{children:[e.jsx(Jt,{form:n,errors:l}),e.jsx(_e,{onCancel:x,isSubmitting:d||c,submitText:"Zmień hasło",loadingText:"Zmienianie hasła"})]}))});Qt.displayName="SecurityForm";const Bn=_.object({emailNotifications:_.boolean(),pushNotifications:_.boolean(),language:_.literal("pl")}),Mn=({onSubmit:s,defaultValues:t})=>{const a=$e({resolver:Re(Bn),defaultValues:t||{emailNotifications:!1,pushNotifications:!1,language:"pl"},mode:"onChange",reValidateMode:"onChange",resetOptions:{keepDirtyValues:!0,keepValues:!0}}),i=a.handleSubmit(n=>L(void 0,null,function*(){try{yield s(n)}catch(o){console.error("Failed to update preferences:",o)}}));return{form:a,onSubmit:i}};class M extends Error{constructor(t,a){super(a),this.code=t,this.name="PreferencesError"}}const Gn=s=>L(void 0,null,function*(){var t,a;try{const i=yield fetch(`${A}settings/preferences`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!i.ok){if(i.status===401)throw new M("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const c=yield i.json().catch(()=>null);throw new M((c==null?void 0:c.code)||"UNKNOWN_ERROR",(c==null?void 0:c.message)||"Błąd podczas pobierania preferencji")}const n=yield i.json(),o=n.data||n;return{emailNotifications:(t=o.emailNotifications)!=null?t:!1,pushNotifications:(a=o.pushNotifications)!=null?a:!1,language:o.language||"pl"}}catch(i){throw i instanceof M?i:(console.error("Błąd w fetchPreferences:",i),new M("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas pobierania preferencji"))}}),Hn=(s,t)=>L(void 0,null,function*(){var a,i;try{const n=yield fetch(`${A}settings/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){if(n.status===401)throw new M("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const l=yield n.json().catch(()=>({code:"UNKNOWN_ERROR"}));throw new M((l==null?void 0:l.code)||"UNKNOWN_ERROR",(l==null?void 0:l.message)||"Wystąpił błąd podczas aktualizacji preferencji")}const o=yield n.json(),c=o.data||o;return{emailNotifications:(a=c.emailNotifications)!=null?a:!1,pushNotifications:(i=c.pushNotifications)!=null?i:!1,language:c.language||"pl"}}catch(n){throw n instanceof M?n:(console.error("Błąd w updatePreferences:",n),new M("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas aktualizacji preferencji"))}}),He=["preferences"],Un=()=>{const{token:s,logout:t}=F(),a=de(),{data:i,isLoading:n,error:o,refetch:c}=G({queryKey:He,queryFn:()=>Gn(s||""),enabled:!!s,staleTime:1e3*60*5,retry:(d,u)=>u instanceof M&&u.code==="AUTH_ERROR"?(P.error("Sesja wygasła. Zaloguj się ponownie."),t==null||t(),!1):d<3});o&&!(o instanceof M&&o.code==="AUTH_ERROR")&&P.error(o instanceof Error?o.message:"Wystąpił błąd podczas ładowania preferencji");const l=ae({mutationFn:d=>Hn(d,s||""),onSuccess:d=>{a.setQueryData(He,d),a.invalidateQueries({queryKey:He}),P.success("Preferencje zostały zaktualizowane")},onError:d=>{if(d instanceof M&&d.code==="AUTH_ERROR"){P.error("Sesja wygasła. Zaloguj się ponownie."),t==null||t();return}P.error(d instanceof Error?d.message:"Wystąpił błąd podczas aktualizacji preferencji")}});return{preferences:i,isLoading:n,error:o,updatePreferences:l,refetch:c}},Wn=()=>{const{preferences:s,isLoading:t,updatePreferences:a,refetch:i}=Un(),[n,o]=r.useState(!1),[c,l]=r.useState(!1),{form:d,onSubmit:u}=Mn({onSubmit:g=>L(void 0,null,function*(){try{o(!0),yield a.mutateAsync({emailNotifications:g.emailNotifications,pushNotifications:g.pushNotifications,language:"pl"}),l(!0),yield i()}catch(S){throw console.error("Błąd w usePreferencesFormLogic:",S),S instanceof M?S:S instanceof Error?new Error(S.message||"Wystąpił błąd podczas aktualizacji preferencji"):new Error("Wystąpił nieznany błąd podczas aktualizacji preferencji")}finally{o(!1)}})}),{register:x,formState:{isDirty:h},setValue:p,watch:j,reset:w}=d,b=j();r.useEffect(()=>{h&&l(!1)},[b,h]),r.useEffect(()=>{s&&(p("emailNotifications",s.emailNotifications),p("pushNotifications",s.pushNotifications),p("language","pl"))},[s,p]);const y=()=>{try{s&&(w({emailNotifications:s.emailNotifications,pushNotifications:s.pushNotifications,language:"pl"}),l(!1),P.success("Zmiany zostały anulowane"))}catch(g){console.error("Błąd podczas anulowania zmian:",g),P.error("Nie udało się anulować zmian")}};return{isLoading:t,register:x,formValues:b,isSubmitting:n||a.isPending,isPending:a.isPending,isDirty:h,isSaved:c,updatePreferences:a,handleCancel:y,onSubmit:u,setValue:p}},q={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",optionsContainer:"space-y-4 ml-4 sm:ml-8",optionLabel:`flex items-start sm:items-center gap-3 hover:cursor-pointer group
    transition-colors duration-200`,checkbox:`w-5 h-5 rounded border-gray-600 bg-gray-700 text-js 
    focus:ring-js/50 mt-1 sm:mt-0`,optionText:"group-hover:text-js transition-colors duration-200",optionTitle:"block text-gray-200 text-base sm:text-lg",optionDescription:"block text-sm text-gray-400 mt-1"},Kt=r.memo(({register:s,values:t,onChange:a})=>e.jsxs("div",{className:q.section,children:[e.jsxs("h3",{className:q.title,children:[e.jsx(Ve,{className:q.icon}),"Powiadomienia"]}),e.jsx("div",{className:q.optionsContainer,children:e.jsxs("label",{className:q.optionLabel,children:[e.jsx("input",z(k({type:"checkbox"},s("emailNotifications")),{checked:t.emailNotifications,onChange:i=>a("emailNotifications",i.target.checked),className:q.checkbox})),e.jsxs("div",{className:q.optionText,children:[e.jsx("span",{className:q.optionTitle,children:"Powiadomienia email"}),e.jsx("span",{className:q.optionDescription,children:"Otrzymuj powiadomienia na email"})]})]})})]}));Kt.displayName="NotificationsSection";const he={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",container:"ml-4 sm:ml-8",select:`w-full max-w-xs px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 text-base sm:text-lg
    focus:ring-2 focus:ring-js/50 focus:border-transparent 
    transition-colors`},Zt=r.memo(({register:s})=>e.jsxs("div",{className:he.section,children:[e.jsxs("h3",{className:he.title,children:[e.jsx(Ji,{className:he.icon}),"Język"]}),e.jsx("div",{className:he.container,children:e.jsx("select",z(k({},s("language")),{className:he.select,children:e.jsx("option",{value:"pl",children:"Polski"})}))})]}));Zt.displayName="LanguageSection";const Vt=r.memo(({register:s,formValues:t,setValue:a,onSubmit:i,onCancel:n,isSubmitting:o,isPending:c})=>e.jsxs(m.form,{onSubmit:i,className:"w-full max-w-2xl sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 md:p-8 border border-js/10 space-y-6",children:[e.jsx(Kt,{register:s,values:t,onChange:(l,d)=>a(l,d)}),e.jsx("div",{className:"w-full h-px bg-js/10"}),e.jsx(Zt,{register:s})]}),e.jsx(_e,{onCancel:n,isSubmitting:o||c,submitText:"Zapisz preferencje",loadingText:"Zapisywanie",disabled:o})]}));Vt.displayName="PreferencesFormContent";const Xt=r.memo(()=>{const{isLoading:s,register:t,formValues:a,isSubmitting:i,isPending:n,isDirty:o,isSaved:c,handleCancel:l,onSubmit:d,setValue:u}=Wn(),x=h=>L(void 0,null,function*(){h.preventDefault();try{yield d(h)}catch(p){console.error("Błąd podczas zapisywania preferencji:",p),p instanceof Error?P.error(p.message):P.error("Wystąpił nieznany błąd podczas zapisywania preferencji")}});return s?e.jsx(U,{}):e.jsx(Vt,{register:t,formValues:a,setValue:u,onSubmit:x,onCancel:l,isSubmitting:i,isPending:n,isDirty:o,isSaved:c})});Xt.displayName="PreferencesForm";const Jn=()=>{const[s,t]=r.useState(!1),a=r.useCallback(()=>{t(!0)},[]),i=r.useCallback(()=>{t(!1)},[]);return{showConfirmation:s,handleShowConfirmation:a,handleHideConfirmation:i}};class Pe extends Error{constructor(t,a){super(a),this.code=t,this.name="AccountError"}}const qn=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${A}settings/account`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const i=yield a.json();throw i.code==="INVALID_PASSWORD"?new Pe("INVALID_PASSWORD","Podane hasło jest nieprawidłowe"):i.code==="INVALID_CONFIRMATION"?new Pe("INVALID_CONFIRMATION","Nieprawidłowe potwierdzenie"):new Pe("UNKNOWN_ERROR","Wystąpił błąd podczas usuwania konta")}}),Qn=_.object({password:_.string().min(1,"Hasło jest wymagane"),confirmation:_.string().refine(s=>s==="USUŃ KONTO",{message:"Wpisz dokładnie 'USUŃ KONTO' aby potwierdzić"})}),Kn=({onSuccess:s,onError:t}={})=>{const a=$e({resolver:Re(Qn)}),{token:i}=F(),n=ae({mutationFn:c=>qn(c,i||""),onSuccess:()=>{a.reset(),s==null||s(),window.location.href="/logowanie"},onError:t}),o=a.handleSubmit(c=>L(void 0,null,function*(){yield n.mutateAsync(c)}));return{form:a,onSubmit:o,isDeleting:n.isPending}},Zn=s=>{const t=r.useCallback(()=>{P.success("Konto zostało usunięte")},[]),a=r.useCallback(l=>{if(l instanceof Pe)switch(l.code){case"INVALID_PASSWORD":P.error("Podane hasło jest nieprawidłowe");return;case"INVALID_CONFIRMATION":P.error("Nieprawidłowe potwierdzenie");return}P.error("Nie udało się usunąć konta")},[]),i=r.useCallback(()=>{try{s(),P.success("Operacja została anulowana")}catch(l){P.error("Nie udało się anulować operacji")}},[s]),{form:n,onSubmit:o,isDeleting:c}=Kn({onSuccess:t,onError:a});return{form:n,onSubmit:o,isDeleting:c,handleCancel:i}},Vn=["Wszystkie twoje dane zostaną usunięte","Stracisz dostęp do wszystkich kursów","Twoje postępy w nauce zostaną utracone","Nie będzie możliwości przywrócenia konta"],ze={container:`
    bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
    backdrop-blur-sm
  `,content:"flex flex-col sm:flex-row items-start gap-4",icon:"text-red-500 text-xl sm:text-2xl mt-1 flex-shrink-0",title:"text-red-400 font-medium text-lg sm:text-xl mb-2",list:`
    text-gray-400 space-y-2 list-disc list-inside
    text-sm sm:text-base leading-relaxed
  `},Yt=r.memo(()=>e.jsx("div",{className:`
      bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
      backdrop-blur-sm
    `,role:"alert","aria-label":"Ostrzeżenie o usuwaniu konta",children:e.jsxs("div",{className:ze.content,children:[e.jsx(X,{className:ze.icon,"data-testid":"warning-icon"}),e.jsxs("div",{children:[e.jsx("h3",{className:ze.title,children:"Usuwanie konta jest nieodwracalne"}),e.jsx("ul",{className:ze.list,children:Vn.map((s,t)=>e.jsx("li",{children:s},t))})]})]})}));Yt.displayName="WarningBox";const ea=r.memo(({onConfirm:s})=>e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md sm:ml-0 sm:mr-auto px-4 sm:px-0",children:[e.jsx(Yt,{}),e.jsx(ye,{type:"button",onClick:s,className:`w-full px-6 py-3 rounded-lg bg-red-500/20 text-red-400 \r
        hover:bg-red-500/30 transition-colors duration-200 shadow-none\r
        text-base sm:text-lg font-medium`,children:"Chcę usunąć konto"})]}));ea.displayName="InitialWarning";const Q={form:"space-y-6",confirmationField:"space-y-2",label:"block text-gray-400 text-sm sm:text-base",hint:"text-sm text-gray-500",input:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-base sm:text-lg
  `,error:"text-red-500 text-sm",buttons:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 mt-8",submitButton:`w-full sm:w-auto order-2 sm:order-1
    px-4 sm:px-6 py-3 rounded-lg
    bg-red-500/20 text-red-400 
    hover:bg-red-500/30
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `,cancelButton:`w-full sm:w-auto order-1 sm:order-2
    px-4 sm:px-6 py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10
    hover:text-js hover:border-js/30
    hover:bg-dark/60
    transition-colors duration-200 shadow-none
    text-sm sm:text-base
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `},sa=r.memo(({register:s,errors:t,isSubmitting:a,onCancel:i,onSubmit:n})=>{var o;return e.jsxs(m.form,{initial:{opacity:0},animate:{opacity:1},className:Q.form,onSubmit:n,children:[e.jsx(le,k({id:"password",type:"password",label:"Hasło",placeholder:"Wprowadź hasło aby potwierdzić",icon:e.jsx(Z,{}),error:(o=t.password)==null?void 0:o.message},s("password"))),e.jsxs("div",{className:Q.confirmationField,children:[e.jsx("label",{htmlFor:"confirmation",className:Q.label,children:"Potwierdzenie"}),e.jsx("p",{className:Q.hint,children:'Wpisz "USUŃ KONTO" aby potwierdzić'}),e.jsx("input",z(k({id:"confirmation",type:"text"},s("confirmation")),{className:Q.input})),t.confirmation&&e.jsx("p",{className:Q.error,children:t.confirmation.message})]}),e.jsxs("div",{className:Q.buttons,children:[e.jsx(ye,{type:"submit",disabled:a,className:Q.submitButton,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Usuwanie"})]}):"Definitywnie usuń konto"}),e.jsx(ye,{type:"button",onClick:i,disabled:a,className:Q.cancelButton,children:"Anuluj"})]})]})});sa.displayName="ConfirmationForm";const ta=r.memo(()=>{const{showConfirmation:s,handleShowConfirmation:t,handleHideConfirmation:a}=Jn(),{form:i,onSubmit:n,isDeleting:o,handleCancel:c}=Zn(a);return s?e.jsx(sa,{register:i.register,errors:i.formState.errors,isSubmitting:o,onCancel:c,onSubmit:n}):e.jsx(ea,{onConfirm:t})});ta.displayName="DeleteAccountForm";const aa=r.memo(({activeView:s})=>e.jsx(B,{mode:"wait",children:e.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-dark/30 backdrop-blur-sm rounded-xl p-6 border border-js/10 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold font-space text-js mb-6",children:[s==="profile"&&"Edytuj Profil",s==="security"&&"Bezpieczeństwo",s==="preferences"&&"Preferencje",s==="delete"&&"Usuń Konto"]}),s==="profile"&&e.jsx(Wt,{}),s==="security"&&e.jsx(Qt,{}),s==="preferences"&&e.jsx(Xt,{}),s==="delete"&&e.jsx(ta,{})]},s)}));aa.displayName="SettingsContent";const ia=r.memo(()=>{const[s,t]=r.useState("profile");return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(V,{children:[e.jsx("title",{children:"Ustawienia | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(m.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Ustawienia"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(It,{activeView:s,onViewChange:t}),e.jsxs(V,{children:[e.jsxs("title",{children:[s.charAt(0).toUpperCase()+s.slice(1)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(aa,{activeView:s})})]})]})});ia.displayName="SettingsSection";const hl=Object.freeze(Object.defineProperty({__proto__:null,SettingsSection:ia},Symbol.toStringTag,{value:"Module"})),ra=r.memo(()=>e.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m.div,{whileHover:{scale:1.1,rotate:15},className:"p-3 rounded-xl bg-gradient-to-br from-js/20 to-js/20",children:e.jsx(Ke,{className:"w-8 h-8 text-js"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-transparent bg-clip-text bg-gradient-to-r from-js to-js",children:"Gry JavaScript"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Ucz się JavaScriptu poprzez zabawę i wyzwania"})]})]})}));ra.displayName="GamesHeader";const na=r.memo(()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.1},className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gray-800/50 animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-800/50 rounded animate-pulse w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse w-4/5"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"})]}),e.jsx("div",{className:"h-8 w-24 bg-gray-800/50 rounded animate-pulse"})]})]})]},s))}));na.displayName="GamesListSkeleton";const oa=r.memo(({query:s})=>{const a=s?{title:"Brak wyników wyszukiwania",description:`Nie znaleziono gier dla zapytania "${s}"`,icon:Xe}:{title:"Brak gier w tej kategorii",description:"Spróbuj wybrać inną kategorię lub wróć później",icon:Ye};return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16",children:[e.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",bounce:.4},className:"w-20 h-20 mb-6 rounded-full bg-js/10 flex items-center justify-center",children:e.jsx(a.icon,{className:"w-10 h-10 text-js"})}),e.jsx(m.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold text-js mb-2 text-center",children:a.title}),e.jsx(m.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400 text-center max-w-md",children:a.description})]})});oa.displayName="NoGamesFound";const la=r.memo(({game:s})=>{const t=ce(),a=()=>{s.isLevelAvailable&&t(`/dashboard/play/${s.slug}`)},i=!s.isLevelAvailable;return e.jsxs(m.div,{whileHover:{scale:i?1:1.02},className:`group bg-dark-800/50 border rounded-xl overflow-hidden transition-all ${i?"border-gray-700/50 opacity-50 cursor-not-allowed":"border-js/10 hover:border-js/20"}`,children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-js/5 to-js/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-js/10 px-4 py-2 rounded-lg border border-js/20",children:e.jsx("span",{className:"font-mono text-js/80 font-medium",children:s.slug})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/90 to-transparent"}),i?e.jsx("div",{className:"absolute inset-0 m-auto w-12 h-12 bg-gray-700 text-gray-400 rounded-full flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5"})}):e.jsx(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:a,className:"absolute inset-0 m-auto w-12 h-12 bg-js text-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Cs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-js line-clamp-1",children:s.title}),e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2 py-0.5 rounded-lg text-sm",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),s.rewardPoints]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:i?`Dostępne od poziomu ${s.requiredLevel}`:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("div",{className:"flex items-center gap-4 text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),s.rating.average.toFixed(1)]})}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.difficulty==="easy"?"bg-green-500/10 text-green-400":s.difficulty==="medium"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:s.difficulty==="easy"?"Łatwy":s.difficulty==="medium"?"Średni":"Trudny"})]})]})]})});la.displayName="GameCard";const Xn=s=>L(void 0,null,function*(){const t=yield fetch(`${A}games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Nie udało się pobrać gier");return t.json()}),ie=()=>{const{token:s}=F();return G({queryKey:["games"],queryFn:()=>Xn(s||""),select:t=>({games:t.data,pagination:t.data}),staleTime:5*60*1e3})},ca=r.memo(({sortBy:s,searchQuery:t,selectedDifficulty:a})=>{const{data:i,isLoading:n,isError:o}=ie();if(n)return e.jsx(na,{});if(o)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-400",children:"Wystąpił błąd podczas ładowania gier. Spróbuj ponownie później."})});if(!(i!=null&&i.games))return null;const c=i.games.filter(l=>(a==="all"||l.difficulty===a)&&(l.title.toLowerCase().includes(t.toLowerCase())||l.description.toLowerCase().includes(t.toLowerCase()))).sort((l,d)=>{switch(s){case"newest":return new Date(d.createdAt).getTime()-new Date(l.createdAt).getTime();case"popular":return d.completions.count-l.completions.count;case"difficulty":return d.difficulty.localeCompare(l.difficulty);case"xp":return d.rewardPoints-l.rewardPoints;default:return 0}});return c.length?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4 sm:gap-6",children:c.map(l=>{const d={_id:l._id,id:l._id,slug:l.slug,isLevelAvailable:l.isLevelAvailable,title:l.title,description:l.description,difficulty:l.difficulty,category:"game",isCompleted:!1,rating:{average:0,count:0},completions:l.completions,completedCount:l.completions.count,thumbnailUrl:"",rewardPoints:l.rewardPoints,xpPoints:l.rewardPoints,requiredLevel:l.requiredLevel};return e.jsx(la,{game:d},d._id)})}):e.jsx(oa,{query:t})});ca.displayName="GamesList";const Yn=[{id:"newest",label:"Najnowsze",icon:I},{id:"popular",label:"Popularne",icon:vs},{id:"difficulty",label:"Trudność",icon:D},{id:"xp",label:"Punkty XP",icon:ee}],da=r.memo(({activeSortOption:s,onSortChange:t})=>e.jsxs("div",{className:"flex items-center gap-4 lg:ml-auto",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Sortuj:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Yn.map(a=>{const i=a.icon;return e.jsxs(m.button,{onClick:()=>t(a.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium
                transition-all duration-200
                ${s===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}
              `,children:[e.jsx(i,{className:"w-4 h-4"}),a.label]},a.id)})})]}));da.displayName="GamesSorting";const ma=r.memo(({value:s,onChange:t})=>{const a=r.useCallback(i=>{t(i.target.value)},[t]);return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:a,placeholder:"Szukaj gry...",className:`\r
            w-full pl-10 pr-4 py-1.5 \r
            bg-dark border border-js/10\r
            rounded-lg text-sm text-gray-200\r
            focus:outline-none focus:border-js/30\r
            transition-colors duration-200\r
          `}),e.jsx(Xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-js/50"})]}),e.jsx(m.div,{initial:!1,animate:{width:s?"100%":"0%",opacity:s?1:0},className:"absolute bottom-0 left-0 h-0.5 bg-js/20 rounded-full"})]})});ma.displayName="GamesSearch";const eo=[{value:"all",label:"Wszystkie"},{value:"easy",label:"Łatwe",color:"text-emerald-400"},{value:"medium",label:"Średnie",color:"text-indigo-400"},{value:"hard",label:"Trudne",color:"text-rose-400"}],xa=r.memo(({selectedDifficulty:s,onDifficultyChange:t})=>e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 flex-wrap",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Poziom:"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:eo.map(a=>e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(a.value),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all relative
              ${s===a.value?`text-${a.color||"gray-200"}`:"text-gray-400 hover:text-gray-300"}`,children:[s===a.value&&e.jsx(m.div,{layoutId:"difficulty-background",className:`absolute inset-0 bg-gray-800/50 border rounded-lg -z-10 border-${a.color||"gray-400"}`,transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx(B,{mode:"wait",children:e.jsx(m.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:s===a.value?e.jsx(qi,{className:`w-3 h-3 ${a.color||"text-gray-400"}`}):e.jsx(Qi,{className:"w-3 h-3"})},s===a.value?"circle":"circle-outline")}),a.label]},a.value))})]}));xa.displayName="GamesDifficulty";const ua=r.memo(()=>{const[s,t]=r.useState("newest"),[a,i]=r.useState(""),[n,o]=r.useState("all");return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full m-0 min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Gry | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Games CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ra,{}),e.jsxs("div",{className:"mt-8 bg-dark-800/50 border border-js/10 rounded-xl p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"w-full sm:w-72",children:e.jsx(ma,{value:a,onChange:i})}),e.jsx(da,{activeSortOption:s,onSortChange:t})]}),e.jsx("div",{className:"mt-4",children:e.jsx(xa,{selectedDifficulty:n,onDifficultyChange:o})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(ca,{sortBy:s,searchQuery:a,selectedDifficulty:n})})]})]})]})});ua.displayName="GamesSection";const jl=Object.freeze(Object.defineProperty({__proto__:null,GamesSection:ua},Symbol.toStringTag,{value:"Module"})),so=r.memo(({title:s})=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-js",children:s})})),to=r.createContext(null),ao=({children:s})=>{const[t,a]=r.useState(null),[i,n]=r.useState(!1),[o,c]=r.useState(null),l=r.useCallback(d=>L(void 0,null,function*(){n(!0),c(null);const{token:u}=F();try{const x=yield fetch(`${A}/games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}});if(!x.ok)throw new Error("Nie udało się pobrać zawartości gry");const p=(yield x.json()).data.games.find(j=>j.slug===d);if(!p)throw new Error("Nie znaleziono gry");a({title:p.title,description:p.description,difficulty:p.difficulty,rating:p.rating,completions:p.completions,rewardPoints:p.rewardPoints,gameData:p.gameData,estimatedTime:p.estimatedTime,isCompleted:p.isCompleted})}catch(x){c(x instanceof Error?x.message:"Wystąpił nieznany błąd")}finally{n(!1)}}),[]);return e.jsx(to.Provider,{value:{gameContent:t,isLoading:i,error:o,fetchGameContent:l},children:s})};We.setConfig({FORBID_ATTR:["style","onerror","onload","fscommand","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onfullscreenchange","onfullscreenerror","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwheel"],ADD_TAGS:["meta"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","iframe","embed","base"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,SANITIZE_DOM:!0,WHOLE_DOCUMENT:!1,USE_PROFILES:{html:!0,mathMl:!1,svg:!1}});const hs={"scope-explorer":r.lazy(()=>K(()=>Promise.resolve().then(()=>Ao),void 0)),"js-typo-hunter":r.lazy(()=>K(()=>Promise.resolve().then(()=>Io),void 0)),"async-quest":r.lazy(()=>K(()=>Promise.resolve().then(()=>Uo),void 0)),"regex-raider":r.lazy(()=>K(()=>Promise.resolve().then(()=>qo),void 0)),"js-quiz":r.lazy(()=>K(()=>Promise.resolve().then(()=>Xo),void 0))},pa=r.memo(()=>{const{slug:s}=es(),t=typeof s=="string"?We.sanitize(s):"";if(!t||!hs[t])return e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Gra nie została znaleziona"})});const a=hs[t];return e.jsxs(ao,{children:[e.jsxs(Y,{children:[e.jsxs("title",{children:[We.sanitize(t)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Gra CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"w-full h-full",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Ładowanie gry..."}),children:e.jsx(a,{})})})]})});pa.displayName="GameplayArea";const ha=r.memo(({game:s})=>{const t=ce(),a=()=>{t("/dashboard/play")};return e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark-800 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-js/10 text-js hover:bg-js/20 transition-colors",children:[e.jsx(Ki,{className:"w-4 h-4"}),e.jsx("span",{children:"Powrót do menu"})]})}),e.jsx(so,{title:s.title}),e.jsx("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:e.jsx("div",{className:"lg:col-span-12",children:e.jsx(pa,{})})})]})})});ha.displayName="GameplaySection";const ja=r.memo(()=>{const{slug:s}=es(),{data:t}=ie();if(!(t!=null&&t.games))return null;const a=t.games.find(i=>i.slug===s);return a?e.jsx(ha,{game:a}):e.jsx(Ps,{to:"/dashboard/play",replace:!0})});ja.displayName="GameplayRouter";const yl=Object.freeze(Object.defineProperty({__proto__:null,GameplayRouter:ja},Symbol.toStringTag,{value:"Module"})),io=({code:s,onChange:t,onMount:a,isEditorReady:i})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] rounded overflow-hidden relative",children:[!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark/50",children:e.jsx(xe,{className:"w-8 h-8 text-js animate-spin"})}),e.jsx(As,{theme:"vs-dark",language:"javascript",height:"100%",defaultLanguage:"javascript",value:s,onChange:t,onMount:a})]}),ya=r.memo(({output:s,onClear:t,isExecuting:a})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] bg-[#1e1e1e] rounded-lg overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-dark/30 border-b border-js/10",children:[e.jsx("span",{className:"text-sm text-gray-400",children:a?"Wykonywanie...":"Gotowe"}),e.jsx("button",{"data-testid":"clear-console-btn",onClick:t,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść konsolę",children:e.jsx(ss,{className:"w-4 h-4"})})]}),e.jsx("div",{"data-testid":"console-output",className:"flex-1 p-4 font-mono text-sm overflow-auto",children:s.map((i,n)=>e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-gray-300 mb-1",children:i},n))})]}));ya.displayName="ConsoleOutput";const ro=({output:s,isExecuting:t,onClear:a,onRun:i})=>e.jsxs("div",{className:"bg-dark/50 rounded-lg p-4 border border-js/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Konsola"}),e.jsx("button",{"data-testid":"run-code-btn",onClick:i,disabled:t,className:"px-4 py-2 bg-js text-dark font-medium rounded hover:bg-js/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Wykonywanie...":"Uruchom"})]}),e.jsx(ya,{output:s,onClear:a,isExecuting:t})]}),no=3e3,oo=()=>{const[s,t]=r.useState([]),[a,i]=r.useState(!1),n=r.useCallback(()=>{t([])},[]),o=r.useCallback(c=>{i(!0);const l=[],d=console.log;return new Promise((u,x)=>{const h=setTimeout(()=>{x(new Error("Przekroczono limit czasu wykonania"))},no);try{console.log=(...p)=>{l.push(p.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" "))},L(void 0,null,function*(){try{new Function("console",`
              "use strict";
              ${c}
            `)(console),t(l),clearTimeout(h),u()}catch(p){t([`Błąd: ${p instanceof Error?p.message:"Nieznany błąd"}`]),x(p)}})}finally{console.log=d,i(!1)}})},[]);return{output:s,isExecuting:a,executeCode:o,clearConsole:n}},Ue="code_history",lo=10,co=()=>{const[s,t]=r.useState(()=>{const n=localStorage.getItem(Ue);return n?JSON.parse(n):[]}),a=r.useCallback(n=>{t(o=>{const c=[{code:n,timestamp:Date.now()},...o.filter(l=>l.code!==n)].slice(0,lo);return localStorage.setItem(Ue,JSON.stringify(c)),c})},[]),i=r.useCallback(()=>{localStorage.removeItem(Ue),t([])},[]);return{history:s,addToHistory:a,clearHistory:i}},mo=s=>{const t=r.useRef(null),[a,i]=r.useState(s),[n,o]=r.useState(!1),c=d=>{t.current=d,o(!0)},l=r.useCallback(d=>{d&&i(d)},[]);return r.useEffect(()=>{vr.init().then(d=>{d.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})})},[]),{code:a,isEditorReady:n,handleEditorDidMount:c,handleEditorChange:l}},xo=`// Witaj w edytorze CodeLinesJS!
// Napisz swój kod JavaScript tutaj

function przywitajSie(imie) {
  return \`Cześć, \${imie}!\`;
}

console.log(przywitajSie("Programisto"));`,uo=()=>({saveToFile:r.useCallback(t=>{const a=new Blob([t],{type:"text/javascript"}),i=URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=`code_${new Date().toISOString().slice(0,10)}.js`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},[])}),ga=r.memo(({history:s,onSelect:t,onClear:a})=>e.jsxs("div",{"data-testid":"history-panel",className:"absolute top-full right-0 mt-2 w-64 bg-dark/95 rounded-lg border border-js/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-js/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx($s,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Historia"})]}),s.length>0&&e.jsx("button",{"data-testid":"clear-history-btn",onClick:a,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść historię",children:e.jsx(ss,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.length===0?e.jsx("div",{className:"p-3 text-sm text-gray-400",children:"Brak historii"}):s.map((i,n)=>e.jsxs(m.button,{"data-testid":`history-item-${n}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},onClick:()=>t(i.code),className:"w-full p-3 text-left hover:bg-js/10 transition-colors border-b border-js/5 last:border-0",children:[e.jsx("div",{className:"text-sm text-gray-300 truncate",children:i.code.split(`
`)[0]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(i.timestamp).toLocaleString()})]},i.timestamp))})]}));ga.displayName="CodeHistory";const fa=r.memo(()=>{const{output:s,isExecuting:t,executeCode:a,clearConsole:i}=oo(),{history:n,addToHistory:o,clearHistory:c}=co(),{code:l,isEditorReady:d,handleEditorDidMount:u,handleEditorChange:x}=mo(xo),{saveToFile:h}=uo(),[p,j]=r.useState(!1),w=()=>{j(!1)},b=r.useCallback(()=>L(void 0,null,function*(){yield a(l),o(l)}),[l,a,o]);return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full p-6",children:[e.jsxs(V,{children:[e.jsx("title",{children:"Edytor Kodu | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Edytor kodu JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Edytor Kodu JavaScript"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{"data-testid":"save-code-btn",onClick:()=>h(l),disabled:!d,className:"px-4 py-2 text-sm text-js border border-js/20 rounded hover:bg-js/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Zi,{className:"w-4 h-4 mr-2 inline-block"}),"Zapisz do Pliku"]}),e.jsx("button",{"data-testid":"history-btn",onClick:()=>j(y=>!y),className:"p-2 text-gray-400 hover:text-js transition-colors",title:"Historia kodu",children:e.jsx($s,{className:"w-5 h-5"})}),p&&e.jsx(ga,{history:n,onSelect:w,onClear:c})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[e.jsx(io,{code:l,onChange:x,onMount:()=>u(null),isEditorReady:d}),e.jsx(ro,{output:s,isExecuting:t,onClear:i,onRun:b})]})]})});fa.displayName="CodeEditor";const gl=Object.freeze(Object.defineProperty({__proto__:null,CodeEditor:fa},Symbol.toStringTag,{value:"Module"})),ba=r.memo(()=>e.jsx("div",{className:"absolute inset-0",children:e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-[#1a1a1a] opacity-90"}),e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"})]})}));ba.displayName="PageBackground";const wa=r.memo(({title:s="Zgłoś błąd lub sugestię",description:t="Znalazłeś błąd w aplikacji lub masz pomysł na nową funkcję? Daj nam znać! Twoje opinie pomagają nam ulepszać CodeLinesJS."})=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-js mb-4",children:s}),e.jsx("p",{className:"text-gray-400 text-lg",children:t})]}));wa.displayName="PageHeader";const po=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${A}reports`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)});if(!a.ok)throw new Error("Nie udało się wysłać zgłoszenia");return a.json()}),ho=()=>{const{token:s}=F(),[t,a]=r.useState(!1),[i,n]=r.useState(!1),[o,c]=r.useState(null),[l,d]=r.useState({title:"",description:"",category:"bug",email:""}),[u,x]=r.useState({}),h=()=>{const y={};return l.title.trim()?l.title.length<5&&(y.title="Tytuł musi mieć co najmniej 5 znaków"):y.title="Tytuł jest wymagany",l.description.trim()?l.description.length<20&&(y.description="Opis musi mieć co najmniej 20 znaków"):y.description="Opis jest wymagany",l.category||(y.category="Kategoria jest wymagana"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(y.email="Podaj prawidłowy adres email"):y.email="Email jest wymagany",x(y),Object.keys(y).length===0},p=y=>{const{name:g,value:S}=y.target;d(T=>z(k({},T),{[g]:S}))},j=()=>{d({title:"",description:"",category:"bug",email:""}),x({})};return{formData:l,errors:u,isSubmitting:t,submitSuccess:i,submitError:o,handleChange:p,handleSubmit:y=>L(void 0,null,function*(){if(y.preventDefault(),!!h()){a(!0),c(null);try{yield po(s||"",l),n(!0),j()}catch(g){c(g instanceof Error?g.message:"Wystąpił nieznany błąd")}finally{a(!1)}}}),resetSuccess:()=>{n(!1)}}},je=r.memo(({id:s,name:t,label:a,type:i="text",value:n,onChange:o,error:c,placeholder:l,options:d,rows:u=5})=>{const x=`w-full bg-dark/50 border ${c?"border-red-500":"border-js/20"} rounded-lg p-3 text-white focus:border-js focus:outline-none`;return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:s,className:"block text-gray-300 mb-1",children:a}),i==="textarea"?e.jsx("textarea",{id:s,name:t,value:n,onChange:o,rows:u,className:x,placeholder:l}):i==="select"?e.jsx("select",{id:s,name:t,value:n,onChange:o,className:x,children:d==null?void 0:d.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}):e.jsx("input",{type:i,id:s,name:t,value:n,onChange:o,className:x,placeholder:l}),c&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c})]})});je.displayName="FormField";const Na=r.memo(({isSubmitting:s,label:t="Wyślij zgłoszenie",loadingLabel:a="Wysyłanie..."})=>e.jsx(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:s,className:"w-full bg-js text-dark font-medium py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-js/90 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-dark border-t-transparent rounded-full"}),e.jsx("span",{children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(Vi,{}),e.jsx("span",{children:t})]})}));Na.displayName="SubmitButton";const va=r.memo(({onReset:s,title:t="Dziękujemy za zgłoszenie!",message:a="Twoje zgłoszenie zostało przyjęte. Odpowiemy najszybciej jak to możliwe.",buttonLabel:i="Zgłoś kolejny błąd"})=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-green-400 font-medium mb-2",children:t}),e.jsx("p",{className:"text-gray-400",children:a}),e.jsx("button",{onClick:s,className:"mt-4 bg-js text-dark font-medium px-4 py-2 rounded-lg hover:bg-js/90 transition-colors",children:i})]}));va.displayName="SuccessMessage";const ka=r.memo(({message:s})=>e.jsx("div",{className:"mb-4 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400",children:s})}));ka.displayName="ErrorMessage";const Sa=r.memo(({title:s="Zgłoś błąd"})=>e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-lg bg-js/10",children:e.jsx(fs,{className:"w-6 h-6 text-js"})}),e.jsx("h2",{className:"text-2xl font-bold text-js",children:s})]}));Sa.displayName="FormHeader";const jo=[{value:"bug",label:"Błąd w aplikacji"},{value:"feature",label:"Propozycja funkcji"},{value:"content",label:"Problem z treścią"},{value:"other",label:"Inne"}],za=r.memo(()=>{const{formData:s,errors:t,isSubmitting:a,submitSuccess:i,submitError:n,handleChange:o,handleSubmit:c,resetSuccess:l}=ho();return e.jsxs("div",{className:"w-full max-w-3xl mx-auto bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:[e.jsx(Sa,{}),i?e.jsx(va,{onReset:l}):e.jsxs("form",{onSubmit:c,children:[e.jsx(je,{id:"title",name:"title",label:"Tytuł",value:s.title,onChange:o,error:t.title,placeholder:"Krótki opis problemu"}),e.jsx(je,{id:"category",name:"category",label:"Kategoria",type:"select",value:s.category,onChange:o,error:t.category,options:jo}),e.jsx(je,{id:"description",name:"description",label:"Szczegółowy opis",type:"textarea",value:s.description,onChange:o,error:t.description,placeholder:"Opisz dokładnie napotkany problem, podaj kroki do jego odtworzenia"}),e.jsx(je,{id:"email",name:"email",label:"Email kontaktowy",type:"email",value:s.email,onChange:o,error:t.email,placeholder:"Twój adres email"}),n&&e.jsx(ka,{message:n}),e.jsx(Na,{isSubmitting:a})]})]})});za.displayName="ReportForm";const La=r.memo(({email:s="kontakt@codelinesjs.pl"})=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Inne sposoby kontaktu"}),e.jsxs("p",{className:"text-gray-400",children:["Możesz również skontaktować się z nami bezpośrednio przez email:"," ",e.jsx("a",{href:`mailto:${s}`,className:"text-js hover:underline",children:s})]})]}));La.displayName="ContactSection";const yo=()=>r.useMemo(()=>({container:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}}}),[]),Ta=r.memo(()=>{const s=yo();return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-dark via-dark-medium to-dark py-16 md:py-24 relative overflow-hidden",children:[e.jsx(ba,{}),e.jsxs(V,{children:[e.jsx("title",{children:"Zgłoś Błąd | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zgłoś błąd w CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs(m.div,{variants:s.container,initial:"hidden",animate:"show",className:"flex flex-col items-center gap-12",children:[e.jsx(m.div,{variants:s.item,children:e.jsx(wa,{})}),e.jsx(m.div,{variants:s.item,className:"w-full",children:e.jsx(za,{})}),e.jsx(m.div,{variants:s.item,children:e.jsx(La,{})})]})})]})});Ta.displayName="ReportBugPage";const fl=Object.freeze(Object.defineProperty({__proto__:null,ReportBugPage:Ta},Symbol.toStringTag,{value:"Module"})),go=s=>L(void 0,null,function*(){const t=yield fetch(`${A}users/active`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Błąd podczas pobierania aktywnych użytkowników");return t.json()}),fo=()=>{var u,x;const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=G({queryKey:["activeUsers"],queryFn:()=>go(s||""),retry:2,refetchInterval:3e4,staleTime:1e3*60,enabled:!!s}),o=((u=t==null?void 0:t.data)==null?void 0:u.users)||[],c=o.slice(0,8),l=o.length>8?o.length-8:0,d=((x=t==null?void 0:t.data)==null?void 0:x.totalActive)||0;return{users:o,visibleUsers:c,extraUsers:l,totalActive:d,isLoading:a,error:i,refetch:n}},Pa=r.memo(()=>{const{visibleUsers:s,extraUsers:t,isLoading:a,error:i}=fo();return a?e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map((n,o)=>e.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-700 animate-pulse"},o))})]}):i?null:e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.map(n=>e.jsx(m.div,{className:"relative group",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:17},children:e.jsxs("div",{className:"w-10 h-10 rounded-full relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-js flex items-center justify-center",children:e.jsx("span",{className:"text-dark font-bold text-xl",children:n.username.charAt(0).toUpperCase()})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-dark",children:e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"})})]})},n._id)),t>0&&e.jsxs(m.div,{whileHover:{scale:1.1},className:`w-10 h-10 rounded-full bg-js/10 flex items-center justify-center\r
                     text-js text-sm font-medium border-2 border-dark/50`,children:["+",t]})]})]})});Pa.displayName="ActiveUsers";const Ea=r.memo(()=>e.jsx("div",{className:"space-y-6",children:e.jsx(Pa,{})}));Ea.displayName="CommunityFeed";const bo=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),Ca=r.memo(({username:s,size:t="md",className:a=""})=>{const i=s&&typeof s=="string"?s.charAt(0).toUpperCase():"?",n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},o={sm:"text-sm",md:"text-base",lg:"text-xl"};return e.jsx("div",{className:`
      rounded-full bg-js flex items-center justify-center text-dark
      ${n[t]} ${a}
    `,children:e.jsx("span",{className:`font-bold ${o[t]}`,children:i})})});Ca.displayName="UserAvatar";const Aa=r.memo(({user:s,index:t,animationDelay:a=.1,page:i=1,limit:n=10})=>{var d,u;const o=s.rank?parseInt(s.rank):(i-1)*n+t+1,c=o<=3?"text-yellow-500":"text-gray-400",l=s.isCurrentUser?"border-js ring-2 ring-js/30 bg-js/5 shadow-lg":"border-js/5 hover:border-js/10";return e.jsx("div",{className:`backdrop-blur-sm rounded-lg border p-4 transition-all flex items-center justify-between ${l}`,style:{animation:`fadeIn 0.5s ease-out ${a*(t+1)}s both`},children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`font-bold text-xl min-w-8 ${c}`,children:[o<=3&&e.jsx(Xi,{className:"inline mr-1"}),o]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ca,{username:s.username,size:"md",className:o<=3?"ring-2 ring-yellow-500/30":""}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg text-white",children:[s.username,s.isCurrentUser&&e.jsx("span",{className:"ml-2 text-xs font-medium bg-js/20 text-js px-2 py-0.5 rounded",children:"Ty"})]}),e.jsxs("div",{className:"text-gray-400 text-sm",children:["Poziom: ",e.jsx("span",{className:"text-js",children:((d=s.stats)==null?void 0:d.level)||s.level||1})," • Punkty: ",e.jsx("span",{className:"text-js",children:((u=s.stats)==null?void 0:u.points)||s.points||0})]})]})]})]})})});Aa.displayName="RankingItem";const $a=r.memo(({users:s,pagination:t})=>{if(!(s!=null&&s.length))return e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx(Yi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("div",{children:"Brak danych rankingowych do wyświetlenia"})]});const a=(t==null?void 0:t.page)||1,i=(t==null?void 0:t.limit)||10;return e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:s.map((n,o)=>e.jsx(Aa,{user:n,index:o,page:a,limit:i},n.id||n._id||o))}),t&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-js/10",children:[e.jsxs("button",{onClick:t.prevPage,disabled:!t.hasPrevPage||t.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${t.hasPrevPage&&!t.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Poprzednia strona",children:[e.jsx(er,{className:"w-5 h-5"}),e.jsx("span",{children:"Poprzednia"})]}),e.jsxs("div",{className:"text-gray-400",children:["Strona ",t.page," z ",t.totalPages||1]}),e.jsxs("button",{onClick:t.nextPage,disabled:!t.hasNextPage||t.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${t.hasNextPage&&!t.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Następna strona",children:[e.jsx("span",{children:"Następna"}),e.jsx(sr,{className:"w-5 h-5"})]})]})]})});$a.displayName="RankingList";const Ra=r.memo(({icon:s,label:t,value:a,className:i=""})=>e.jsxs(m.div,{className:`bg-dark/20 rounded-lg p-4 border border-js/5 ${i}`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(s,{className:"w-6 h-6 text-js mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:t}),e.jsx("p",{className:"text-2xl font-bold text-js",children:a})]}));Ra.displayName="StatCard";const Fa=r.memo(({currentUserStats:s})=>{if(!s)return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-6",children:"Twoje Statystyki"}),e.jsx("p",{className:"text-gray-400",children:"Nie udało się załadować twoich statystyk. Zaloguj się, aby zobaczyć swoje miejsce w rankingu."})]});const t=[{icon:ee,label:"Twoja pozycja",value:`#${s.rank}`},{icon:D,label:"Poziom",value:typeof s.level=="number"?s.level.toLocaleString():s.level},{icon:tr,label:"Punkty",value:typeof s.points=="number"?s.points.toLocaleString():s.points}];return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-js mb-6",children:["Twoje Statystyki ",s.username&&`(${s.username})`]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(a=>e.jsx(Ra,{icon:a.icon,label:a.label,value:a.value},a.label))})]})});Fa.displayName="RankingStats";const wo=(s=1,t=10)=>{const[a,i]=r.useState(s),n=t,{data:o,isLoading:c,error:l}=G({queryKey:["ranking",a,n],queryFn:()=>L(void 0,null,function*(){const y=yield kr.get(`ranking?page=${a}&limit=${n}`,{requiresAuth:!0});if(y.error)throw new Error(y.error);return y})}),d=o==null?void 0:o.data,u=d==null?void 0:d.ranking,x=(d==null?void 0:d.totalUsers)||0,h=d==null?void 0:d.meta,p=(h==null?void 0:h.totalPages)||Math.ceil(x/n),j=()=>{a<p&&i(y=>y+1)},w=()=>{a>1&&i(y=>y-1)},b=y=>{y>=1&&y<=p&&i(y)};return{ranking:u,totalUsers:x,userStats:d==null?void 0:d.userStats,isLoading:c,error:l,page:a,limit:n,nextPage:j,prevPage:w,goToPage:b,totalPages:p,pagination:h?{page:h.page,limit:h.limit,totalItems:h.totalResults,totalPages:h.totalPages}:null}},No=()=>{const{ranking:s,userStats:t,isLoading:a,error:i,page:n,limit:o,totalPages:c,nextPage:l,prevPage:d,goToPage:u}=wo(),x=r.useMemo(()=>s||[],[s]),h=r.useMemo(()=>{var j,w;return t?{username:t.username,rank:t.rank,level:((j=t.stats)==null?void 0:j.level)||"-",points:((w=t.stats)==null?void 0:w.points)||"-",avatar:t.avatar}:null},[t]),p=r.useMemo(()=>({page:n,limit:o,totalPages:c,hasNextPage:n<c,hasPrevPage:n>1,nextPage:l,prevPage:d,goToPage:u,isLoadingPage:a&&!!x.length}),[n,o,c,l,d,u,a,x.length]);return{users:x,currentUserStats:h,isLoading:a,error:i,pagination:p}},_a=r.memo(()=>{const{users:s,currentUserStats:t,isLoading:a,error:i,pagination:n}=No();return a&&(!s||s.length===0)?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx(Ce,{text:"Ładowanie rankingu...",size:"lg"})}):i?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-red-500 text-2xl mb-2",children:"Błąd ładowania"}),e.jsx("p",{className:"text-gray-400",children:i instanceof Error?i.message:"Nie udało się załadować danych rankingu. Spróbuj ponownie później."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Ranking"}),n.isLoadingPage&&e.jsxs("div",{className:"text-xs text-gray-400 flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-js",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Aktualizowanie..."]})]}),a&&n.page?e.jsx("div",{className:"py-8 flex items-center justify-center",children:e.jsx(Ce,{text:"Ładowanie danych..."})}):e.jsx($a,{users:s,pagination:n})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(Fa,{currentUserStats:t})})]})});_a.displayName="CommunityRanking";const vo=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"})),Ee=r.memo(({category:s,stats:t})=>{const a=()=>{switch(s){case"scope":return O;case"closure":return as;case"hoisting":return ts}},i=()=>{switch(s){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},n=a(),o=t.correct/t.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:i()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.correct,"/",t.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});Ee.displayName="CategoryProgress";const Da=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(Ee,{category:"scope",stats:s.categoryStats.scope}),e.jsx(Ee,{category:"closure",stats:s.categoryStats.closure}),e.jsx(Ee,{category:"hoisting",stats:s.categoryStats.hoisting})]})]})});Da.displayName="ScopeExplorerStats";const ue=r.memo(({gameContent:s,onStart:t})=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4 text-center",children:s.title}),e.jsx("div",{className:"mb-6 text-gray-400 text-center",children:s.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom trudności"}),e.jsx("div",{className:"text-lg font-bold text-js capitalize",children:s.difficulty})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty do zdobycia"}),e.jsxs("div",{className:"text-lg font-bold text-js flex items-center justify-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),s.rewardPoints]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Szacowany czas"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.estimatedTime," min"]})]})]}),e.jsxs("button",{onClick:t,className:"w-full px-6 py-4 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:"Rozpocznij grę"})]})]}));ue.displayName="GameIntro";const ko=()=>{const{data:s,isLoading:t,error:a}=ie();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="scope-explorer"),[s==null?void 0:s.games]),isLoading:t,error:a}},Ne=({maxTime:s,onTimeEnd:t,isPaused:a})=>{const[i,n]=r.useState(0),[o,c]=r.useState(!1),l=r.useCallback(()=>{c(!0)},[]),d=r.useCallback(()=>{c(!1)},[]),u=r.useCallback(()=>{n(0),c(!1)},[]);return r.useEffect(()=>{let x;return o&&!a&&(x=window.setInterval(()=>{n(h=>{const p=h+1;return p>=s?(d(),t(),s):p})},1e3)),()=>{x&&window.clearInterval(x)}},[o,a,s,t,d]),{timeElapsed:i,resetTimer:u,startTimer:l,stopTimer:d,isRunning:o}},So=({gameContent:s,isPaused:t})=>{var T;const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}}}),{timeElapsed:x,resetTimer:h,startTimer:p,stopTimer:j}=Ne({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{o(!0),l(x),j()},isPaused:t});r.useEffect(()=>{u(v=>z(k({},v),{timeElapsed:x}))},[x]),r.useEffect(()=>{if(!(s!=null&&s.gameData))return;const v={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};s.gameData.forEach(N=>{const f=N.category;v[f].total++,v[f].points+=N.points||0}),u(N=>z(k({},N),{totalLevels:s.gameData.length,maxTime:s.estimatedTime?s.estimatedTime*60:300,categoryStats:v}))},[s]);const w=r.useCallback((v,N)=>{u(f=>z(k({},f),{score:f.score+v,correctAnswers:f.correctAnswers+1,categoryStats:z(k({},f.categoryStats),{[N]:z(k({},f.categoryStats[N]),{correct:f.categoryStats[N].correct+1})})}))},[]),b=r.useCallback(()=>{var N;const v=d.currentLevel+1;if(v>(((N=s==null?void 0:s.gameData)==null?void 0:N.length)||0)){o(!0),l(x),j();return}u(f=>z(k({},f),{currentLevel:v}))},[d.currentLevel,x,(T=s==null?void 0:s.gameData)==null?void 0:T.length,j]),y=r.useCallback(()=>{if(!(s!=null&&s.gameData))return;const v={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};s.gameData.forEach(N=>{const f=N.category;v[f].total++,v[f].points+=N.points||0}),u({currentLevel:1,totalLevels:s.gameData.length,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:v}),o(!1),l(0),h(),p()},[h,p,s]),g=r.useCallback(()=>{i(!0),p()},[p]),S=r.useCallback(()=>{o(!0),l(x),j()},[x,j]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:b,handleRestart:y,handleStartGame:g,handleGameOver:S}},Oa=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(m.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(xe,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(m.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(X,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:t.message})]})}):e.jsx(e.Fragment,{children:a}));Oa.displayName="LoadingErrorContainer";const zo=s=>{switch(s){case"scope":return O;case"closure":return as;case"hoisting":return ts}},Lo=s=>{switch(s){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},To=s=>{switch(s){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Po=s=>{switch(s){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},Ia=({onEscape:s,onEnter:t,onNumber1:a,onNumber2:i,onNumber3:n,onNumber4:o,disabled:c=!1})=>{const l=r.useCallback(d=>{if(!c)switch(d.key){case"Escape":s==null||s();break;case"Enter":t==null||t();break;case"1":a==null||a();break;case"2":i==null||i();break;case"3":n==null||n();break;case"4":o==null||o();break}},[s,t,a,i,n,o,c]);r.useEffect(()=>(window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)),[l])},Ba=r.memo(({currentLevel:s,totalLevels:t})=>{const a=(s-1)/t*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});Ba.displayName="ScopeExplorerProgress";const Eo=ir,Ma=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(null),[d,u]=r.useState(!1),[x,h]=r.useState(null),[p,j]=r.useState(!1),w=r.useCallback(g=>{l(g);const S=g===s.correct;h(S),u(!0),S?(t(s.points||10,s.category),setTimeout(()=>{a(),l(null),u(!1),h(null),j(!1)},1500)):setTimeout(()=>{o()},2e3)},[s,t,a,o]),b=r.useCallback(g=>{!d&&g<s.options.length&&w(s.options[g])},[d,s.options,w]);Ia({onNumber1:()=>b(0),onNumber2:()=>b(1),onNumber3:()=>b(2),disabled:d});const y=zo(s.category);return e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(Ba,{currentLevel:i,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(y,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Lo(s.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${To(s.difficulty)}`,children:Po(s.difficulty)})]}),e.jsx("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg overflow-hidden",children:e.jsx(Eo,{language:"javascript",style:ar,customStyle:{padding:"1.5rem",borderRadius:"0.5rem",fontSize:"1.1rem",background:"transparent"},children:s.code})}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.options.map((g,S)=>e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w(g),disabled:d,className:`
              w-full break-words
              relative p-4 rounded-lg font-mono text-lg transition-colors
              ${c===g?x?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `,children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:S+1}),g]},g))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-3) aby wybrać odpowiedź"}),d&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${x?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${x?"text-green-400":"text-red-400"}`,children:[x?"Świetnie! ":"Spróbuj jeszcze raz. ",s.explanation]})}),p&&!x&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-js/10 border border-js/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-js",children:[e.jsx("span",{className:"font-medium",children:"Podpowiedź:"})," Zwróć uwagę na zakres zmiennych i ich dostępność w różnych kontekstach."]})})]},i)});Ma.displayName="ScopeExplorerGame";const Co=(s,t)=>L(void 0,null,function*(){try{const a=yield fetch(`${A}progress/points`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({points:t})});if(!a.ok)throw new Error("Nie udało się zaktualizować punktów");return yield a.json()}catch(a){throw console.error("Błąd podczas aktualizacji punktów:",a),a}}),ve=()=>{const{token:s}=F(),t=de(),a=ae({mutationFn:i=>L(void 0,null,function*(){return Co(s||"",i)}),onSuccess:()=>{t.invalidateQueries({queryKey:["userProgress"]})}});return{updatePoints:a.mutate,isUpdating:a.isPending,error:a.error}},Ga=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=ve();r.useEffect(()=>{c(s)},[s,c]);const l=u=>{const x=Math.floor(u/60),h=u%60;return`${x}:${h.toString().padStart(2,"0")}`},d=u=>{switch(u){case"scope":return O;case"closure":return as;case"hoisting":return ts;default:return O}};return e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:i===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",i,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:l(t)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),Object.entries(n).map(([u,x])=>{const h=d(u);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(h,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js",children:u==="scope"?"Zakres zmiennych":u==="closure"?"Domknięcia":"Hoisting"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Ukończone zadania: ",x.correct,"/",x.total]})]})]}),e.jsxs("div",{className:"text-sm font-medium text-js",children:[x.points," pkt"]})]},u)})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});Ga.displayName="ScopeExplorerSummary";const Ha=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),t=r.useMemo(()=>({initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a}},Ua=r.memo(({isGameOver:s,gameStats:t,currentChallenge:a,finalTime:i,challenges:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>{const{gameAnimation:u,summaryAnimation:x}=Ha();return!a&&!s?null:e.jsx(B,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(m.div,{initial:x.initial,animate:x.animate,exit:x.exit,transition:x.transition,children:e.jsx(Ga,{score:t.score,timeElapsed:i,challenges:n||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(m.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:e.jsx(Ma,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})})});Ua.displayName="GameContent";const Wa=({title:s,description:t,gameName:a="JSTypoHunter"}={})=>{const i=r.useMemo(()=>s?`${s} | CodeLinesJS`:`${a} - Gra programistyczna | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`Zagraj w ${a} - interaktywną grę programistyczną, która pomoże Ci rozwinąć umiejętności kodowania.`,[t,a]);return{pageTitle:i,pageDescription:n}},Ja=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=ko(),{containerAnimation:n}=Ha(),{pageTitle:o,pageDescription:c}=Wa(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:x,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:w,handleStartGame:b,handleGameOver:y}=So({gameContent:t,isPaused:s});return e.jsx(Oa,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(m.div,z(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(Da,{stats:x,isGameOver:d,finalTime:u}),e.jsx(Ua,{isGameOver:d,gameStats:x,currentChallenge:h,finalTime:u,challenges:t.gameData,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:w})]})):e.jsx(ue,{gameContent:t,onStart:b})})})});Ja.displayName="ScopeExplorer";const Ao=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),qa=r.memo(({stats:s})=>{const t=a=>{const i=Math.floor(a/60),n=a%60;return`${i}:${n.toString().padStart(2,"0")}`};return e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 gap-3 flex items-center",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[t(s.timeElapsed),"/",t(s.maxTime)]})})]})]})]})});qa.displayName="JSTypoHunterStats";const $o=()=>{const{data:s,isLoading:t,error:a}=ie();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="js-typo-hunter"),[s]),isLoading:t,error:a}},Ro=s=>{switch(s){case"easy":return 10;case"medium":return 20;case"hard":return 30;default:return 10}},Fo=({gameContent:s,isPaused:t})=>{var v;const[a,i]=r.useState(!1),[n,o]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[c,l]=r.useState(!1),[d,u]=r.useState(0),{timeElapsed:x,resetTimer:h,startTimer:p,stopTimer:j}=Ne({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{l(!0),u(x),j()},isPaused:t}),w=r.useCallback(N=>{var W;const f=(W=s==null?void 0:s.gameData)==null?void 0:W[n.currentLevel-1],E=Ro((f==null?void 0:f.difficulty)||"easy"),C=N+E;o(J=>z(k({},J),{score:J.score+C,correctAnswers:J.correctAnswers+1}))},[n.currentLevel,s]),b=r.useCallback(()=>{l(!0),u(x),j()},[x,j]),y=r.useCallback(()=>{setTimeout(()=>{var f;const N=n.currentLevel+1;N>(((f=s==null?void 0:s.gameData)==null?void 0:f.length)||0)?(l(!0),u(x),j()):o(E=>z(k({},E),{currentLevel:N}))},1e3)},[n.currentLevel,s,x,j]),g=r.useCallback(()=>{var N;s&&(o({currentLevel:1,totalLevels:((N=s==null?void 0:s.gameData)==null?void 0:N.length)||0,score:0,timeElapsed:0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0}),l(!1),u(0),h(),p())},[h,p,s]),S=r.useCallback(()=>{i(!0),p()},[p]);r.useEffect(()=>{o(N=>z(k({},N),{timeElapsed:x}))},[x]),r.useEffect(()=>{s&&o(N=>{var f;return z(k({},N),{totalLevels:((f=s.gameData)==null?void 0:f.length)||0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300})})},[s]);const T=(v=s==null?void 0:s.gameData)==null?void 0:v[n.currentLevel-1];return{isGameStarted:a,isGameOver:c,gameStats:n,finalTime:d,currentChallenge:T,handleScoreUpdate:w,handleIncorrectAnswer:b,handleLevelComplete:y,handleRestart:g,handleStartGame:S}},_o=({title:s,description:t,gameName:a="JSTypoHunter"}={})=>{const i=r.useMemo(()=>s||`${a} | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[t,a]);return{pageTitle:i,pageDescription:n}},Qa=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"animate-spin text-4xl text-js mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Ładowanie gry..."})]})}):t?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"text-4xl text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-red-400",children:t.message})]})}):a?e.jsx(e.Fragment,{children:a}):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"text-4xl text-yellow-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Gra niedostępna"})]})}));Qa.displayName="LoadingError";const Ka=r.memo(({type:s,message:t})=>s?e.jsx(B,{children:e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`
          absolute top-4 left-1/2 -translate-x-1/2 
          px-4 py-2 rounded-lg flex items-center gap-2
          ${s==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}
        `,children:[s==="success"?e.jsx(me,{className:"w-4 h-4"}):e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t})]})}):null);Ka.displayName="JSTypoHunterFeedback";const Za=r.memo(({hint:s,isVisible:t})=>t?e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 p-3 bg-js/10 border border-js/20 rounded-lg flex items-start gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js mb-1",children:"Podpowiedź:"}),e.jsx("div",{className:"text-sm text-gray-400",children:s})]})]}):null);Za.displayName="JSTypoHunterHint";const Do=s=>{switch(s){case"syntax":return O;case"naming":return rr;case"logic":return be}},Oo=s=>{switch(s){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Va=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,onIncorrectAnswer:i})=>{const[n,o]=r.useState(s.code),[c,l]=r.useState({type:null,message:""}),[d,u]=r.useState(0),x=3,h=b=>{b!==void 0&&o(b)},p=(b,y)=>{const g=b.trim().replace(/\s+/g," "),S=y.trim().replace(/\s+/g," ");return g.includes(S)?!0:((N,f)=>{if(N===f)return 1;let E=0;const C=N.length>f.length?N:f,W=N.length>f.length?f:N;for(let J=0;J<W.length;J++)W[J]===C[J]&&E++;return E/C.length})(g,S)>.8},j=r.useCallback(()=>{const b=n.split(`
`);let y=!1;for(const g of b)if(p(g,s.correct)){y=!0;break}if(y){l({type:"success",message:"Świetnie! Poprawna odpowiedź!"});const g=Math.max(10-d*2,1);t(g),setTimeout(()=>{a(),o(s.code),l({type:null,message:""}),u(0)},1500)}else u(g=>g+1),d+1>=x?(l({type:"error",message:"Niestety, przekroczyłeś liczbę prób. Koniec gry!"}),setTimeout(()=>{i()},1500)):(l({type:"error",message:`Niestety, to nie jest prawidłowa odpowiedź. Pozostałe próby: ${x-d-1}`}),setTimeout(()=>{l({type:null,message:""})},1500))},[n,s,d,t,a,i]),w=Do(s.category);return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[e.jsx(Ka,{type:c.type,message:c.message}),e.jsxs("div",{className:"mb-4 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(w,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:s.category==="syntax"?"Błąd składni":s.category==="naming"?"Błąd nazewnictwa":"Błąd logiki"})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Oo(s.difficulty)}`,children:s.difficulty==="easy"?"Łatwy":s.difficulty==="medium"?"Średni":"Trudny"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.explanation||"Znajdź i popraw błąd w kodzie."}),e.jsxs("p",{className:"mt-1 text-gray-500 text-sm",children:["Pozostałe próby: ",x-d]})]}),e.jsx("div",{className:"rounded-lg",children:e.jsx(As,{className:"w-full h-full flex flex-wrap",theme:"vs-dark",height:"400px",defaultLanguage:"javascript",value:n,onChange:h,options:{selectOnLineNumbers:!0,automaticLayout:!0,theme:"vs-dark",wordWrap:"on"}})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Sprawdź"})}),e.jsx(Za,{hint:s.hint||"",isVisible:d>0})]})});Va.displayName="JSTypoHunterGame";const Xa=r.memo(({score:s,timeElapsed:t,correctAnswers:a,totalLevels:i,onRestart:n})=>{const{updatePoints:o}=ve();r.useEffect(()=>{o(s)},[s,o]);const c=l=>{const d=Math.floor(l/60),u=l%60;return`${d}:${u.toString().padStart(2,"0")}`};return e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===i?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",i]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap",children:c(t)})]})]})]}),e.jsx("button",{onClick:n,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});Xa.displayName="JSTypoHunterSummary";const Ya=r.memo(({isGameOver:s,gameStats:t,finalTime:a,currentChallenge:i,totalLevels:n,onScoreUpdate:o,onLevelComplete:c,onIncorrectAnswer:l,onRestart:d})=>e.jsx(B,{mode:"wait",children:s?e.jsx(Xa,{score:t.score,timeElapsed:a,correctAnswers:t.correctAnswers,totalLevels:n,onRestart:d},"game-over"):e.jsx(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:e.jsx(Va,{currentChallenge:i,onScoreUpdate:o,onLevelComplete:c,onIncorrectAnswer:l})},`level-${t.currentLevel}`)}));Ya.displayName="GameContent";const ei=r.memo(({isPaused:s=!1})=>{var y;const{gameContent:t,isLoading:a,error:i}=$o(),{pageTitle:n,pageDescription:o}=_o(),{isGameStarted:c,isGameOver:l,gameStats:d,finalTime:u,currentChallenge:x,handleScoreUpdate:h,handleIncorrectAnswer:p,handleLevelComplete:j,handleRestart:w,handleStartGame:b}=Fo({gameContent:t,isPaused:s});return e.jsx(Qa,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:c?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[e.jsxs(Y,{children:[e.jsx("title",{children:n}),e.jsx("meta",{name:"description",content:o})]}),e.jsx(qa,{stats:d}),e.jsx(Ya,{isGameOver:l,gameStats:d,finalTime:u,currentChallenge:x,totalLevels:((y=t==null?void 0:t.gameData)==null?void 0:y.length)||0,onScoreUpdate:h,onLevelComplete:j,onIncorrectAnswer:p,onRestart:w})]}):e.jsx(ue,{gameContent:t,onStart:b})})})});ei.displayName="JSTypoHunter";const Io=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"})),si=()=>{const{data:s,isLoading:t,error:a}=ie();return{gameContent:r.useMemo(()=>{if(!(!s||!s.games||!Array.isArray(s.games)))return s.games.find(n=>n.slug==="async-quest")},[s]),isLoading:t,error:a}},Bo=({gameContent:s,isPaused:t})=>{var N;const[a,i]=r.useState(!1),n={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}},[o,c]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:n}),[l,d]=r.useState(!1),[u,x]=r.useState(0),{timeElapsed:h,resetTimer:p,startTimer:j,stopTimer:w}=Ne({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{d(!0),x(h),w()},isPaused:t});r.useEffect(()=>{s&&c(f=>{var E;return z(k({},f),{totalLevels:((E=s.gameData)==null?void 0:E.length)||0})})},[s]),r.useEffect(()=>{!l&&!t&&c(f=>z(k({},f),{timeElapsed:h}))},[h,l,t]),r.useEffect(()=>{!l&&!t&&j()},[l,t,j]);const b=r.useCallback((f,E)=>{c(C=>z(k({},C),{score:C.score+f,correctAnswers:C.correctAnswers+1,categoryStats:z(k({},C.categoryStats),{[E]:z(k({},C.categoryStats[E]),{total:C.categoryStats[E].total+1,correct:C.categoryStats[E].correct+1,points:C.categoryStats[E].points+f})})}))},[]),y=r.useCallback(()=>{const f=o.currentLevel+1;f>o.totalLevels?(d(!0),x(h),w()):c(E=>z(k({},E),{currentLevel:f}))},[o.currentLevel,o.totalLevels,h,w]),g=r.useCallback(()=>{d(!0),x(h),w()},[h,w]),S=r.useCallback(()=>{var E,C;if(!s)return;const f={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}};(E=s.gameData)==null||E.forEach(W=>{W.category&&f[W.category].total++}),c({currentLevel:1,totalLevels:((C=s.gameData)==null?void 0:C.length)||0,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:f}),d(!1),p(),j()},[s,p,j]),T=r.useCallback(()=>{i(!0),j()},[j]),v=(N=s==null?void 0:s.gameData)==null?void 0:N[o.currentLevel-1];return{isGameStarted:a,isGameOver:l,gameStats:o,finalTime:u,currentChallenge:v,handleScoreUpdate:b,handleLevelComplete:y,handleGameOver:g,handleRestart:S,handleStartGame:T}},Mo=({title:s,description:t,gameName:a="Async Quest"}={})=>{const i=r.useMemo(()=>s||`${a} | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[t,a]);return{pageTitle:i,pageDescription:n}},ti=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-purple-300 mb-4",children:e.jsx(xe,{})}),e.jsx("p",{className:"text-xl font-medium text-purple-200",children:"Ładowanie gry..."})]}):t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(X,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:t.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-purple-300",children:"Gra niedostępna"})}));ti.displayName="LoadingError";const ai=r.memo(({currentLevel:s,totalLevels:t})=>{const a=(s-1)/t*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});ai.displayName="AsyncQuestProgress";const Go=()=>{const[s,t]=r.useState(!1),[a,i]=r.useState([]);return{executeCode:r.useCallback(o=>L(void 0,null,function*(){t(!0),i([]);try{const u={console:{log:(...h)=>{i(p=>[...p,h.map(j=>String(j)).join(" ")])},error:(...h)=>{i(p=>[...p,`Error: ${h.map(j=>String(j)).join(" ")}`])}},fetch:()=>Promise.resolve({json:()=>Promise.resolve({data:"mock data"})}),setTimeout:(h,p)=>setTimeout(h,Math.min(p,1e3)),Promise},x=`
        with (context) {
          ${o}
        }
      `;return yield new Function("context",x)(u),{success:!0,output:a}}catch(c){return console.error("Błąd podczas wykonywania kodu:",c),{success:!1,output:a,error:c.message}}finally{t(!1)}}),[]),isRunning:s,output:a,clearOutput:()=>i([])}},Ho=(s,t)=>{const a=d=>d.replace(/\s+/g," ").trim(),i=a(s),n=a(t);if(i===n)return!0;const o=d=>d.includes("async")&&d.includes("function"),c=d=>d.includes(".then(")&&d.includes(".catch("),l=d=>d.includes("try")&&d.includes("catch");return!(o(t)&&!o(s)||c(t)&&!c(s)||l(t)&&!l(s))},ii=r.memo(({type:s,message:t,code:a,explanation:i})=>e.jsx(m.div,{initial:{opacity:0,y:s==="hint"?-10:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${s==="hint"?"bg-js/10 border border-js/20":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[s==="hint"?e.jsx(be,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}):e.jsx(X,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`text-sm font-medium ${s==="hint"?"text-js":"text-red-400"}`,children:s==="hint"?"Podpowiedź:":"Błąd:"}),e.jsx("div",{className:"text-sm text-gray-400",children:t}),a&&e.jsx("div",{className:"mt-2 p-2 bg-dark-900 rounded-lg font-mono text-sm text-gray-300",children:a}),i&&e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-js",children:"Wyjaśnienie: "}),i]})]})]})}));ii.displayName="AsyncQuestHint";const js=(s,t)=>{if(t==="async-await"){if(!s.includes("async"))return{message:"Funkcja powinna być oznaczona jako asynchroniczna.",explanation:"Użyj słowa kluczowego async przed deklaracją funkcji.",example:"async function getData() { ... }"};if(!s.includes("await"))return{message:"Brak słowa kluczowego await przy wywołaniu asynchronicznym.",explanation:"Użyj await aby poczekać na wynik operacji asynchronicznej.",example:"const data = await fetchData();"}}if(t==="promises"){if(!s.includes(".catch"))return{message:"Brak obsługi błędów w łańcuchu Promise.",explanation:"Dodaj .catch() aby obsłużyć potencjalne błędy.",example:"fetch(url).then(...).catch(error => { ... })"};if(!s.includes(".then"))return{message:"Brak obsługi wyniku Promise.",explanation:"Użyj .then() aby obsłużyć wynik pomyślnego wykonania.",example:"promise.then(result => { ... })"}}return t==="callbacks"&&!s.includes("new Promise")?{message:"Przekształć callback w Promise.",explanation:"Użyj konstruktora Promise aby opakować callback.",example:"new Promise((resolve, reject) => { ... })"}:{message:"Sprawdź poprawność składni kodu.",explanation:"Upewnij się, że kod jest zgodny z wymaganiami zadania."}},ri=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(s.code),[d,u]=r.useState(!1),[x,h]=r.useState(null),[p,j]=r.useState(null),[w,b]=r.useState(!1),y=r.useRef(null),g=r.useRef(null),S=r.useRef(null),{executeCode:T,isRunning:v,clearOutput:N}=Go();r.useEffect(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth",block:"center"})},[]);const f=se=>{y.current=se,b(!0),setTimeout(()=>{se.focus()},100)},E=r.useCallback(se=>{se!==void 0&&(l(se),h(null),j(null),N())},[N]),C=r.useCallback(()=>{S.current&&S.current.scrollIntoView({behavior:"smooth",block:"center"})},[]),W=r.useCallback(()=>L(void 0,null,function*(){if(c){u(!1),N(),j(null);try{const se=yield Ho(c,s.correct),De=yield T(c);if(se&&De.success)h(!0),u(!0),t(s.points,s.category),setTimeout(()=>{C()},100),setTimeout(()=>{a()},1500);else{h(!1),u(!0);const Pi=js(c,s.category);j(Pi),setTimeout(()=>{C()},100),setTimeout(()=>{o()},2e3)}}catch(se){h(!1),u(!0);const De=js(c,s.category);j(De),setTimeout(()=>{C()},100),setTimeout(()=>{o()},2e3)}}}),[c,s,T,t,a,o,N,C]),J={minimap:{enabled:!1},fontSize:14,lineHeight:24,fontFamily:"JetBrains Mono, monospace",fontLigatures:!0,wordWrap:"on",automaticLayout:!0,padding:{top:16,bottom:16},scrollBeyondLastLine:!1,folding:!0,lineNumbers:"on",renderLineHighlight:"all",suggestOnTriggerCharacters:!0,parameterHints:{enabled:!0},tabSize:2,theme:"vs-dark"};return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-js",children:s.title}),e.jsx(ai,{currentLevel:i,totalLevels:n})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-3",children:"Opis zadania"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:s.description}),e.jsxs("div",{className:"p-4 bg-dark-700/50 border border-js/20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-js mb-2",children:"Zadanie"}),e.jsx("p",{className:"text-gray-300 text-base",children:s.task})]})]})]}),e.jsxs("div",{ref:g,className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsx("div",{className:"h-[500px] relative rounded-lg overflow-hidden border border-js/10",children:e.jsx(nr,{height:"100%",defaultLanguage:"javascript",value:c,onChange:E,onMount:f,options:z(k({},J),{fontSize:16,lineHeight:26}),className:"w-full"})}),e.jsx("button",{onClick:W,disabled:v||!w,className:`mt-4 w-full px-6 py-3 rounded-lg font-medium transition-colors ${v||!w?"bg-gray-500 cursor-not-allowed":"bg-js text-dark hover:bg-js/90"}`,children:v?"Wykonywanie...":"Uruchom kod"})]}),d&&e.jsx(m.div,{ref:S,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-6",children:e.jsx(ii,{type:x?"hint":"error",message:x?"Świetnie! Rozwiązanie jest poprawne.":s.error,explanation:x||p==null?void 0:p.explanation,code:x||p==null?void 0:p.example})})]})});ri.displayName="AsyncQuestGame";const re=r.memo(({category:s,stats:t})=>{const a=()=>{switch(s){case"promises":return O;case"async-await":return lr;case"callbacks":return or}},i=()=>{switch(s){case"promises":return"Promises";case"async-await":return"Async/Await";case"callbacks":return"Callbacks"}},n=a(),o=t.correct/t.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:i()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.correct,"/",t.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});re.displayName="CategoryProgress";const ni=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=ve();r.useEffect(()=>{c(s)},[s,c]);const l=d=>{const u=Math.floor(d/60),x=d%60;return`${u}:${x.toString().padStart(2,"0")}`};return e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:i===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",i,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:l(t)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),e.jsx(re,{category:"promises",stats:n.promises}),e.jsx(re,{category:"async-await",stats:n["async-await"]}),e.jsx(re,{category:"callbacks",stats:n.callbacks})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});ni.displayName="AsyncQuestSummary";const oi=r.memo(({isGameOver:s,gameStats:t,finalTime:a,currentChallenge:i,gameContent:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>e.jsx(B,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:e.jsx(ni,{score:t.score,timeElapsed:a,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(m.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:e.jsx(ri,{currentChallenge:i,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})}));oi.displayName="GameContent";const li=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(re,{category:"promises",stats:s.categoryStats.promises}),e.jsx(re,{category:"async-await",stats:s.categoryStats["async-await"]}),e.jsx(re,{category:"callbacks",stats:s.categoryStats.callbacks})]})]})});li.displayName="AsyncQuestStats";const ci=r.memo(({isGameStarted:s,isGameOver:t,gameStats:a,onGameStart:i})=>{const{gameContent:n}=si();return s?e.jsx(li,{stats:a,isGameOver:t,finalTime:a.timeElapsed}):n?e.jsx(ue,{gameContent:n,onStart:i}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-purple-200",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",onClick:i,children:"Rozpocznij mimo to"})]})});ci.displayName="GameHeader";const di=r.memo(()=>{const{gameContent:s,isLoading:t,error:a}=si(),{isGameStarted:i,isGameOver:n,gameStats:o,finalTime:c,currentChallenge:l,handleScoreUpdate:d,handleLevelComplete:u,handleGameOver:x,handleRestart:h,handleStartGame:p}=Bo({gameContent:s,isPaused:!1}),{pageTitle:j,pageDescription:w}=Mo();return e.jsxs("div",{className:"flex flex-col h-full text-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs(Y,{children:[e.jsx("title",{children:j}),e.jsx("meta",{name:"description",content:w})]}),e.jsx(ti,{isLoading:t,error:a,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx(ci,{isGameStarted:i,isGameOver:n,gameStats:o,onGameStart:p}),i&&e.jsx(oi,{isGameOver:n,gameStats:o,finalTime:c,currentChallenge:l,gameContent:s,onScoreUpdate:d,onLevelComplete:u,onGameOver:x,onRestart:h})]})})]})});di.displayName="AsyncQuest";const Uo=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"})),mi=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]})});mi.displayName="RegexRaiderStats";const Wo=()=>{const{data:s,isLoading:t,error:a}=ie();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="regex-raider"),[s==null?void 0:s.games]),isLoading:t,error:a}},Jo=({gameContent:s,isPaused:t})=>{const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),{timeElapsed:x,resetTimer:h,startTimer:p,stopTimer:j}=Ne({maxTime:d.maxTime,onTimeEnd:()=>{o(!0),l(x),j()},isPaused:t});r.useEffect(()=>{s!=null&&s.gameData&&u(T=>z(k({},T),{totalLevels:s.gameData.length}))},[s]),r.useEffect(()=>{n||u(T=>z(k({},T),{timeElapsed:x}))},[x,n]);const w=r.useCallback(T=>{u(v=>z(k({},v),{score:v.score+T,correctAnswers:v.correctAnswers+1}))},[]),b=r.useCallback(()=>{u(T=>{const v=T.currentLevel+1;return v>T.totalLevels&&(o(!0),l(x),j()),z(k({},T),{currentLevel:v})})},[x,j]),y=r.useCallback(()=>{u(T=>({currentLevel:1,totalLevels:T.totalLevels,score:0,timeElapsed:0,maxTime:300,correctAnswers:0})),o(!1),h(),p()},[h,p]),g=r.useCallback(()=>{o(!0),l(x),j()},[x,j]),S=r.useCallback(()=>{i(!0),p()},[p]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:b,handleRestart:y,handleStartGame:S,handleGameOver:g}},xi=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),t=r.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a}},ui=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(m.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(xe,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(m.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(X,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:t.message})]})}):e.jsx(e.Fragment,{children:a}));ui.displayName="LoadingErrorContainer";const pi=r.memo(({pattern:s,explanation:t,example:a})=>e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(be,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:t}),s&&e.jsx("div",{className:"font-mono text-sm bg-dark-900/50 p-2 rounded text-js",children:s}),a&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Przykład: ",e.jsx("span",{className:"text-gray-400",children:a})]})]})]})}));pi.displayName="RegexRaiderHint";const hi=r.memo(({onScoreUpdate:s,onLevelComplete:t,currentLevel:a,onGameOver:i})=>{const{data:n}=ie(),o=n==null?void 0:n.games.find(b=>b.slug==="regex-raider"),[c,l]=r.useState(""),[d,u]=r.useState([]),[x,h]=r.useState(null);if(!o)return null;const p=o.gameData[a-1],j=r.useCallback(b=>{const y=b.target.value;l(y),h(null);try{const g=new RegExp(y,"g"),S=p.text.match(g)||[];u(S)}catch(g){u([])}},[p]),w=r.useCallback(()=>{try{const b=p.text.match(new RegExp(c,"g"))||[],y=p.text.match(new RegExp(p.correctRegex,"g"))||[],g=b.length===y.length&&b.every(S=>y.includes(S));h(g),g?(s(10),setTimeout(()=>{t(),l(""),u([]),h(null)},1500)):setTimeout(()=>{i()},1500)}catch(b){h(!1),setTimeout(()=>{i()},1500)}},[c,p,s,t,i]);return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Zadanie:"}),e.jsx("div",{className:"text-lg text-js mb-4",children:p.task}),e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Tekst:"}),e.jsx("div",{className:"font-mono bg-dark-900/50 p-4 rounded-lg text-gray-300",children:p.text})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:c,onChange:j,placeholder:"Wpisz wyrażenie regularne...",style:{backgroundColor:"#1a1a1a"},className:"bg-dark-900 flex-1 border border-js/10 rounded-lg px-4 py-2 text-js font-mono placeholder-yellow-500"}),e.jsx("button",{onClick:w,className:"px-6 py-2 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Sprawdź"})]}),d.length>0&&e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-dark-900/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Znalezione dopasowania:"}),e.jsx("div",{className:"space-y-1",children:d.map((b,y)=>e.jsx("div",{className:"font-mono text-js",children:b},y))})]}),x!==null&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${x?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsx("p",{className:`text-sm ${x?"text-green-400":"text-red-400"}`,children:x?"Świetnie! Wyrażenie regularne jest poprawne!":"Wyrażenie nie znajduje wszystkich wymaganych dopasowań."})}),x===!1&&e.jsx(pi,{pattern:p.correctRegex,explanation:"Niepoprawne wyrażenie regularne. Gra zostanie zakończona...",example:`Poprawne wyrażenie: ${p.correctRegex}`})]})]})});hi.displayName="RegexRaiderGame";const ji=r.memo(({score:s,timeElapsed:t,correctAnswers:a,totalLevels:i,onRestart:n})=>{const{updatePoints:o}=ve();r.useEffect(()=>{o(s)},[s,o]);const c=l=>{const d=Math.floor(l/60),u=l%60;return`${d}:${u.toString().padStart(2,"0")}`};return e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Rozwiązane zadania"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[a,"/",i]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas gry"}),e.jsx("div",{className:"text-lg font-bold text-js",children:c(t)})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:n,className:"px-6 py-3 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})})]})});ji.displayName="RegexRaiderSummary";const yi=r.memo(({isGameOver:s,gameStats:t,finalTime:a,onScoreUpdate:i,onLevelComplete:n,onGameOver:o,onRestart:c})=>{const{gameAnimation:l,summaryAnimation:d}=xi();return e.jsx(B,{mode:"wait",children:s?e.jsx(m.div,{initial:d.initial,animate:d.animate,exit:d.exit,transition:d.transition,children:e.jsx(ji,{score:t.score,timeElapsed:a,correctAnswers:t.correctAnswers,totalLevels:t.totalLevels,onRestart:c})},"game-over"):e.jsx(m.div,{initial:l.initial,animate:l.animate,exit:l.exit,transition:l.transition,className:"w-full",children:e.jsx(hi,{onScoreUpdate:i,onLevelComplete:n,currentLevel:t.currentLevel,onGameOver:o})},`level-${t.currentLevel}`)})});yi.displayName="GameContent";const gi=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=Wo(),{containerAnimation:n}=xi(),{pageTitle:o,pageDescription:c}=Wa(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:x,handleScoreUpdate:h,handleLevelComplete:p,handleRestart:j,handleStartGame:w,handleGameOver:b}=Jo({gameContent:t,isPaused:s});return e.jsx(ui,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(m.div,z(k({},n),{className:"w-full space-y-6",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(mi,{stats:x,isGameOver:d,finalTime:u}),e.jsx(yi,{isGameOver:d,gameStats:x,finalTime:u,onScoreUpdate:h,onLevelComplete:p,onGameOver:b,onRestart:j})]})):e.jsx(ue,{gameContent:t,onStart:w})})})});gi.displayName="RegexRaider";const qo=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"})),fi=()=>{const{data:s,isLoading:t,error:a}=ie();return{gameContent:r.useMemo(()=>{if(!(!s||!s.games||!Array.isArray(s.games)))return s.games.find(n=>n.slug==="js-quiz")},[s]),isLoading:t,error:a}},Qo=({gameContent:s,isPaused:t})=>{var T;const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}}}),{timeElapsed:x,resetTimer:h,startTimer:p,stopTimer:j}=Ne({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{o(!0),l(x),j()},isPaused:t});r.useEffect(()=>{u(v=>z(k({},v),{timeElapsed:x}))},[x]),r.useEffect(()=>{if(!(s!=null&&s.gameData))return;const v={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};s.gameData.forEach(N=>{const f=N.category;f&&v[f]&&(v[f].total++,v[f].points+=N.points||0)}),u(N=>z(k({},N),{totalLevels:s.gameData.length,maxTime:s.estimatedTime?s.estimatedTime*60:300,categoryStats:v}))},[s]);const w=r.useCallback((v,N)=>{u(f=>z(k({},f),{score:f.score+v,correctAnswers:f.correctAnswers+1,categoryStats:z(k({},f.categoryStats),{[N]:f.categoryStats[N]?z(k({},f.categoryStats[N]),{correct:f.categoryStats[N].correct+1}):{total:0,correct:1,points:v}})}))},[]),b=r.useCallback(()=>{var N;const v=d.currentLevel+1;if(v>(((N=s==null?void 0:s.gameData)==null?void 0:N.length)||0)){o(!0),l(x),j();return}u(f=>z(k({},f),{currentLevel:v}))},[d.currentLevel,x,(T=s==null?void 0:s.gameData)==null?void 0:T.length,j]),y=r.useCallback(()=>{if(!(s!=null&&s.gameData))return;const v={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};s.gameData.forEach(N=>{const f=N.category;f&&v[f]&&(v[f].total++,v[f].points+=N.points||0)}),u({currentLevel:1,totalLevels:s.gameData.length,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:v}),o(!1),l(0),h(),p()},[h,p,s]),g=r.useCallback(()=>{i(!0),p()},[p]),S=r.useCallback(()=>{o(!0),l(x),j()},[x,j]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:b,handleRestart:y,handleStartGame:g,handleGameOver:S}},Ko=({title:s,description:t,gameName:a="JS Quiz"}={})=>{const i=r.useMemo(()=>s||`${a} - Quiz JavaScript | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`Sprawdź swoją wiedzę z JavaScript w quizie ${a}. Odpowiadaj na pytania i zdobywaj punkty za poprawne odpowiedzi.`,[t,a]);return{pageTitle:i,pageDescription:n}},bi=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:e.jsx(xe,{})}),e.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie gry..."})]}):t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(X,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:t.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-js/80",children:"Gra niedostępna"})}));bi.displayName="LoadingErrorContainer";const wi=s=>{switch(s){case"basics":return O;case"advanced":return dr;case"frameworks":return cr;default:return O}},Ni=s=>{switch(s){case"basics":return"Podstawy JavaScript";case"advanced":return"Zaawansowany JS";case"frameworks":return"Frameworki JS"}},Zo=s=>{switch(s){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400"}},Vo=s=>{switch(s){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},vi=r.memo(({currentLevel:s,totalLevels:t})=>{const a=s/t*100;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-1 text-sm text-gray-400",children:[e.jsxs("span",{children:["Pytanie ",s," z ",t]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(m.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5}})})]})});vi.displayName="JSQuizProgress";const cs=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}}),[]),t=r.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}}),[]),i=r.useMemo(()=>({initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a,optionAnimation:i}},ki=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(null),[d,u]=r.useState(!1),[x,h]=r.useState(null),{optionAnimation:p}=cs(),j=r.useCallback(y=>{l(y);const g=y===s.correct;h(g),u(!0),g?(t(s.points||10,s.category),setTimeout(()=>{a(),l(null),u(!1),h(null)},1500)):setTimeout(()=>{o()},2e3)},[s,t,a,o]),w=r.useCallback(y=>{!d&&y<s.options.length&&j(s.options[y])},[d,s.options,j]);Ia({onNumber1:()=>w(0),onNumber2:()=>w(1),onNumber3:()=>w(2),onNumber4:()=>w(3),disabled:d});const b=wi(s.category)||O;return e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(vi,{currentLevel:i,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(b,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Ni(s.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Zo(s.difficulty)}`,children:Vo(s.difficulty)})]}),e.jsx("div",{className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:s.question})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.options.map((y,g)=>e.jsxs(m.button,z(k({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(y),disabled:d,className:`
              w-full
              relative p-4 rounded-lg font-medium text-left transition-colors
              ${c===y?x?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `},p),{transition:z(k({},p.transition),{delay:g*.1}),children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:g+1}),y]}),y))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-4) aby wybrać odpowiedź"}),d&&e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${x?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${x?"text-green-400":"text-red-400"}`,children:[x?"Świetnie! ":"Spróbuj jeszcze raz. ",s.explanation]})})]},i)});ki.displayName="JSQuizGame";const Si=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=ve();r.useEffect(()=>{c(s)},[s,c]);const l=x=>{const h=Math.floor(x/60),p=x%60;return`${h}:${p<10?"0":""}${p}`},d=(x,h)=>h>0?Math.round(x/h*100):0,u=()=>n?Object.entries(n).filter(([x,h])=>h&&typeof h=="object").map(([x,h])=>{const p=wi(x),j=d(h.correct||0,h.total||0);return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-js"}),e.jsx("h3",{className:"text-lg font-medium",children:Ni(x)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsxs("span",{children:["Poprawne: ",h.correct||0,"/",h.total||0]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(m.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5,delay:.5}})})]},x)}):null;return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Quizu!"}),e.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",s," punktów, odpowiadając poprawnie na ",i," z"," ",(a==null?void 0:a.length)||0," pytań."]})]}),e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(ee,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-2xl font-bold",children:s})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(me,{className:"text-3xl text-green-400 mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),e.jsxs("div",{className:"text-2xl font-bold",children:[i,"/",(a==null?void 0:a.length)||0]})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(I,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),e.jsx("div",{className:"text-2xl font-bold",children:l(t)})]})]}),e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u()})]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:e.jsxs("button",{onClick:o,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[e.jsx(mr,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})});Si.displayName="JSQuizSummary";const zi=r.memo(({isGameOver:s,gameStats:t,currentChallenge:a,finalTime:i,gameContent:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>{const{gameAnimation:u,summaryAnimation:x}=cs();return!a&&!s?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})}):e.jsx(B,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(m.div,{initial:x.initial,animate:x.animate,exit:x.exit,transition:x.transition,children:e.jsx(Si,{score:t.score,timeElapsed:i,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(m.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:a&&e.jsx(ki,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})})});zi.displayName="GameContent";const Li=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l<10?"0":""}${l}`},n=t?a:s.timeElapsed;return e.jsx("div",{className:"w-full p-4 bg-dark-800/50 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(m.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx(ee,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"font-semibold",children:s.score})]})]}),e.jsxs(m.div,{className:"flex items-center gap-2 text-green-400",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(me,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne"}),e.jsxs("div",{className:"font-semibold",children:[s.correctAnswers," / ",s.totalLevels]})]})]}),e.jsxs(m.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(I,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Czas"}),e.jsx("div",{className:"font-semibold",children:i(n)})]})]})]})})});Li.displayName="JSQuizStats";const Qe=r.memo(({isGameStarted:s,isGameOver:t,gameStats:a,onGameStart:i})=>{const{gameContent:n}=fi();return s?e.jsx(Li,{stats:a,isGameOver:t,finalTime:a.timeElapsed}):n?e.jsx(ue,{gameContent:n,onStart:i}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-js/80",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-js/80 hover:bg-js text-white rounded-md transition-colors",onClick:i,children:"Rozpocznij mimo to"})]})});Qe.displayName="GameHeader";const Ti=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=fi(),{containerAnimation:n}=cs(),{pageTitle:o,pageDescription:c}=Ko(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:x,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:w,handleStartGame:b,handleGameOver:y}=Qo({gameContent:t,isPaused:s});return e.jsx(bi,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(m.div,z(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(Qe,{isGameStarted:l,isGameOver:d,gameStats:x,onGameStart:b}),e.jsx(zi,{isGameOver:d,gameStats:x,currentChallenge:h,finalTime:u,gameContent:t,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:w})]})):e.jsx(Qe,{isGameStarted:l,isGameOver:d,gameStats:x,onGameStart:b})})})});Ti.displayName="JSQuiz";const Xo=Object.freeze(Object.defineProperty({__proto__:null,default:Ti},Symbol.toStringTag,{value:"Module"}));export{cl as C,dl as D,jl as G,ul as L,fl as R,xl as S,ml as a,pl as b,hl as c,yl as d,gl as e};
