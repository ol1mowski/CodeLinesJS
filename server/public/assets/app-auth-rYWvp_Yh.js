var e=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,i=(e,s)=>{for(var r in s||(s={}))a.call(s,r)&&n(e,r,s[r]);if(t)for(var r of t(s))o.call(s,r)&&n(e,r,s[r]);return e},l=(e,t)=>s(e,r(t)),c=(e,s,r)=>new Promise(((t,a)=>{var o=e=>{try{i(r.next(e))}catch(s){a(s)}},n=e=>{try{i(r.throw(e))}catch(s){a(s)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);i((r=r.apply(e,s)).next())}));import{r as d,u as m,j as u,F as p,a as h,b as w,L as x,c as j,d as g,e as y,f,G as b,g as v,h as k,i as z,k as N,l as S}from"./vendor-react-Cw9RnQGa.js";import{P as E,C as P,S as M,F as I,E as A,a as _,B as C,b as L,c as T}from"./app-components-VI6UDmgj.js";import{P as O,T as W,M as H,C as R,a as B,S as G,b as $,W as U,G as Z,A as q,z as F,t as J}from"./vendor-other-Cmb2Om4X.js";import{m as D,A as V}from"./vendor-framer-motion-DGcJXQWx.js";const X={},Y=function(e,s,r){let t=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));t=Promise.allSettled(s.map((e=>{if((e=function(e){return"/"+e}(e))in X)return;X[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":"modulepreload",s||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),s?new Promise(((s,r)=>{a.addEventListener("load",s),a.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return t.then((s=>{for(const e of s||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))},K="https://codelinesjs.pl/api/",Q={request(e){return c(this,arguments,(function*(e,s={}){try{const{method:t="GET",headers:a={},body:o,requiresAuth:n=!1}=s,l=`${K.replace("www.","")}${e}`,c=i({"Content-Type":"application/json",Accept:"application/json"},a);if(n){const e=localStorage.getItem("token")||sessionStorage.getItem("token");e&&(c.Authorization=`Bearer ${e}`)}const d={method:t,headers:c,mode:"cors"};o&&(d.body=JSON.stringify(o));const m=yield fetch(l,d);let u=null,p=null;try{const e=yield m.text();e&&(u=JSON.parse(e))}catch(r){p="Nieprawidłowa odpowiedź serwera"}return m.ok||(p=(null==u?void 0:u.message)||(null==u?void 0:u.error)||`Błąd ${m.status}: ${m.statusText}`,u=null),{data:u,error:p,status:m.status}}catch(r){return{data:null,error:r instanceof Error?r.message:"Nieznany błąd zapytania",status:0}}}))},get(e){return c(this,arguments,(function*(e,s={}){return this.request(e,l(i({},s),{method:"GET"}))}))},post(e,s){return c(this,arguments,(function*(e,s,r={}){return this.request(e,l(i({},r),{method:"POST",body:s}))}))},put(e,s){return c(this,arguments,(function*(e,s,r={}){return this.request(e,l(i({},r),{method:"PUT",body:s}))}))},delete(e){return c(this,arguments,(function*(e,s={}){return this.request(e,l(i({},s),{method:"DELETE"}))}))},patch(e,s){return c(this,arguments,(function*(e,s,r={}){return this.request(e,l(i({},r),{method:"PATCH",body:s}))}))}},ee=e=>{const s=(e=>{const s=m(),{setLoading:r,setError:t,setIsAuthenticated:a,setUser:o}=e;return(e,n,i=!1)=>c(void 0,null,(function*(){try{r(!0),t(null);const l=yield Q.post("auth/login",{email:e,password:n,rememberMe:i});if(l.error)throw new Error(l.error);if(!l.data)throw new Error("Nieznany błąd logowania. Spróbuj ponownie później.");const{token:c,user:d}=l.data;i?localStorage.setItem("token",c):sessionStorage.setItem("token",c),o&&d&&o(d),a(!0),s("/dashboard")}catch(l){t(l instanceof Error?l.message:"Wystąpił błąd podczas logowania"),a(!1)}finally{r(!1)}}))})(e),r=(e=>{const s=m(),{setLoading:r,setError:t,setIsAuthenticated:a,setUser:o}=e;return(e,n,i)=>c(void 0,null,(function*(){try{r(!0),t(null);const l=yield Q.post("auth/register",{email:e,password:n,username:i});if(l.error)throw new Error(l.error);if(!l.data)throw new Error("Nieznany błąd rejestracji. Spróbuj ponownie później.");const{token:c,user:d}=l.data;sessionStorage.setItem("token",c),o&&d&&o(d),a(!0),s("/dashboard")}catch(l){t(l instanceof Error?l.message:"Wystąpił błąd podczas rejestracji"),a(!1)}finally{r(!1)}}))})(e),t=(e=>{const{setLoading:s,setError:r}=e;return e=>c(void 0,null,(function*(){var t;try{s(!0),r(null);const a=yield Q.post("auth/forgot-password",{email:e});if(a.error)throw new Error(a.error);return(null==(t=a.data)?void 0:t.message)||"Link do resetowania hasła został wysłany na Twój adres email."}catch(a){if(a instanceof Error)throw r(a.message),a;{const e="Wystąpił błąd podczas wysyłania linku resetującego hasło";throw r(e),new Error(e)}}finally{s(!1)}}))})(e),a=(e=>{const s=m(),{setIsAuthenticated:r,setUser:t}=e;return()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),r(!1),t(null),s("/")}})(e),o=(e=>{const s=m(),{setLoading:r,setError:t,setIsAuthenticated:a,setUser:o}=e;return(e,n=!1)=>c(void 0,null,(function*(){try{if(r(!0),t(null),!e.credential)return t("Nie udało się uzyskać tokenu uwierzytelniającego z Google. Spróbuj ponownie."),void a(!1);const i=yield Q.post("auth/google-login",{credential:e.credential,rememberMe:n});if(i.error)throw new Error(i.error);if(!i.data)throw new Error("Nieznany błąd logowania przez Google. Spróbuj ponownie później.");const{token:l,user:c}=i.data;n?localStorage.setItem("token",l):sessionStorage.setItem("token",l),o&&c&&o(c),a(!0),s("/dashboard")}catch(i){t(i instanceof Error?i.message:"Wystąpił błąd podczas logowania przez Google"),a(!1)}finally{r(!1)}}))})(e),n=(e=>{const s=m(),{setLoading:r,setError:t}=e;return(e,a,o)=>c(void 0,null,(function*(){var n;try{if(!e||e.length<10)throw new Error("Nieprawidłowy token resetowania hasła. Sprawdź, czy link jest poprawny.");if(a!==o)throw new Error("Hasła nie są identyczne. Upewnij się, że oba pola zawierają to samo hasło.");r(!0),t(null);const i=yield Q.post("auth/reset-password",{token:e,password:a,confirmPassword:o});if(i.error)throw new Error(i.error);return setTimeout((()=>{s("/logowanie")}),3e3),(null==(n=i.data)?void 0:n.message)||"Hasło zostało pomyślnie zmienione. Za chwilę zostaniesz przekierowany do strony logowania."}catch(i){if(i instanceof Error)throw t(i.message),i;{const e="Wystąpił nieznany błąd podczas resetowania hasła";throw t(e),new Error(e)}}finally{r(!1)}}))})(e);return{login:s,register:r,forgotPassword:t,logout:a,loginWithGoogle:o,resetPassword:n}},se=()=>{const e=(()=>{const[e,s]=d.useState(!1),[r,t]=d.useState(null),[a,o]=d.useState(!1),[n,i]=d.useState(!0),[l,c]=d.useState(null);return{loading:e,setLoading:s,error:r,setError:t,isAuthenticated:a,setIsAuthenticated:o,isLoading:n,setIsLoading:i,user:l,setUser:c}})(),s=ee(e),r=m(),[t,a]=d.useState(!0);d.useEffect((()=>{c(void 0,null,(function*(){try{a(!0);const r=localStorage.getItem("token")||sessionStorage.getItem("token");if(!r)return void e.setIsAuthenticated(!1);const t=K.replace("www.",""),o=yield fetch(`${t}auth/verify`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"},mode:"cors"});if(429===o.status)throw new Error("Zbyt wiele prób weryfikacji. Spróbuj ponownie za chwilę.");let n;try{const e=yield o.text();if(!e)throw new Error("Pusta odpowiedź serwera");n=JSON.parse(e)}catch(s){throw new Error("Nieprawidłowa odpowiedź serwera")}if(!o.ok)throw new Error(n.error||"Nieznany błąd weryfikacji tokenu");e.setUser(n.user),e.setIsAuthenticated(!0)}catch(r){e.setError(r instanceof Error?r.message:"Wystąpił błąd podczas weryfikacji tokenu"),e.setIsAuthenticated(!1),localStorage.removeItem("token"),sessionStorage.removeItem("token")}finally{a(!1)}}))}),[]);return l(i({},e),{isAuthChecking:t,logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),e.setIsAuthenticated(!1),e.setUser(null),r("/")},login:s.login,register:s.register,loginWithGoogle:s.loginWithGoogle,forgotPassword:s.forgotPassword,resetPassword:s.resetPassword,token:localStorage.getItem("token")||sessionStorage.getItem("token")})},re=()=>{const e=d.useRef(null),s=(e=>{const s=d.useRef(null),r=d.useRef({x:0,y:0}),t=d.useRef(),a=d.useMemo((()=>100),[]),o=d.useMemo((()=>[new O("#f7df1e",2),new O("#f7df1e",2),new O("#f7df1e",2)]),[]),n=d.useCallback((()=>{const e=new W(.5,0),s=new H({color:new R("#f7df1e").multiplyScalar(.5),emissive:new R("#f7df1e").multiplyScalar(.3),emissiveIntensity:.5,transparent:!0,opacity:.8,shininess:90});return new B(e,s)}),[]),i=d.useCallback((s=>{var t;const a=null==(t=e.current)?void 0:t.getBoundingClientRect();a&&(r.current={x:(s.clientX-a.left)/a.width*2-1,y:-(s.clientY-a.top)/a.height*2+1})}),[]),l=d.useCallback(((s,r)=>{if(!e.current)return;const{width:t,height:a}=e.current.getBoundingClientRect();s.setSize(t,a),r.aspect=t/a,r.updateProjectionMatrix()}),[]);return d.useEffect((()=>{if(!s.current||!e.current)return;const c=new G,d=new $(75,1,.1,1e3),m=new U({canvas:s.current,alpha:!0,antialias:!0,powerPreference:"high-performance"});m.setClearColor(0,0);const u=new Z,p=[];for(let e=0;e<a;e++){const e=n();e.position.set(50*(Math.random()-.5),50*(Math.random()-.5),50*(Math.random()-.5)),e.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),p.push(e),u.add(e)}c.add(u),o.forEach(((e,s)=>{e.position.set(30*Math.cos(s*Math.PI*2/3),30*Math.sin(s*Math.PI*2/3),15),c.add(e)})),c.add(new q("#ffffff",.5)),d.position.z=30;const h=()=>{t.current=requestAnimationFrame(h),p.forEach(((e,s)=>{const r=.001*Date.now()+s;e.position.y+=.02*Math.sin(.5*r),e.rotation.x+=.01,e.rotation.y+=.01,e.rotation.z+=.01})),u.rotation.y+=.001,u.rotation.x=.2*r.current.y,u.rotation.z=.2*r.current.x,m.render(c,d)},w=()=>l(m,d);return window.addEventListener("mousemove",i),window.addEventListener("resize",w),w(),h(),()=>{t.current&&cancelAnimationFrame(t.current),window.removeEventListener("mousemove",i),window.removeEventListener("resize",w),m.dispose(),c.clear()}}),[a,o,n,i,l]),s})(e);return u.jsxs(u.Fragment,{children:[u.jsx(D.div,{ref:e,initial:{opacity:0},animate:{opacity:.3},className:"absolute inset-0 pointer-events-none",children:u.jsx("canvas",{ref:s,className:"w-full h-full"})}),u.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute -top-20 -left-20 w-96 h-96 bg-[#f7df1e]/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute -bottom-40 -right-20 w-[30rem] h-[30rem] bg-[#f7df1e]/5 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[40rem] h-[40rem] bg-[#1a1a1a]/50 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute inset-0 bg-[url('/grid-pattern.svg')] bg-center opacity-5"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a1a1a]/0 via-[#1a1a1a]/0 to-[#1a1a1a]/80"})]})]})},te=()=>u.jsx("div",{className:"hidden md:block",children:u.jsx(E,{position:"left",title:"CodeLinesJS App",className:"transform scale-90"})}),ae=({text:e})=>u.jsx("div",{className:"flex items-center justify-center md:justify-start bg-[#f7df1e]/10 rounded-lg p-3",children:u.jsxs("span",{className:"text-[#f7df1e] font-medium",children:["✓ ",e]})}),oe=()=>u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsx(ae,{text:"Interaktywne lekcje"}),u.jsx(ae,{text:"Wyzwania i gry"}),u.jsx(ae,{text:"Śledzenie postępów"}),u.jsx(ae,{text:"Społeczność"})]}),ne=()=>u.jsxs("div",{className:"text-center md:text-left max-w-xl",children:[u.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:["Odkryj ",u.jsx("span",{className:"text-[#f7df1e]",children:"JavaScript"})," w nowy sposób"]}),u.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-8",children:"Ucz się, programuj i baw się jednocześnie. Nasza platforma łączy teorię z praktyką, oferując interaktywne lekcje, wyzwania i gry."}),u.jsx(oe,{})]}),ie=()=>u.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full md:w-3/5 flex flex-col md:flex-row items-center gap-6 md:gap-12 pr-0 md:pr-8",children:[u.jsx(te,{}),u.jsx(ne,{})]}),le=({activeTab:e,onTabChange:s})=>u.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[u.jsx(ce,{isActive:"login"===e,onClick:()=>s("login"),icon:u.jsx(p,{}),label:"Logowanie"}),u.jsx(ce,{isActive:"register"===e,onClick:()=>s("register"),icon:u.jsx(h,{}),label:"Rejestracja"}),u.jsx(ce,{isActive:"forgot"===e,onClick:()=>s("forgot"),icon:u.jsx(w,{}),label:"Reset hasła"})]}),ce=({isActive:e,onClick:s,icon:r,label:t})=>u.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"flex flex-col items-center gap-2 p-3 rounded-lg transition-colors "+(e?"bg-js/20 text-js":"text-gray-400 hover:text-js"),children:[r,u.jsx("span",{className:"text-sm font-medium",children:t})]}),de=d.lazy((()=>Y((()=>Promise.resolve().then((()=>Me))),void 0))),me=d.lazy((()=>Y((()=>Promise.resolve().then((()=>Ae))),void 0))),ue=d.lazy((()=>Y((()=>Promise.resolve().then((()=>_e))),void 0))),pe=()=>{const[e,s]=d.useState("login");return u.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md bg-dark/30 backdrop-blur-xl rounded-2xl p-8 border border-js/20 shadow-xl shadow-black/20",role:"main","aria-label":"Formularz autoryzacji",children:[u.jsxs("div",{className:"flex flex-col justify-center items-center mb-6",children:[u.jsx("span",{className:"block text-2xl bg-[#f7df1e] text-black px-2 py-1 rounded",children:"JS"}),u.jsx("h2",{className:"mt-2 text-xl font-bold text-js",children:"CodeLinesJS"})]}),u.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-center text-js mb-6",children:["login"===e&&"Zaloguj się","register"===e&&"Dołącz do nas","forgot"===e&&"Odzyskaj hasło"]}),u.jsx(le,{activeTab:e,onTabChange:s}),u.jsx(d.Suspense,{fallback:u.jsx("div",{className:"text-center py-4",children:"Ładowanie..."}),children:u.jsxs(V,{mode:"wait",children:["login"===e&&u.jsx(de,{},"login"),"register"===e&&u.jsx(me,{},"register"),"forgot"===e&&u.jsx(ue,{},"forgot")]})}),u.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:u.jsxs("p",{children:["Logując się, akceptujesz ",u.jsx(x,{to:"/polityka-prywatnosci",className:"text-js hover:underline",children:"Politykę Prywatności"}),"."]})})]})},he=({children:e,title:s,subtitle:r})=>u.jsxs("div",{className:"w-full md:w-2/5 flex justify-center md:justify-end relative mt-12 md:mt-0",children:[u.jsx("div",{className:"absolute -z-10 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-[#f7df1e]/10 rounded-full blur-3xl"}),e?u.jsxs("div",{className:"w-full max-w-md bg-dark/30 backdrop-blur-xl rounded-2xl p-8 border border-js/20",children:[u.jsxs("div",{className:"flex flex-col justify-center items-center mb-8",children:[u.jsx("span",{className:"block text-2xl bg-[#f7df1e] text-black px-2 py-1 rounded",children:"JS"}),u.jsx("h2",{className:"mt-2 text-xl font-bold text-js",children:"CodeLinesJS"})]}),s&&u.jsx("h1",{className:"text-3xl font-bold text-center text-js mb-4",children:s}),r&&u.jsx("p",{className:"text-center text-gray-400 mb-8",children:r}),e]}):u.jsx(pe,{})]}),we=({children:e,title:s,subtitle:r}={})=>u.jsxs("main",{className:"min-h-screen w-full relative bg-gradient-to-b from-[#1a1a1a] via-[#242424] to-[#1a1a1a] flex items-center justify-center py-16 overflow-hidden",children:[u.jsx(P,{className:"relative z-10",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8 md:gap-20 w-full max-w-7xl mx-auto",children:[u.jsx(ie,{}),u.jsx(he,{children:e,title:s,subtitle:r})]})}),u.jsx(re,{})]}),xe=()=>{const[e,s]=d.useState(!1);return{isVisible:e,toggleVisibility:()=>s((e=>!e)),inputType:e?"text":"password"}},je=({errorMessage:e})=>u.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[u.jsx(j,{className:"mr-2 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),u.jsx("p",{children:e||"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),u.jsxs("div",{className:"text-center mt-6",children:[u.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło:"}),u.jsx(x,{to:"/logowanie",className:"text-js hover:underline",children:"Wróć do strony logowania"})]})]}),ge=({message:e})=>e?u.jsxs(u.Fragment,{children:[u.jsx(M,{message:e,title:"Hasło zostało zmienione"}),u.jsxs("div",{className:"text-center mt-4",children:[u.jsx("p",{className:"text-gray-400 mb-2",children:"Za chwilę zostaniesz przekierowany do strony logowania."}),u.jsx(x,{to:"/logowanie",className:"text-js hover:underline",children:"Przejdź do logowania"})]})]}):null,ye=F.object({email:F.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email"),password:F.string().min(1,"Hasło jest wymagane"),rememberMe:F.boolean().optional()}),fe=F.object({username:F.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika nie może przekraczać 20 znaków").regex(/^[a-zA-Z0-9_]+$/,"Nazwa użytkownika może zawierać tylko litery, cyfry i podkreślenia"),email:F.string().email("Nieprawidłowy format adresu email"),password:F.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:F.string(),acceptPrivacy:F.boolean().refine((e=>!0===e),{message:"Musisz zaakceptować politykę prywatności"})}).refine((e=>e.password===e.confirmPassword),{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),be=F.object({email:F.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email")}),ve=F.object({password:F.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:F.string()}).refine((e=>e.password===e.confirmPassword),{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),ke=({initialError:e=null}={})=>{const[s,r]=d.useState(null),[t,a]=d.useState(e);d.useEffect((()=>{null!=e&&a(e)}),[e]);const o=e=>{a(e),r(null)};return{successMessage:s,errorMessage:t,setSuccess:e=>{r(e),a(null)},setError:o,handleError:e=>{let s="";return s=e instanceof Error?e.message:"string"==typeof e?e:"Wystąpił nieznany błąd. Spróbuj ponownie później.",o(s),s},resetStatus:()=>{r(null),a(null)},hasSuccess:!!s,hasError:!!t}},ze=()=>{var e,s;const{register:r,errors:t,loading:a,handleSubmit:o,errorMessage:n,successMessage:l,tokenError:m}=(()=>{const{token:e}=g(),{resetPassword:s,loading:r,error:t}=se(),a=ke({initialError:t}),[o,n]=d.useState(!1),{register:l,handleSubmit:m,formState:{errors:u},reset:p}=y({resolver:J(ve),mode:"onSubmit"});return d.useEffect((()=>{e?e.length<10&&(n(!0),a.setError("Token resetowania hasła jest nieprawidłowy. Sprawdź, czy link jest poprawny.")):(n(!0),a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny."))}),[e,a]),i({register:l,errors:u,loading:r,tokenError:o,handleSubmit:m((r=>c(void 0,null,(function*(){if(e)try{a.resetStatus();const t=yield s(e,r.password,r.confirmPassword);a.setSuccess(t),p()}catch(t){const e=a.handleError(t);"string"==typeof e&&(e.includes("token")||e.includes("Token")||e.includes("wygasł"))&&n(!0)}else a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny.")}))))},a)})();return m?u.jsx(je,{errorMessage:n}):u.jsxs(I,{onSubmit:o,children:[n&&u.jsx(A,{message:n,title:"Błąd resetowania hasła"}),u.jsx(ge,{message:l}),!l&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Wprowadź nowe hasło dla swojego konta. Hasło musi zawierać co najmniej 8 znaków, w tym jedną wielką literę, jedną małą literę i jedną cyfrę."}),u.jsx(_,i({label:"Nowe hasło",error:null==(e=t.password)?void 0:e.message},r("password"))),u.jsx(_,i({label:"Potwierdź nowe hasło",error:null==(s=t.confirmPassword)?void 0:s.message},r("confirmPassword"))),u.jsx(C,{type:"submit",className:"w-full",disabled:a,children:a?"Resetowanie hasła...":"Zresetuj hasło"})]})]})},Ne=()=>u.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[u.jsx(j,{className:"mr-2 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),u.jsx("p",{children:"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),u.jsxs("div",{className:"text-center mt-6",children:[u.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło na stronie logowania:"}),u.jsxs(x,{to:"/logowanie",className:"inline-flex items-center text-js hover:underline",children:[u.jsx(f,{className:"mr-2"})," Wróć do strony logowania"]})]})]}),Se=Object.freeze(Object.defineProperty({__proto__:null,ResetPasswordPage:()=>{const{token:e}=g();return e?u.jsx(we,{title:"Resetowanie hasła",subtitle:"Wprowadź nowe hasło dla swojego konta",children:u.jsx(ze,{})}):u.jsx(we,{title:"Nieprawidłowy link",subtitle:"Link do resetowania hasła jest nieprawidłowy lub wygasł.",children:u.jsx(Ne,{})})}},Symbol.toStringTag,{value:"Module"})),Ee=d.memo((({rememberMe:e})=>{const{loginWithGoogle:s}=se(),[r,t]=d.useState(null);return u.jsxs(u.Fragment,{children:[r&&u.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:r}),u.jsx("div",{className:"flex flex-col items-center",children:u.jsx(b,{onSuccess:r=>{s(r,e)},onError:()=>{t("Logowanie przez Google nie powiodło się. Spróbuj ponownie później.")},theme:"filled_black",shape:"pill",text:"continue_with",locale:"pl",useOneTap:!1,context:"signin",type:"standard",size:"large",width:"100%"})})]})}));Ee.displayName="GoogleLoginButton";const Pe=d.memo((({register:e})=>u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",i({type:"checkbox",className:"peer sr-only"},e("rememberMe"))),u.jsx("div",{className:"w-4 h-4 border border-js/30 rounded bg-dark/70 peer-checked:bg-js peer-checked:border-js transition-colors"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-black scale-0 peer-checked:scale-100 transition-transform",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),u.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Zapamiętaj mnie"})]})})));Pe.displayName="RememberMeCheckbox";const Me=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,s;const{login:r,loading:t,error:a}=se(),{register:o,handleSubmit:n,formState:{errors:m},watch:p}=y({resolver:J(ye),mode:"onSubmit"}),h=p("rememberMe",!1)||!1,[w,x]=d.useState(!1);return u.jsxs(D.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:n((e=>c(void 0,null,(function*(){yield r(e.email,e.password,e.rememberMe)})))),className:"space-y-5",children:[a&&u.jsx(L,{message:a}),u.jsx(T,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(v,{}),error:null==(e=m.email)?void 0:e.message},o("email"))),u.jsx(T,l(i({type:w?"text":"password",label:"Hasło",placeholder:"••••••••",icon:u.jsx(k,{}),error:null==(s=m.password)?void 0:s.message},o("password")),{rightIcon:u.jsx("button",{type:"button",onClick:()=>x(!w),className:"focus:outline-none text-gray-400 hover:text-js transition-colors",children:w?u.jsx(z,{}):u.jsx(N,{})})})),u.jsx("div",{className:"flex items-center justify-between",children:u.jsx(Pe,{register:o})}),u.jsx("div",{className:"pt-2",children:u.jsx(C,{type:"submit",className:"w-full bg-js hover:bg-js/90 text-black font-bold py-3 transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-js/20",disabled:t,children:t?"Logowanie...":"Zaloguj się"})}),u.jsxs("div",{className:"relative flex items-center justify-center my-4",children:[u.jsx("div",{className:"border-t border-gray-600 w-full"}),u.jsx("span",{className:"bg-dark/50 px-3 text-sm text-gray-400 absolute",children:"lub"})]}),u.jsx(Ee,{rememberMe:h})]})}},Symbol.toStringTag,{value:"Module"})),Ie=d.memo((({register:e,error:s})=>u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer group",children:[u.jsx("input",i({type:"checkbox",className:`\n          mt-1 w-4 h-4 rounded bg-dark text-js \n          transition-colors duration-200 ease-in-out\n          ${s?"border-red-500 focus:ring-red-500/20":"border-js/20 focus:ring-js/20 hover:border-js/30"}\n        `},e)),u.jsxs("span",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:["Akceptuję"," ",u.jsx(x,{to:"/polityka-prywatnosci",className:"text-js hover:text-js/80 underline transition-colors",target:"_blank",rel:"noopener noreferrer",children:"politykę prywatności"})]})]}),s&&u.jsx(D.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-red-400",children:s})]})));Ie.displayName="PrivacyPolicyCheckbox";const Ae=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,s,r,t,a;const{register:o,errors:n,loading:l,handleSubmit:d,errorMessage:m}=(()=>{const{register:e,loading:s,error:r}=se(),t=ke({initialError:r}),{register:a,handleSubmit:o,formState:{errors:n}}=y({resolver:J(fe),mode:"onChange",defaultValues:{acceptPrivacy:!1}});return i({register:a,errors:n,loading:s,handleSubmit:o((s=>c(void 0,null,(function*(){try{t.resetStatus(),yield e(s.email,s.password,s.username)}catch(r){t.handleError(r)}}))))},t)})();return u.jsxs(I,{onSubmit:d,children:[m&&u.jsx(A,{message:m,title:"Błąd rejestracji"}),u.jsx(T,i({type:"text",label:"Nazwa użytkownika",placeholder:"jankowalski",icon:u.jsx(S,{}),error:null==(e=n.username)?void 0:e.message},o("username"))),u.jsx(T,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(v,{}),error:null==(s=n.email)?void 0:s.message},o("email"))),u.jsx(_,i({label:"Hasło",error:null==(r=n.password)?void 0:r.message},o("password"))),u.jsx(_,i({label:"Potwierdź hasło",error:null==(t=n.confirmPassword)?void 0:t.message},o("confirmPassword"))),u.jsx(Ie,{register:o("acceptPrivacy"),error:null==(a=n.acceptPrivacy)?void 0:a.message}),u.jsx(C,{type:"submit",className:"w-full",disabled:l,children:l?"Rejestracja...":"Zarejestruj się"})]})}},Symbol.toStringTag,{value:"Module"})),_e=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e;const{register:s,errors:r,loading:t,handleSubmit:a,errorMessage:o,successMessage:n}=(()=>{const{forgotPassword:e,loading:s,error:r}=se(),t=ke({initialError:r}),{register:a,handleSubmit:o,reset:n,formState:{errors:l}}=y({resolver:J(be)});return i({register:a,errors:l,loading:s,handleSubmit:o((s=>c(void 0,null,(function*(){try{t.resetStatus();const r=yield e(s.email);t.setSuccess(r),n()}catch(r){t.handleError(r)}}))))},t)})();return u.jsxs(I,{onSubmit:a,children:[o&&u.jsx(A,{message:o,title:"Błąd resetowania hasła"}),n&&u.jsx(M,{message:n}),!n&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Podaj swój adres email, a wyślemy Ci link do zresetowania hasła."}),u.jsx(T,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(v,{}),error:null==(e=r.email)?void 0:e.message},s("email"))),u.jsx(C,{type:"submit",className:"w-full",disabled:t,children:t?"Wysyłanie...":"Wyślij link resetujący"})]})]})}},Symbol.toStringTag,{value:"Module"}));export{K as A,Y as _,xe as a,we as b,Se as i,se as u};
