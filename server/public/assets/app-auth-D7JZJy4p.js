var $=Object.defineProperty,q=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var T=(s,t,r)=>t in s?$(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,w=(s,t)=>{for(var r in t||(t={}))Q.call(t,r)&&T(s,r,t[r]);if(B)for(var r of B(t))X.call(t,r)&&T(s,r,t[r]);return s},k=(s,t)=>q(s,K(t));var f=(s,t,r)=>new Promise((o,a)=>{var n=c=>{try{m(r.next(c))}catch(u){a(u)}},i=c=>{try{m(r.throw(c))}catch(u){a(u)}},m=c=>c.done?o(c.value):Promise.resolve(c.value).then(n,i);m((r=r.apply(s,t)).next())});import{r as g,u as b,j as e,G as Y,a as A,F,b as ee,c as se,d as te,L as z,k as J,e as re,f as G,H as ae,g as Z,h as V,i as oe}from"./vendor-react-m4_Ig-Ll.js";import{F as E,a as S,b as C,c as W,P,A as ne,S as ie,E as le,B as ce}from"./app-components-DncMdtyB.js";import{m as y,A as me}from"./vendor-framer-motion-rEmhe2-Y.js";import{z as p,t as L}from"./vendor-other-B8OiHoQU.js";import{h as N}from"./app-services-C471PnMV.js";const de="https://codelinesjs.pl/api/",ue=()=>{const[s,t]=g.useState(!1),[r,o]=g.useState(null),[a,n]=g.useState(!1),[i,m]=g.useState(!0),[c,u]=g.useState(null);return{loading:s,setLoading:t,error:r,setError:o,isAuthenticated:a,setIsAuthenticated:n,isLoading:i,setIsLoading:m,user:c,setUser:u}},ge=s=>{const t=b(),{setLoading:r,setError:o,setIsAuthenticated:a,setUser:n}=s;return(m,c,u=!1)=>f(void 0,null,function*(){try{r(!0),o(null);const d=yield N.post("auth/login",{email:m,password:c,rememberMe:u});if(d.error)throw new Error(d.error);if(!d.data)throw new Error("Nieznany błąd logowania. Spróbuj ponownie później.");const{token:l,user:x}=d.data;localStorage.removeItem("token"),sessionStorage.removeItem("token"),u?localStorage.setItem("token",l):sessionStorage.setItem("token",l),n(x),a(!0),t("/dashboard")}catch(d){const l=d instanceof Error?d.message:"Wystąpił błąd podczas logowania";o(l),a(!1)}finally{r(!1)}})},xe=s=>{const t=b(),{setLoading:r,setError:o,setIsAuthenticated:a,setUser:n}=s;return(m,c,u)=>f(void 0,null,function*(){try{r(!0),o(null);const d=yield N.post("auth/register",{email:m,password:c,username:u});if(d.error)throw d.error.includes("już istnieje")?(o("Użytkownik o podanym adresie email lub nazwie użytkownika już istnieje w systemie"),new Error("Użytkownik o podanym adresie email lub nazwie użytkownika już istnieje w systemie")):(o(d.error),new Error(d.error));if(!d.data){const h="Nieznany błąd rejestracji. Spróbuj ponownie później.";throw o(h),new Error(h)}const{token:l,user:x}=d.data;localStorage.removeItem("token"),sessionStorage.removeItem("token"),sessionStorage.setItem("token",l),n&&x&&n(x),a(!0),t("/dashboard")}catch(d){const l=d instanceof Error?d.message:"Wystąpił błąd podczas rejestracji";o(l),a(!1)}finally{r(!1)}})},we=s=>{const{setLoading:t,setError:r}=s;return a=>f(void 0,null,function*(){var n;try{t(!0),r(null);const i=yield N.post("auth/forgot-password",{email:a});if(i.error)throw new Error(i.error);return((n=i.data)==null?void 0:n.message)||"Link do resetowania hasła został wysłany na Twój adres email."}catch(i){if(i instanceof Error)throw r(i.message),i;{const m="Wystąpił błąd podczas wysyłania linku resetującego hasło";throw r(m),new Error(m)}}finally{t(!1)}})},he=s=>{const t=b(),{setLoading:r,setIsAuthenticated:o,setUser:a}=s;return()=>{try{r(!0),localStorage.removeItem("token"),sessionStorage.removeItem("token"),a&&a(null),o(!1),t("/")}finally{r(!1)}}},je=s=>{const t=b(),{setLoading:r,setError:o,setIsAuthenticated:a,setUser:n}=s;return(m,c=!1)=>f(void 0,null,function*(){try{if(r(!0),o(null),!m.credential){o("Nie udało się uzyskać tokenu uwierzytelniającego z Google. Spróbuj ponownie."),a(!1);return}const u=yield N.post("auth/google-login",{credential:m.credential,rememberMe:c});if(u.error)throw new Error(u.error);if(!u.data)throw new Error("Nieznany błąd logowania przez Google. Spróbuj ponownie później.");const d=u.data,l=d.token,x=d.user||d.user&&d.user.user;c?localStorage.setItem("token",l):sessionStorage.setItem("token",l),n&&n(x),a(!0),t("/dashboard")}catch(u){const d=u instanceof Error?u.message:"Wystąpił błąd podczas logowania przez Google";o(d),a(!1)}finally{r(!1)}})},pe=s=>{const t=b(),{setLoading:r,setError:o}=s;return(n,i,m)=>f(void 0,null,function*(){var c;try{if(!n||n.length<10)throw new Error("Nieprawidłowy token resetowania hasła. Sprawdź, czy link jest poprawny.");if(i!==m)throw new Error("Hasła nie są identyczne. Upewnij się, że oba pola zawierają to samo hasło.");r(!0),o(null);const u=yield N.post("auth/reset-password",{token:n,password:i,confirmPassword:m});if(u.error)throw new Error(u.error);return setTimeout(()=>{t("/logowanie")},3e3),((c=u.data)==null?void 0:c.message)||"Hasło zostało pomyślnie zmienione. Za chwilę zostaniesz przekierowany do strony logowania."}catch(u){if(u instanceof Error)throw o(u.message),u;{const d="Wystąpił nieznany błąd podczas resetowania hasła";throw o(d),new Error(d)}}finally{r(!1)}})},fe=s=>{const t=ge(s),r=xe(s),o=we(s),a=he(s),n=je(s),i=pe(s);return{login:t,register:r,forgotPassword:o,logout:a,loginWithGoogle:n,resetPassword:i}},v=()=>{const s=ue(),t=fe(s),r=b(),[o,a]=g.useState(!0),n=()=>f(void 0,null,function*(){try{a(!0);const c=localStorage.getItem("token")||sessionStorage.getItem("token");if(!c){s.setIsAuthenticated(!1);return}if(typeof c!="string"||c.length<10){localStorage.removeItem("token"),sessionStorage.removeItem("token"),s.setIsAuthenticated(!1);return}const u=de.replace("www.",""),d=yield fetch(`${u}auth/verify`,{method:"GET",headers:{Authorization:`Bearer ${c}`,Accept:"application/json"},mode:"cors",credentials:"include"});if(d.status===429)throw new Error("Zbyt wiele prób weryfikacji. Spróbuj ponownie za chwilę.");let l,x="";try{if(x=yield d.text(),!x)throw new Error("Pusta odpowiedź serwera");l=JSON.parse(x)}catch(h){throw new Error("Nieprawidłowa odpowiedź serwera: "+h)}if((l==null?void 0:l.status)==="success"&&(l!=null&&l.data)){s.setUser(l.data.user||l.data),s.setIsAuthenticated(!0);return}if(!d.ok)throw new Error((l==null?void 0:l.error)||(l==null?void 0:l.message)||"Nieznany błąd weryfikacji tokenu");if(!(l!=null&&l.user))throw new Error("Odpowiedź API nie zawiera danych użytkownika");s.setUser(l.user),s.setIsAuthenticated(!0)}catch(c){s.setError(c instanceof Error?c.message:"Wystąpił błąd podczas weryfikacji tokenu"),s.setIsAuthenticated(!1),localStorage.removeItem("token"),sessionStorage.removeItem("token")}finally{a(!1)}});g.useEffect(()=>{n()},[]);const i=()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),s.setIsAuthenticated(!1),s.setUser(null),r("/")},m=k(w({},s),{isAuthChecking:o,token:localStorage.getItem("token")||sessionStorage.getItem("token")});return k(w(w({},m),t),{logout:i})},I=({text:s,description:t,icon:r="⚡"})=>e.jsxs("div",{className:"flex items-start justify-center lg:justify-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-[#f7df1e] rounded-lg flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-black text-sm sm:text-base font-bold",children:r})}),e.jsxs("div",{className:"flex flex-col text-center lg:text-left",children:[e.jsx("span",{className:"text-white font-semibold text-base sm:text-lg",children:s}),t&&e.jsx("span",{className:"text-gray-300 text-sm sm:text-base mt-1",children:t})]})]}),ye=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(I,{text:"Szybki rozwój",description:"Naucz się nowoczesnych technologii JS",icon:"⚡"}),e.jsx(I,{text:"Społeczność",description:"Połącz się z innymi developerami",icon:"☕"}),e.jsx(I,{text:"Praktyka",description:"Rozwiązuj prawdziwe problemy",icon:">"})]}),be=()=>e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-[#f7df1e] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-xl sm:text-2xl",children:"JS"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"CodeLines"})]}),e.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:["Witaj w świecie ",e.jsx("span",{className:"text-[#f7df1e]",children:"JavaScript"})]}),e.jsx("p",{className:"text-base sm:text-lg text-gray-300 mb-6 sm:mb-8 leading-relaxed",children:"Dołącz do społeczności programistów i rozwijaj swoje umiejętności w najpopularniejszym języku programowania na świecie."}),e.jsx(ye,{}),e.jsx("div",{className:"mt-8 sm:mt-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 sm:p-6 border border-gray-700",children:e.jsx("pre",{className:"text-[#f7df1e] text-xs sm:text-sm font-mono leading-relaxed",children:e.jsx("code",{children:`const developer = {
  name: "Twoje imię",
  skills: ["JavaScript", "React", "Node.js"],
  passion: "coding"
};`})})})]}),ke=()=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-xl flex flex-col items-center lg:items-start text-center lg:text-left px-4 sm:px-0",children:e.jsx(be,{})}),Se=({activeTab:s,onTabChange:t})=>e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-6 sm:mb-8 bg-gray-50 rounded-lg p-1",children:[e.jsx(M,{isActive:s==="login",onClick:()=>t("login"),label:"Logowanie"}),e.jsx(M,{isActive:s==="register",onClick:()=>t("register"),label:"Rejestracja"}),e.jsx(M,{isActive:s==="forgot",onClick:()=>t("forgot"),label:"Reset hasła"})]}),M=({isActive:s,onClick:t,label:r})=>e.jsx("button",{onClick:t,className:`flex-1 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors duration-150 ${s?"bg-white text-gray-900 border border-gray-900 border-2":"bg-white text-gray-900"}`,children:r}),ze=p.object({email:p.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email"),password:p.string().min(1,"Hasło jest wymagane"),rememberMe:p.boolean().optional()}),Ne=p.object({username:p.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika nie może przekraczać 20 znaków").regex(/^[a-zA-Z0-9_]+$/,"Nazwa użytkownika może zawierać tylko litery, cyfry i podkreślenia"),email:p.string().email("Nieprawidłowy format adresu email"),password:p.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:p.string(),acceptPrivacy:p.boolean().refine(s=>s===!0,{message:"Musisz zaakceptować politykę prywatności"})}).refine(s=>s.password===s.confirmPassword,{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),ve=p.object({email:p.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email")}),Ee=p.object({password:p.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:p.string()}).refine(s=>s.password===s.confirmPassword,{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),_=g.memo(({rememberMe:s})=>{const{loginWithGoogle:t}=v(),[r,o]=g.useState(null),a=i=>{t(i,s)},n=()=>{o("Logowanie przez Google nie powiodło się. Spróbuj ponownie później.")};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm",children:r}),e.jsx("div",{className:"w-full",children:e.jsx(Y,{onSuccess:a,onError:n,theme:"outline",shape:"rectangular",text:"continue_with",locale:"pl",useOneTap:!1,context:"signin",type:"standard",size:"large",width:"100%"})})]})});_.displayName="GoogleLoginButton";const O=g.memo(({register:s})=>e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",w({type:"checkbox",className:"peer sr-only"},s("rememberMe"))),e.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded bg-white peer-checked:bg-[#f7df1e] peer-checked:border-[#f7df1e] transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-black scale-0 peer-checked:scale-100 transition-transform",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),e.jsx("span",{className:"text-sm text-gray-600 group-hover:text-gray-800 transition-colors",children:"Zapamiętaj mnie"})]})}));O.displayName="RememberMeCheckbox";const Pe=()=>{var l,x;const{login:s,loading:t,error:r}=v(),{register:o,handleSubmit:a,formState:{errors:n},watch:i}=A({resolver:L(ze),mode:"onSubmit"}),m=i("rememberMe",!1)||!1,[c,u]=g.useState(!1),d=h=>f(void 0,null,function*(){yield s(h.email,h.password,h.rememberMe)});return e.jsxs("form",{onSubmit:a(d),className:"space-y-6",children:[r&&e.jsx(E,{message:r,withIcon:!0,variant:"standard"}),e.jsx(_,{rememberMe:m}),e.jsxs("div",{className:"relative flex items-center justify-center my-6",children:[e.jsx("div",{className:"border-t border-gray-200 w-full"}),e.jsx("span",{className:"bg-white px-4 text-sm text-gray-500 absolute",children:"LUB"})]}),e.jsx(S,w({type:"email",label:"Email",placeholder:"twoj@email.com",icon:e.jsx(F,{}),error:(l=n.email)==null?void 0:l.message},o("email"))),e.jsx(S,k(w({type:c?"text":"password",label:"Hasło",placeholder:"Wprowadź hasło",icon:e.jsx(ee,{}),error:(x=n.password)==null?void 0:x.message},o("password")),{rightIcon:e.jsx("button",{type:"button",onClick:()=>u(!c),className:"bg-white focus:outline-none hover:text-gray-600 transition-colors",children:c?e.jsx(se,{}):e.jsx(te,{})})})),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{register:o}),e.jsx("a",{href:"/logowanie?mode=forgot",className:"text-sm text-[#f7df1e] hover:underline font-medium",children:"Zapomniałeś hasła?"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(C,{isLoading:t,loadingText:"Logowanie...",children:"Zaloguj się"})})]})},$e=()=>{const[s,t]=g.useState(!1);return{isVisible:s,toggleVisibility:()=>t(o=>!o),inputType:s?"text":"password"}},D=g.memo(({register:s,error:t})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer group",children:[e.jsx("input",w({type:"checkbox",className:`
          mt-1 w-4 h-4 rounded bg-dark text-js 
          transition-colors duration-200 ease-in-out
          ${t?"border-red-500 focus:ring-red-500/20":"border-js/20 focus:ring-js/20 hover:border-js/30"}
        `},s)),e.jsxs("span",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:["Akceptuję"," ",e.jsx(z,{to:"/polityka-prywatnosci",className:"text-js hover:text-js/80 underline transition-colors",target:"_blank",rel:"noopener noreferrer",children:"politykę prywatności"})]})]}),t&&e.jsx(y.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-red-400",children:t})]}));D.displayName="PrivacyPolicyCheckbox";const R=({initialError:s=null,resetOnSuccess:t=!0,showToasts:r=!0}={})=>{const[o,a]=g.useState(null),[n,i]=g.useState(s);g.useEffect(()=>{s!=null&&i(s)},[s]);const m=g.useCallback(l=>{a(l),i(null),r&&J.success(l),t&&setTimeout(()=>{a(null)},5e3)},[t,r]),c=g.useCallback(l=>{i(l),a(null),r&&J.error(l)},[r]),u=g.useCallback(l=>{var h;let x="";if(l instanceof Error)x=l.message;else if(typeof l=="string")x=l;else if(l&&typeof l=="object"){const j=l;x=j.message||j.error||j.errors&&((h=j.errors[0])==null?void 0:h.message)||"Wystąpił nieznany błąd. Spróbuj ponownie później."}else x="Wystąpił nieznany błąd. Spróbuj ponownie później.";return c(x),x},[c]),d=g.useCallback(()=>{a(null),i(null)},[]);return{successMessage:o,errorMessage:n,setSuccess:m,setError:c,handleError:u,resetStatus:d,hasSuccess:!!o,hasError:!!n}},Ae=({schema:s,defaultValues:t,mode:r="onSubmit",resetOnSuccess:o=!0,onSuccess:a,onError:n})=>{const[i,m]=g.useState(!1),c=R({resetOnSuccess:o}),u=A({resolver:L(s),defaultValues:t,mode:r}),d=g.useCallback(j=>f(void 0,null,function*(){try{m(!0),c.resetStatus(),a&&(yield a(j))}catch(H){c.handleError(H),n&&n(H)}finally{m(!1)}}),[a,n,c]),l=g.useCallback(j=>{d(j)},[d]),x=g.useCallback(j=>{console.error("Form validation errors:",j),c.setError("Formularz zawiera błędy. Sprawdź wprowadzone dane.")},[c]),h=u.handleSubmit(l,x);return k(w({},u),{isSubmitting:i,errorMessage:c.errorMessage,successMessage:c.successMessage,onFormSubmit:h,handleSubmitWithValidation:d})},Le=()=>{const{register:s,loading:t,error:r}=v(),[o,a]=g.useState(!1),[n,i]=g.useState(null),m=Ae({schema:Ne,mode:"onChange",defaultValues:{acceptPrivacy:!1},onSuccess(u){return f(this,null,function*(){try{a(!0),i(null),yield s(u.email,u.password,u.username)}catch(d){const l=d instanceof Error?d.message:"Wystąpił błąd podczas rejestracji";i(l)}finally{a(!1)}})}});return g.useEffect(()=>{r&&i(r)},[r]),{register:m.register,errors:m.formState.errors,loading:t||o||m.isSubmitting,handleSubmit:m.onFormSubmit,errorMessage:n||r||m.errorMessage,successMessage:m.successMessage}},Ie=()=>{var n,i,m,c,u;const{register:s,errors:t,loading:r,handleSubmit:o,errorMessage:a}=Le();return e.jsxs(W,{onSubmit:o,children:[a&&e.jsx(E,{message:a,variant:"alert",title:"Błąd rejestracji",className:"mb-6 text-base border-2"}),e.jsx(S,w({type:"text",label:"Nazwa użytkownika",placeholder:"jankowalski",icon:e.jsx(re,{}),error:(n=t.username)==null?void 0:n.message},s("username"))),e.jsx(S,w({type:"email",label:"Email",placeholder:"twoj@email.com",icon:e.jsx(F,{}),error:(i=t.email)==null?void 0:i.message},s("email"))),e.jsx(P,w({label:"Hasło",error:(m=t.password)==null?void 0:m.message},s("password"))),e.jsx(P,w({label:"Potwierdź hasło",error:(c=t.confirmPassword)==null?void 0:c.message},s("confirmPassword"))),e.jsx(D,{register:s("acceptPrivacy"),error:(u=t.acceptPrivacy)==null?void 0:u.message}),e.jsx(C,{isLoading:r,loadingText:"Rejestracja...",children:"Zarejestruj się"}),a&&e.jsx("div",{className:"mt-4",children:e.jsx(E,{message:a,withIcon:!0,className:"text-sm"})})]})},Me=()=>{const{forgotPassword:s,loading:t,error:r}=v(),o=R({initialError:r}),{register:a,handleSubmit:n,reset:i,formState:{errors:m}}=A({resolver:L(ve)});return w({register:a,errors:m,loading:t,handleSubmit:n(u=>f(void 0,null,function*(){try{o.resetStatus();const d=yield s(u.email);o.setSuccess(d),i()}catch(d){o.handleError(d)}}))},o)},Fe=()=>{var i;const{register:s,errors:t,loading:r,handleSubmit:o,errorMessage:a,successMessage:n}=Me();return e.jsxs(W,{onSubmit:o,children:[a&&e.jsx(E,{message:a,withIcon:!0,variant:"alert",title:"Błąd resetowania hasła"}),n&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Email wysłany!"}),e.jsx("p",{children:n})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Podaj swój adres email, a wyślemy Ci link do zresetowania hasła."}),e.jsx(S,w({type:"email",label:"Email",placeholder:"twoj@email.com",icon:e.jsx(F,{}),error:(i=t.email)==null?void 0:i.message},s("email"))),e.jsx(C,{isLoading:r,loadingText:"Wysyłanie...",children:"Wyślij link resetujący"})]})]})},Ce=({mode:s}={})=>{const[t,r]=G(),o=t.get("mode")||"login",[a,n]=g.useState(s||o);g.useEffect(()=>{n(s||o)},[s,o]);const i=m=>{n(m),r({mode:m})};return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-sm sm:max-w-md bg-white rounded-xl sm:rounded-2xl p-6 sm:p-8 border border-gray-100",role:"main","aria-label":"Formularz autoryzacji",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#f7df1e] rounded-lg flex items-center justify-center mb-3 sm:mb-4",children:e.jsx("span",{className:"text-black font-bold text-lg sm:text-xl",children:"JS"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"CodeLinesJS"})]}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-medium text-gray-900 mb-2",children:[a==="login"&&"Zaloguj się",a==="register"&&"Dołącz do nas",a==="forgot"&&"Odzyskaj hasło"]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[a==="login"&&"Wprowadź swoje dane aby uzyskać dostęp do konta",a==="register"&&"Rozpocznij swoją przygodę z programowaniem",a==="forgot"&&"Wprowadź swój email aby zresetować hasło"]})]}),e.jsx(Se,{activeTab:a,onTabChange:i}),e.jsx(me,{mode:"wait",children:e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[a==="login"&&e.jsx(Pe,{}),a==="register"&&e.jsx(Ie,{}),a==="forgot"&&e.jsx(Fe,{})]},a)}),e.jsx("div",{className:"mt-4 sm:mt-6 text-center text-xs text-gray-500",children:e.jsxs("p",{children:["Logując się, akceptujesz"," ",e.jsx(z,{to:"/polityka-prywatnosci",className:"text-[#f7df1e] hover:underline font-medium",children:"Politykę Prywatności"}),"."]})})]})},We=({children:s,title:t,subtitle:r,mode:o})=>e.jsx("div",{className:"w-full max-w-sm sm:max-w-md",children:s?e.jsxs("div",{className:"w-full bg-white rounded-xl sm:rounded-2xl p-6 sm:p-8 border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#f7df1e] rounded-lg flex items-center justify-center mb-3 sm:mb-4",children:e.jsx("span",{className:"text-black font-bold text-lg sm:text-xl",children:"JS"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"CodeLinesJS"})]}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-medium text-gray-900 mb-2",children:t||"Zaloguj się"}),r&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:r})]}),s]}):e.jsx(Ce,{mode:o})}),U=({children:s,title:t,subtitle:r}={})=>{const[o]=G(),a=o.get("mode")||"login",n=()=>{switch(a){case"register":return"Rejestracja | CodeLinesJS";case"forgot":return"Reset hasła | CodeLinesJS";default:return"Logowanie | CodeLinesJS"}},i=()=>{switch(a){case"register":return"Dołącz do platformy CodeLinesJS - rozpocznij swoją przygodę z programowaniem w JavaScript.";case"forgot":return"Zresetuj hasło do swojego konta CodeLinesJS i wróć do nauki programowania.";default:return"Logowanie do platformy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."}};return e.jsxs("main",{className:"min-h-screen w-full flex",children:[e.jsxs(ae,{children:[e.jsx("title",{children:n()}),e.jsx("meta",{name:"description",content:i()})]}),e.jsx("div",{className:"hidden lg:flex w-1/2 bg-black items-center justify-center p-8",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-full lg:w-1/2 bg-[#f7df1e] flex items-center justify-center p-4 sm:p-6 lg:p-8",children:e.jsx(ne,{children:e.jsx(We,{children:s,title:t,subtitle:r,mode:a})})})]})},Re=({errorMessage:s})=>e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[e.jsx(Z,{className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),e.jsx("p",{children:s||"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło:"}),e.jsx(z,{to:"/logowanie",className:"text-js hover:underline",children:"Wróć do strony logowania"})]})]}),He=({message:s})=>s?e.jsxs(e.Fragment,{children:[e.jsx(ie,{message:s,title:"Hasło zostało zmienione"}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"Za chwilę zostaniesz przekierowany do strony logowania."}),e.jsx(z,{to:"/logowanie",className:"text-js hover:underline",children:"Przejdź do logowania"})]})]}):null,Be=()=>{const{token:s}=V(),{resetPassword:t,loading:r,error:o}=v(),a=R({initialError:o}),[n,i]=g.useState(!1),{register:m,handleSubmit:c,formState:{errors:u},reset:d}=A({resolver:L(Ee),mode:"onSubmit"});return g.useEffect(()=>{s?s.length<10&&(i(!0),a.setError("Token resetowania hasła jest nieprawidłowy. Sprawdź, czy link jest poprawny.")):(i(!0),a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny."))},[s,a]),w({register:m,errors:u,loading:r,tokenError:n,handleSubmit:c(x=>f(void 0,null,function*(){if(!s){a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny.");return}try{a.resetStatus();const h=yield t(s,x.password,x.confirmPassword);a.setSuccess(h),d()}catch(h){const j=a.handleError(h);typeof j=="string"&&(j.includes("token")||j.includes("Token")||j.includes("wygasł"))&&i(!0)}}))},a)},Te=()=>{var m,c;const{register:s,errors:t,loading:r,handleSubmit:o,errorMessage:a,successMessage:n,tokenError:i}=Be();return i?e.jsx(Re,{errorMessage:a}):e.jsxs(W,{onSubmit:o,children:[a&&e.jsx(le,{message:a,title:"Błąd resetowania hasła"}),e.jsx(He,{message:n}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Wprowadź nowe hasło dla swojego konta. Hasło musi zawierać co najmniej 8 znaków, w tym jedną wielką literę, jedną małą literę i jedną cyfrę."}),e.jsx(P,w({label:"Nowe hasło",error:(m=t.password)==null?void 0:m.message},s("password"))),e.jsx(P,w({label:"Potwierdź nowe hasło",error:(c=t.confirmPassword)==null?void 0:c.message},s("confirmPassword"))),e.jsx(ce,{type:"submit",className:"w-full",disabled:r,children:r?"Resetowanie hasła...":"Zresetuj hasło"})]})]})},Je=()=>e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[e.jsx(Z,{className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),e.jsx("p",{children:"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło na stronie logowania:"}),e.jsxs(z,{to:"/logowanie",className:"inline-flex items-center text-js hover:underline",children:[e.jsx(oe,{className:"mr-2"})," Wróć do strony logowania"]})]})]}),Ue=()=>{const{token:s}=V();return s?e.jsx(U,{title:"Resetowanie hasła",subtitle:"Wprowadź nowe hasło dla swojego konta",children:e.jsx(Te,{})}):e.jsx(U,{title:"Nieprawidłowy link",subtitle:"Link do resetowania hasła jest nieprawidłowy lub wygasł.",children:e.jsx(Je,{})})},qe=Object.freeze(Object.defineProperty({__proto__:null,ResetPasswordPage:Ue},Symbol.toStringTag,{value:"Module"}));export{de as A,$e as a,U as b,qe as i,v as u};
