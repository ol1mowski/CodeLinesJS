const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-components-DncMdtyB.js","assets/vendor-react-m4_Ig-Ll.js","assets/vendor-other-B8OiHoQU.js","assets/vendor-monaco-BsNCoyaU.js","assets/vendor-framer-motion-rEmhe2-Y.js","assets/app-auth-D7JZJy4p.js","assets/app-services-C471PnMV.js"])))=>i.map(i=>d[i]);
var Gi=Object.defineProperty,Hi=Object.defineProperties;var Ui=Object.getOwnPropertyDescriptors;var us=Object.getOwnPropertySymbols;var Wi=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable;var ps=(s,t,a)=>t in s?Gi(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,k=(s,t)=>{for(var a in t||(t={}))Wi.call(t,a)&&ps(s,a,t[a]);if(us)for(var a of us(t))Ji.call(t,a)&&ps(s,a,t[a]);return s},S=(s,t)=>Hi(s,Ui(t));var L=(s,t,a)=>new Promise((i,n)=>{var o=d=>{try{l(a.next(d))}catch(u){n(u)}},c=d=>{try{l(a.throw(d))}catch(u){n(u)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(o,c);l((a=a.apply(s,t)).next())});import{r,P as Ce,j as e,Q as hs,H as K,R as Qi,S as js,w as _,p as qi,T as Ki,o as Ve,v as Xe,A as Ns,U as vs,V as ks,u as me,W as Ss,C as H,X as xe,Y as ie,Z as Ye,q as Zi,z as Z,L as we,_ as Vi,$ as zs,M as O,a0 as Ls,a1 as Ts,a2 as ee,g as q,f as Ps,l as oe,a3 as M,b as Y,a4 as Es,a5 as es,a6 as ss,a7 as Xi,a8 as Yi,a9 as As,aa as Ne,ab as P,ac as Cs,ad as er,ae as sr,af as tr,m as $s,h as ts,N as Rs,e as Fs,ag as as,a as $e,F as ar,ah as is,ai as Ds,aj as ir,ak as rr,i as nr,al as le,am as _s,an as Os,ao as or,ap as lr,aq as cr,ar as dr,as as mr,at as xr,au as ur,av as rs,aw as ve,ax as pr,ay as hr,az as jr,aA as yr,aB as gr,aC as fr,aD as br,aE as wr,aF as Ms,aG as Is,aH as We}from"./vendor-react-m4_Ig-Ll.js";import{L as Je,u as Bs,M as Nr,d as ns,e as B,f as vr,g as kr,a as de,B as fe}from"./app-components-DncMdtyB.js";import{u as F,A as C}from"./app-auth-D7JZJy4p.js";import{m as x,A as I,u as Sr}from"./vendor-framer-motion-rEmhe2-Y.js";import{f as Gs,p as Hs,z as D,t as Re,a as Qe}from"./vendor-other-B8OiHoQU.js";import{R as zr,L as Lr,C as Tr,X as Pr,Y as Er,T as Ar,a as Cr}from"./vendor-charts-IG0iMmSJ.js";import{l as $r}from"./vendor-monaco-BsNCoyaU.js";import{h as Rr}from"./app-services-C471PnMV.js";const Fr="modulepreload",Dr=function(s){return"/"+s},ys={},Q=function(t,a,i){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=Promise.allSettled(a.map(d=>{if(d=Dr(d),d in ys)return;ys[d]=!0;const u=d.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Fr,u||(h.as="script"),h.crossOrigin="",h.href=d,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,j)=>{h.addEventListener("load",p),h.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return n.then(c=>{for(const l of c||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},_r={activeView:"community"},Or=(s,t)=>{switch(t.type){case"SET_ACTIVE_VIEW":return S(k({},s),{activeView:t.payload});default:return s}},Mr=()=>{const[s,t]=r.useReducer(Or,_r),a=r.useCallback(i=>{t({type:"SET_ACTIVE_VIEW",payload:i})},[]);return{state:s,setActiveView:a}},Us=r.memo(()=>{const t=Ce().pathname,a=t==="/dashboard/community"||t==="/dashboard/community/"||/^\/dashboard\/community\/?$/.test(t),i=t.includes("/dashboard/community/ranking");return e.jsxs("div",{className:"flex gap-4 mb-8 pb-2",children:[e.jsxs(hs,{to:"/dashboard/community",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${a?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-newspaper"}),"Aktualności"]}),e.jsxs(hs,{to:"/dashboard/community/ranking",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${i?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-trophy"}),"Ranking"]})]})});Us.displayName="CommunityNavigation";const Ir=r.lazy(()=>Q(()=>Promise.resolve().then(()=>Co),void 0)),Br=r.lazy(()=>Q(()=>Promise.resolve().then(()=>Fo),void 0)),Ws=r.memo(()=>{const s=Ce(),{state:{activeView:t},setActiveView:a}=Mr();return r.useEffect(()=>{const i=s.pathname.split("community").pop()||"community";i!==t&&a(i)},[s.pathname,t,a]),e.jsxs("div",{className:"p-8 w-full min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(K,{children:[e.jsx("title",{children:"Community | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Community CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx(Us,{}),e.jsxs(Qi,{children:[e.jsx(js,{index:!0,element:e.jsx(r.Suspense,{fallback:e.jsx(Je,{text:"Ładowanie aktualności..."}),children:e.jsx(Ir,{})})}),e.jsx(js,{path:"ranking",element:e.jsx(r.Suspense,{fallback:e.jsx(Je,{text:"Ładowanie rankingu..."}),children:e.jsx(Br,{})})})]})]})})]})});Ws.displayName="CommunitySection";const Al=Object.freeze(Object.defineProperty({__proto__:null,CommunitySection:Ws},Symbol.toStringTag,{value:"Module"})),Gr=()=>{const[s,t]=r.useState(!1),[a,i]=r.useState("dashboard"),n=Ce();return r.useEffect(()=>{const c=n.pathname.split("/").pop()||"dashboard";i(c)},[n]),r.useEffect(()=>{const o=()=>{window.innerWidth<768&&t(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]),{isExpanded:s,setIsExpanded:t,activeItem:a,setActiveItem:i}},Hr={expanded:{width:"240px",transition:{type:"spring",stiffness:300,damping:30}},collapsed:{width:"100px",transition:{type:"spring",stiffness:300,damping:30}}},os={expanded:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:30}},collapsed:{opacity:0,x:-10,transition:{duration:.2}}},Js=r.memo(({isExpanded:s})=>e.jsx("div",{className:"px-4 mb-8",children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-js/20 flex items-center justify-center",children:e.jsx(_,{className:"text-xl text-js"})}),e.jsx(I,{mode:"wait",children:s&&e.jsx(x.span,{variants:os,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-bold text-js font-space",children:"CodeLinesJS"})})]})}));Js.displayName="NavigationLogo";const ls=r.memo(({icon:s,label:t,isActive:a=!1,isExpanded:i,onClick:n,variant:o="default",id:c})=>e.jsxs(x.button,{onClick:n,"data-testid":`nav-button-${t==null?void 0:t.toLowerCase().replace(/\s/g,"-")}`,className:`
      ${c==="code"&&"hidden lg:flex"}
      w-full flex items-center gap-3 px-4 py-3 
      rounded-lg transition-all duration-200
      backdrop-blur-sm
      ${o==="default"?a?"bg-js/20 border-l-2 border-js text-js":"text-gray-400 hover:text-js hover:bg-js/10":a?"bg-red-500/20 text-red-400":"text-red-400 hover:bg-red-500/10"}
    `,whileHover:{scale:1.02,x:5},whileTap:{scale:.98},children:[e.jsx(x.span,{className:"text-xl min-w-[24px]",whileHover:{rotate:10},style:{color:"currentColor"},children:s}),e.jsx(I,{mode:"wait",children:i&&t&&e.jsx(x.span,{variants:os,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-medium font-space whitespace-nowrap",style:{color:"currentColor"},children:t})})]}));ls.displayName="NavigationButton";const Qs=r.memo(({title:s,items:t,isExpanded:a,activeItem:i,onItemClick:n,index:o,isLastSection:c})=>e.jsxs(x.div,{className:"space-y-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:[a&&e.jsx(x.h2,{variants:os,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"text-xs font-bold text-js/60 uppercase tracking-wider px-3 mb-2",children:s}),t.map(l=>e.jsx(ls,{id:l.id,icon:l.icon,label:l.label,isActive:i===l.id,isExpanded:a,onClick:()=>n(l)},l.id)),!c&&e.jsx("div",{className:"mx-3 my-4",children:e.jsx("div",{className:"border-t border-js/5"})})]},s));Qs.displayName="NavigationSection";const U="/dashboard",Ur=[`${U}/community`,`${U}/community/ranking`,`${U}/community/groups`,`${U}/learn`,`${U}/play`,`${U}/play/regex-raider`,`${U}/play/async-quest`,`${U}/play/js-typo-hunter`,`${U}/play/scope-explorer`,`${U}/settings`],qs=()=>{const s=Ce();return r.useMemo(()=>{const t=s.pathname,a=Ur.includes(t),i=t.startsWith(`${U}/learn/lesson/`);return a||i},[s.pathname])},Wr=[{id:"dashboard",label:"Dashboard",icon:e.jsx(qi,{}),section:"main",path:"/dashboard"},{id:"stats",label:"Statystyki",icon:e.jsx(Ki,{}),section:"main",path:"/dashboard/stats"},{id:"play",label:"Graj",icon:e.jsx(Ve,{}),section:"game",path:"/dashboard/play"},{id:"learn",label:"Nauka",icon:e.jsx(Xe,{}),section:"game",path:"/dashboard/learn"},{id:"code",label:"Edytor",icon:e.jsx(_,{}),section:"game",path:"/dashboard/code"},{id:"community",label:"Społeczność",icon:e.jsx(Ns,{}),section:"social",path:"/dashboard/community"},{id:"settings",label:"Ustawienia",icon:e.jsx(vs,{}),section:"social",path:"/dashboard/settings"},{id:"report",label:"Zgłoś błąd",icon:e.jsx(ks,{}),section:"social",path:"/dashboard/report"}],Jr={main:"Główne",game:"Nauka",social:"Społeczność"},Ks=r.memo(()=>{const s=me(),{isExpanded:t,setIsExpanded:a,activeItem:i,setActiveItem:n}=Gr(),{logout:o}=F(),c=qs(),l=Bs(),d=r.useCallback(p=>{n(p.id),p.path&&s(p.path)},[s,n]),u=r.useCallback(()=>{a(p=>!p)},[a]),m=r.useMemo(()=>Object.entries(Wr.reduce((p,j)=>(p[j.section]||(p[j.section]=[]),p[j.section].push(j),p),{})),[]),h=r.useMemo(()=>c||l?"hidden md:flex":"",[c,l]);return c&&window.innerWidth<Nr?null:e.jsx(ns,{children:e.jsxs(x.nav,{initial:"collapsed",animate:t?"expanded":"collapsed",variants:Hr,className:`${h} fixed left-0 top-0 bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg border-r border-js/10 flex flex-col py-6 z-40 shadow-xl shadow-black/10 h-full`,"aria-label":"Menu nawigacyjne",children:[e.jsx(Js,{isExpanded:t}),e.jsx(x.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u,className:"absolute -right-3 top-8 w-6 h-6 bg-js rounded-full flex items-center justify-center hover:opacity-90 transition-all shadow-lg shadow-js/20","aria-label":t?"Zwiń menu":"Rozwiń menu",children:e.jsx(x.span,{animate:{rotate:t?180:0},className:"text-dark text-sm font-bold",initial:"collapsed","aria-hidden":"true",children:"→"})}),e.jsx("div",{className:"overflow-x-hidden flex-1 px-3 space-y-6",children:e.jsx(I,{mode:"sync",children:m.map(([p,j],v)=>e.jsx(Qs,{title:Jr[p]||p,items:j,isExpanded:t,activeItem:i,onItemClick:d,index:v,isLastSection:v===m.length-1},p))})}),e.jsx("div",{className:"pt-4 border-t border-js/10",children:e.jsx(ls,{id:"logout",icon:e.jsx(Ss,{"aria-hidden":"true"}),label:"Wyloguj się",isExpanded:t,onClick:o,variant:"danger"})})]})})});Ks.displayName="DashboardNavigation";const Zs=r.memo(({username:s})=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-js font-bold text-xl",children:["Witaj, ",s,"! 👋"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Miło Cię znów widzieć"})]})}));Zs.displayName="WelcomeSection";const Qr=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak autoryzacji");const t=yield fetch(`${C}users/stats`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok){if(t.status===401)throw new Error("Brak autoryzacji - zaloguj się ponownie");const a=yield t.json();throw new Error(a.message||"Błąd podczas pobierania danych")}return t.json()}),cs=()=>{const{token:s}=F();return H({queryKey:["userProgress"],queryFn:()=>Qr(s||""),enabled:!!s,staleTime:1e3*60*5,refetchInterval:1e3*60,retry:(t,a)=>t<2&&!a.message.includes("autoryzacji")})},R={dropdown:{container:`
      absolute right-0 top-12 w-80 bg-dark/95 rounded-xl 
      border border-js/10 shadow-xl backdrop-blur-sm z-[2147483647]
    `,header:{wrapper:"flex justify-between items-center mb-4 p-4",title:"text-xl font-bold text-js",badge:"px-2 py-1 text-xs bg-js/20 text-js rounded-full"},content:{wrapper:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar p-4",loading:"py-8 text-center text-gray-400",empty:"py-8 text-center text-gray-400",item:{wrapper:`
          p-3 rounded-lg bg-dark/50 hover:bg-dark/70
          border border-js/10 hover:border-js/20
          cursor-pointer transition-all duration-200
        `,content:"flex items-start gap-3",icon:"mt-1",text:{wrapper:"flex-1",message:"text-white",time:"text-sm text-gray-400 mt-1"}}}},button:{wrapper:"hidden xl:block relative",base:`
      relative p-2 rounded-lg
      hover:bg-js/5 transition-colors duration-200
    `,active:"bg-dark/50",icon:{base:"w-5 h-5",active:"text-js",inactive:"text-gray-400"},badge:`
      absolute -top-1 -right-1 bg-red-500 text-white 
      rounded-full min-w-[18px] h-[18px] text-xs 
      flex items-center justify-center px-1 font-medium
    `}},qr=()=>{const{token:s}=F(),t=xe();return{markAsRead:ie({mutationFn:i=>L(void 0,null,function*(){const n=yield fetch(`${C}/dashboard/notifications/${i}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Nie udało się oznaczyć jako przeczytane");return n.json()}),onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard"]})}})}},Kr=s=>{try{const t=s instanceof Date?s:new Date(s);return isNaN(t.getTime())?"Nieprawidłowa data":Gs(t,"dd MMM, HH:mm",{locale:Hs})}catch(t){return console.error("Error formatting date:",t),"Nieprawidłowa data"}},Zr=s=>{switch(s){case"challenge":return e.jsx(Z,{className:"text-yellow-500"});case"achievement":return e.jsx(Zi,{className:"text-green-500"});case"social":return e.jsx(Ns,{className:"text-blue-500"});default:return e.jsx(Ye,{className:"text-gray-400"})}},Vs=r.memo(({notification:s,onRead:t})=>e.jsx(x.div,{className:`
      ${R.dropdown.content.item.wrapper}
      ${s.read?"opacity-60":""}
    `,whileHover:{x:5},onClick:()=>!s.read&&t(s._id),children:e.jsxs("div",{className:R.dropdown.content.item.content,children:[e.jsx("div",{className:R.dropdown.content.item.icon,children:Zr(s.type)}),e.jsxs("div",{className:R.dropdown.content.item.text.wrapper,children:[e.jsx("p",{className:R.dropdown.content.item.text.message,children:s.message}),e.jsx("span",{className:R.dropdown.content.item.text.time,children:Kr(s.createdAt)})]})]})}));Vs.displayName="NotificationItem";const Xs=r.memo(({unreadCount:s})=>e.jsxs("div",{className:R.dropdown.header.wrapper,children:[e.jsx("h3",{className:R.dropdown.header.title,children:"Powiadomienia"}),s>0&&e.jsxs("span",{className:R.dropdown.header.badge,children:[s," nowe"]})]}));Xs.displayName="NotificationsHeader";const Ys=r.memo(({onClose:s})=>{var n,o;const{data:t,isLoading:a}=cs(),{markAsRead:i}=qr();return r.useEffect(()=>{const c=l=>{l.key==="Escape"&&s()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[s]),e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:R.dropdown.container,onClick:c=>c.stopPropagation(),children:[e.jsx(Xs,{unreadCount:(n=t==null?void 0:t.unreadCount)!=null?n:0}),a?e.jsx("div",{className:R.dropdown.content.loading,children:"Ładowanie powiadomień..."}):(o=t==null?void 0:t.notifications)!=null&&o.length?e.jsx("div",{className:R.dropdown.content.wrapper,children:t.notifications.map(c=>e.jsx(Vs,{notification:c,onRead:l=>i.mutate(l)},c._id))}):e.jsx("div",{className:R.dropdown.content.empty,children:"Brak nowych powiadomień"})]})});Ys.displayName="NotificationsDropdown";const et=r.memo(()=>{var c;const[s,t]=r.useState(!1),{data:a}=cs(),i=(c=a==null?void 0:a.unreadCount)!=null?c:0,n=r.useCallback(()=>t(!1),[]),o=r.useCallback(l=>{l.stopPropagation(),t(d=>!d)},[]);return e.jsxs("div",{className:R.button.wrapper,children:[e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:`${R.button.base} ${s?R.button.active:""}`,children:[e.jsx(Ye,{className:`
          ${R.button.icon.base}
          ${s?R.button.icon.active:R.button.icon.inactive}
        `}),e.jsx(I,{children:i>0&&e.jsx(x.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:R.button.badge,children:i>9?"9+":i})})]}),e.jsx(I,{children:s&&e.jsx(Ys,{onClose:n})})]})});et.displayName="NotificationsButton";const Oe={container:`
    w-[90%]
    xl:w-full
    flex justify-between items-center
    xl:block
    mt-5
    pb-2
    bg-dark/50 backdrop-blur-sm
    border-b border-js/10 
    fixed top-0
    md:top-4 right-0
    h-14
    z-[0]
    rounded-lg mx-4
  `,content:`
    h-full
    ml-32
    sm:ml-auto
    flex justify-between items-center
    max-w-[1000px]
    mx-auto
    relative
  `,actions:"flex items-center gap-3 absolute right-6",gradients:{text:"bg-gradient-to-r from-js to-js/80 bg-clip-text text-transparent",hover:"hover:bg-js/5",base:"bg-gradient-to-br from-js/5 to-js/10"},borders:{base:"border-js/20",hover:"hover:border-js/30"},transitions:{base:"transition-all duration-200"},text:{heading:"text-lg font-bold text-js",primary:"text-white",secondary:"text-gray-400"}},Vr=()=>r.useMemo(()=>({container:{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}}}}),[]),Xr=s=>L(void 0,null,function*(){const t=yield fetch(`${C}users/profile`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Nie udało się pobrać danych użytkownika");return t.json()}),Yr=["userProfile"],en=()=>{const{token:s}=F();return H({queryKey:Yr,queryFn:()=>Xr(s)})},st=r.memo(()=>{const s=Vr(),{data:t,isLoading:a,error:i}=en(),n=r.useMemo(()=>i?"Użytkowniku":a?"Ładowanie...":(t==null?void 0:t.data.user.username)||"Użytkowniku",[t==null?void 0:t.data.user.username,a,i]);return e.jsx(ns,{children:e.jsx(x.nav,{variants:s.container,initial:"initial",animate:"animate",className:Oe.container,"aria-label":"Górna nawigacja",children:e.jsxs("div",{className:Oe.content,children:[e.jsx(Zs,{username:n}),e.jsx("div",{className:Oe.actions,children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 animate-pulse"}),children:e.jsx(et,{})})})]})})})});st.displayName="TopNavigation";const sn=r.lazy(()=>Q(()=>import("./app-components-DncMdtyB.js").then(s=>s.D),__vite__mapDeps([0,1,2,3,4,5,6]))),tn=r.lazy(()=>Q(()=>import("./app-components-DncMdtyB.js").then(s=>s.p),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>({default:s.LoadingSpinner}))),tt=r.memo(()=>{const s=qs(),t=Bs(),{logout:a}=F();return e.jsx(ns,{fallback:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Ładowanie..."}),children:e.jsx(sn,{})}),children:e.jsxs("main",{className:"bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg flex min-h-screen",children:[e.jsxs(K,{children:[e.jsx("title",{children:"Dashboard | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Panel użytkownika CodeLinesJS - dostęp do kursów, gier i statystyk nauki."})]}),e.jsx(Ks,{}),e.jsxs("div",{className:`flex-1 ${!s&&!t?"ml-[100px]":""} md:ml-[100px]`,children:[e.jsx(st,{}),e.jsx("div",{className:"mt-20 p-6",children:e.jsxs("div",{className:`${s||t?"flex":""} flex-col justify-center items-center gap-4 md:block`,children:[s||t?e.jsxs("div",{className:"flex flex-col gap-2 mb-4 md:hidden",children:[e.jsx(we,{to:"/dashboard",children:e.jsx("button",{"aria-label":"Wróć do strony głównej",className:"bg-js text-dark px-4 py-2 rounded-md w-full flex items-center justify-center",children:"Wróć do Home"})}),e.jsxs("button",{onClick:a,"aria-label":"Wyloguj się",className:"bg-red-600 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2",children:[e.jsx(Ss,{"aria-hidden":"true"}),"Wyloguj się"]})]}):null,e.jsx(r.Suspense,{fallback:e.jsx(tn,{text:"Ładowanie zawartości..."}),children:e.jsx(Vi,{})})]})})]})]})})});tt.displayName="Dashboard";const Cl=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),je={text:{heading:"font-bold text-js"},grid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",card:{base:"bg-dark/50 backdrop-blur-sm border border-js/10 shadow-xl",community:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-2 lg:order-1
    `,game:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-1 lg:order-2
    `,stats:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-3
    `}},$={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-6",title:"text-xl font-bold text-js flex items-center gap-2",icon:"w-5 h-5"},content:{wrapper:"space-y-6",description:"text-gray-400 text-sm leading-relaxed",button:{wrapper:"flex justify-center",base:"px-6 py-3 bg-js text-dark font-medium rounded-lg transition-all duration-200",hover:"hover:bg-js/90 hover:shadow-lg hover:shadow-js/20",active:"active:scale-95"}}},at=()=>r.useMemo(()=>({container:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},button:{hover:{scale:1.05},tap:{scale:.95}}}),[]),it=r.memo(()=>{const s=me(),t=at(),a=()=>{s("/dashboard/learn")};return e.jsxs(x.div,{variants:t.container,initial:"hidden",animate:"show",className:$.container,children:[e.jsx("div",{className:$.header.wrapper,children:e.jsxs("h2",{className:$.header.title,children:[e.jsx(Xe,{className:$.header.icon}),"Nauka"]})}),e.jsxs("div",{className:$.content.wrapper,children:[e.jsx("p",{className:$.content.description,children:"Sprawdź najnowsze informacje i aktualności związane z nauką."}),e.jsx("div",{className:$.content.button.wrapper,children:e.jsx(x.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:t.button,className:`
              ${$.content.button.base}
              ${$.content.button.hover}
              ${$.content.button.active}
            `,children:"Sprawdź aktualności"})})]})]})});it.displayName="CommunityBlock";const rt=r.memo(()=>{const s=me(),t=at(),a=()=>{s("/dashboard/play")};return e.jsxs(x.div,{variants:t.container,initial:"hidden",animate:"show",className:$.container,children:[e.jsx("div",{className:$.header.wrapper,children:e.jsxs("h2",{className:$.header.title,children:[e.jsx(Ve,{className:$.header.icon}),"Tryb Gry"]})}),e.jsxs("div",{className:$.content.wrapper,children:[e.jsx("p",{className:$.content.description,children:"Rozpocznij nową sesję gry, rozwiązuj wyzwania i zdobywaj punkty. Sprawdź swoje umiejętności w praktyce!"}),e.jsx("div",{className:$.content.button.wrapper,children:e.jsx(x.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:t.button,className:`
              ${$.content.button.base}
              ${$.content.button.hover}
              ${$.content.button.active}
            `,children:"Rozpocznij Grę"})})]})]})});rt.displayName="GameBlock";const ae={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-4",title:"text-xl font-bold text-js",refreshButton:"p-2 text-js hover:text-js/80 transition-colors cursor-pointer"},stats:{grid:"grid grid-cols-1 sm:grid-cols-2 gap-4",item:{wrapper:"flex items-center gap-4 p-4 bg-dark/30 rounded-lg",icon:"text-2xl text-js",content:{wrapper:"flex flex-col",label:"text-sm text-gray-400",value:"text-xl font-bold text-js"}}},lastActive:"text-sm text-gray-400 mt-4"},an=()=>r.useCallback(s=>{try{if(!s)return"Brak danych";const t=new Date(s);return isNaN(t.getTime())?"Nieprawidłowa data":Gs(t,"dd MMM, HH:mm",{locale:Hs})}catch(t){return console.error("Error formatting date:",t),"Nieprawidłowa data"}},[]),Te=r.memo(({icon:s,label:t,value:a})=>e.jsxs("div",{className:ae.stats.item.wrapper,children:[e.jsx("div",{className:ae.stats.item.icon,children:s}),e.jsxs("div",{className:ae.stats.item.content.wrapper,children:[e.jsx("p",{className:ae.stats.item.content.label,children:t}),e.jsx("p",{className:ae.stats.item.content.value,children:a})]})]}));Te.displayName="StatItem";const nt=r.memo(({stats:s})=>{const t=an();return e.jsxs("div",{className:ae.container,children:[e.jsxs("div",{className:ae.stats.grid,children:[e.jsx(Te,{icon:e.jsx(zs,{}),label:"Poziom",value:s.progress.level}),e.jsx(Te,{icon:e.jsx(O,{}),label:"Punkty",value:s.progress.points}),e.jsx(Te,{icon:e.jsx(Ls,{}),label:"Seria",value:`${s.achievements.streak.current} dni`})]}),e.jsxs("p",{className:ae.lastActive,children:["Ostatnia aktywność: ",t(s.user.lastActive)]})]})});nt.displayName="StatsBlock";const be=r.memo(({type:s,message:t})=>{const a=()=>{switch(s){case"error":return"text-red-400";default:return"text-gray-400"}};return e.jsx("div",{className:"p-8 w-full flex items-center justify-center min-h-[400px]",children:e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:`text-xl ${a()}`,children:t||(s==="loading"?"Ładowanie danych...":s==="error"?"Wystąpił błąd podczas ładowania danych":"Brak danych do wyświetlenia")})})});be.displayName="DashboardState";const rn=()=>r.useMemo(()=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}}),[]),ot=r.memo(()=>{const{data:s,isLoading:t,error:a}=cs(),i=rn();return t?e.jsx(B,{}):a?e.jsx(be,{type:"error",message:a.message}):s?e.jsxs(x.div,{className:"p-1 md:p-12 w-full overflow-y-auto",variants:i.container,initial:"hidden",animate:"visible",children:[e.jsx(x.h1,{className:`${je.text.heading} text-3xl mb-12`,variants:i.item,children:"Dashboard"}),e.jsxs("div",{className:je.grid,children:[e.jsx(x.div,{variants:i.item,className:je.card.community,children:e.jsx(it,{})}),e.jsx(x.div,{variants:i.item,className:je.card.game,children:e.jsx(rt,{})}),e.jsx(x.div,{variants:i.item,className:je.card.stats,children:e.jsx(nt,{stats:s.data})})]})]}):e.jsx(be,{type:"empty"})});ot.displayName="DashboardContent";const $l=Object.freeze(Object.defineProperty({__proto__:null,DashboardContent:ot},Symbol.toStringTag,{value:"Module"})),nn=s=>L(void 0,null,function*(){var i,n;const t=yield fetch(`${C}users/stats`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok)throw t.status===401?new Error("Brak autoryzacji"):new Error("Błąd podczas pobierania statystyk");const a=yield t.json();return S(k({},a),{chartData:{daily:((i=a.chartData)==null?void 0:i.daily)||[],categories:((n=a.chartData)==null?void 0:n.categories)||[]}})}),ds=()=>{const{token:s,isAuthenticated:t}=F(),{data:a,isLoading:i,error:n}=H({queryKey:["userProgress"],queryFn:()=>nn(s),enabled:t&&!!s,staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(o,c)=>c.message==="Brak autoryzacji"?!1:o<3});return{stats:a,isLoading:i,error:n}},ne={card:{base:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",title:"text-xl font-bold text-js mb-6",content:"h-full"},text:{heading:"text-3xl font-bold font-space text-js",subtitle:"text-gray-400 text-sm"}},lt=r.memo(({level:s,experience:t,nextLevel:a})=>{const i=t/a*100;return e.jsxs("div",{className:ne.card.base,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:ne.card.title,children:["Poziom ",s]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[t," / ",a," XP do następnego poziomu"]})]}),e.jsx("div",{className:"hidden w-16 h-16 rounded-full bg-js/20 md:flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-js",children:s})})]}),e.jsx("div",{className:"relative h-4 bg-dark/50 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:1,ease:"easeOut"},className:"absolute top-0 left-0 h-full bg-js/50"})})]})});lt.displayName="LevelProgress";const on={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},ct=r.memo(({icon:s,label:t,value:a,subValue:i})=>e.jsx(x.div,{variants:on,className:`${ne.card.base} hover:border-js/30 transition-all p-3 md:p-4`,children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"p-2 md:p-3 rounded-lg bg-js/10 shrink-0",children:e.jsx(s,{className:"w-5 h-5 md:w-6 md:h-6 text-js"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-0.5 md:mb-1",children:t}),e.jsx("p",{className:"text-xl md:text-2xl font-bold font-space text-js truncate",children:a}),i&&e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5 md:mt-1",children:i})]})]})}));ct.displayName="StatCard";const ln=()=>s=>{try{const t=new Date(s);return isNaN(t.getTime())?"Data nieznana":t.toLocaleDateString("pl-PL",{year:"numeric",month:"short",day:"numeric"})}catch(t){return"Data nieznana"}},cn={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},dn={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},dt=r.memo(({badge:s})=>{const t=ln();return e.jsxs(x.div,{variants:dn,className:"min-w-[8rem] flex flex-col items-center p-4 bg-dark/30 rounded-lg border border-js/10 hover:border-js/30 transition-colors",children:[e.jsx("span",{className:"text-3xl mb-2",children:s.icon||"🏆"}),e.jsx("h4",{className:"text-js font-medium text-sm text-center",children:s.name}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:t(s.earnedAt)}),s.description&&e.jsx("p",{className:"text-gray-400 text-xs mt-1 text-center",children:s.description},`${s.id}-description`)]})});dt.displayName="BadgeCard";const mt=r.memo(()=>e.jsxs("div",{className:ne.card.base,children:[e.jsx("h3",{className:ne.card.title,children:"Odznaki"}),e.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nie zdobyto jeszcze żadnych odznak"})]}));mt.displayName="EmptyBadges";const xt=r.memo(({badges:s})=>s!=null&&s.length?e.jsxs("div",{className:ne.card.base,children:[e.jsx("h3",{className:ne.card.title,children:"Odznaki"}),e.jsx(x.div,{variants:cn,initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:s.map(t=>e.jsx(dt,{badge:t},t.name))})]}):e.jsx(mt,{}));xt.displayName="BadgesGrid";const ut=r.memo(({message:s})=>e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-500",children:s})}));ut.displayName="ErrorState";const mn=s=>r.useMemo(()=>{var t;return s?[{id:"completed-lessons",icon:Z,label:"Ukończone Lekcje",value:((t=s.data.achievements.completedChallenges)==null?void 0:t.toString())||"0",gradient:"from-amber-500 to-orange-500"},{id:"current-streak",icon:Ts,label:"Aktualny Streak",value:`${s.data.achievements.streak.current||0} dni`,subValue:`Najlepszy: ${s.data.achievements.streak.best||0} dni`,gradient:"from-red-500 to-pink-500"}]:[]},[s]),xn={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},pt=r.memo(({stats:s,isLoading:t,error:a})=>{const i=mn(s);return t?e.jsx(B,{}):a?e.jsx(ut,{message:`Wystąpił błąd podczas ładowania statystyk: ${a.message}`}):s?e.jsxs(x.div,{variants:xn,initial:"hidden",animate:"show",className:"space-y-6",children:[e.jsx(lt,{level:s.data.progress.level,experience:s.data.progress.points,nextLevel:s.data.progress.pointsToNextLevel}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map(n=>e.jsx(ct,k({},n),n.id))}),e.jsx(xt,{badges:s.data.achievements.badges})]}):e.jsx("div",{className:"p-4 bg-dark/50 rounded-lg",children:e.jsx("p",{className:"text-gray-400",children:"Brak dostępnych statystyk"})})});pt.displayName="StatsOverview";const ht=r.memo(({data:s})=>e.jsx(zr,{width:"100%",height:300,children:e.jsxs(Lr,{data:s,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(Tr,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),e.jsx(Pr,{dataKey:"date",stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"}}),e.jsx(Er,{stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"},label:{value:"Punkty",angle:-90,position:"insideLeft",fill:"#666"}}),e.jsx(Ar,{contentStyle:{background:"#1A1A1A",border:"1px solid #333",borderRadius:"4px",padding:"8px"},labelStyle:{color:"#666"},itemStyle:{color:"#F7DF1E"}}),e.jsx(Cr,{type:"monotone",dataKey:"points",stroke:"#F7DF1E",strokeWidth:2,dot:{fill:"#F7DF1E",strokeWidth:2},activeDot:{r:6,fill:"#F7DF1E"}})]})}));ht.displayName="DailyChart";const jt=r.memo(({data:s,isLoading:t})=>t?e.jsx(B,{}):s?e.jsx("div",{className:"hidden md:flex flex-col gap-6 h-full",children:e.jsxs("div",{className:"bg-dark/50 rounded-lg p-6 flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-6",children:"Aktywność"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(ht,{data:s.daily})})]})}):null);jt.displayName="StatsCharts";const yt=r.memo(()=>{var d;const{stats:s,isLoading:t,error:a}=ds(),[i,n]=r.useState(!1),[o,c]=r.useState(null);if(r.useEffect(()=>{var u,m,h;(m=(u=s==null?void 0:s.data)==null?void 0:u.progress)!=null&&m.levelUp&&(c({level:s.data.progress.level,rewards:((h=s.data.achievements)==null?void 0:h.badges)||[]}),n(!0))},[s]),t)return e.jsx(B,{});if(a)return e.jsx(be,{type:"error",message:"Nie udało się załadować statystyk. Spróbuj ponownie później."});if(!s)return e.jsx(be,{type:"empty",message:"Brak dostępnych statystyk."});const l={data:{progress:{level:s.data.progress.level,points:s.data.progress.points,pointsToNextLevel:s.data.progress.pointsToNextLevel},achievements:{streak:{current:s.data.achievements.streak.current,best:s.data.achievements.streak.best},completedChallenges:s.data.achievements.completedChallenges,badges:s.data.achievements.badges},badges:s.data.achievements.badges,unlockedFeatures:[],levelUp:s.data.progress.levelUp,rewards:(d=s.data.achievements.badges)!=null&&d.length?{badges:s.data.achievements.badges,bonusPoints:0,unlockedFeatures:[]}:void 0,chartData:{daily:s.data.stats.daily,categories:[]}}};return e.jsxs(e.Fragment,{children:[e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Statystyki i Postępy | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Statystyki i Postępy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(x.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Statystyki i Postępy"})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 flex-1",children:[e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx(pt,{stats:l,isLoading:t,error:a})}),e.jsx("div",{className:"flex flex-col gap-6 h-full",children:e.jsx(jt,{data:s.data.stats,isLoading:t})})]})]}),e.jsx(vr,{isVisible:i,onClose:()=>n(!1),level:(o==null?void 0:o.level)||0,rewards:{badges:(o==null?void 0:o.rewards)||[],bonusPoints:0,unlockedFeatures:[]}})]})});yt.displayName="StatsSection";const Rl=Object.freeze(Object.defineProperty({__proto__:null,StatsSection:yt},Symbol.toStringTag,{value:"Module"})),Fe=r.memo(({message:s,onRetry:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(q,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-gray-400 mb-4",children:s}),t&&e.jsx("button",{onClick:t,className:"px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:"Spróbuj ponownie"})]})),un=[{id:"all",label:"Wszystkie"},{id:"beginner",label:"Podstawowe"},{id:"intermediate",label:"Średnie"},{id:"advanced",label:"Zaawansowane"}],gt=r.memo(({onFilterChange:s,className:t=""})=>{const[a,i]=Ps(),n=a.get("filter")||"all";r.useEffect(()=>{s(n)},[n,s]);const o=c=>{i(c==="all"?{tab:"lessons"}:{filter:c,tab:"lessons"})};return e.jsx("div",{className:`flex gap-2 flex-wrap ${t}`,children:un.map(c=>{const l=n===c.id;return e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(c.id),className:`w-fit px-3 py-1.5 rounded-lg text-sm font-medium transition-all
              ${l?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:c.label},c.id)})})});gt.displayName="LessonsFilter";const ft=r.memo(({onFilterChange:s})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Dostępne lekcje"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz interesującą Cię lekcję i rozpocznij naukę"})]}),e.jsx(gt,{onFilterChange:s})]}));ft.displayName="LessonsHeader";const pn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},bt=r.memo(({lesson:s})=>{const{title:t,description:a,duration:i,slug:n,isCompleted:o,isLocked:c,requiredLevel:l=1}=s,d=e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${c?"text-gray-500":"text-js"}`,children:t}),o&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-js/10 text-js",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Ukończono"]})]}),e.jsx("p",{className:`text-sm ${c?"text-gray-600":"text-gray-400"} line-clamp-2`,children:a})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${c?"text-gray-600":"text-gray-400"}`,children:[e.jsx(M,{className:"w-3.5 h-3.5"}),i," min"]}),c&&e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Y,{className:"w-3.5 h-3.5"}),"Poziom ",l]})]}),!c&&e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx("span",{children:o?"Powtórz":"Rozpocznij"}),e.jsx(Es,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]});return e.jsx(x.div,{variants:pn,className:`group relative ${c?"opacity-75":""}`,children:c?e.jsx("div",{className:"block p-6 rounded-xl bg-dark-800 border border-gray-800 cursor-not-allowed",children:d}):e.jsx(we,{to:`/dashboard/learn/lesson/${n}`,className:"block p-6 rounded-xl bg-dark-800 border border-js/10 hover:border-js/20 transition-colors",children:d})})});bt.displayName="LessonCard";const hn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},jn=s=>{switch(s){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},wt=r.memo(({lessons:s,filter:t,userData:a,isLoading:i=!1})=>{if(i)return e.jsx(B,{});const n=s.map(o=>S(k({},o),{isLocked:o.requiredLevel?o.requiredLevel>a.userLevel:!1}));return n.length===0?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(es,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(ss,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:t==="all"?"Brak dostępnych lekcji":`Brak lekcji o poziomie ${jn(t)}`}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:t==="all"?"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później.":"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności."})]}):e.jsxs(x.div,{variants:hn,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Lekcje | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Lekcje JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),n.map(o=>e.jsx(bt,{lesson:o},o.slug))]})});wt.displayName="LessonsList";const yn=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${C}lessons/${s}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!a.ok)throw a.status===404?new Error("lesson_not_found"):new Error("Błąd podczas pobierania lekcji");const i=yield a.json();return i.data?i.data:i}),gn=i=>L(void 0,[i],function*({lessonId:s,pathId:t,token:a}){if(!a)throw new Error("Brak tokenu autoryzacji");const n=yield fetch(`${C}lessons/${s}/complete`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({pathId:t})});if(!n.ok){const o=yield n.text();throw console.error("API error:",o),new Error(o||"Błąd podczas zakończenia lekcji")}return n.json()}),fn=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${C}lessons`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania lekcji");return yield t.json()}),gs=s=>{switch(s){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},bn=()=>{var v,f,y;const[s,t]=r.useState("all"),[a]=r.useState("javascript"),{token:i}=F(),{data:n,isLoading:o,error:c,refetch:l}=H({queryKey:["lessons"],queryFn:()=>fn(i||""),retry:2,staleTime:1e3*60*5,refetchOnWindowFocus:!0,enabled:!!i}),d=(f=(v=n==null?void 0:n.data.lessons)==null?void 0:v[a])!=null?f:[],u=(y=n==null?void 0:n.data.stats)!=null?y:{total:0,completed:0,progress:0},m=r.useMemo(()=>s==="all"?d:d.filter(b=>b.difficulty===s),[d,s]),h=!d||d.length===0,p=!h&&m.length===0,j={currentFilter:s,label:gs(s),isEmpty:h,hasNoLessonsForFilter:p,messages:{title:p?`Brak lekcji o poziomie ${gs(s)}`:"Brak dostępnych lekcji",description:p?"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności lub wyświetl wszystkie lekcje.":"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później."}};return{filteredLessons:m,filter:s,setFilter:t,resetFilter:()=>t("all"),isLoading:o,error:c,refetch:l,isEmpty:h,hasNoLessonsForFilter:p,filterState:j,requiredLevel:n==null?void 0:n.data.requiredLevel,stats:u}},Nt=r.memo(()=>{var h,p;const{user:s}=F(),{stats:t}=ds(),a=(s==null?void 0:s.id)||"current-user",i=((p=(h=t==null?void 0:t.data)==null?void 0:h.progress)==null?void 0:p.level)||1,{filteredLessons:n,filter:o,setFilter:c,isLoading:l,requiredLevel:d,error:u,refetch:m}=bn();return u?e.jsx(Fe,{message:"Nie udało się pobrać listy lekcji. Spróbuj ponownie później.",onRetry:()=>m()}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ft,{onFilterChange:c}),e.jsx(wt,{lessons:n,filter:o,userId:a,userData:{userLevel:i,requiredLevel:d||1},isLoading:l})]})});Nt.displayName="Lessons";const wn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},vt=r.memo(({resource:s,isRecommended:t})=>e.jsxs(x.div,{variants:wn,whileHover:{scale:1.02},className:"group relative bg-dark-800/50 border border-js/10 rounded-xl p-5 hover:border-js/20 transition-colors",children:[t&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-js text-dark px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),"Polecane"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-js mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.type==="documentation"?"bg-blue-500/10 text-blue-400":s.type==="tutorial"?"bg-green-500/10 text-green-400":s.type==="video"?"bg-red-500/10 text-red-400":"bg-purple-500/10 text-purple-400"}`,children:s.type==="documentation"?"Dokumentacja":s.type==="tutorial"?"Tutorial":s.type==="video"?"Wideo":"Artykuł"}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.difficulty==="beginner"?"bg-green-500/10 text-green-400":s.difficulty==="intermediate"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:s.difficulty==="beginner"?"Podstawowy":s.difficulty==="intermediate"?"Średni":"Zaawansowany"})]}),e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors text-sm",children:["Otwórz materiał",e.jsx(Xi,{className:"w-3 h-3"})]})]})]}));vt.displayName="ResourceCard";const Nn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},qe=r.memo(({title:s,subtitle:t,resources:a,isRecommended:i})=>e.jsxs("section",{children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Zasoby | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zasoby JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:s}),e.jsx("p",{className:"text-gray-400 text-sm",children:t})]}),e.jsx(x.div,{variants:Nn,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(n=>e.jsx(vt,{resource:n,isRecommended:i},n.id))})]}));qe.displayName="ResourceSection";const vn=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${C}resources`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania zasobów");return yield t.json()}),kn=()=>{var d;const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=H({queryKey:["resources"],queryFn:()=>vn(s||""),retry:2,staleTime:1e3*60*5,enabled:!!s}),o=((d=t==null?void 0:t.data)==null?void 0:d.resources)||[],c=o.filter(u=>u.isRecommended)||[],l=o.filter(u=>!u.isRecommended)||[];return{recommendedResources:c,otherResources:l,isLoading:a,error:i,refetch:n}},kt=r.memo(()=>{const{recommendedResources:s,otherResources:t,isLoading:a,error:i,refetch:n}=kn();return i?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsx(Fe,{message:"Nie udało się pobrać materiałów. Spróbuj ponownie później.",onRetry:()=>n()})})}):a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(B,{})}):!(s!=null&&s.length)&&!(t!=null&&t.length)?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Yi,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(ss,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Brak dostępnych materiałów"}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"Aktualnie nie ma żadnych dostępnych materiałów. Sprawdź ponownie później lub skontaktuj się z administratorem."}),e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(),className:"mt-6 px-4 py-2 bg-js/10 text-js border border-js/20 rounded-lg text-sm font-medium hover:bg-js/20 transition-colors",children:"Odśwież materiały"})]}):e.jsxs("div",{className:"space-y-8",children:[(s==null?void 0:s.length)>0&&e.jsx(qe,{title:"Polecane materiały",subtitle:"Wyselekcjonowane materiały, które pomogą Ci w nauce",resources:s,isRecommended:!0}),(t==null?void 0:t.length)>0&&e.jsx(qe,{title:"Wszystkie materiały",subtitle:"Przeglądaj wszystkie dostępne materiały",resources:t})]})});kt.displayName="Resources";const Me=r.memo(({icon:s,title:t,label:a,value:i})=>e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(s,{className:"w-5 h-5 text-js"}),e.jsx("h4",{className:"font-medium text-gray-200",children:t})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsx("span",{className:"text-js",children:i})]})]})),Sn=r.memo(({stats:s})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Me,{icon:As,title:"Postęp nauki",label:"Ukończone ścieżki",value:`${s.completedPaths}/${s.totalPaths}`}),e.jsx(Me,{icon:Ls,title:"Punkty XP",label:"Zdobyte punkty",value:`${s.totalPoints} XP`}),e.jsx(Me,{icon:M,title:"W trakcie",label:"Aktywne ścieżki",value:s.pathsInProgress})]})),zn=s=>L(void 0,null,function*(){if(!s)throw new Error("Brak tokenu autoryzacji");const t=yield fetch(`${C}Learning-paths`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw t.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania ścieżek nauki");return yield t.json()}),St=()=>{const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=H({queryKey:["learningPaths","userProgress"],queryFn:()=>zn(s||""),staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!!s});return{paths:(t==null?void 0:t.data.paths)||[],userStats:t==null?void 0:t.data.userStats,isLoading:a,error:i,refetch:n,isEmpty:!(t!=null&&t.data.paths)||t.data.paths.length===0}},Ln=r.memo(()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-2",children:"Brak dostępnych ścieżek nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Aktualnie nie ma żadnych dostępnych ścieżek nauki. Sprawdź ponownie później."})]})),Tn=s=>{const t=r.useMemo(()=>{var n,o,c,l;return{id:s.id,title:s.title||"Brak tytułu",description:s.description||"Brak opisu",estimatedTime:s.estimatedTime||0,isLocked:s.isLocked,requiredLevel:s.requiredLevel,progress:{completed:Array.isArray((n=s.progress)==null?void 0:n.completed)?s.progress.completed.length:Number((o=s.progress)==null?void 0:o.completed)||0,total:Number((c=s.progress)==null?void 0:c.total)||0,percentage:Number((l=s.progress)==null?void 0:l.percentage)||0},outcomes:Array.isArray(s.outcomes)?s.outcomes.map(d=>String(d)):[],requirements:Array.isArray(s.requirements)?s.requirements.map(d=>String(d)):[]}},[s]),a=r.useMemo(()=>`
    bg-dark-800/50 border rounded-xl p-6 transition-all
    ${t.isLocked?"border-gray-700/50 opacity-75":"border-js/10 hover:border-js/20"}
  `,[t.isLocked]),i=r.useMemo(()=>t.isLocked?{}:{scale:1.02},[t.isLocked]);return{safeData:t,cardStyles:a,hoverAnimation:i}},zt=r.memo(({title:s,isLocked:t,requiredLevel:a})=>e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-gray-400":"text-js"}`,children:s}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Poziom ",a]})]})]}));zt.displayName="PathHeader";const Lt=r.memo(({description:s,outcomes:t,requirements:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Czego się nauczysz:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:t.map((i,n)=>e.jsx("li",{children:i},n))})]}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Wymagania:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:a.map((i,n)=>e.jsx("li",{children:i},n))})]})]}));Lt.displayName="PathContent";const Tt=r.memo(({progress:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${s.percentage}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[e.jsxs("span",{children:[s.completed,"/",s.total," ukończone"]}),e.jsxs("span",{children:[s.percentage,"%"]})]})]}));Tt.displayName="ProgressBar";const Pt=r.memo(({id:s,isLocked:t,estimatedTime:a,progress:i})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(M,{className:"w-4 h-4"}),a," min"]}),!t&&e.jsx(we,{to:`/dashboard/learn?tab=lessons&pathId=${s}`,className:"text-js hover:text-js/80 transition-colors",children:e.jsx(Es,{className:"w-4 h-4"})})]}),e.jsx(Tt,{progress:i})]}));Pt.displayName="PathFooter";const Et=r.memo(({path:s})=>{const{safeData:t,cardStyles:a,hoverAnimation:i}=Tn(s);return e.jsx(x.div,{whileHover:i,className:a,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(zt,{title:t.title,isLocked:t.isLocked,requiredLevel:t.requiredLevel}),e.jsx(Lt,{description:t.description,outcomes:t.outcomes,requirements:t.requirements}),e.jsx(Pt,{id:t.id,isLocked:t.isLocked,estimatedTime:t.estimatedTime,progress:t.progress})]})})});Et.displayName="PathCard";const At=r.memo(()=>{const{paths:s,userStats:t,isLoading:a,error:i,refetch:n,isEmpty:o}=St();return a?e.jsx(B,{}):i?(console.error("Learning paths error:",i),e.jsx(Fe,{message:"Nie udało się pobrać ścieżek nauki. Spróbuj ponownie później.",onRetry:n})):o?e.jsx(Ln,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(Sn,{stats:t||{completedPaths:0,totalPaths:0,totalPoints:0,pathsInProgress:0,recentActivity:[]}}),e.jsxs("section",{children:[e.jsx("header",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Ścieżki nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz ścieżkę nauki dopasowaną do Twoich potrzeb"})]})}),e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(c=>e.jsx(Et,{path:c},c.id))})]})]})});At.displayName="LearningPaths";const Pn=[{id:"paths",label:"Ścieżki nauki",icon:As},{id:"lessons",label:"Lekcje",icon:Xe},{id:"resources",label:"Materiały",icon:Ne}],Ct=r.memo(({activeTab:s,onTabChange:t})=>e.jsx("div",{className:"flex gap-2 flex-wrap",children:Pn.map(a=>e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(a.id),className:`relative flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all
            ${s===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label,s===a.id&&e.jsx(x.div,{layoutId:"activeTab",className:"absolute inset-0 bg-js/5 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},a.id))}));Ct.displayName="LearnTabs";const $t=()=>{const[s,t]=r.useState(()=>localStorage.getItem("token")||sessionStorage.getItem("token")),i=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}").id;return r.useEffect(()=>{const n=()=>{t(localStorage.getItem("token")||sessionStorage.getItem("token"))};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[]),{token:s,isAuthenticated:!!s,userId:i}},Rt=r.memo(()=>{const[s,t]=Ps(),{isAuthenticated:a}=$t(),i=s.get("tab")||"paths",n=c=>{t(l=>(c==="paths"?(l.delete("tab"),l.delete("filter")):l.set("tab",c),l))},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return a?e.jsxs(x.div,{variants:o,initial:"hidden",animate:"visible",className:"min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Nauka | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Nauka JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(kr,{title:"Nauka JavaScript",subtitle:"Wybierz swoją ścieżkę nauki i rozpocznij przygodę z JS",className:"mb-8",titleClassName:"text-js drop-shadow-lg",subtitleClassName:"text-gray-400"}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6",children:[e.jsx(Ct,{activeTab:i,onTabChange:n}),e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,type:"spring",stiffness:200,damping:20},className:"mt-8",children:[i==="paths"&&e.jsx(At,{}),i==="lessons"&&e.jsx(Nt,{}),i==="resources"&&e.jsx(kt,{})]},i)]})]})]}):e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(B,{})})});Rt.displayName="LearnSection";const Fl=Object.freeze(Object.defineProperty({__proto__:null,LearnSection:Rt},Symbol.toStringTag,{value:"Module"})),En=(s,t,a,i)=>L(void 0,null,function*(){const n=yield fetch(`${C}users/${s}/lessons/${t}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(a)});if(!n.ok)throw new Error("Błąd podczas aktualizacji postępu");return n.json()}),An=s=>{const{userId:t,token:a}=$t(),i=xe(),{refetch:n}=St(),[o,c]=r.useState(0),{data:l,isLoading:d,error:u,refetch:m}=H({queryKey:["lesson",s],queryFn:()=>yn(s,a),enabled:!!s,retry:!1}),h=(u==null?void 0:u.message)==="lesson_not_found",p=ie({mutationFn:gn,onSuccess:()=>{i.invalidateQueries({queryKey:["userProgress"]}),i.invalidateQueries({queryKey:["lessons"]}),i.invalidateQueries({queryKey:["lesson",s]}),n()}}),j=ie({mutationFn:z=>En(t,s,z,a),onSuccess:()=>{i.invalidateQueries({queryKey:["userProgress"]})}}),v=z=>{c(z)},f=z=>L(void 0,null,function*(){!t||!s||(yield j.mutateAsync({completedSections:[...(l==null?void 0:l.completedSections)||[],z],isCompleted:!1,points:0}))}),y=z=>L(void 0,null,function*(){!t||!s||(yield j.mutateAsync({completedSections:(l==null?void 0:l.completedSections)||[],isCompleted:!1,points:z}))}),b=()=>L(void 0,null,function*(){if(!s||!l)return console.error("Brak wymaganych danych:",{lessonSlug:s,lesson:l}),Promise.reject(new Error("Brak wymaganych danych"));try{const z=yield p.mutateAsync({lessonId:l.id,pathId:l.pathId,token:a});return yield m(),yield n(),P.success("Lekcja ukończona!",{duration:3e3,position:"bottom-right"}),z}catch(z){throw console.error("Błąd podczas kończenia lekcji:",z),P.error("Nie udało się ukończyć lekcji. Spróbuj ponownie.",{duration:4e3,position:"bottom-right"}),z}});return{lesson:l,isLoading:d,error:u,isNotFound:h,activeSection:o,progress:l==null?void 0:l.progress,refetch:m,handleSectionChange:v,handleSectionComplete:f,handleQuizComplete:y,handleLessonComplete:b,completeLessonMutation:p}},ke=r.memo(({children:s})=>e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s})}));ke.displayName="LessonLayout";const Ft=r.memo(()=>e.jsxs(we,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors mb-6",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Wróć do listy lekcji"]}));Ft.displayName="BackToLessons";const Ie={BEGINNER:"beginner",INTERMEDIATE:"intermediate",ADVANCED:"advanced"},Cn={[Ie.BEGINNER]:"bg-green-500/10 text-green-400",[Ie.INTERMEDIATE]:"bg-yellow-500/10 text-yellow-400",[Ie.ADVANCED]:"bg-red-500/10 text-red-400"},Dt=r.memo(({difficulty:s})=>e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${Cn[s]}`,children:s==="beginner"?"Podstawowy":s==="intermediate"?"Średni":"Zaawansowany"}));Dt.displayName="DifficultyBadge";const _t=r.memo(({xp:s})=>e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2.5 py-1 rounded-lg text-sm",children:[e.jsx(O,{className:"w-4 h-4"}),s," XP"]}));_t.displayName="XpBadge";const $n=r.memo(({title:s,duration:t,difficulty:a,xp:i})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Dt,{difficulty:a}),e.jsx(_t,{xp:i})]}),e.jsx("h1",{className:"text-3xl font-bold text-js mb-4",children:s}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),t," min"]})})]})),Rn=s=>s?s.replace(/<!--[\s\S]*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"nodata:").replace(/eval\s*\(/gi,"").replace(/new\s+Function\s*\(/gi,""):"",Fn=tr,Ot=r.memo(({code:s,language:t,showLineNumbers:a=!0,className:i})=>{const n=Rn(s),o=()=>{navigator.clipboard.writeText(n)};return e.jsxs("div",{className:`relative group ${i}`,children:[e.jsx("button",{onClick:o,className:`absolute right-2 top-2 p-2 rounded-lg bg-dark/50 text-gray-400 \r
          opacity-0 group-hover:opacity-100 transition-opacity hover:text-js`,title:"Kopiuj kod",children:e.jsx(er,{className:"w-4 h-4"})}),e.jsx(Fn,{language:t,style:sr,showLineNumbers:a,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.5rem",background:"transparent"},codeTagProps:{style:{fontFamily:"JetBrains Mono, monospace"}},children:n})]})});Ot.displayName="CodeBlock";const Dn=r.memo(({example:s,index:t})=>s.code?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-200",children:["Przykład ",t+1,":"]}),e.jsx(Ot,{code:s.code,language:s.language||"javascript",showLineNumbers:!0,className:"rounded-lg border border-js/10"}),s.explanation&&e.jsx("p",{className:"text-gray-400 text-sm",children:s.explanation})]}):e.jsx("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-js/10",children:e.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Ten przykład nie zawiera jeszcze kodu."})})),Mt=r.memo(({section:s,index:t})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-js",children:[t+1,". ",s.title]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:s.content}),e.jsx("div",{className:"space-y-8 mt-8",children:s.examples&&s.examples.length>0&&e.jsx("div",{className:"space-y-8 mt-8",children:s.examples.map((a,i)=>e.jsx(Dn,{example:a,index:i},i))})})]}));Mt.displayName="LessonSection";const Be={perfect:{icon:Z,label:"Perfekcyjnie!",color:"text-yellow-500"},excellent:{icon:zs,label:"Świetnie!",color:"text-js"},good:{icon:O,label:"Mogło być lepiej!",color:"text-blue-500"}},_n=s=>s===100?Be.perfect:s>=80?Be.excellent:Be.good,It=r.memo(({correctAnswers:s,totalQuestions:t})=>{const a=s/t*100,i=_n(a),n=i.icon;return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:`w-12 h-12 ${i.color}`}),e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},className:"absolute -right-2 -bottom-2",children:e.jsx(O,{className:"w-6 h-6 text-yellow-500 animate-pulse"})})]})}),e.jsx("h3",{className:`text-xl font-bold ${i.color} mb-2`,children:i.label}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Poprawne odpowiedzi: ",s," z ",t]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x.div,{initial:{width:0},animate:{width:"100%"},className:"h-2 bg-dark rounded-full overflow-hidden mx-auto",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:`h-full ${a===100?"bg-yellow-500":"bg-js"}`,transition:{delay:.5,duration:.8}})}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Math.round(a),"% poprawnych odpowiedzi"]})]})]})}),Bt=r.memo(({questions:s,onComplete:t})=>{const[a,i]=r.useState(0),[n,o]=r.useState(null),[c,l]=r.useState(0),[d,u]=r.useState(!1),[m,h]=r.useState(!1),p=100,j=a/s.length*100,v=y=>{o(y),h(!0),y===s[a].correctAnswer&&l(b=>b+1)},f=()=>{a<s.length-1?(i(y=>y+1),o(null),h(!1)):(t(c,s.length),u(!0))};return d?e.jsx(It,{correctAnswers:c,totalQuestions:s.length,earnedXP:Math.round(c/s.length*p)}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Pytanie ",a+1," z ",s.length]}),e.jsx("span",{className:"text-js",children:"•"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(j),"% ukończone"]})]}),m&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg text-gray-400 text-sm",children:s[a].explanation}),n!==null&&e.jsx(x.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"w-full py-3 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:a<s.length-1?"Następne pytanie":"Zakończ quiz"}),e.jsx("div",{className:"text-lg font-medium text-gray-200",children:s[a].question}),e.jsx("div",{className:"space-y-3",children:s[a].options.map((y,b)=>e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:n!==null,onClick:()=>v(b),className:`w-full p-4 rounded-lg border text-left transition-colors
              ${n===null?"border-js/10 hover:border-js/20":b===s[a].correctAnswer?"border-green-500 bg-green-500/10 text-green-400":n===b?"border-red-500 bg-red-500/10 text-red-400":"border-js/10 opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:y}),n!==null&&(b===s[a].correctAnswer?e.jsx(oe,{className:"w-4 h-4 text-green-400"}):n===b?e.jsx($s,{className:"w-4 h-4 text-red-400"}):null)]})},b))})]})});Bt.displayName="LessonQuiz";It.displayName="QuizSummary";const Gt=r.memo(({lesson:s,onQuizComplete:t})=>{if(!s)return null;if(!s.content)return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8 text-center",children:[e.jsx("h2",{className:"text-xl text-js mb-4",children:"Brak treści lekcji"}),e.jsx("p",{className:"text-gray-400",children:"Treść lekcji jest niedostępna. Spróbuj ponownie później."})]})});const{sections:a=[]}=s.content;return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsx(x.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx($n,{title:s.title,duration:String(s.duration),difficulty:s.difficulty,xp:s.points}),e.jsxs("div",{className:"space-y-8",children:[a.map((i,n)=>e.jsx(Mt,{section:i,index:n},n)),s.content.quiz&&e.jsx(Bt,{questions:s.content.quiz,onComplete:t})]})]})})})});Gt.displayName="LessonMainContent";const Ht=r.memo(({isCompleted:s,onComplete:t})=>{const[a,i]=r.useState(0),[n,o]=r.useState(!1),c=Sr(0),l=me();r.useEffect(()=>{const m=document.querySelector(".lesson-content");if(!m)return;const h=()=>{const{scrollTop:p,scrollHeight:j,clientHeight:v}=m,f=p/(j-v)*100;i(Math.min(f,100)),c.set(Math.min(f,100))};return m.addEventListener("scroll",h),h(),()=>m.removeEventListener("scroll",h)},[c]);const d=a>=98&&!s,u=()=>L(void 0,null,function*(){if(!d||n){console.log("Nie można ukończyć lekcji:",{isLessonCompleted:d,isSubmitting:n});return}try{o(!0),yield t(),l("/dashboard/learn?tab=lessons")}catch(m){}finally{o(!1)}});return e.jsx("div",{className:"mb-5 fixed bottom-0 left-0 right-0 bg-dark-800/95 border-t border-js/10 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 mr-8",children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{style:{width:`${a}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsx("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:e.jsxs("span",{children:[Math.round(a),"% przeczytane"]})})]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:!d||n,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors
            ${d&&!n?"bg-js/10 text-js hover:bg-js/20":"bg-gray-800/50 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(oe,{className:"w-4 h-4"}),n?"Zapisywanie...":d?"Zakończ lekcję":"Przeczytaj całą lekcję"]})]})})});Ht.displayName="LessonProgress";const Ut=r.memo(({lesson:s,activeSection:t,progress:a,onSectionComplete:i,onQuizComplete:n,onLessonComplete:o})=>{if(!s)return null;const l=(s.sections||[]).length;return e.jsx(e.Fragment,{children:e.jsxs(ke,{children:[e.jsx(Ft,{}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(Gt,{lesson:s,onSectionComplete:i,onQuizComplete:n})}),e.jsx(Ht,{currentSection:t,totalSections:l,progress:a,isCompleted:s.isCompleted||!1,onComplete:o})]})})});Ut.displayName="LessonContent";const Ke=r.memo(()=>e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4",children:"Lekcja nie została znaleziona"}),e.jsxs(we,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})]})})}));Ke.displayName="LessonNotFound";const Wt=()=>{var j;const{lessonSlug:s}=ts(),{stats:t,isLoading:a}=ds();if(!s)return e.jsx(Rs,{to:"/dashboard/learn",replace:!0});const{lesson:i,isLoading:n,error:o,isNotFound:c,activeSection:l,progress:d,handleSectionComplete:u,handleQuizComplete:m,handleLessonComplete:h}=An(s);if(n||a)return e.jsx(Mn,{});if(c)return e.jsx(Ke,{});if(o)return e.jsx(In,{onRetry:()=>window.location.reload()});if(!i)return e.jsx(Ke,{});const p=((j=t==null?void 0:t.data)==null?void 0:j.progress.level)||0;return i.requiredLevel&&p<i.requiredLevel?e.jsx(On,{requiredLevel:i.requiredLevel,userLevel:p}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsxs("title",{children:[i.title," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:i.description})]}),e.jsx(Ut,{lesson:i,activeSection:l,progress:typeof d=="number"?d:0,onSectionComplete:u,onQuizComplete:m,onLessonComplete:h})]})},On=({requiredLevel:s,userLevel:t})=>e.jsx(ke,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:e.jsxs("div",{className:"bg-dark-800/50 p-8 rounded-xl border border-js/10 max-w-md",children:[e.jsx("div",{className:"mb-4 bg-js/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto",children:e.jsx(Y,{className:"text-js text-2xl"})}),e.jsx("h2",{className:"text-xl font-bold text-js mb-2",children:"Lekcja zablokowana"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Aby odblokować tę lekcję, musisz osiągnąć poziom ",s,"."]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Twój obecny poziom: ",e.jsx("span",{className:"text-js font-medium",children:t})]}),e.jsx("button",{onClick:()=>window.location.href="/dashboard/learn",className:"mt-4 px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors w-full",children:"Wróć do listy lekcji"})]})})}),Mn=()=>e.jsx(ke,{children:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(B,{})})}),In=({onRetry:s})=>e.jsx(ke,{children:e.jsx(Fe,{message:"Nie udało się pobrać lekcji. Spróbuj ponownie później.",onRetry:s})});Wt.displayName="LessonPage";const Dl=Object.freeze(Object.defineProperty({__proto__:null,LessonPage:Wt},Symbol.toStringTag,{value:"Module"})),Bn=[{id:"profile",label:"Profil",icon:Fs},{id:"security",label:"Bezpieczeństwo",icon:Y},{id:"preferences",label:"Preferencje",icon:vs},{id:"delete",label:"Usuń konto",icon:as}],Se={container:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 h-fit shadow-lg",nav:"flex flex-col gap-2",button:s=>`
    flex items-center gap-3 p-3 rounded-lg text-left
    transition-colors duration-200
    ${s?"bg-js/20 text-js":"text-gray-400 hover:text-js hover:bg-js/10"}
  `,icon:"w-5 h-5"},Jt=r.memo(({activeView:s,onViewChange:t})=>{const a=r.useCallback(i=>{t(i)},[t]);return e.jsx("div",{className:Se.container,children:e.jsx("nav",{className:Se.nav,children:Bn.map(i=>e.jsxs(x.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:()=>a(i.id),className:Se.button(s===i.id),children:[e.jsx(i.icon,{className:Se.icon}),i.label]},i.id))})})});Jt.displayName="SettingsSidebar";const Qt=s=>({Authorization:`Bearer ${s}`,"Content-Type":"application/json"}),Gn=s=>L(void 0,null,function*(){var o;const t=yield fetch(`${C}settings/profile`,{headers:Qt(s)});if(!t.ok)throw new Error("Błąd podczas pobierania profilu");const a=yield t.json(),i=a.data||a,n=i.user||i;return{username:n.username||"",email:n.email||"",profile:{bio:n.bio||((o=i.profile)==null?void 0:o.bio)||""}}}),Hn=(s,t)=>L(void 0,null,function*(){var n;const a={username:s.username,email:s.email,bio:((n=s.profile)==null?void 0:n.bio)||""},i=yield fetch(`${C}settings/profile`,{method:"PUT",headers:Qt(t),body:JSON.stringify(a)});if(!i.ok){const o=yield i.json().catch(()=>({}));throw new Error(o.message||"Błąd podczas aktualizacji profilu")}return i.json()}),Pe=["profile"],qt=()=>{var c;const s=xe(),{token:t}=F(),{data:a,isLoading:i,error:n}=H({queryKey:Pe,queryFn:()=>Gn(t||""),enabled:!!t,staleTime:1e3*60*5}),o=ie({mutationFn:l=>Hn(l,t||""),onSuccess:l=>{s.setQueryData(Pe,l),s.invalidateQueries({queryKey:Pe})}});return{profile:a,username:(a==null?void 0:a.username)||"",email:(a==null?void 0:a.email)||"",bio:((c=a==null?void 0:a.profile)==null?void 0:c.bio)||"",isLoading:i,error:n,updateProfile:o}},Un=D.object({username:D.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika może mieć maksymalnie 20 znaków"),email:D.string().email("Nieprawidłowy adres email"),profile:D.object({bio:D.string().max(160,"Bio może mieć maksymalnie 160 znaków").optional(),avatar:D.string().optional()})}),Wn=({onSubmit:s,defaultValues:t})=>{var n,o;const a=$e({resolver:Re(Un),defaultValues:{username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",profile:{bio:((n=t==null?void 0:t.profile)==null?void 0:n.bio)||"",avatar:((o=t==null?void 0:t.profile)==null?void 0:o.avatar)||""}}}),i=c=>L(void 0,null,function*(){try{yield s(c)}catch(l){console.error("Failed to update profile:",l)}});return{form:a,onSubmit:a.handleSubmit(i)}},Jn=s=>{var c;const{updateProfile:t}=qt(),a=r.useCallback(l=>L(void 0,null,function*(){var d;try{yield t.mutateAsync({username:l.username,email:l.email,profile:{bio:((d=l.profile)==null?void 0:d.bio)||""}})}catch(u){throw console.error("Błąd w useProfileFormLogic:",u),u}}),[t]),i={username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",profile:{bio:((c=s==null?void 0:s.profile)==null?void 0:c.bio)||""}},{form:n,onSubmit:o}=Wn({onSubmit:a,defaultValues:i});return{form:n,onSubmit:o}},ce={form:`w-full max-w-2xl sm:ml-0 sm:mr-auto 
    space-y-8 px-4 sm:px-0`,usernameContainer:"flex flex-col gap-4",container:`bg-dark/30 backdrop-blur-sm rounded-xl 
    p-4 sm:p-6 md:p-8 border border-js/10 
    space-y-6 md:space-y-8`,header:"flex flex-col md:flex-row gap-6 md:gap-8",infoSection:"w-full md:w-2/3 space-y-6",bioSection:"space-y-4",bioLabel:`block text-gray-400 
    text-sm sm:text-base 
    font-medium`,bioTextarea:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-sm sm:text-base 
    min-h-[120px] max-h-[240px] 
    resize-y
    transition-colors duration-200`,error:"text-red-500 text-sm mt-1",successMessage:"text-green-500 mt-2 text-sm font-medium"},Kt=r.memo(({register:s,errors:t})=>{var a,i;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ce.usernameContainer,children:e.jsx(de,k({type:"text",label:"Nazwa użytkownika",placeholder:"Wprowadź nazwę użytkownika",icon:e.jsx(Fs,{}),error:(a=t.username)==null?void 0:a.message},s("username")))}),e.jsx(de,k({type:"email",label:"Email",placeholder:"Wprowadź adres email",icon:e.jsx(ar,{}),error:(i=t.email)==null?void 0:i.message},s("email")))]})});Kt.displayName="UserInfoFields";const ze={container:"space-y-2",label:"block text-gray-400 text-sm",textarea:`w-full h-32 px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    resize-none`,error:"text-red-500 text-sm"},Zt=r.memo(({register:s,errors:t,defaultValue:a})=>{var i;return e.jsxs("div",{className:ze.container,children:[e.jsx("label",{className:ze.label,children:"Bio"}),e.jsx("textarea",S(k({},s("profile.bio")),{className:ze.textarea,placeholder:a||"Napisz coś o sobie..."})),((i=t.profile)==null?void 0:i.bio)&&e.jsx("span",{className:ze.error,children:t.profile.bio.message})]})});Zt.displayName="BioField";const Ge={container:`flex flex-col-reverse sm:flex-row justify-end gap-3 sm:gap-4
    w-full sm:w-auto mt-6 sm:mt-8`,cancelButton:`w-full sm:w-auto order-1 sm:order-none
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10 hover:border-js/30 hover:bg-dark/60
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
  `,submitButton:`w-full sm:w-auto
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-js text-dark
    hover:bg-js/90
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200
    text-sm sm:text-base font-medium
    flex items-center justify-center
  `},De=r.memo(({onCancel:s,isSubmitting:t,submitText:a="Zapisz zmiany",loadingText:i="Zapisywanie",disabled:n=!1})=>e.jsxs("div",{className:Ge.container,children:[e.jsx(fe,{type:"button",onClick:s,className:Ge.cancelButton,disabled:t,children:"Anuluj zmiany"}),e.jsx(fe,{type:"submit",disabled:t||n,className:Ge.submitButton,children:t?e.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-[100px]",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:i})]}):e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:a})})]}));De.displayName="FormButtons";const Vt=r.memo(({handleCancel:s,register:t,errors:a,defaultBio:i,isSubmitting:n,isPending:o,onSubmit:c,isSaved:l=!1,isDirty:d=!1})=>e.jsxs(x.form,{onSubmit:c,className:ce.form,initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:ce.container,children:e.jsxs("div",{className:ce.header,children:[e.jsxs("div",{className:ce.infoSection,children:[e.jsx(Kt,{register:t,errors:a}),e.jsx(Zt,{register:t,errors:a,defaultValue:i})]}),l&&!d&&e.jsx("div",{className:ce.successMessage,children:"✓ Zapisano zmiany"})]})}),e.jsx(De,{onCancel:s,isSubmitting:n||o,submitText:"Zapisz profil",loadingText:"Zapisywanie",disabled:!d||n})]}));Vt.displayName="ProfileFormContent";const Xt=r.memo(()=>{const{profile:s,username:t,email:a,bio:i,isLoading:n,updateProfile:o}=qt(),{form:c,onSubmit:l}=Jn(s||null),d=xe(),[u,m]=r.useState(!1),[h,p]=r.useState(!1),{register:j,formState:{errors:v,isDirty:f},reset:y,setValue:b,watch:z}=c,T=z();r.useEffect(()=>{f&&p(!1)},[T,f]),r.useEffect(()=>{s&&(b("username",t),b("email",a),b("profile.bio",i))},[s,b,t,a,i]);const N=r.useCallback(()=>{try{s&&(y(s),P.success("Zmiany zostały anulowane"),p(!1))}catch(g){P.error("Nie udało się anulować zmian")}},[s,y]),w=g=>L(void 0,null,function*(){if(!f){P.success("Nie wprowadzono żadnych zmian");return}try{m(!0),yield l(g),yield d.invalidateQueries({queryKey:Pe}),p(!0),P.success("Profil został zaktualizowany pomyślnie")}catch(E){E instanceof Error?P.error(E.message||"Wystąpił błąd podczas aktualizacji profilu"):P.error("Wystąpił nieznany błąd podczas aktualizacji profilu")}finally{m(!1)}});return n?e.jsx(B,{}):e.jsxs(e.Fragment,{children:[h&&!f&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-2 rounded-lg mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Twój profil został zaktualizowany pomyślnie"]}),e.jsx(Vt,{handleCancel:N,register:j,errors:v,defaultBio:i,isSubmitting:u||o.isPending,isPending:o.isPending,onSubmit:w,isSaved:h,isDirty:f})]})});Xt.displayName="ProfileForm";const Yt=r.memo(({form:s,errors:t})=>{var i,n,o;const{register:a}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,k({type:"password",label:"Aktualne hasło",placeholder:"Wprowadź aktualne hasło",icon:e.jsx(Y,{}),error:(i=t.currentPassword)==null?void 0:i.message},a("currentPassword"))),e.jsx(de,k({type:"password",label:"Nowe hasło",placeholder:"Wprowadź nowe hasło",icon:e.jsx(Y,{}),error:(n=t.newPassword)==null?void 0:n.message},a("newPassword"))),e.jsx(de,k({type:"password",label:"Powtórz nowe hasło",placeholder:"Powtórz nowe hasło",icon:e.jsx(Y,{}),error:(o=t.confirmPassword)==null?void 0:o.message},a("confirmPassword")))]})});Yt.displayName="PasswordFields";const Qn=D.object({currentPassword:D.string().min(1,"Aktualne hasło jest wymagane").min(8,"Hasło musi mieć minimum 8 znaków"),newPassword:D.string().min(1,"Nowe hasło jest wymagane").min(8,"Nowe hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać wielką literę").regex(/[0-9]/,"Hasło musi zawierać cyfrę"),confirmPassword:D.string().min(1,"Potwierdzenie hasła jest wymagane")}).refine(s=>s.newPassword===s.confirmPassword,{message:"Hasła muszą być takie same",path:["confirmPassword"]});class ea extends Error{constructor(t,a){super(a),this.code=t,this.name="SecurityError"}}const qn=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${C}settings/security/password`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const i=yield a.json(),n=i.message||"Wystąpił błąd podczas zmiany hasła",o=i.code||"UNKNOWN_ERROR";throw new ea(o,n)}}),Kn=({onSuccess:s,onError:t}={})=>{const{token:a}=F(),i=$e({resolver:Re(Qn),mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),n=ie({mutationFn:o=>qn({currentPassword:o.currentPassword,newPassword:o.newPassword},a||""),onSuccess:()=>{i.reset(),s==null||s()},onError:t});return{form:i,onSubmit:i.handleSubmit(o=>n.mutateAsync(o)),isUpdating:n.isPending}},Zn=()=>{const s=r.useCallback(()=>{P.success("Hasło zostało zmienione")},[]),t=r.useCallback(n=>{if(n instanceof ea){P.error(n.message);return}P.error("Wystąpił błąd podczas zmiany hasła")},[]),a=r.useCallback(()=>{P.success("Zmiany zostały anulowane")},[]),i=r.useCallback(()=>{P.error("Nie udało się anulować zmian")},[]);return{handleSuccess:s,handleError:t,handleCancel:a,handleCancelError:i}},Vn={initial:{opacity:0},animate:{opacity:1}},sa=r.memo(()=>{const{handleSuccess:s,handleError:t,handleCancel:a,handleCancelError:i}=Zn(),{form:n,onSubmit:o,isUpdating:c}=Kn({onSuccess:()=>{s(),n.reset()},onError:t}),{formState:{errors:l,isSubmitting:d},reset:u}=n,m=r.useCallback(()=>{try{u(),a()}catch(h){i()}},[u,a,i]);return e.jsxs(x.form,S(k({onSubmit:o,className:"w-full max-w-md sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0"},Vn),{children:[e.jsx(Yt,{form:n,errors:l}),e.jsx(De,{onCancel:m,isSubmitting:d||c,submitText:"Zmień hasło",loadingText:"Zmienianie hasła"})]}))});sa.displayName="SecurityForm";const Xn=D.object({emailNotifications:D.boolean(),pushNotifications:D.boolean(),language:D.literal("pl")}),Yn=({onSubmit:s,defaultValues:t})=>{const a=$e({resolver:Re(Xn),defaultValues:t||{emailNotifications:!1,pushNotifications:!1,language:"pl"},mode:"onChange",reValidateMode:"onChange",resetOptions:{keepDirtyValues:!0,keepValues:!0}}),i=a.handleSubmit(n=>L(void 0,null,function*(){try{yield s(n)}catch(o){console.error("Failed to update preferences:",o)}}));return{form:a,onSubmit:i}};class G extends Error{constructor(t,a){super(a),this.code=t,this.name="PreferencesError"}}const eo=s=>L(void 0,null,function*(){var t,a;try{const i=yield fetch(`${C}settings/preferences`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!i.ok){if(i.status===401)throw new G("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const c=yield i.json().catch(()=>null);throw new G((c==null?void 0:c.code)||"UNKNOWN_ERROR",(c==null?void 0:c.message)||"Błąd podczas pobierania preferencji")}const n=yield i.json(),o=n.data||n;return{emailNotifications:(t=o.emailNotifications)!=null?t:!1,pushNotifications:(a=o.pushNotifications)!=null?a:!1,language:o.language||"pl"}}catch(i){throw i instanceof G?i:(console.error("Błąd w fetchPreferences:",i),new G("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas pobierania preferencji"))}}),so=(s,t)=>L(void 0,null,function*(){var a,i;try{const n=yield fetch(`${C}settings/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){if(n.status===401)throw new G("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const l=yield n.json().catch(()=>({code:"UNKNOWN_ERROR"}));throw new G((l==null?void 0:l.code)||"UNKNOWN_ERROR",(l==null?void 0:l.message)||"Wystąpił błąd podczas aktualizacji preferencji")}const o=yield n.json(),c=o.data||o;return{emailNotifications:(a=c.emailNotifications)!=null?a:!1,pushNotifications:(i=c.pushNotifications)!=null?i:!1,language:c.language||"pl"}}catch(n){throw n instanceof G?n:(console.error("Błąd w updatePreferences:",n),new G("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas aktualizacji preferencji"))}}),He=["preferences"],to=()=>{const{token:s,logout:t}=F(),a=xe(),{data:i,isLoading:n,error:o,refetch:c}=H({queryKey:He,queryFn:()=>eo(s||""),enabled:!!s,staleTime:1e3*60*5,retry:(d,u)=>u instanceof G&&u.code==="AUTH_ERROR"?(P.error("Sesja wygasła. Zaloguj się ponownie."),t==null||t(),!1):d<3});o&&!(o instanceof G&&o.code==="AUTH_ERROR")&&P.error(o instanceof Error?o.message:"Wystąpił błąd podczas ładowania preferencji");const l=ie({mutationFn:d=>so(d,s||""),onSuccess:d=>{a.setQueryData(He,d),a.invalidateQueries({queryKey:He}),P.success("Preferencje zostały zaktualizowane")},onError:d=>{if(d instanceof G&&d.code==="AUTH_ERROR"){P.error("Sesja wygasła. Zaloguj się ponownie."),t==null||t();return}P.error(d instanceof Error?d.message:"Wystąpił błąd podczas aktualizacji preferencji")}});return{preferences:i,isLoading:n,error:o,updatePreferences:l,refetch:c}},ao=()=>{const{preferences:s,isLoading:t,updatePreferences:a,refetch:i}=to(),[n,o]=r.useState(!1),[c,l]=r.useState(!1),{form:d,onSubmit:u}=Yn({onSubmit:b=>L(void 0,null,function*(){try{o(!0),yield a.mutateAsync({emailNotifications:b.emailNotifications,pushNotifications:b.pushNotifications,language:"pl"}),l(!0),yield i()}catch(z){throw console.error("Błąd w usePreferencesFormLogic:",z),z instanceof G?z:z instanceof Error?new Error(z.message||"Wystąpił błąd podczas aktualizacji preferencji"):new Error("Wystąpił nieznany błąd podczas aktualizacji preferencji")}finally{o(!1)}})}),{register:m,formState:{isDirty:h},setValue:p,watch:j,reset:v}=d,f=j();r.useEffect(()=>{h&&l(!1)},[f,h]),r.useEffect(()=>{s&&(p("emailNotifications",s.emailNotifications),p("pushNotifications",s.pushNotifications),p("language","pl"))},[s,p]);const y=()=>{try{s&&(v({emailNotifications:s.emailNotifications,pushNotifications:s.pushNotifications,language:"pl"}),l(!1),P.success("Zmiany zostały anulowane"))}catch(b){console.error("Błąd podczas anulowania zmian:",b),P.error("Nie udało się anulować zmian")}};return{isLoading:t,register:m,formValues:f,isSubmitting:n||a.isPending,isPending:a.isPending,isDirty:h,isSaved:c,updatePreferences:a,handleCancel:y,onSubmit:u,setValue:p}},V={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",optionsContainer:"space-y-4 ml-4 sm:ml-8",optionLabel:`flex items-start sm:items-center gap-3 hover:cursor-pointer group
    transition-colors duration-200`,checkbox:`w-5 h-5 rounded border-gray-600 bg-gray-700 text-js 
    focus:ring-js/50 mt-1 sm:mt-0`,optionText:"group-hover:text-js transition-colors duration-200",optionTitle:"block text-gray-200 text-base sm:text-lg",optionDescription:"block text-sm text-gray-400 mt-1"},ta=r.memo(({register:s,values:t,onChange:a})=>e.jsxs("div",{className:V.section,children:[e.jsxs("h3",{className:V.title,children:[e.jsx(Ye,{className:V.icon}),"Powiadomienia"]}),e.jsx("div",{className:V.optionsContainer,children:e.jsxs("label",{className:V.optionLabel,children:[e.jsx("input",S(k({type:"checkbox"},s("emailNotifications")),{checked:t.emailNotifications,onChange:i=>a("emailNotifications",i.target.checked),className:V.checkbox})),e.jsxs("div",{className:V.optionText,children:[e.jsx("span",{className:V.optionTitle,children:"Powiadomienia email"}),e.jsx("span",{className:V.optionDescription,children:"Otrzymuj powiadomienia na email"})]})]})})]}));ta.displayName="NotificationsSection";const ye={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",container:"ml-4 sm:ml-8",select:`w-full max-w-xs px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 text-base sm:text-lg
    focus:ring-2 focus:ring-js/50 focus:border-transparent 
    transition-colors`},aa=r.memo(({register:s})=>e.jsxs("div",{className:ye.section,children:[e.jsxs("h3",{className:ye.title,children:[e.jsx(is,{className:ye.icon}),"Język"]}),e.jsx("div",{className:ye.container,children:e.jsx("select",S(k({},s("language")),{className:ye.select,children:e.jsx("option",{value:"pl",children:"Polski"})}))})]}));aa.displayName="LanguageSection";const ia=r.memo(({register:s,formValues:t,setValue:a,onSubmit:i,onCancel:n,isSubmitting:o,isPending:c})=>e.jsxs(x.form,{onSubmit:i,className:"w-full max-w-2xl sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 md:p-8 border border-js/10 space-y-6",children:[e.jsx(ta,{register:s,values:t,onChange:(l,d)=>a(l,d)}),e.jsx("div",{className:"w-full h-px bg-js/10"}),e.jsx(aa,{register:s})]}),e.jsx(De,{onCancel:n,isSubmitting:o||c,submitText:"Zapisz preferencje",loadingText:"Zapisywanie",disabled:o})]}));ia.displayName="PreferencesFormContent";const ra=r.memo(()=>{const{isLoading:s,register:t,formValues:a,isSubmitting:i,isPending:n,isDirty:o,isSaved:c,handleCancel:l,onSubmit:d,setValue:u}=ao(),m=h=>L(void 0,null,function*(){h.preventDefault();try{yield d(h)}catch(p){console.error("Błąd podczas zapisywania preferencji:",p),p instanceof Error?P.error(p.message):P.error("Wystąpił nieznany błąd podczas zapisywania preferencji")}});return s?e.jsx(B,{}):e.jsx(ia,{register:t,formValues:a,setValue:u,onSubmit:m,onCancel:l,isSubmitting:i,isPending:n,isDirty:o,isSaved:c})});ra.displayName="PreferencesForm";const io=()=>{const[s,t]=r.useState(!1),a=r.useCallback(()=>{t(!0)},[]),i=r.useCallback(()=>{t(!1)},[]);return{showConfirmation:s,handleShowConfirmation:a,handleHideConfirmation:i}};class Ee extends Error{constructor(t,a){super(a),this.code=t,this.name="AccountError"}}const ro=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${C}settings/account`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const i=yield a.json();throw i.code==="INVALID_PASSWORD"?new Ee("INVALID_PASSWORD","Podane hasło jest nieprawidłowe"):i.code==="INVALID_CONFIRMATION"?new Ee("INVALID_CONFIRMATION","Nieprawidłowe potwierdzenie"):new Ee("UNKNOWN_ERROR","Wystąpił błąd podczas usuwania konta")}}),no=D.object({password:D.string().min(1,"Hasło jest wymagane"),confirmation:D.string().refine(s=>s==="USUŃ KONTO",{message:"Wpisz dokładnie 'USUŃ KONTO' aby potwierdzić"})}),oo=({onSuccess:s,onError:t}={})=>{const a=$e({resolver:Re(no)}),{token:i}=F(),n=ie({mutationFn:c=>ro(c,i||""),onSuccess:()=>{a.reset(),s==null||s(),window.location.href="/logowanie"},onError:t}),o=a.handleSubmit(c=>L(void 0,null,function*(){yield n.mutateAsync(c)}));return{form:a,onSubmit:o,isDeleting:n.isPending}},lo=s=>{const t=r.useCallback(()=>{P.success("Konto zostało usunięte")},[]),a=r.useCallback(l=>{if(l instanceof Ee)switch(l.code){case"INVALID_PASSWORD":P.error("Podane hasło jest nieprawidłowe");return;case"INVALID_CONFIRMATION":P.error("Nieprawidłowe potwierdzenie");return}P.error("Nie udało się usunąć konta")},[]),i=r.useCallback(()=>{try{s(),P.success("Operacja została anulowana")}catch(l){P.error("Nie udało się anulować operacji")}},[s]),{form:n,onSubmit:o,isDeleting:c}=oo({onSuccess:t,onError:a});return{form:n,onSubmit:o,isDeleting:c,handleCancel:i}},co=["Wszystkie twoje dane zostaną usunięte","Stracisz dostęp do wszystkich kursów","Twoje postępy w nauce zostaną utracone","Nie będzie możliwości przywrócenia konta"],Le={container:`
    bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
    backdrop-blur-sm
  `,content:"flex flex-col sm:flex-row items-start gap-4",icon:"text-red-500 text-xl sm:text-2xl mt-1 flex-shrink-0",title:"text-red-400 font-medium text-lg sm:text-xl mb-2",list:`
    text-gray-400 space-y-2 list-disc list-inside
    text-sm sm:text-base leading-relaxed
  `},na=r.memo(()=>e.jsx("div",{className:`
      bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
      backdrop-blur-sm
    `,role:"alert","aria-label":"Ostrzeżenie o usuwaniu konta",children:e.jsxs("div",{className:Le.content,children:[e.jsx(q,{className:Le.icon,"data-testid":"warning-icon"}),e.jsxs("div",{children:[e.jsx("h3",{className:Le.title,children:"Usuwanie konta jest nieodwracalne"}),e.jsx("ul",{className:Le.list,children:co.map((s,t)=>e.jsx("li",{children:s},t))})]})]})}));na.displayName="WarningBox";const oa=r.memo(({onConfirm:s})=>e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md sm:ml-0 sm:mr-auto px-4 sm:px-0",children:[e.jsx(na,{}),e.jsx(fe,{type:"button",onClick:s,className:`w-full px-6 py-3 rounded-lg bg-red-500/20 text-red-400 \r
        hover:bg-red-500/30 transition-colors duration-200 shadow-none\r
        text-base sm:text-lg font-medium`,children:"Chcę usunąć konto"})]}));oa.displayName="InitialWarning";const X={form:"space-y-6",confirmationField:"space-y-2",label:"block text-gray-400 text-sm sm:text-base",hint:"text-sm text-gray-500",input:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-base sm:text-lg
  `,error:"text-red-500 text-sm",buttons:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 mt-8",submitButton:`w-full sm:w-auto order-2 sm:order-1
    px-4 sm:px-6 py-3 rounded-lg
    bg-red-500/20 text-red-400 
    hover:bg-red-500/30
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `,cancelButton:`w-full sm:w-auto order-1 sm:order-2
    px-4 sm:px-6 py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10
    hover:text-js hover:border-js/30
    hover:bg-dark/60
    transition-colors duration-200 shadow-none
    text-sm sm:text-base
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `},la=r.memo(({register:s,errors:t,isSubmitting:a,onCancel:i,onSubmit:n})=>{var o;return e.jsxs(x.form,{initial:{opacity:0},animate:{opacity:1},className:X.form,onSubmit:n,children:[e.jsx(de,k({id:"password",type:"password",label:"Hasło",placeholder:"Wprowadź hasło aby potwierdzić",icon:e.jsx(Y,{}),error:(o=t.password)==null?void 0:o.message},s("password"))),e.jsxs("div",{className:X.confirmationField,children:[e.jsx("label",{htmlFor:"confirmation",className:X.label,children:"Potwierdzenie"}),e.jsx("p",{className:X.hint,children:'Wpisz "USUŃ KONTO" aby potwierdzić'}),e.jsx("input",S(k({id:"confirmation",type:"text"},s("confirmation")),{className:X.input})),t.confirmation&&e.jsx("p",{className:X.error,children:t.confirmation.message})]}),e.jsxs("div",{className:X.buttons,children:[e.jsx(fe,{type:"submit",disabled:a,className:X.submitButton,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Usuwanie"})]}):"Definitywnie usuń konto"}),e.jsx(fe,{type:"button",onClick:i,disabled:a,className:X.cancelButton,children:"Anuluj"})]})]})});la.displayName="ConfirmationForm";const ca=r.memo(()=>{const{showConfirmation:s,handleShowConfirmation:t,handleHideConfirmation:a}=io(),{form:i,onSubmit:n,isDeleting:o,handleCancel:c}=lo(a);return s?e.jsx(la,{register:i.register,errors:i.formState.errors,isSubmitting:o,onCancel:c,onSubmit:n}):e.jsx(oa,{onConfirm:t})});ca.displayName="DeleteAccountForm";const da=r.memo(({activeView:s})=>e.jsx(I,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-dark/30 backdrop-blur-sm rounded-xl p-6 border border-js/10 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold font-space text-js mb-6",children:[s==="profile"&&"Edytuj Profil",s==="security"&&"Bezpieczeństwo",s==="preferences"&&"Preferencje",s==="delete"&&"Usuń Konto"]}),s==="profile"&&e.jsx(Xt,{}),s==="security"&&e.jsx(sa,{}),s==="preferences"&&e.jsx(ra,{}),s==="delete"&&e.jsx(ca,{})]},s)}));da.displayName="SettingsContent";const ma=r.memo(()=>{const[s,t]=r.useState("profile");return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Ustawienia | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(x.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Ustawienia"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(Jt,{activeView:s,onViewChange:t}),e.jsxs(ee,{children:[e.jsxs("title",{children:[s.charAt(0).toUpperCase()+s.slice(1)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(da,{activeView:s})})]})]})});ma.displayName="SettingsSection";const _l=Object.freeze(Object.defineProperty({__proto__:null,SettingsSection:ma},Symbol.toStringTag,{value:"Module"})),xa=r.memo(()=>e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.div,{whileHover:{scale:1.1,rotate:15},className:"p-3 rounded-xl bg-gradient-to-br from-js/20 to-js/20",children:e.jsx(Ve,{className:"w-8 h-8 text-js"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-transparent bg-clip-text bg-gradient-to-r from-js to-js",children:"Gry JavaScript"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Ucz się JavaScriptu poprzez zabawę i wyzwania"})]})]})}));xa.displayName="GamesHeader";const ua=r.memo(()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.1},className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gray-800/50 animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-800/50 rounded animate-pulse w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse w-4/5"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"})]}),e.jsx("div",{className:"h-8 w-24 bg-gray-800/50 rounded animate-pulse"})]})]})]},s))}));ua.displayName="GamesListSkeleton";const pa=r.memo(({query:s})=>{const a=s?{title:"Brak wyników wyszukiwania",description:`Nie znaleziono gier dla zapytania "${s}"`,icon:es}:{title:"Brak gier w tej kategorii",description:"Spróbuj wybrać inną kategorię lub wróć później",icon:ss};return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",bounce:.4},className:"w-20 h-20 mb-6 rounded-full bg-js/10 flex items-center justify-center",children:e.jsx(a.icon,{className:"w-10 h-10 text-js"})}),e.jsx(x.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold text-js mb-2 text-center",children:a.title}),e.jsx(x.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400 text-center max-w-md",children:a.description})]})});pa.displayName="NoGamesFound";const ha=r.memo(({game:s})=>{const t=me(),a=()=>{s.isLevelAvailable&&t(`/dashboard/play/${s.slug}`)},i=!s.isLevelAvailable;return e.jsxs(x.div,{whileHover:{scale:i?1:1.02},className:`group bg-dark-800/50 border rounded-xl overflow-hidden transition-all ${i?"border-gray-700/50 opacity-50 cursor-not-allowed":"border-js/10 hover:border-js/20"}`,children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-js/5 to-js/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-js/10 px-4 py-2 rounded-lg border border-js/20",children:e.jsx("span",{className:"font-mono text-js/80 font-medium",children:s.slug})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/90 to-transparent"}),i?e.jsx("div",{className:"absolute inset-0 m-auto w-12 h-12 bg-gray-700 text-gray-400 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5"})}):e.jsx(x.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:a,className:"absolute inset-0 m-auto w-12 h-12 bg-js text-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ds,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-js line-clamp-1",children:s.title}),e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2 py-0.5 rounded-lg text-sm",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),s.rewardPoints]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:i?`Dostępne od poziomu ${s.requiredLevel}`:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("div",{className:"flex items-center gap-4 text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),s.rating.average.toFixed(1)]})}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${s.difficulty==="easy"?"bg-green-500/10 text-green-400":s.difficulty==="medium"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:s.difficulty==="easy"?"Łatwy":s.difficulty==="medium"?"Średni":"Trudny"})]})]})]})});ha.displayName="GameCard";const mo=s=>L(void 0,null,function*(){const t=yield fetch(`${C}games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Nie udało się pobrać gier");return t.json()}),se=()=>{const{token:s}=F();return H({queryKey:["games"],queryFn:()=>mo(s||""),select:t=>({games:t.data,pagination:t.data}),staleTime:5*60*1e3})},ja=r.memo(({sortBy:s,searchQuery:t,selectedDifficulty:a})=>{const{data:i,isLoading:n,isError:o}=se();if(n)return e.jsx(ua,{});if(o)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-400",children:"Wystąpił błąd podczas ładowania gier. Spróbuj ponownie później."})});if(!(i!=null&&i.games))return null;const c=i.games.filter(l=>(a==="all"||l.difficulty===a)&&(l.title.toLowerCase().includes(t.toLowerCase())||l.description.toLowerCase().includes(t.toLowerCase()))).sort((l,d)=>{switch(s){case"newest":return new Date(d.createdAt).getTime()-new Date(l.createdAt).getTime();case"popular":return d.completions.count-l.completions.count;case"difficulty":return d.difficulty.localeCompare(l.difficulty);case"xp":return d.rewardPoints-l.rewardPoints;default:return 0}});return c.length?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4 sm:gap-6",children:c.map(l=>{const d={_id:l._id,id:l._id,slug:l.slug,isLevelAvailable:l.isLevelAvailable,title:l.title,description:l.description,difficulty:l.difficulty,category:"game",isCompleted:!1,rating:{average:0,count:0},completions:l.completions,completedCount:l.completions.count,thumbnailUrl:"",rewardPoints:l.rewardPoints,xpPoints:l.rewardPoints,requiredLevel:l.requiredLevel};return e.jsx(ha,{game:d},d._id)})}):e.jsx(pa,{query:t})});ja.displayName="GamesList";const xo=[{id:"newest",label:"Najnowsze",icon:M},{id:"popular",label:"Popularne",icon:Ts},{id:"difficulty",label:"Trudność",icon:O},{id:"xp",label:"Punkty XP",icon:Z}],ya=r.memo(({activeSortOption:s,onSortChange:t})=>e.jsxs("div",{className:"flex items-center gap-4 lg:ml-auto",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Sortuj:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:xo.map(a=>{const i=a.icon;return e.jsxs(x.button,{onClick:()=>t(a.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium
                transition-all duration-200
                ${s===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}
              `,children:[e.jsx(i,{className:"w-4 h-4"}),a.label]},a.id)})})]}));ya.displayName="GamesSorting";const ga=r.memo(({value:s,onChange:t})=>{const a=r.useCallback(i=>{t(i.target.value)},[t]);return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:a,placeholder:"Szukaj gry...",className:`\r
            w-full pl-10 pr-4 py-1.5 \r
            bg-dark border border-js/10\r
            rounded-lg text-sm text-gray-200\r
            focus:outline-none focus:border-js/30\r
            transition-colors duration-200\r
          `}),e.jsx(es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-js/50"})]}),e.jsx(x.div,{initial:!1,animate:{width:s?"100%":"0%",opacity:s?1:0},className:"absolute bottom-0 left-0 h-0.5 bg-js/20 rounded-full"})]})});ga.displayName="GamesSearch";const uo=[{value:"all",label:"Wszystkie"},{value:"easy",label:"Łatwe",color:"text-emerald-400"},{value:"medium",label:"Średnie",color:"text-indigo-400"},{value:"hard",label:"Trudne",color:"text-rose-400"}],fa=r.memo(({selectedDifficulty:s,onDifficultyChange:t})=>e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 flex-wrap",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Poziom:"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:uo.map(a=>e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(a.value),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all relative
              ${s===a.value?`text-${a.color||"gray-200"}`:"text-gray-400 hover:text-gray-300"}`,children:[s===a.value&&e.jsx(x.div,{layoutId:"difficulty-background",className:`absolute inset-0 bg-gray-800/50 border rounded-lg -z-10 border-${a.color||"gray-400"}`,transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx(I,{mode:"wait",children:e.jsx(x.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:s===a.value?e.jsx(ir,{className:`w-3 h-3 ${a.color||"text-gray-400"}`}):e.jsx(rr,{className:"w-3 h-3"})},s===a.value?"circle":"circle-outline")}),a.label]},a.value))})]}));fa.displayName="GamesDifficulty";const ba=r.memo(()=>{const[s,t]=r.useState("newest"),[a,i]=r.useState(""),[n,o]=r.useState("all");return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full m-0 min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(K,{children:[e.jsx("title",{children:"Gry | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Games CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(xa,{}),e.jsxs("div",{className:"mt-8 bg-dark-800/50 border border-js/10 rounded-xl p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"w-full sm:w-72",children:e.jsx(ga,{value:a,onChange:i})}),e.jsx(ya,{activeSortOption:s,onSortChange:t})]}),e.jsx("div",{className:"mt-4",children:e.jsx(fa,{selectedDifficulty:n,onDifficultyChange:o})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(ja,{sortBy:s,searchQuery:a,selectedDifficulty:n})})]})]})]})});ba.displayName="GamesSection";const Ol=Object.freeze(Object.defineProperty({__proto__:null,GamesSection:ba},Symbol.toStringTag,{value:"Module"})),po=r.memo(({title:s})=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-js",children:s})})),ho=r.createContext(null),jo=({children:s})=>{const[t,a]=r.useState(null),[i,n]=r.useState(!1),[o,c]=r.useState(null),l=r.useCallback(d=>L(void 0,null,function*(){n(!0),c(null);const{token:u}=F();try{const m=yield fetch(`${C}/games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}});if(!m.ok)throw new Error("Nie udało się pobrać zawartości gry");const p=(yield m.json()).data.games.find(j=>j.slug===d);if(!p)throw new Error("Nie znaleziono gry");a({title:p.title,description:p.description,difficulty:p.difficulty,rating:p.rating,completions:p.completions,rewardPoints:p.rewardPoints,gameData:p.gameData,estimatedTime:p.estimatedTime,isCompleted:p.isCompleted})}catch(m){c(m instanceof Error?m.message:"Wystąpił nieznany błąd")}finally{n(!1)}}),[]);return e.jsx(ho.Provider,{value:{gameContent:t,isLoading:i,error:o,fetchGameContent:l},children:s})};Qe.setConfig({FORBID_ATTR:["style","onerror","onload","fscommand","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onfullscreenchange","onfullscreenerror","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwheel"],ADD_TAGS:["meta"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","iframe","embed","base"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,SANITIZE_DOM:!0,WHOLE_DOCUMENT:!1,USE_PROFILES:{html:!0,mathMl:!1,svg:!1}});const fs={"scope-explorer":r.lazy(()=>Q(()=>Promise.resolve().then(()=>Uo),void 0)),"js-typo-hunter":r.lazy(()=>Q(()=>Promise.resolve().then(()=>Vo),void 0)),"async-quest":r.lazy(()=>Q(()=>Promise.resolve().then(()=>tl),void 0)),"regex-raider":r.lazy(()=>Q(()=>Promise.resolve().then(()=>rl),void 0)),"js-quiz":r.lazy(()=>Q(()=>Promise.resolve().then(()=>dl),void 0)),"method-quiz":r.lazy(()=>Q(()=>Promise.resolve().then(()=>wl),void 0))},wa=r.memo(()=>{const{slug:s}=ts(),t=typeof s=="string"?Qe.sanitize(s):"";if(!t||!fs[t])return e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Gra nie została znaleziona"})});const a=fs[t];return e.jsxs(jo,{children:[e.jsxs(K,{children:[e.jsxs("title",{children:[Qe.sanitize(t)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Gra CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"w-full h-full",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Ładowanie gry..."}),children:e.jsx(a,{})})})]})});wa.displayName="GameplayArea";const Na=r.memo(({game:s})=>{const t=me(),a=()=>{t("/dashboard/play")};return e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark-800 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-js/10 text-js hover:bg-js/20 transition-colors",children:[e.jsx(nr,{className:"w-4 h-4"}),e.jsx("span",{children:"Powrót do menu"})]})}),e.jsx(po,{title:s.title}),e.jsx("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:e.jsx("div",{className:"lg:col-span-12",children:e.jsx(wa,{})})})]})})});Na.displayName="GameplaySection";const va=r.memo(()=>{const{slug:s}=ts(),{data:t}=se();if(!(t!=null&&t.games))return null;const a=t.games.find(i=>i.slug===s);return a?e.jsx(Na,{game:a}):e.jsx(Rs,{to:"/dashboard/play",replace:!0})});va.displayName="GameplayRouter";const Ml=Object.freeze(Object.defineProperty({__proto__:null,GameplayRouter:va},Symbol.toStringTag,{value:"Module"})),yo=({code:s,onChange:t,onMount:a,isEditorReady:i})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] rounded overflow-hidden relative",children:[!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark/50",children:e.jsx(le,{className:"w-8 h-8 text-js animate-spin"})}),e.jsx(_s,{theme:"vs-dark",language:"javascript",height:"100%",defaultLanguage:"javascript",value:s,onChange:t,onMount:a})]}),ka=r.memo(({output:s,onClear:t,isExecuting:a})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] bg-[#1e1e1e] rounded-lg overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-dark/30 border-b border-js/10",children:[e.jsx("span",{className:"text-sm text-gray-400",children:a?"Wykonywanie...":"Gotowe"}),e.jsx("button",{"data-testid":"clear-console-btn",onClick:t,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść konsolę",children:e.jsx(as,{className:"w-4 h-4"})})]}),e.jsx("div",{"data-testid":"console-output",className:"flex-1 p-4 font-mono text-sm overflow-auto",children:s.map((i,n)=>e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-gray-300 mb-1",children:i},n))})]}));ka.displayName="ConsoleOutput";const go=({output:s,isExecuting:t,onClear:a,onRun:i})=>e.jsxs("div",{className:"bg-dark/50 rounded-lg p-4 border border-js/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Konsola"}),e.jsx("button",{"data-testid":"run-code-btn",onClick:i,disabled:t,className:"px-4 py-2 bg-js text-dark font-medium rounded hover:bg-js/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Wykonywanie...":"Uruchom"})]}),e.jsx(ka,{output:s,onClear:a,isExecuting:t})]}),fo=3e3,bo=()=>{const[s,t]=r.useState([]),[a,i]=r.useState(!1),n=r.useCallback(()=>{t([])},[]),o=r.useCallback(c=>{i(!0);const l=[],d=console.log;return new Promise((u,m)=>{const h=setTimeout(()=>{m(new Error("Przekroczono limit czasu wykonania"))},fo);try{console.log=(...p)=>{l.push(p.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" "))},L(void 0,null,function*(){try{new Function("console",`
              "use strict";
              ${c}
            `)(console),t(l),clearTimeout(h),u()}catch(p){t([`Błąd: ${p instanceof Error?p.message:"Nieznany błąd"}`]),m(p)}})}finally{console.log=d,i(!1)}})},[]);return{output:s,isExecuting:a,executeCode:o,clearConsole:n}},Ue="code_history",wo=10,No=()=>{const[s,t]=r.useState(()=>{const n=localStorage.getItem(Ue);return n?JSON.parse(n):[]}),a=r.useCallback(n=>{t(o=>{const c=[{code:n,timestamp:Date.now()},...o.filter(l=>l.code!==n)].slice(0,wo);return localStorage.setItem(Ue,JSON.stringify(c)),c})},[]),i=r.useCallback(()=>{localStorage.removeItem(Ue),t([])},[]);return{history:s,addToHistory:a,clearHistory:i}},vo=s=>{const t=r.useRef(null),[a,i]=r.useState(s),[n,o]=r.useState(!1),c=d=>{t.current=d,o(!0)},l=r.useCallback(d=>{d&&i(d)},[]);return r.useEffect(()=>{$r.init().then(d=>{d.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})})},[]),{code:a,isEditorReady:n,handleEditorDidMount:c,handleEditorChange:l}},ko=`// Witaj w edytorze CodeLinesJS!
// Napisz swój kod JavaScript tutaj

function przywitajSie(imie) {
  return \`Cześć, \${imie}!\`;
}

console.log(przywitajSie("Programisto"));`,So=()=>({saveToFile:r.useCallback(t=>{const a=new Blob([t],{type:"text/javascript"}),i=URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=`code_${new Date().toISOString().slice(0,10)}.js`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},[])}),Sa=r.memo(({history:s,onSelect:t,onClear:a})=>e.jsxs("div",{"data-testid":"history-panel",className:"absolute top-full right-0 mt-2 w-64 bg-dark/95 rounded-lg border border-js/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-js/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx(Os,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Historia"})]}),s.length>0&&e.jsx("button",{"data-testid":"clear-history-btn",onClick:a,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść historię",children:e.jsx(as,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.length===0?e.jsx("div",{className:"p-3 text-sm text-gray-400",children:"Brak historii"}):s.map((i,n)=>e.jsxs(x.button,{"data-testid":`history-item-${n}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},onClick:()=>t(i.code),className:"w-full p-3 text-left hover:bg-js/10 transition-colors border-b border-js/5 last:border-0",children:[e.jsx("div",{className:"text-sm text-gray-300 truncate",children:i.code.split(`
`)[0]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(i.timestamp).toLocaleString()})]},i.timestamp))})]}));Sa.displayName="CodeHistory";const za=r.memo(()=>{const{output:s,isExecuting:t,executeCode:a,clearConsole:i}=bo(),{history:n,addToHistory:o,clearHistory:c}=No(),{code:l,isEditorReady:d,handleEditorDidMount:u,handleEditorChange:m}=vo(ko),{saveToFile:h}=So(),[p,j]=r.useState(!1),v=()=>{j(!1)},f=r.useCallback(()=>L(void 0,null,function*(){yield a(l),o(l)}),[l,a,o]);return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full p-6",children:[e.jsxs(ee,{children:[e.jsx("title",{children:"Edytor Kodu | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Edytor kodu JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Edytor Kodu JavaScript"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{"data-testid":"save-code-btn",onClick:()=>h(l),disabled:!d,className:"px-4 py-2 text-sm text-js border border-js/20 rounded hover:bg-js/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(or,{className:"w-4 h-4 mr-2 inline-block"}),"Zapisz do Pliku"]}),e.jsx("button",{"data-testid":"history-btn",onClick:()=>j(y=>!y),className:"p-2 text-gray-400 hover:text-js transition-colors",title:"Historia kodu",children:e.jsx(Os,{className:"w-5 h-5"})}),p&&e.jsx(Sa,{history:n,onSelect:v,onClear:c})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[e.jsx(yo,{code:l,onChange:m,onMount:()=>u(null),isEditorReady:d}),e.jsx(go,{output:s,isExecuting:t,onClear:i,onRun:f})]})]})});za.displayName="CodeEditor";const Il=Object.freeze(Object.defineProperty({__proto__:null,CodeEditor:za},Symbol.toStringTag,{value:"Module"})),La=r.memo(()=>e.jsx("div",{className:"absolute inset-0",children:e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-[#1a1a1a] opacity-90"}),e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"})]})}));La.displayName="PageBackground";const Ta=r.memo(({title:s="Zgłoś błąd lub sugestię",description:t="Znalazłeś błąd w aplikacji lub masz pomysł na nową funkcję? Daj nam znać! Twoje opinie pomagają nam ulepszać CodeLinesJS."})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-js mb-4",children:s}),e.jsx("p",{className:"text-gray-400 text-lg",children:t})]}));Ta.displayName="PageHeader";const zo=(s,t)=>L(void 0,null,function*(){const a=yield fetch(`${C}reports`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)});if(!a.ok)throw new Error("Nie udało się wysłać zgłoszenia");return a.json()}),Lo=()=>{const{token:s}=F(),[t,a]=r.useState(!1),[i,n]=r.useState(!1),[o,c]=r.useState(null),[l,d]=r.useState({title:"",description:"",category:"bug",email:""}),[u,m]=r.useState({}),h=()=>{const y={};return l.title.trim()?l.title.length<5&&(y.title="Tytuł musi mieć co najmniej 5 znaków"):y.title="Tytuł jest wymagany",l.description.trim()?l.description.length<20&&(y.description="Opis musi mieć co najmniej 20 znaków"):y.description="Opis jest wymagany",l.category||(y.category="Kategoria jest wymagana"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(y.email="Podaj prawidłowy adres email"):y.email="Email jest wymagany",m(y),Object.keys(y).length===0},p=y=>{const{name:b,value:z}=y.target;d(T=>S(k({},T),{[b]:z}))},j=()=>{d({title:"",description:"",category:"bug",email:""}),m({})};return{formData:l,errors:u,isSubmitting:t,submitSuccess:i,submitError:o,handleChange:p,handleSubmit:y=>L(void 0,null,function*(){if(y.preventDefault(),!!h()){a(!0),c(null);try{yield zo(s||"",l),n(!0),j()}catch(b){c(b instanceof Error?b.message:"Wystąpił nieznany błąd")}finally{a(!1)}}}),resetSuccess:()=>{n(!1)}}},ge=r.memo(({id:s,name:t,label:a,type:i="text",value:n,onChange:o,error:c,placeholder:l,options:d,rows:u=5})=>{const m=`w-full bg-dark/50 border ${c?"border-red-500":"border-js/20"} rounded-lg p-3 text-white focus:border-js focus:outline-none`;return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:s,className:"block text-gray-300 mb-1",children:a}),i==="textarea"?e.jsx("textarea",{id:s,name:t,value:n,onChange:o,rows:u,className:m,placeholder:l}):i==="select"?e.jsx("select",{id:s,name:t,value:n,onChange:o,className:m,children:d==null?void 0:d.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}):e.jsx("input",{type:i,id:s,name:t,value:n,onChange:o,className:m,placeholder:l}),c&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c})]})});ge.displayName="FormField";const Pa=r.memo(({isSubmitting:s,label:t="Wyślij zgłoszenie",loadingLabel:a="Wysyłanie..."})=>e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:s,className:"w-full bg-js text-dark font-medium py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-js/90 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-dark border-t-transparent rounded-full"}),e.jsx("span",{children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{}),e.jsx("span",{children:t})]})}));Pa.displayName="SubmitButton";const Ea=r.memo(({onReset:s,title:t="Dziękujemy za zgłoszenie!",message:a="Twoje zgłoszenie zostało przyjęte. Odpowiemy najszybciej jak to możliwe.",buttonLabel:i="Zgłoś kolejny błąd"})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-green-400 font-medium mb-2",children:t}),e.jsx("p",{className:"text-gray-400",children:a}),e.jsx("button",{onClick:s,className:"mt-4 bg-js text-dark font-medium px-4 py-2 rounded-lg hover:bg-js/90 transition-colors",children:i})]}));Ea.displayName="SuccessMessage";const Aa=r.memo(({message:s})=>e.jsx("div",{className:"mb-4 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400",children:s})}));Aa.displayName="ErrorMessage";const Ca=r.memo(({title:s="Zgłoś błąd"})=>e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-lg bg-js/10",children:e.jsx(ks,{className:"w-6 h-6 text-js"})}),e.jsx("h2",{className:"text-2xl font-bold text-js",children:s})]}));Ca.displayName="FormHeader";const To=[{value:"bug",label:"Błąd w aplikacji"},{value:"feature",label:"Propozycja funkcji"},{value:"content",label:"Problem z treścią"},{value:"other",label:"Inne"}],$a=r.memo(()=>{const{formData:s,errors:t,isSubmitting:a,submitSuccess:i,submitError:n,handleChange:o,handleSubmit:c,resetSuccess:l}=Lo();return e.jsxs("div",{className:"w-full max-w-3xl mx-auto bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:[e.jsx(Ca,{}),i?e.jsx(Ea,{onReset:l}):e.jsxs("form",{onSubmit:c,children:[e.jsx(ge,{id:"title",name:"title",label:"Tytuł",value:s.title,onChange:o,error:t.title,placeholder:"Krótki opis problemu"}),e.jsx(ge,{id:"category",name:"category",label:"Kategoria",type:"select",value:s.category,onChange:o,error:t.category,options:To}),e.jsx(ge,{id:"description",name:"description",label:"Szczegółowy opis",type:"textarea",value:s.description,onChange:o,error:t.description,placeholder:"Opisz dokładnie napotkany problem, podaj kroki do jego odtworzenia"}),e.jsx(ge,{id:"email",name:"email",label:"Email kontaktowy",type:"email",value:s.email,onChange:o,error:t.email,placeholder:"Twój adres email"}),n&&e.jsx(Aa,{message:n}),e.jsx(Pa,{isSubmitting:a})]})]})});$a.displayName="ReportForm";const Ra=r.memo(({email:s="kontakt@codelinesjs.pl"})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Inne sposoby kontaktu"}),e.jsxs("p",{className:"text-gray-400",children:["Możesz również skontaktować się z nami bezpośrednio przez email:"," ",e.jsx("a",{href:`mailto:${s}`,className:"text-js hover:underline",children:s})]})]}));Ra.displayName="ContactSection";const Po=()=>r.useMemo(()=>({container:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}}}),[]),Fa=r.memo(()=>{const s=Po();return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-dark via-dark-medium to-dark py-16 md:py-24 relative overflow-hidden",children:[e.jsx(La,{}),e.jsxs(ee,{children:[e.jsx("title",{children:"Zgłoś Błąd | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zgłoś błąd w CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs(x.div,{variants:s.container,initial:"hidden",animate:"show",className:"flex flex-col items-center gap-12",children:[e.jsx(x.div,{variants:s.item,children:e.jsx(Ta,{})}),e.jsx(x.div,{variants:s.item,className:"w-full",children:e.jsx($a,{})}),e.jsx(x.div,{variants:s.item,children:e.jsx(Ra,{})})]})})]})});Fa.displayName="ReportBugPage";const Bl=Object.freeze(Object.defineProperty({__proto__:null,ReportBugPage:Fa},Symbol.toStringTag,{value:"Module"})),Eo=s=>L(void 0,null,function*(){const t=yield fetch(`${C}users/active`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Błąd podczas pobierania aktywnych użytkowników");return t.json()}),Ao=()=>{var u,m;const{token:s}=F(),{data:t,isLoading:a,error:i,refetch:n}=H({queryKey:["activeUsers"],queryFn:()=>Eo(s||""),retry:2,refetchInterval:3e4,staleTime:1e3*60,enabled:!!s}),o=((u=t==null?void 0:t.data)==null?void 0:u.users)||[],c=o.slice(0,8),l=o.length>8?o.length-8:0,d=((m=t==null?void 0:t.data)==null?void 0:m.totalActive)||0;return{users:o,visibleUsers:c,extraUsers:l,totalActive:d,isLoading:a,error:i,refetch:n}},Da=r.memo(()=>{const{visibleUsers:s,extraUsers:t,isLoading:a,error:i}=Ao();return a?e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map((n,o)=>e.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-700 animate-pulse"},o))})]}):i?null:e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.map(n=>e.jsx(x.div,{className:"relative group",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:17},children:e.jsxs("div",{className:"w-10 h-10 rounded-full relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-js flex items-center justify-center",children:e.jsx("span",{className:"text-dark font-bold text-xl",children:n.username.charAt(0).toUpperCase()})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-dark",children:e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"})})]})},n._id)),t>0&&e.jsxs(x.div,{whileHover:{scale:1.1},className:`w-10 h-10 rounded-full bg-js/10 flex items-center justify-center\r
                     text-js text-sm font-medium border-2 border-dark/50`,children:["+",t]})]})]})});Da.displayName="ActiveUsers";const _a=r.memo(()=>e.jsx("div",{className:"space-y-6",children:e.jsx(Da,{})}));_a.displayName="CommunityFeed";const Co=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"})),Oa=r.memo(({username:s,size:t="md",className:a=""})=>{const i=s&&typeof s=="string"?s.charAt(0).toUpperCase():"?",n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},o={sm:"text-sm",md:"text-base",lg:"text-xl"};return e.jsx("div",{className:`
      rounded-full bg-js flex items-center justify-center text-black font-bold
      ${n[t]} ${o[t]} ${a}
    `,children:i})});Oa.displayName="UserAvatar";const Ma=r.memo(({user:s,index:t,animationDelay:a=.1})=>{const i=s.position,n=i<=3?"text-yellow-500":"text-gray-400",c=s.isCurrentUser?"bg-js/10 border-js/30":"bg-dark-card/50 border-js/5 hover:border-js/10";return e.jsx("div",{className:`backdrop-blur-sm rounded-lg border p-4 transition-all flex items-center justify-between ${c}`,style:{animation:`fadeIn 0.5s ease-out ${a*(t+1)}s both`},children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`font-bold text-xl min-w-8 ${n}`,children:[i<=3&&e.jsx(cr,{className:"inline mr-1"}),i]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Oa,{username:s.username,avatar:s.avatar,size:"md",className:i<=3?"ring-2 ring-yellow-500/30":""}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg text-white",children:[s.username,s.isCurrentUser&&e.jsx("span",{className:"ml-2 text-xs font-medium bg-js text-black px-2 py-0.5 rounded font-bold",children:"Ty"})]}),e.jsxs("div",{className:"text-gray-400 text-sm",children:["Poziom: ",e.jsx("span",{className:"text-js",children:s.stats.level})," • Punkty: ",e.jsx("span",{className:"text-js",children:s.stats.points})]})]})]})]})})});Ma.displayName="RankingItem";const Ia=r.memo(({users:s,isLoading:t=!1,pagination:a})=>t?e.jsx(B,{}):s!=null&&s.length?e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:s.map((i,n)=>e.jsx(Ma,{user:i,index:n},`${i.username}-${i.position}`))}),a&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-js/10",children:[e.jsxs("button",{onClick:a.prevPage,disabled:!a.hasPrevPage||a.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${a.hasPrevPage&&!a.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Poprzednia strona",children:[e.jsx(mr,{className:"w-5 h-5"}),e.jsx("span",{children:"Poprzednia"})]}),e.jsx("div",{className:"text-gray-400 flex items-center",children:a.isLoadingPage?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-js",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-js",children:"Ładowanie..."})]}):`Strona ${a.page} z ${a.totalPages||1}`}),e.jsxs("button",{onClick:a.nextPage,disabled:!a.hasNextPage||a.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${a.hasNextPage&&!a.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Następna strona",children:[e.jsx("span",{children:"Następna"}),e.jsx(xr,{className:"w-5 h-5"})]})]})]}):e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx(dr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("div",{children:"Brak danych rankingowych do wyświetlenia"})]}));Ia.displayName="RankingList";const Ba=r.memo(({icon:s,label:t,value:a,className:i=""})=>e.jsxs(x.div,{className:`bg-dark/20 rounded-lg p-4 border border-js/5 ${i}`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(s,{className:"w-6 h-6 text-js mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:t}),e.jsx("p",{className:"text-2xl font-bold text-js",children:a})]}));Ba.displayName="StatCard";const Ga=r.memo(({currentUserStats:s,isLoading:t=!1})=>{if(t)return e.jsx("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:e.jsx(B,{})});if(!s)return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-6",children:"Twoje Statystyki"}),e.jsx("p",{className:"text-gray-400",children:"Nie udało się załadować twoich statystyk. Zaloguj się, aby zobaczyć swoje miejsce w rankingu."})]});const a=[{icon:Z,label:"Twoja pozycja",value:`#${s.rank}`},{icon:O,label:"Poziom",value:typeof s.level=="number"?s.level.toLocaleString():s.level},{icon:ur,label:"Punkty",value:typeof s.points=="number"?s.points.toLocaleString():s.points}];return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-js mb-6",children:["Twoje Statystyki ",s.username&&`(${s.username})`]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map(i=>e.jsx(Ba,{icon:i.icon,label:i.label,value:i.value},i.label))})]})});Ga.displayName="RankingStats";const $o=(s=1,t=10)=>{const[a,i]=r.useState(s),n=t,{data:o,isLoading:c,error:l}=H({queryKey:["ranking",a,n],queryFn:()=>L(void 0,null,function*(){const y=yield Rr.get(`ranking?page=${a}&limit=${n}`,{requiresAuth:!0});if(y.error)throw new Error(y.error);return y})}),d=o==null?void 0:o.data,u=d==null?void 0:d.ranking,m=(d==null?void 0:d.totalUsers)||0,h=d==null?void 0:d.meta,p=(h==null?void 0:h.totalPages)||Math.ceil(m/n),j=()=>{a<p&&i(y=>y+1)},v=()=>{a>1&&i(y=>y-1)},f=y=>{y>=1&&y<=p&&i(y)};return{ranking:u,totalUsers:m,userStats:d==null?void 0:d.userStats,isLoading:c,error:l,page:a,limit:n,nextPage:j,prevPage:v,goToPage:f,totalPages:p,pagination:h?{page:h.page,limit:h.limit,totalItems:h.totalResults,totalPages:h.totalPages}:null}},Ro=()=>{const{ranking:s,userStats:t,isLoading:a,error:i,page:n,totalPages:o,nextPage:c,prevPage:l,goToPage:d}=$o(),u=r.useMemo(()=>s||[],[s]),m=r.useMemo(()=>{var p,j;return t?{username:t.username,rank:t.rank,level:((p=t.stats)==null?void 0:p.level)||"-",points:((j=t.stats)==null?void 0:j.points)||"-",avatar:t.avatar}:null},[t]),h=r.useMemo(()=>({page:n,totalPages:o,hasNextPage:n<o,hasPrevPage:n>1,nextPage:c,prevPage:l,goToPage:d,isLoadingPage:a&&!!u.length}),[n,o,c,l,d,a,u.length]);return{users:u,currentUserStats:m,isLoading:a,error:i,pagination:h}},Ha=r.memo(()=>{const{users:s,currentUserStats:t,isLoading:a,error:i,pagination:n}=Ro();return a&&!n.page?e.jsx(Je,{text:"Ładowanie rankingu..."}):i?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-red-500 text-2xl mb-2",children:"Błąd ładowania"}),e.jsx("p",{className:"text-gray-400",children:i instanceof Error?i.message:"Nie udało się załadować danych rankingu. Spróbuj ponownie później."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Ranking"}),n.isLoadingPage&&e.jsxs("div",{className:"text-xs text-gray-400 flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-js",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Aktualizowanie..."]})]}),e.jsx(Ia,{users:s,isLoading:a,pagination:n})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(Ga,{currentUserStats:t,isLoading:a})})]})});Ha.displayName="CommunityRanking";const Fo=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"})),Ae=r.memo(({category:s,stats:t})=>{const a=()=>{switch(s){case"scope":return _;case"closure":return ve;case"hoisting":return rs}},i=()=>{switch(s){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},n=a(),o=t.correct/t.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:i()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.correct,"/",t.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});Ae.displayName="CategoryProgress";const Ua=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(Ae,{category:"scope",stats:s.categoryStats.scope}),e.jsx(Ae,{category:"closure",stats:s.categoryStats.closure}),e.jsx(Ae,{category:"hoisting",stats:s.categoryStats.hoisting})]})]})});Ua.displayName="ScopeExplorerStats";const ue=r.memo(({gameContent:s,onStart:t})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4 text-center",children:s.title}),e.jsx("div",{className:"mb-6 text-gray-400 text-center",children:s.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom trudności"}),e.jsx("div",{className:"text-lg font-bold text-js capitalize",children:s.difficulty})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty do zdobycia"}),e.jsxs("div",{className:"text-lg font-bold text-js flex items-center justify-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),s.rewardPoints]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Szacowany czas"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.estimatedTime," min"]})]})]}),e.jsxs("button",{onClick:t,className:"w-full px-6 py-4 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Rozpocznij grę"})]})]}));ue.displayName="GameIntro";const Do=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="scope-explorer"),[s==null?void 0:s.games]),isLoading:t,error:a}},pe=({maxTime:s,onTimeEnd:t,isPaused:a})=>{const[i,n]=r.useState(0),[o,c]=r.useState(!1),l=r.useCallback(()=>{c(!0)},[]),d=r.useCallback(()=>{c(!1)},[]),u=r.useCallback(()=>{n(0),c(!1)},[]);return r.useEffect(()=>{let m;return o&&!a&&(m=window.setInterval(()=>{n(h=>{const p=h+1;return p>=s?(d(),t(),s):p})},1e3)),()=>{m&&window.clearInterval(m)}},[o,a,s,t,d]),{timeElapsed:i,resetTimer:u,startTimer:l,stopTimer:d,isRunning:o}},_o=({gameContent:s,isPaused:t})=>{var T;const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=pe({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{o(!0),l(m),j()},isPaused:t});r.useEffect(()=>{u(N=>S(k({},N),{timeElapsed:m}))},[m]),r.useEffect(()=>{if(!(s!=null&&s.gameData))return;const N={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;N[g].total++,N[g].points+=w.points||0}),u(w=>S(k({},w),{totalLevels:s.gameData.length,maxTime:s.estimatedTime?s.estimatedTime*60:300,categoryStats:N}))},[s]);const v=r.useCallback((N,w)=>{u(g=>S(k({},g),{score:g.score+N,correctAnswers:g.correctAnswers+1,categoryStats:S(k({},g.categoryStats),{[w]:S(k({},g.categoryStats[w]),{correct:g.categoryStats[w].correct+1})})}))},[]),f=r.useCallback(()=>{var w;const N=d.currentLevel+1;if(N>(((w=s==null?void 0:s.gameData)==null?void 0:w.length)||0)){o(!0),l(m),j();return}u(g=>S(k({},g),{currentLevel:N}))},[d.currentLevel,m,(T=s==null?void 0:s.gameData)==null?void 0:T.length,j]),y=r.useCallback(()=>{if(!(s!=null&&s.gameData))return;const N={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;N[g].total++,N[g].points+=w.points||0}),u({currentLevel:1,totalLevels:s.gameData.length,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:N}),o(!1),l(0),h(),p()},[h,p,s]),b=r.useCallback(()=>{i(!0),p()},[p]),z=r.useCallback(()=>{o(!0),l(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:v,handleLevelComplete:f,handleRestart:y,handleStartGame:b,handleGameOver:z}},Wa=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(le,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(q,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:t.message})]})}):e.jsx(e.Fragment,{children:a}));Wa.displayName="LoadingErrorContainer";const Oo=s=>{switch(s){case"scope":return _;case"closure":return ve;case"hoisting":return rs}},Mo=s=>{switch(s){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},Io=s=>{switch(s){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Bo=s=>{switch(s){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},Ja=({onEscape:s,onEnter:t,onNumber1:a,onNumber2:i,onNumber3:n,onNumber4:o,disabled:c=!1})=>{const l=r.useCallback(d=>{if(!c)switch(d.key){case"Escape":s==null||s();break;case"Enter":t==null||t();break;case"1":a==null||a();break;case"2":i==null||i();break;case"3":n==null||n();break;case"4":o==null||o();break}},[s,t,a,i,n,o,c]);r.useEffect(()=>(window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)),[l])},Qa=r.memo(({currentLevel:s,totalLevels:t})=>{const a=(s-1)/t*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});Qa.displayName="ScopeExplorerProgress";const Go=hr,qa=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(null),[d,u]=r.useState(!1),[m,h]=r.useState(null),[p,j]=r.useState(!1),v=r.useCallback(b=>{l(b);const z=b===s.correct;h(z),u(!0),z?(t(s.points||10,s.category),setTimeout(()=>{a(),l(null),u(!1),h(null),j(!1)},1500)):setTimeout(()=>{o()},2e3)},[s,t,a,o]),f=r.useCallback(b=>{!d&&b<s.options.length&&v(s.options[b])},[d,s.options,v]);Ja({onNumber1:()=>f(0),onNumber2:()=>f(1),onNumber3:()=>f(2),disabled:d});const y=Oo(s.category);return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(Qa,{currentLevel:i,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(y,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Mo(s.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Io(s.difficulty)}`,children:Bo(s.difficulty)})]}),e.jsx("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg overflow-hidden",children:e.jsx(Go,{language:"javascript",style:pr,customStyle:{padding:"1.5rem",borderRadius:"0.5rem",fontSize:"1.1rem",background:"transparent"},children:s.code})}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.options.map((b,z)=>e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v(b),disabled:d,className:`
              w-full break-words
              relative p-4 rounded-lg font-mono text-lg transition-colors
              ${c===b?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `,children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:z+1}),b]},b))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-3) aby wybrać odpowiedź"}),d&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:[m?"Świetnie! ":"Spróbuj jeszcze raz. ",s.explanation]})}),p&&!m&&e.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-js/10 border border-js/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-js",children:[e.jsx("span",{className:"font-medium",children:"Podpowiedź:"})," Zwróć uwagę na zakres zmiennych i ich dostępność w różnych kontekstach."]})})]},i)});qa.displayName="ScopeExplorerGame";const Ho=(s,t)=>L(void 0,null,function*(){try{const a=yield fetch(`${C}progress/points`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({points:t})});if(!a.ok)throw new Error("Nie udało się zaktualizować punktów");return yield a.json()}catch(a){throw console.error("Błąd podczas aktualizacji punktów:",a),a}}),he=()=>{const{token:s}=F(),t=xe(),a=ie({mutationFn:i=>L(void 0,null,function*(){return Ho(s||"",i)}),onSuccess:()=>{t.invalidateQueries({queryKey:["userProgress"]})}});return{updatePoints:a.mutate,isUpdating:a.isPending,error:a.error}},Ka=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=he();r.useEffect(()=>{c(s)},[s,c]);const l=u=>{const m=Math.floor(u/60),h=u%60;return`${m}:${h.toString().padStart(2,"0")}`},d=u=>{switch(u){case"scope":return _;case"closure":return ve;case"hoisting":return rs;default:return _}};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:i===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",i,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:l(t)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),Object.entries(n).map(([u,m])=>{const h=d(u);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(h,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js",children:u==="scope"?"Zakres zmiennych":u==="closure"?"Domknięcia":"Hoisting"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Ukończone zadania: ",m.correct,"/",m.total]})]})]}),e.jsxs("div",{className:"text-sm font-medium text-js",children:[m.points," pkt"]})]},u)})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});Ka.displayName="ScopeExplorerSummary";const Za=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),t=r.useMemo(()=>({initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a}},Va=r.memo(({isGameOver:s,gameStats:t,currentChallenge:a,finalTime:i,challenges:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>{const{gameAnimation:u,summaryAnimation:m}=Za();return!a&&!s?null:e.jsx(I,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(Ka,{score:t.score,timeElapsed:i,challenges:n||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:e.jsx(qa,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})})});Va.displayName="GameContent";const Xa=({title:s,description:t,gameName:a="JSTypoHunter"}={})=>{const i=r.useMemo(()=>s?`${s} | CodeLinesJS`:`${a} - Gra programistyczna | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`Zagraj w ${a} - interaktywną grę programistyczną, która pomoże Ci rozwinąć umiejętności kodowania.`,[t,a]);return{pageTitle:i,pageDescription:n}},Ya=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=Do(),{containerAnimation:n}=Za(),{pageTitle:o,pageDescription:c}=Xa(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:v,handleStartGame:f,handleGameOver:y}=_o({gameContent:t,isPaused:s});return e.jsx(Wa,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(x.div,S(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(K,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(Ua,{stats:m,isGameOver:d,finalTime:u}),e.jsx(Va,{isGameOver:d,gameStats:m,currentChallenge:h,finalTime:u,challenges:t.gameData,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:v})]})):e.jsx(ue,{gameContent:t,onStart:f})})})});Ya.displayName="ScopeExplorer";const Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),ei=r.memo(({stats:s})=>{const t=a=>{const i=Math.floor(a/60),n=a%60;return`${i}:${n.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 gap-3 flex items-center",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[t(s.timeElapsed),"/",t(s.maxTime)]})})]})]})]})});ei.displayName="JSTypoHunterStats";const Wo=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="js-typo-hunter"),[s]),isLoading:t,error:a}},Jo=s=>{switch(s){case"easy":return 10;case"medium":return 20;case"hard":return 30;default:return 10}},Qo=({gameContent:s,isPaused:t})=>{var N;const[a,i]=r.useState(!1),[n,o]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[c,l]=r.useState(!1),[d,u]=r.useState(0),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=pe({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{l(!0),u(m),j()},isPaused:t}),v=r.useCallback(w=>{var W;const g=(W=s==null?void 0:s.gameData)==null?void 0:W[n.currentLevel-1],E=Jo((g==null?void 0:g.difficulty)||"easy"),A=w+E;o(J=>S(k({},J),{score:J.score+A,correctAnswers:J.correctAnswers+1}))},[n.currentLevel,s]),f=r.useCallback(()=>{l(!0),u(m),j()},[m,j]),y=r.useCallback(()=>{setTimeout(()=>{var g;const w=n.currentLevel+1;w>(((g=s==null?void 0:s.gameData)==null?void 0:g.length)||0)?(l(!0),u(m),j()):o(E=>S(k({},E),{currentLevel:w}))},1e3)},[n.currentLevel,s,m,j]),b=r.useCallback(()=>{var w;s&&(o({currentLevel:1,totalLevels:((w=s==null?void 0:s.gameData)==null?void 0:w.length)||0,score:0,timeElapsed:0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0}),l(!1),u(0),h(),p())},[h,p,s]),z=r.useCallback(()=>{i(!0),p()},[p]);r.useEffect(()=>{o(w=>S(k({},w),{timeElapsed:m}))},[m]),r.useEffect(()=>{s&&o(w=>{var g;return S(k({},w),{totalLevels:((g=s.gameData)==null?void 0:g.length)||0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300})})},[s]);const T=(N=s==null?void 0:s.gameData)==null?void 0:N[n.currentLevel-1];return{isGameStarted:a,isGameOver:c,gameStats:n,finalTime:d,currentChallenge:T,handleScoreUpdate:v,handleIncorrectAnswer:f,handleLevelComplete:y,handleRestart:b,handleStartGame:z}},qo=({title:s,description:t,gameName:a="JSTypoHunter"}={})=>{const i=r.useMemo(()=>s||`${a} | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[t,a]);return{pageTitle:i,pageDescription:n}},si=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"animate-spin text-4xl text-js mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Ładowanie gry..."})]})}):t?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"text-4xl text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-red-400",children:t.message})]})}):a?e.jsx(e.Fragment,{children:a}):e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"text-4xl text-yellow-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Gra niedostępna"})]})}));si.displayName="LoadingError";const ti=r.memo(({type:s,message:t})=>s?e.jsx(I,{children:e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`
          absolute top-4 left-1/2 -translate-x-1/2 
          px-4 py-2 rounded-lg flex items-center gap-2
          ${s==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}
        `,children:[s==="success"?e.jsx(oe,{className:"w-4 h-4"}):e.jsx($s,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t})]})}):null);ti.displayName="JSTypoHunterFeedback";const ai=r.memo(({hint:s,isVisible:t})=>t?e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 p-3 bg-js/10 border border-js/20 rounded-lg flex items-start gap-3",children:[e.jsx(Ne,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js mb-1",children:"Podpowiedź:"}),e.jsx("div",{className:"text-sm text-gray-400",children:s})]})]}):null);ai.displayName="JSTypoHunterHint";const Ko=s=>{switch(s){case"syntax":return _;case"naming":return jr;case"logic":return Ne}},Zo=s=>{switch(s){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},ii=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,onIncorrectAnswer:i})=>{const[n,o]=r.useState(s.code),[c,l]=r.useState({type:null,message:""}),[d,u]=r.useState(0),m=3,h=f=>{f!==void 0&&o(f)},p=(f,y)=>{const b=f.trim().replace(/\s+/g," "),z=y.trim().replace(/\s+/g," ");return b.includes(z)?!0:((w,g)=>{if(w===g)return 1;let E=0;const A=w.length>g.length?w:g,W=w.length>g.length?g:w;for(let J=0;J<W.length;J++)W[J]===A[J]&&E++;return E/A.length})(b,z)>.8},j=r.useCallback(()=>{const f=n.split(`
`);let y=!1;for(const b of f)if(p(b,s.correct)){y=!0;break}if(y){l({type:"success",message:"Świetnie! Poprawna odpowiedź!"});const b=Math.max(10-d*2,1);t(b),setTimeout(()=>{a(),o(s.code),l({type:null,message:""}),u(0)},1500)}else u(b=>b+1),d+1>=m?(l({type:"error",message:"Niestety, przekroczyłeś liczbę prób. Koniec gry!"}),setTimeout(()=>{i()},1500)):(l({type:"error",message:`Niestety, to nie jest prawidłowa odpowiedź. Pozostałe próby: ${m-d-1}`}),setTimeout(()=>{l({type:null,message:""})},1500))},[n,s,d,t,a,i]),v=Ko(s.category);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[e.jsx(ti,{type:c.type,message:c.message}),e.jsxs("div",{className:"mb-4 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(v,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:s.category==="syntax"?"Błąd składni":s.category==="naming"?"Błąd nazewnictwa":"Błąd logiki"})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Zo(s.difficulty)}`,children:s.difficulty==="easy"?"Łatwy":s.difficulty==="medium"?"Średni":"Trudny"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.explanation||"Znajdź i popraw błąd w kodzie."}),e.jsxs("p",{className:"mt-1 text-gray-500 text-sm",children:["Pozostałe próby: ",m-d]})]}),e.jsx("div",{className:"rounded-lg",children:e.jsx(_s,{className:"w-full h-full flex flex-wrap",theme:"vs-dark",height:"400px",defaultLanguage:"javascript",value:n,onChange:h,options:{selectOnLineNumbers:!0,automaticLayout:!0,theme:"vs-dark",wordWrap:"on"}})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Sprawdź"})}),e.jsx(ai,{hint:s.hint||"",isVisible:d>0})]})});ii.displayName="JSTypoHunterGame";const ri=r.memo(({score:s,timeElapsed:t,correctAnswers:a,totalLevels:i,onRestart:n})=>{const{updatePoints:o}=he();r.useEffect(()=>{o(s)},[s,o]);const c=l=>{const d=Math.floor(l/60),u=l%60;return`${d}:${u.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===i?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",i]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap",children:c(t)})]})]})]}),e.jsx("button",{onClick:n,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});ri.displayName="JSTypoHunterSummary";const ni=r.memo(({isGameOver:s,gameStats:t,finalTime:a,currentChallenge:i,totalLevels:n,onScoreUpdate:o,onLevelComplete:c,onIncorrectAnswer:l,onRestart:d})=>e.jsx(I,{mode:"wait",children:s?e.jsx(ri,{score:t.score,timeElapsed:a,correctAnswers:t.correctAnswers,totalLevels:n,onRestart:d},"game-over"):e.jsx(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:e.jsx(ii,{currentChallenge:i,onScoreUpdate:o,onLevelComplete:c,onIncorrectAnswer:l})},`level-${t.currentLevel}`)}));ni.displayName="GameContent";const oi=r.memo(({isPaused:s=!1})=>{var y;const{gameContent:t,isLoading:a,error:i}=Wo(),{pageTitle:n,pageDescription:o}=qo(),{isGameStarted:c,isGameOver:l,gameStats:d,finalTime:u,currentChallenge:m,handleScoreUpdate:h,handleIncorrectAnswer:p,handleLevelComplete:j,handleRestart:v,handleStartGame:f}=Qo({gameContent:t,isPaused:s});return e.jsx(si,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:c?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[e.jsxs(K,{children:[e.jsx("title",{children:n}),e.jsx("meta",{name:"description",content:o})]}),e.jsx(ei,{stats:d}),e.jsx(ni,{isGameOver:l,gameStats:d,finalTime:u,currentChallenge:m,totalLevels:((y=t==null?void 0:t.gameData)==null?void 0:y.length)||0,onScoreUpdate:h,onLevelComplete:j,onIncorrectAnswer:p,onRestart:v})]}):e.jsx(ue,{gameContent:t,onStart:f})})})});oi.displayName="JSTypoHunter";const Vo=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),li=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>{if(!(!s||!s.games||!Array.isArray(s.games)))return s.games.find(n=>n.slug==="async-quest")},[s]),isLoading:t,error:a}},Xo=({gameContent:s,isPaused:t})=>{var w;const[a,i]=r.useState(!1),n={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}},[o,c]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:n}),[l,d]=r.useState(!1),[u,m]=r.useState(0),{timeElapsed:h,resetTimer:p,startTimer:j,stopTimer:v}=pe({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{d(!0),m(h),v()},isPaused:t});r.useEffect(()=>{s&&c(g=>{var E;return S(k({},g),{totalLevels:((E=s.gameData)==null?void 0:E.length)||0})})},[s]),r.useEffect(()=>{!l&&!t&&c(g=>S(k({},g),{timeElapsed:h}))},[h,l,t]),r.useEffect(()=>{!l&&!t&&j()},[l,t,j]);const f=r.useCallback((g,E)=>{c(A=>S(k({},A),{score:A.score+g,correctAnswers:A.correctAnswers+1,categoryStats:S(k({},A.categoryStats),{[E]:S(k({},A.categoryStats[E]),{total:A.categoryStats[E].total+1,correct:A.categoryStats[E].correct+1,points:A.categoryStats[E].points+g})})}))},[]),y=r.useCallback(()=>{const g=o.currentLevel+1;g>o.totalLevels?(d(!0),m(h),v()):c(E=>S(k({},E),{currentLevel:g}))},[o.currentLevel,o.totalLevels,h,v]),b=r.useCallback(()=>{d(!0),m(h),v()},[h,v]),z=r.useCallback(()=>{var E,A;if(!s)return;const g={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}};(E=s.gameData)==null||E.forEach(W=>{W.category&&g[W.category].total++}),c({currentLevel:1,totalLevels:((A=s.gameData)==null?void 0:A.length)||0,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:g}),d(!1),p(),j()},[s,p,j]),T=r.useCallback(()=>{i(!0),j()},[j]),N=(w=s==null?void 0:s.gameData)==null?void 0:w[o.currentLevel-1];return{isGameStarted:a,isGameOver:l,gameStats:o,finalTime:u,currentChallenge:N,handleScoreUpdate:f,handleLevelComplete:y,handleGameOver:b,handleRestart:z,handleStartGame:T}},Yo=({title:s,description:t,gameName:a="Async Quest"}={})=>{const i=r.useMemo(()=>s||`${a} | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[t,a]);return{pageTitle:i,pageDescription:n}},ci=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-purple-300 mb-4",children:e.jsx(le,{})}),e.jsx("p",{className:"text-xl font-medium text-purple-200",children:"Ładowanie gry..."})]}):t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(q,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:t.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-purple-300",children:"Gra niedostępna"})}));ci.displayName="LoadingError";const di=r.memo(({currentLevel:s,totalLevels:t})=>{const a=(s-1)/t*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});di.displayName="AsyncQuestProgress";const el=()=>{const[s,t]=r.useState(!1),[a,i]=r.useState([]);return{executeCode:r.useCallback(o=>L(void 0,null,function*(){t(!0),i([]);try{const u={console:{log:(...h)=>{i(p=>[...p,h.map(j=>String(j)).join(" ")])},error:(...h)=>{i(p=>[...p,`Error: ${h.map(j=>String(j)).join(" ")}`])}},fetch:()=>Promise.resolve({json:()=>Promise.resolve({data:"mock data"})}),setTimeout:(h,p)=>setTimeout(h,Math.min(p,1e3)),Promise},m=`
        with (context) {
          ${o}
        }
      `;return yield new Function("context",m)(u),{success:!0,output:a}}catch(c){return console.error("Błąd podczas wykonywania kodu:",c),{success:!1,output:a,error:c.message}}finally{t(!1)}}),[]),isRunning:s,output:a,clearOutput:()=>i([])}},sl=(s,t)=>{const a=d=>d.replace(/\s+/g," ").trim(),i=a(s),n=a(t);if(i===n)return!0;const o=d=>d.includes("async")&&d.includes("function"),c=d=>d.includes(".then(")&&d.includes(".catch("),l=d=>d.includes("try")&&d.includes("catch");return!(o(t)&&!o(s)||c(t)&&!c(s)||l(t)&&!l(s))},mi=r.memo(({type:s,message:t,code:a,explanation:i})=>e.jsx(x.div,{initial:{opacity:0,y:s==="hint"?-10:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${s==="hint"?"bg-js/10 border border-js/20":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[s==="hint"?e.jsx(Ne,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}):e.jsx(q,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`text-sm font-medium ${s==="hint"?"text-js":"text-red-400"}`,children:s==="hint"?"Podpowiedź:":"Błąd:"}),e.jsx("div",{className:"text-sm text-gray-400",children:t}),a&&e.jsx("div",{className:"mt-2 p-2 bg-dark-900 rounded-lg font-mono text-sm text-gray-300",children:a}),i&&e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-js",children:"Wyjaśnienie: "}),i]})]})]})}));mi.displayName="AsyncQuestHint";const bs=(s,t)=>{if(t==="async-await"){if(!s.includes("async"))return{message:"Funkcja powinna być oznaczona jako asynchroniczna.",explanation:"Użyj słowa kluczowego async przed deklaracją funkcji.",example:"async function getData() { ... }"};if(!s.includes("await"))return{message:"Brak słowa kluczowego await przy wywołaniu asynchronicznym.",explanation:"Użyj await aby poczekać na wynik operacji asynchronicznej.",example:"const data = await fetchData();"}}if(t==="promises"){if(!s.includes(".catch"))return{message:"Brak obsługi błędów w łańcuchu Promise.",explanation:"Dodaj .catch() aby obsłużyć potencjalne błędy.",example:"fetch(url).then(...).catch(error => { ... })"};if(!s.includes(".then"))return{message:"Brak obsługi wyniku Promise.",explanation:"Użyj .then() aby obsłużyć wynik pomyślnego wykonania.",example:"promise.then(result => { ... })"}}return t==="callbacks"&&!s.includes("new Promise")?{message:"Przekształć callback w Promise.",explanation:"Użyj konstruktora Promise aby opakować callback.",example:"new Promise((resolve, reject) => { ... })"}:{message:"Sprawdź poprawność składni kodu.",explanation:"Upewnij się, że kod jest zgodny z wymaganiami zadania."}},xi=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(s.code),[d,u]=r.useState(!1),[m,h]=r.useState(null),[p,j]=r.useState(null),[v,f]=r.useState(!1),y=r.useRef(null),b=r.useRef(null),z=r.useRef(null),{executeCode:T,isRunning:N,clearOutput:w}=el();r.useEffect(()=>{b.current&&b.current.scrollIntoView({behavior:"smooth",block:"center"})},[]);const g=te=>{y.current=te,f(!0),setTimeout(()=>{te.focus()},100)},E=r.useCallback(te=>{te!==void 0&&(l(te),h(null),j(null),w())},[w]),A=r.useCallback(()=>{z.current&&z.current.scrollIntoView({behavior:"smooth",block:"center"})},[]),W=r.useCallback(()=>L(void 0,null,function*(){if(c){u(!1),w(),j(null);try{const te=yield sl(c,s.correct),_e=yield T(c);if(te&&_e.success)h(!0),u(!0),t(s.points,s.category),setTimeout(()=>{A()},100),setTimeout(()=>{a()},1500);else{h(!1),u(!0);const Bi=bs(c,s.category);j(Bi),setTimeout(()=>{A()},100),setTimeout(()=>{o()},2e3)}}catch(te){h(!1),u(!0);const _e=bs(c,s.category);j(_e),setTimeout(()=>{A()},100),setTimeout(()=>{o()},2e3)}}}),[c,s,T,t,a,o,w,A]),J={minimap:{enabled:!1},fontSize:14,lineHeight:24,fontFamily:"JetBrains Mono, monospace",fontLigatures:!0,wordWrap:"on",automaticLayout:!0,padding:{top:16,bottom:16},scrollBeyondLastLine:!1,folding:!0,lineNumbers:"on",renderLineHighlight:"all",suggestOnTriggerCharacters:!0,parameterHints:{enabled:!0},tabSize:2,theme:"vs-dark"};return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-js",children:s.title}),e.jsx(di,{currentLevel:i,totalLevels:n})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-3",children:"Opis zadania"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:s.description}),e.jsxs("div",{className:"p-4 bg-dark-700/50 border border-js/20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-js mb-2",children:"Zadanie"}),e.jsx("p",{className:"text-gray-300 text-base",children:s.task})]})]})]}),e.jsxs("div",{ref:b,className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsx("div",{className:"h-[500px] relative rounded-lg overflow-hidden border border-js/10",children:e.jsx(yr,{height:"100%",defaultLanguage:"javascript",value:c,onChange:E,onMount:g,options:S(k({},J),{fontSize:16,lineHeight:26}),className:"w-full"})}),e.jsx("button",{onClick:W,disabled:N||!v,className:`mt-4 w-full px-6 py-3 rounded-lg font-medium transition-colors ${N||!v?"bg-gray-500 cursor-not-allowed":"bg-js text-dark hover:bg-js/90"}`,children:N?"Wykonywanie...":"Uruchom kod"})]}),d&&e.jsx(x.div,{ref:z,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-6",children:e.jsx(mi,{type:m?"hint":"error",message:m?"Świetnie! Rozwiązanie jest poprawne.":s.error,explanation:m||p==null?void 0:p.explanation,code:m||p==null?void 0:p.example})})]})});xi.displayName="AsyncQuestGame";const re=r.memo(({category:s,stats:t})=>{const a=()=>{switch(s){case"promises":return _;case"async-await":return fr;case"callbacks":return gr}},i=()=>{switch(s){case"promises":return"Promises";case"async-await":return"Async/Await";case"callbacks":return"Callbacks"}},n=a(),o=t.correct/t.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:i()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.correct,"/",t.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});re.displayName="CategoryProgress";const ui=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=he();r.useEffect(()=>{c(s)},[s,c]);const l=d=>{const u=Math.floor(d/60),m=d%60;return`${u}:${m.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:i===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",i,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:l(t)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),e.jsx(re,{category:"promises",stats:n.promises}),e.jsx(re,{category:"async-await",stats:n["async-await"]}),e.jsx(re,{category:"callbacks",stats:n.callbacks})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});ui.displayName="AsyncQuestSummary";const pi=r.memo(({isGameOver:s,gameStats:t,finalTime:a,currentChallenge:i,gameContent:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>e.jsx(I,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:e.jsx(ui,{score:t.score,timeElapsed:a,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(x.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:e.jsx(xi,{currentChallenge:i,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})}));pi.displayName="GameContent";const hi=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(re,{category:"promises",stats:s.categoryStats.promises}),e.jsx(re,{category:"async-await",stats:s.categoryStats["async-await"]}),e.jsx(re,{category:"callbacks",stats:s.categoryStats.callbacks})]})]})});hi.displayName="AsyncQuestStats";const ji=r.memo(({isGameStarted:s,isGameOver:t,gameStats:a,onGameStart:i})=>{const{gameContent:n}=li();return s?e.jsx(hi,{stats:a,isGameOver:t,finalTime:a.timeElapsed}):n?e.jsx(ue,{gameContent:n,onStart:i}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-purple-200",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",onClick:i,children:"Rozpocznij mimo to"})]})});ji.displayName="GameHeader";const yi=r.memo(()=>{const{gameContent:s,isLoading:t,error:a}=li(),{isGameStarted:i,isGameOver:n,gameStats:o,finalTime:c,currentChallenge:l,handleScoreUpdate:d,handleLevelComplete:u,handleGameOver:m,handleRestart:h,handleStartGame:p}=Xo({gameContent:s,isPaused:!1}),{pageTitle:j,pageDescription:v}=Yo();return e.jsxs("div",{className:"flex flex-col h-full text-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs(K,{children:[e.jsx("title",{children:j}),e.jsx("meta",{name:"description",content:v})]}),e.jsx(ci,{isLoading:t,error:a,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx(ji,{isGameStarted:i,isGameOver:n,gameStats:o,onGameStart:p}),i&&e.jsx(pi,{isGameOver:n,gameStats:o,finalTime:c,currentChallenge:l,gameContent:s,onScoreUpdate:d,onLevelComplete:u,onGameOver:m,onRestart:h})]})})]})});yi.displayName="AsyncQuest";const tl=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),gi=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l.toString().padStart(2,"0")}`},n=t?a:s.timeElapsed;return e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s.currentLevel,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:s.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",s.correctAnswers,"/",s.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[i(n),"/",i(s.maxTime)]})})]})]})]})});gi.displayName="RegexRaiderStats";const al=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>s==null?void 0:s.games.find(n=>n.slug==="regex-raider"),[s==null?void 0:s.games]),isLoading:t,error:a}},il=({gameContent:s,isPaused:t})=>{const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=pe({maxTime:d.maxTime,onTimeEnd:()=>{o(!0),l(m),j()},isPaused:t});r.useEffect(()=>{s!=null&&s.gameData&&u(T=>S(k({},T),{totalLevels:s.gameData.length}))},[s]),r.useEffect(()=>{n||u(T=>S(k({},T),{timeElapsed:m}))},[m,n]);const v=r.useCallback(T=>{u(N=>S(k({},N),{score:N.score+T,correctAnswers:N.correctAnswers+1}))},[]),f=r.useCallback(()=>{u(T=>{const N=T.currentLevel+1;return N>T.totalLevels&&(o(!0),l(m),j()),S(k({},T),{currentLevel:N})})},[m,j]),y=r.useCallback(()=>{u(T=>({currentLevel:1,totalLevels:T.totalLevels,score:0,timeElapsed:0,maxTime:300,correctAnswers:0})),o(!1),h(),p()},[h,p]),b=r.useCallback(()=>{o(!0),l(m),j()},[m,j]),z=r.useCallback(()=>{i(!0),p()},[p]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:v,handleLevelComplete:f,handleRestart:y,handleStartGame:z,handleGameOver:b}},fi=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),t=r.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a}},bi=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(le,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(q,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:t.message})]})}):e.jsx(e.Fragment,{children:a}));bi.displayName="LoadingErrorContainer";const wi=r.memo(({pattern:s,explanation:t,example:a})=>e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(Ne,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:t}),s&&e.jsx("div",{className:"font-mono text-sm bg-dark-900/50 p-2 rounded text-js",children:s}),a&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Przykład: ",e.jsx("span",{className:"text-gray-400",children:a})]})]})]})}));wi.displayName="RegexRaiderHint";const Ni=r.memo(({onScoreUpdate:s,onLevelComplete:t,currentLevel:a,onGameOver:i})=>{const{data:n}=se(),o=n==null?void 0:n.games.find(f=>f.slug==="regex-raider"),[c,l]=r.useState(""),[d,u]=r.useState([]),[m,h]=r.useState(null);if(!o)return null;const p=o.gameData[a-1],j=r.useCallback(f=>{const y=f.target.value;l(y),h(null);try{const b=new RegExp(y,"g"),z=p.text.match(b)||[];u(z)}catch(b){u([])}},[p]),v=r.useCallback(()=>{try{const f=p.text.match(new RegExp(c,"g"))||[],y=p.text.match(new RegExp(p.correctRegex,"g"))||[],b=f.length===y.length&&f.every(z=>y.includes(z));h(b),b?(s(10),setTimeout(()=>{t(),l(""),u([]),h(null)},1500)):setTimeout(()=>{i()},1500)}catch(f){h(!1),setTimeout(()=>{i()},1500)}},[c,p,s,t,i]);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Zadanie:"}),e.jsx("div",{className:"text-lg text-js mb-4",children:p.task}),e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Tekst:"}),e.jsx("div",{className:"font-mono bg-dark-900/50 p-4 rounded-lg text-gray-300",children:p.text})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:c,onChange:j,placeholder:"Wpisz wyrażenie regularne...",style:{backgroundColor:"#1a1a1a"},className:"bg-dark-900 flex-1 border border-js/10 rounded-lg px-4 py-2 text-js font-mono placeholder-yellow-500"}),e.jsx("button",{onClick:v,className:"px-6 py-2 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Sprawdź"})]}),d.length>0&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-dark-900/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Znalezione dopasowania:"}),e.jsx("div",{className:"space-y-1",children:d.map((f,y)=>e.jsx("div",{className:"font-mono text-js",children:f},y))})]}),m!==null&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsx("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:m?"Świetnie! Wyrażenie regularne jest poprawne!":"Wyrażenie nie znajduje wszystkich wymaganych dopasowań."})}),m===!1&&e.jsx(wi,{pattern:p.correctRegex,explanation:"Niepoprawne wyrażenie regularne. Gra zostanie zakończona...",example:`Poprawne wyrażenie: ${p.correctRegex}`})]})]})});Ni.displayName="RegexRaiderGame";const vi=r.memo(({score:s,timeElapsed:t,correctAnswers:a,totalLevels:i,onRestart:n})=>{const{updatePoints:o}=he();r.useEffect(()=>{o(s)},[s,o]);const c=l=>{const d=Math.floor(l/60),u=l%60;return`${d}:${u.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[s," punktów"]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Rozwiązane zadania"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[a,"/",i]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas gry"}),e.jsx("div",{className:"text-lg font-bold text-js",children:c(t)})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:n,className:"px-6 py-3 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})})]})});vi.displayName="RegexRaiderSummary";const ki=r.memo(({isGameOver:s,gameStats:t,finalTime:a,onScoreUpdate:i,onLevelComplete:n,onGameOver:o,onRestart:c})=>{const{gameAnimation:l,summaryAnimation:d}=fi();return e.jsx(I,{mode:"wait",children:s?e.jsx(x.div,{initial:d.initial,animate:d.animate,exit:d.exit,transition:d.transition,children:e.jsx(vi,{score:t.score,timeElapsed:a,correctAnswers:t.correctAnswers,totalLevels:t.totalLevels,onRestart:c})},"game-over"):e.jsx(x.div,{initial:l.initial,animate:l.animate,exit:l.exit,transition:l.transition,className:"w-full",children:e.jsx(Ni,{onScoreUpdate:i,onLevelComplete:n,currentLevel:t.currentLevel,onGameOver:o})},`level-${t.currentLevel}`)})});ki.displayName="GameContent";const Si=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=al(),{containerAnimation:n}=fi(),{pageTitle:o,pageDescription:c}=Xa(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:m,handleScoreUpdate:h,handleLevelComplete:p,handleRestart:j,handleStartGame:v,handleGameOver:f}=il({gameContent:t,isPaused:s});return e.jsx(bi,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(x.div,S(k({},n),{className:"w-full space-y-6",children:[e.jsxs(K,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(gi,{stats:m,isGameOver:d,finalTime:u}),e.jsx(ki,{isGameOver:d,gameStats:m,finalTime:u,onScoreUpdate:h,onLevelComplete:p,onGameOver:f,onRestart:j})]})):e.jsx(ue,{gameContent:t,onStart:v})})})});Si.displayName="RegexRaider";const rl=Object.freeze(Object.defineProperty({__proto__:null,default:Si},Symbol.toStringTag,{value:"Module"})),zi=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>{if(!(!s||!s.games||!Array.isArray(s.games)))return s.games.find(n=>n.slug==="js-quiz")},[s]),isLoading:t,error:a}},nl=({gameContent:s,isPaused:t})=>{var T;const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=pe({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{o(!0),l(m),j()},isPaused:t});r.useEffect(()=>{u(N=>S(k({},N),{timeElapsed:m}))},[m]),r.useEffect(()=>{if(!(s!=null&&s.gameData))return;const N={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;g&&N[g]&&(N[g].total++,N[g].points+=w.points||0)}),u(w=>S(k({},w),{totalLevels:s.gameData.length,maxTime:s.estimatedTime?s.estimatedTime*60:300,categoryStats:N}))},[s]);const v=r.useCallback((N,w)=>{u(g=>S(k({},g),{score:g.score+N,correctAnswers:g.correctAnswers+1,categoryStats:S(k({},g.categoryStats),{[w]:g.categoryStats[w]?S(k({},g.categoryStats[w]),{correct:g.categoryStats[w].correct+1}):{total:0,correct:1,points:N}})}))},[]),f=r.useCallback(()=>{var w;const N=d.currentLevel+1;if(N>(((w=s==null?void 0:s.gameData)==null?void 0:w.length)||0)){o(!0),l(m),j();return}u(g=>S(k({},g),{currentLevel:N}))},[d.currentLevel,m,(T=s==null?void 0:s.gameData)==null?void 0:T.length,j]),y=r.useCallback(()=>{if(!(s!=null&&s.gameData))return;const N={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;g&&N[g]&&(N[g].total++,N[g].points+=w.points||0)}),u({currentLevel:1,totalLevels:s.gameData.length,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:N}),o(!1),l(0),h(),p()},[h,p,s]),b=r.useCallback(()=>{i(!0),p()},[p]),z=r.useCallback(()=>{o(!0),l(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:v,handleLevelComplete:f,handleRestart:y,handleStartGame:b,handleGameOver:z}},ol=({title:s,description:t,gameName:a="JS Quiz"}={})=>{const i=r.useMemo(()=>s||`${a} - Quiz JavaScript | CodeLinesJS`,[s,a]),n=r.useMemo(()=>t||`Sprawdź swoją wiedzę z JavaScript w quizie ${a}. Odpowiadaj na pytania i zdobywaj punkty za poprawne odpowiedzi.`,[t,a]);return{pageTitle:i,pageDescription:n}},Li=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:e.jsx(le,{})}),e.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie gry..."})]}):t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(q,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:t.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-js/80",children:"Gra niedostępna"})}));Li.displayName="LoadingErrorContainer";const Ti=s=>{switch(s){case"basics":return _;case"advanced":return wr;case"frameworks":return br;default:return _}},Pi=s=>{switch(s){case"basics":return"Podstawy JavaScript";case"advanced":return"Zaawansowany JS";case"frameworks":return"Frameworki JS"}},ll=s=>{switch(s){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400"}},cl=s=>{switch(s){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},Ei=r.memo(({currentLevel:s,totalLevels:t})=>{const a=s/t*100;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-1 text-sm text-gray-400",children:[e.jsxs("span",{children:["Pytanie ",s," z ",t]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5}})})]})});Ei.displayName="JSQuizProgress";const ms=()=>{const s=r.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}}),[]),t=r.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4}}),[]),a=r.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}}),[]),i=r.useMemo(()=>({initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.3}}),[]);return{containerAnimation:s,gameAnimation:t,summaryAnimation:a,optionAnimation:i}},Ai=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(null),[d,u]=r.useState(!1),[m,h]=r.useState(null),{optionAnimation:p}=ms(),j=r.useCallback(y=>{l(y);const b=y===s.correct;h(b),u(!0),b?(t(s.points||10,s.category),setTimeout(()=>{a(),l(null),u(!1),h(null)},1500)):setTimeout(()=>{o()},2e3)},[s,t,a,o]),v=r.useCallback(y=>{!d&&y<s.options.length&&j(s.options[y])},[d,s.options,j]);Ja({onNumber1:()=>v(0),onNumber2:()=>v(1),onNumber3:()=>v(2),onNumber4:()=>v(3),disabled:d});const f=Ti(s.category)||_;return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(Ei,{currentLevel:i,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(f,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Pi(s.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${ll(s.difficulty)}`,children:cl(s.difficulty)})]}),e.jsx("div",{className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:s.question})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.options.map((y,b)=>e.jsxs(x.button,S(k({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(y),disabled:d,className:`
              w-full
              relative p-4 rounded-lg font-medium text-left transition-colors
              ${c===y?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `},p),{transition:S(k({},p.transition),{delay:b*.1}),children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:b+1}),y]}),y))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-4) aby wybrać odpowiedź"}),d&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:[m?"Świetnie! ":"Spróbuj jeszcze raz. ",s.explanation]})})]},i)});Ai.displayName="JSQuizGame";const Ci=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=he();r.useEffect(()=>{c(s)},[s,c]);const l=m=>{const h=Math.floor(m/60),p=m%60;return`${h}:${p<10?"0":""}${p}`},d=(m,h)=>h>0?Math.round(m/h*100):0,u=()=>n?Object.entries(n).filter(([m,h])=>h&&typeof h=="object").map(([m,h])=>{const p=Ti(m),j=d(h.correct||0,h.total||0);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-js"}),e.jsx("h3",{className:"text-lg font-medium",children:Pi(m)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsxs("span",{children:["Poprawne: ",h.correct||0,"/",h.total||0]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5,delay:.5}})})]},m)}):null;return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Quizu!"}),e.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",s," punktów, odpowiadając poprawnie na ",i," z"," ",(a==null?void 0:a.length)||0," pytań."]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(Z,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-2xl font-bold",children:s})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(oe,{className:"text-3xl text-green-400 mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),e.jsxs("div",{className:"text-2xl font-bold",children:[i,"/",(a==null?void 0:a.length)||0]})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(M,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),e.jsx("div",{className:"text-2xl font-bold",children:l(t)})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u()})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:e.jsxs("button",{onClick:o,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[e.jsx(Ms,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})});Ci.displayName="JSQuizSummary";const $i=r.memo(({isGameOver:s,gameStats:t,currentChallenge:a,finalTime:i,gameContent:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>{const{gameAnimation:u,summaryAnimation:m}=ms();return!a&&!s?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})}):e.jsx(I,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(Ci,{score:t.score,timeElapsed:i,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:a&&e.jsx(Ai,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})})});$i.displayName="GameContent";const Ri=r.memo(({stats:s,isGameOver:t,finalTime:a})=>{const i=o=>{const c=Math.floor(o/60),l=o%60;return`${c}:${l<10?"0":""}${l}`},n=t?a:s.timeElapsed;return e.jsx("div",{className:"w-full p-4 bg-dark-800/50 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(x.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx(Z,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"font-semibold",children:s.score})]})]}),e.jsxs(x.div,{className:"flex items-center gap-2 text-green-400",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(oe,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne"}),e.jsxs("div",{className:"font-semibold",children:[s.correctAnswers," / ",s.totalLevels]})]})]}),e.jsxs(x.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(M,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Czas"}),e.jsx("div",{className:"font-semibold",children:i(n)})]})]})]})})});Ri.displayName="JSQuizStats";const Ze=r.memo(({isGameStarted:s,isGameOver:t,gameStats:a,onGameStart:i})=>{const{gameContent:n}=zi();return s?e.jsx(Ri,{stats:a,isGameOver:t,finalTime:a.timeElapsed}):n?e.jsx(ue,{gameContent:n,onStart:i}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-js/80",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-js/80 hover:bg-js text-white rounded-md transition-colors",onClick:i,children:"Rozpocznij mimo to"})]})});Ze.displayName="GameHeader";const Fi=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=zi(),{containerAnimation:n}=ms(),{pageTitle:o,pageDescription:c}=ol(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:v,handleStartGame:f,handleGameOver:y}=nl({gameContent:t,isPaused:s});return e.jsx(Li,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(x.div,S(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(K,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(Ze,{isGameStarted:l,isGameOver:d,gameStats:m,onGameStart:f}),e.jsx($i,{isGameOver:d,gameStats:m,currentChallenge:h,finalTime:u,gameContent:t,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:v})]})):e.jsx(Ze,{isGameStarted:l,isGameOver:d,gameStats:m,onGameStart:f})})})});Fi.displayName="JSQuiz";const dl=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"})),ml=()=>{const{data:s,isLoading:t,error:a}=se();return{gameContent:r.useMemo(()=>{if(!(!s||!s.games||!Array.isArray(s.games)))return s.games.find(n=>n.slug==="method-quiz")},[s]),isLoading:t,error:a}},Di=r.memo(({isLoading:s,error:t,children:a})=>s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:e.jsx(le,{})}),e.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie Method Quiz..."})]}):t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(q,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:t.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-js/80",children:"Method Quiz niedostępny"})}));Di.displayName="LoadingErrorContainer";const xs=()=>r.useMemo(()=>({containerAnimation:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeOut"}},gameAnimation:{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3}},summaryAnimation:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}},optionAnimation:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2}}}),[]),xl=()=>r.useMemo(()=>({pageTitle:"Method Quiz | CodeLinesJS",pageDescription:"Sprawdź swoją znajomość metod JavaScript! Uzupełnij brakujące metody w kodzie i zobacz jak dobrze znasz Array, String, Object i DOM methods."}),[]),ul=({gameContent:s,isPaused:t})=>{var T;const[a,i]=r.useState(!1),[n,o]=r.useState(!1),[c,l]=r.useState(0),[d,u]=r.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=pe({maxTime:s!=null&&s.estimatedTime?s.estimatedTime*60:300,onTimeEnd:()=>{o(!0),l(m),j()},isPaused:t});r.useEffect(()=>{u(N=>S(k({},N),{timeElapsed:m}))},[m]),r.useEffect(()=>{if(!(s!=null&&s.gameData))return;const N={"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;g&&N[g]&&(N[g].total++,N[g].points+=w.points||0)}),u(w=>S(k({},w),{totalLevels:s.gameData.length,maxTime:s.estimatedTime?s.estimatedTime*60:300,categoryStats:N}))},[s]);const v=r.useCallback((N,w)=>{u(g=>S(k({},g),{score:g.score+N,correctAnswers:g.correctAnswers+1,categoryStats:S(k({},g.categoryStats),{[w]:g.categoryStats[w]?S(k({},g.categoryStats[w]),{correct:g.categoryStats[w].correct+1}):{total:0,correct:1,points:N}})}))},[]),f=r.useCallback(()=>{var w;const N=d.currentLevel+1;if(N>(((w=s==null?void 0:s.gameData)==null?void 0:w.length)||0)){o(!0),l(m),j();return}u(g=>S(k({},g),{currentLevel:N}))},[d.currentLevel,m,(T=s==null?void 0:s.gameData)==null?void 0:T.length,j]),y=r.useCallback(()=>{if(!(s!=null&&s.gameData))return;const N={"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}};s.gameData.forEach(w=>{const g=w.category;g&&N[g]&&(N[g].total++,N[g].points+=w.points||0)}),u({currentLevel:1,totalLevels:s.gameData.length,score:0,timeElapsed:0,maxTime:s.estimatedTime?s.estimatedTime*60:300,correctAnswers:0,categoryStats:N}),o(!1),l(0),h(),p()},[h,p,s]),b=r.useCallback(()=>{i(!0),p()},[p]),z=r.useCallback(()=>{o(!0),l(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:d,currentChallenge:s!=null&&s.gameData?s.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:v,handleLevelComplete:f,handleRestart:y,handleStartGame:b,handleGameOver:z}},pl=({currentLevel:s,totalLevels:t})=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Pytanie ",s," z ",t]}),e.jsx("div",{className:"w-48 bg-dark-700 rounded-full h-2",children:e.jsx("div",{className:"bg-js h-2 rounded-full transition-all duration-300",style:{width:`${s/t*100}%`}})})]}),hl=s=>{switch(s){case"array-methods":return We;case"string-methods":return Is;case"object-methods":return ve;case"dom-methods":return is;default:return _}},jl=s=>{switch(s){case"array-methods":return"Array Methods";case"string-methods":return"String Methods";case"object-methods":return"Object Methods";case"dom-methods":return"DOM Methods";default:return"Methods"}},yl=s=>{switch(s){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},gl=s=>{switch(s){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny";default:return s}},_i=r.memo(({currentChallenge:s,onScoreUpdate:t,onLevelComplete:a,currentLevel:i,totalLevels:n,onGameOver:o})=>{const[c,l]=r.useState(null),[d,u]=r.useState(!1),[m,h]=r.useState(null),{optionAnimation:p}=xs(),j=r.useCallback(f=>{l(f);const y=f===s.correct;h(y),u(!0),y?(t(s.points||10,s.category),setTimeout(()=>{a(),l(null),u(!1),h(null)},2500)):setTimeout(()=>{o()},3e3)},[s,t,a,o]),v=hl(s.category);return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(pl,{currentLevel:i,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(v,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:jl(s.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${yl(s.difficulty)}`,children:gl(s.difficulty)})]}),e.jsxs("div",{className:"p-6 bg-dark-900/80 border border-js/20 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_,{className:"text-js text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Fragment kodu"})]}),e.jsx("pre",{className:"text-green-400 font-mono text-sm whitespace-pre-wrap overflow-x-auto",children:s.codeSnippet})]}),e.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-2",children:["Jaka metoda powinna być w miejscu ",e.jsx("span",{className:"text-js font-mono",children:"___"}),"?"]}),s.hint&&e.jsxs("p",{className:"text-sm text-gray-400",children:["💡 Podpowiedź: ",s.hint]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.options.map((f,y)=>e.jsxs(x.button,S(k({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(f),disabled:d,className:`
              w-full
              relative p-4 rounded-lg font-medium text-left transition-colors font-mono
              ${c===f?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `},p),{transition:S(k({},p.transition),{delay:y*.1}),children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500 font-sans",children:String.fromCharCode(65+y)}),e.jsxs("div",{className:"pl-6",children:[f,"()"]})]}),f))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Wybierz poprawną metodę JavaScript (A-D)"}),d&&e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg space-y-3 ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:[e.jsxs("p",{className:`text-sm font-medium ${m?"text-green-400":"text-red-400"}`,children:[m?"🎉 Świetnie!":"❌ Niepoprawne.",s.explanation]}),s.expectedOutput&&e.jsxs("div",{className:"p-3 bg-dark-900/50 rounded border border-js/10",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Oczekiwany wynik:"}),e.jsx("code",{className:"text-green-400 font-mono text-sm",children:s.expectedOutput})]}),m&&e.jsxs("p",{className:"text-sm text-green-300",children:["+",s.points||10," punktów"]})]})]},i)});_i.displayName="MethodQuizGame";const fl=s=>{switch(s){case"array-methods":return We;case"string-methods":return Is;case"object-methods":return ve;case"dom-methods":return is;default:return We}},bl=s=>{switch(s){case"array-methods":return"Array Methods";case"string-methods":return"String Methods";case"object-methods":return"Object Methods";case"dom-methods":return"DOM Methods";default:return"Methods"}},Oi=r.memo(({score:s,timeElapsed:t,challenges:a,correctAnswers:i,categoryStats:n,onRestart:o})=>{const{updatePoints:c}=he();r.useEffect(()=>{c(s)},[s,c]);const l=m=>{const h=Math.floor(m/60),p=m%60;return`${h}:${p<10?"0":""}${p}`},d=(m,h)=>h>0?Math.round(m/h*100):0,u=()=>n?Object.entries(n).filter(([m,h])=>h&&typeof h=="object").map(([m,h])=>{const p=fl(m),j=d(h.correct||0,h.total||0);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-js"}),e.jsx("h3",{className:"text-lg font-medium",children:bl(m)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsxs("span",{children:["Poprawne: ",h.correct||0,"/",h.total||0]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5,delay:.5}})})]},m)}):null;return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Method Quiz!"}),e.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",s," punktów, odpowiadając poprawnie na ",i," z"," ",(a==null?void 0:a.length)||0," pytań o metodach JavaScript."]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(Z,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-2xl font-bold",children:s})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(oe,{className:"text-3xl text-green-400 mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),e.jsxs("div",{className:"text-2xl font-bold",children:[i,"/",(a==null?void 0:a.length)||0]})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(M,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),e.jsx("div",{className:"text-2xl font-bold",children:l(t)})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u()})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:e.jsxs("button",{onClick:o,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[e.jsx(Ms,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})});Oi.displayName="MethodQuizSummary";const Mi=r.memo(({isGameOver:s,gameStats:t,currentChallenge:a,finalTime:i,gameContent:n,onScoreUpdate:o,onLevelComplete:c,onGameOver:l,onRestart:d})=>{const{gameAnimation:u,summaryAnimation:m}=xs();return!a&&!s?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})}):e.jsx(I,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:s?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(Oi,{score:t.score,timeElapsed:i,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:t.correctAnswers,categoryStats:t.categoryStats,onRestart:d})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:a&&e.jsx(_i,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:c,currentLevel:t.currentLevel,totalLevels:t.totalLevels,onGameOver:l})},`level-${t.currentLevel}`)})})});Mi.displayName="GameContent";const ws=({isGameStarted:s,onGameStart:t,gameStats:a})=>s?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-800/50 border-b border-js/10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Method Quiz"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Poziom: ",a.currentLevel,"/",a.totalLevels]}),e.jsxs("span",{children:["Punkty: ",a.score]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Method Quiz"}),e.jsx("p",{className:"text-gray-400 text-center mb-8 max-w-md",children:"Sprawdź swoją znajomość metod JavaScript! Uzupełnij brakujące metody w fragmentach kodu."}),e.jsx("button",{onClick:t,className:"bg-js hover:bg-js/80 text-dark px-8 py-3 rounded-lg font-medium text-lg transition-colors",children:"Rozpocznij Quiz"})]}),Ii=r.memo(({isPaused:s=!1})=>{const{gameContent:t,isLoading:a,error:i}=ml(),{containerAnimation:n}=xs(),{pageTitle:o,pageDescription:c}=xl(),{isGameStarted:l,isGameOver:d,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:v,handleStartGame:f,handleGameOver:y}=ul({gameContent:t,isPaused:s});return e.jsx(Di,{isLoading:a,error:i,children:t&&e.jsx(e.Fragment,{children:l?e.jsxs(x.div,S(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(K,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:c})]}),e.jsx(ws,{isGameStarted:l,isGameOver:d,gameStats:m,onGameStart:f}),e.jsx(Mi,{isGameOver:d,gameStats:m,currentChallenge:h,finalTime:u,gameContent:t,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:v})]})):e.jsx(ws,{isGameStarted:l,isGameOver:d,gameStats:m,onGameStart:f})})})});Ii.displayName="MethodQuiz";const wl=Object.freeze(Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"}));export{Al as C,Cl as D,Ol as G,Fl as L,Bl as R,Rl as S,Q as _,$l as a,Dl as b,_l as c,Ml as d,Il as e};
