const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-components-DAszsJfg.js","assets/vendor-react-DXqe6sA-.js","assets/vendor-other-C_ZIBBET.js","assets/vendor-monaco-Bhqvv14p.js","assets/vendor-framer-motion-C2P7Peha.js","assets/app-auth-Blug8Be2.js","assets/app-services-BHTGWru0.js"])))=>i.map(i=>d[i]);
var Ri=Object.defineProperty,Fi=Object.defineProperties;var Di=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var Oi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable;var $t=(t,s,a)=>s in t?Ri(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,k=(t,s)=>{for(var a in s||(s={}))Oi.call(s,a)&&$t(t,a,s[a]);if(Et)for(var a of Et(s))_i.call(s,a)&&$t(t,a,s[a]);return t},T=(t,s)=>Fi(t,Di(s));var S=(t,s,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(u){n(u)}},d=l=>{try{c(a.throw(l))}catch(u){n(u)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,d);c((a=a.apply(t,s)).next())});import{r as i,P as He,j as e,Q as Rt,H as Y,R as Mi,S as Ft,w as E,p as Bi,T as Ii,o as dt,v as Pe,A as mt,U as Gt,V as Jt,u as ye,W as Wt,C as Q,X as ge,Y as oe,Z as xt,q as Hi,z as Z,L as Ae,_ as Gi,$ as Ut,M as _,a0 as ut,a1 as Qt,a2 as re,g as X,f as qt,l as ee,a3 as D,b as ae,a4 as Zt,a5 as Ge,a6 as pt,a7 as Ji,a8 as Kt,a9 as Vt,aa as be,ab as Wi,x as ht,ac as Ui,ad as Qi,i as me,ae as qi,af as jt,m as yt,ag as gt,ah as bt,ai as Xt,c as Zi,d as Ki,aj as Yt,ak as Vi,al as P,am as es,an as Xi,h as ft,N as ts,e as ss,ao as wt,a as Je,F as Yi,ap as Nt,aq as en,ar as tn,as as xe,at as as,au as rs,av as sn,aw as an,ax as rn,ay as nn,az as on,aA as ln,aB as cn,aC as vt,aD as Ee,aE as dn,aF as mn,aG as xn,aH as un,aI as pn,aJ as hn,aK as jn,aL as yn,aM as is,aN as rt}from"./vendor-react-DXqe6sA-.js";import{L as it,u as ns,M as gn,d as kt,e as G,f as bn,g as fn,a as je,B as Ce}from"./app-components-DAszsJfg.js";import{u as O,A as $}from"./app-auth-Blug8Be2.js";import{m as x,A as H,u as wn}from"./vendor-framer-motion-C2P7Peha.js";import{f as os,p as ls,z as M,t as We,a as nt}from"./vendor-other-C_ZIBBET.js";import{R as Nn,L as vn,C as kn,X as zn,Y as Sn,T as Tn,a as Cn}from"./vendor-charts-DX5Q7lxA.js";import{h as ue}from"./app-services-BHTGWru0.js";import{l as Ln}from"./vendor-monaco-Bhqvv14p.js";const Pn="modulepreload",An=function(t){return"/"+t},Dt={},V=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));n=Promise.allSettled(a.map(l=>{if(l=An(l),l in Dt)return;Dt[l]=!0;const u=l.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Pn,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((p,j)=>{h.addEventListener("load",p),h.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return n.then(d=>{for(const c of d||[])c.status==="rejected"&&o(c.reason);return s().catch(o)})},En={activeView:"community"},$n=(t,s)=>{switch(s.type){case"SET_ACTIVE_VIEW":return T(k({},t),{activeView:s.payload});default:return t}},Rn=()=>{const[t,s]=i.useReducer($n,En),a=i.useCallback(r=>{s({type:"SET_ACTIVE_VIEW",payload:r})},[]);return{state:t,setActiveView:a}},cs=i.memo(()=>{const s=He().pathname,a=s==="/dashboard/community"||s==="/dashboard/community/"||/^\/dashboard\/community\/?$/.test(s),r=s.includes("/dashboard/community/ranking");return e.jsxs("div",{className:"flex gap-4 mb-8 pb-2",children:[e.jsxs(Rt,{to:"/dashboard/community",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${a?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-newspaper"}),"Aktualności"]}),e.jsxs(Rt,{to:"/dashboard/community/ranking",className:`flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all ${r?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"}`,children:[e.jsx("i",{className:"fas fa-trophy"}),"Ranking"]})]})});cs.displayName="CommunityNavigation";const Fn=i.lazy(()=>V(()=>Promise.resolve().then(()=>oc),void 0)),Dn=i.lazy(()=>V(()=>Promise.resolve().then(()=>dc),void 0)),ds=i.memo(()=>{const t=He(),{state:{activeView:s},setActiveView:a}=Rn();return i.useEffect(()=>{const r=t.pathname.split("community").pop()||"community";r!==s&&a(r)},[t.pathname,s,a]),e.jsxs("div",{className:"p-8 w-full min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Community | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Community CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx(cs,{}),e.jsxs(Mi,{children:[e.jsx(Ft,{index:!0,element:e.jsx(i.Suspense,{fallback:e.jsx(it,{text:"Ładowanie aktualności..."}),children:e.jsx(Fn,{})})}),e.jsx(Ft,{path:"ranking",element:e.jsx(i.Suspense,{fallback:e.jsx(it,{text:"Ładowanie rankingu..."}),children:e.jsx(Dn,{})})})]})]})})]})});ds.displayName="CommunitySection";const nd=Object.freeze(Object.defineProperty({__proto__:null,CommunitySection:ds},Symbol.toStringTag,{value:"Module"})),On=()=>{const[t,s]=i.useState(!1),[a,r]=i.useState("dashboard"),n=He();return i.useEffect(()=>{const d=n.pathname.split("/").pop()||"dashboard";r(d)},[n]),i.useEffect(()=>{const o=()=>{window.innerWidth<768&&s(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]),{isExpanded:t,setIsExpanded:s,activeItem:a,setActiveItem:r}},_n={expanded:{width:"240px",transition:{type:"spring",stiffness:300,damping:30}},collapsed:{width:"100px",transition:{type:"spring",stiffness:300,damping:30}}},zt={expanded:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:30}},collapsed:{opacity:0,x:-10,transition:{duration:.2}}},ms=i.memo(({isExpanded:t})=>e.jsx("div",{className:"px-4 mb-8",children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-js/20 flex items-center justify-center",children:e.jsx(E,{className:"text-xl text-js"})}),e.jsx(H,{mode:"wait",children:t&&e.jsx(x.span,{variants:zt,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-bold text-js font-space",children:"CodeLinesJS"})})]})}));ms.displayName="NavigationLogo";const St=i.memo(({icon:t,label:s,isActive:a=!1,isExpanded:r,onClick:n,variant:o="default",id:d})=>e.jsxs(x.button,{onClick:n,"data-testid":`nav-button-${s==null?void 0:s.toLowerCase().replace(/\s/g,"-")}`,className:`
      ${d==="code"&&"hidden lg:flex"}
      w-full flex items-center gap-3 px-4 py-3 
      rounded-lg transition-all duration-200
      backdrop-blur-sm
      ${o==="default"?a?"bg-js/20 border-l-2 border-js text-js":"text-gray-400 hover:text-js hover:bg-js/10":a?"bg-red-500/20 text-red-400":"text-red-400 hover:bg-red-500/10"}
    `,whileHover:{scale:1.02,x:5},whileTap:{scale:.98},children:[e.jsx(x.span,{className:"text-xl min-w-[24px]",whileHover:{rotate:10},style:{color:"currentColor"},children:t}),e.jsx(H,{mode:"wait",children:r&&s&&e.jsx(x.span,{variants:zt,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-medium font-space whitespace-nowrap",style:{color:"currentColor"},children:s})})]}));St.displayName="NavigationButton";const xs=i.memo(({title:t,items:s,isExpanded:a,activeItem:r,onItemClick:n,index:o,isLastSection:d})=>e.jsxs(x.div,{className:"space-y-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:[a&&e.jsx(x.h2,{variants:zt,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"text-xs font-bold text-js/60 uppercase tracking-wider px-3 mb-2",children:t}),s.map(c=>e.jsx(St,{id:c.id,icon:c.icon,label:c.label,isActive:r===c.id,isExpanded:a,onClick:()=>n(c)},c.id)),!d&&e.jsx("div",{className:"mx-3 my-4",children:e.jsx("div",{className:"border-t border-js/5"})})]},t));xs.displayName="NavigationSection";const q="/dashboard",Mn=[`${q}/community`,`${q}/community/ranking`,`${q}/community/groups`,`${q}/learn`,`${q}/play`,`${q}/play/regex-raider`,`${q}/play/async-quest`,`${q}/play/js-typo-hunter`,`${q}/play/scope-explorer`,`${q}/settings`],us=()=>{const t=He();return i.useMemo(()=>{const s=t.pathname,a=Mn.includes(s),r=s.startsWith(`${q}/learn/lesson/`);return a||r},[t.pathname])},Bn=[{id:"dashboard",label:"Dashboard",icon:e.jsx(Bi,{}),section:"main",path:"/dashboard"},{id:"stats",label:"Statystyki",icon:e.jsx(Ii,{}),section:"main",path:"/dashboard/stats"},{id:"play",label:"Graj",icon:e.jsx(dt,{}),section:"game",path:"/dashboard/play"},{id:"learn",label:"Nauka",icon:e.jsx(Pe,{}),section:"game",path:"/dashboard/learn"},{id:"code",label:"Edytor",icon:e.jsx(E,{}),section:"game",path:"/dashboard/code"},{id:"community",label:"Społeczność",icon:e.jsx(mt,{}),section:"social",path:"/dashboard/community"},{id:"settings",label:"Ustawienia",icon:e.jsx(Gt,{}),section:"social",path:"/dashboard/settings"},{id:"report",label:"Zgłoś błąd",icon:e.jsx(Jt,{}),section:"social",path:"/dashboard/report"}],In={main:"Główne",game:"Nauka",social:"Społeczność"},ps=i.memo(()=>{const t=ye(),{isExpanded:s,setIsExpanded:a,activeItem:r,setActiveItem:n}=On(),{logout:o}=O(),d=us(),c=ns(),l=i.useCallback(p=>{n(p.id),p.path&&t(p.path)},[t,n]),u=i.useCallback(()=>{a(p=>!p)},[a]),m=i.useMemo(()=>Object.entries(Bn.reduce((p,j)=>(p[j.section]||(p[j.section]=[]),p[j.section].push(j),p),{})),[]),h=i.useMemo(()=>d||c?"hidden md:flex":"",[d,c]);return d&&window.innerWidth<gn?null:e.jsx(kt,{children:e.jsxs(x.nav,{initial:"collapsed",animate:s?"expanded":"collapsed",variants:_n,className:`${h} fixed left-0 top-0 bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg border-r border-js/10 flex flex-col py-6 z-40 shadow-xl shadow-black/10 h-full`,"aria-label":"Menu nawigacyjne",children:[e.jsx(ms,{isExpanded:s}),e.jsx(x.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u,className:"absolute -right-3 top-8 w-6 h-6 bg-js rounded-full flex items-center justify-center hover:opacity-90 transition-all shadow-lg shadow-js/20","aria-label":s?"Zwiń menu":"Rozwiń menu",children:e.jsx(x.span,{animate:{rotate:s?180:0},className:"text-dark text-sm font-bold",initial:"collapsed","aria-hidden":"true",children:"→"})}),e.jsx("div",{className:"overflow-x-hidden flex-1 px-3 space-y-6",children:e.jsx(H,{mode:"sync",children:m.map(([p,j],w)=>e.jsx(xs,{title:In[p]||p,items:j,isExpanded:s,activeItem:r,onItemClick:l,index:w,isLastSection:w===m.length-1},p))})}),e.jsx("div",{className:"pt-4 border-t border-js/10",children:e.jsx(St,{id:"logout",icon:e.jsx(Wt,{"aria-hidden":"true"}),label:"Wyloguj się",isExpanded:s,onClick:o,variant:"danger"})})]})})});ps.displayName="DashboardNavigation";const hs=i.memo(({username:t})=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-js font-bold text-xl",children:["Witaj, ",t,"! 👋"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Miło Cię znów widzieć"})]})}));hs.displayName="WelcomeSection";const Hn=t=>S(void 0,null,function*(){if(!t)throw new Error("Brak autoryzacji");const s=yield fetch(`${$}users/stats`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok){if(s.status===401)throw new Error("Brak autoryzacji - zaloguj się ponownie");const a=yield s.json();throw new Error(a.message||"Błąd podczas pobierania danych")}return s.json()}),Tt=()=>{const{token:t}=O();return Q({queryKey:["userProgress"],queryFn:()=>Hn(t||""),enabled:!!t,staleTime:1e3*60*5,refetchInterval:1e3*60,retry:(s,a)=>s<2&&!a.message.includes("autoryzacji")})},F={dropdown:{container:`
      absolute right-0 top-12 w-80 bg-dark/95 rounded-xl 
      border border-js/10 shadow-xl backdrop-blur-sm z-[2147483647]
    `,header:{wrapper:"flex justify-between items-center mb-4 p-4",title:"text-xl font-bold text-js",badge:"px-2 py-1 text-xs bg-js/20 text-js rounded-full"},content:{wrapper:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar p-4",loading:"py-8 text-center text-gray-400",empty:"py-8 text-center text-gray-400",item:{wrapper:`
          p-3 rounded-lg bg-dark/50 hover:bg-dark/70
          border border-js/10 hover:border-js/20
          cursor-pointer transition-all duration-200
        `,content:"flex items-start gap-3",icon:"mt-1",text:{wrapper:"flex-1",message:"text-white",time:"text-sm text-gray-400 mt-1"}}}},button:{wrapper:"hidden xl:block relative",base:`
      relative p-2 rounded-lg
      hover:bg-js/5 transition-colors duration-200
    `,active:"bg-dark/50",icon:{base:"w-5 h-5",active:"text-js",inactive:"text-gray-400"},badge:`
      absolute -top-1 -right-1 bg-red-500 text-white 
      rounded-full min-w-[18px] h-[18px] text-xs 
      flex items-center justify-center px-1 font-medium
    `}},Gn=()=>{const{token:t}=O(),s=ge();return{markAsRead:oe({mutationFn:r=>S(void 0,null,function*(){const n=yield fetch(`${$}/dashboard/notifications/${r}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Nie udało się oznaczyć jako przeczytane");return n.json()}),onSuccess:()=>{s.invalidateQueries({queryKey:["dashboard"]})}})}},Jn=t=>{try{const s=t instanceof Date?t:new Date(t);return isNaN(s.getTime())?"Nieprawidłowa data":os(s,"dd MMM, HH:mm",{locale:ls})}catch(s){return console.error("Error formatting date:",s),"Nieprawidłowa data"}},Wn=t=>{switch(t){case"challenge":return e.jsx(Z,{className:"text-yellow-500"});case"achievement":return e.jsx(Hi,{className:"text-green-500"});case"social":return e.jsx(mt,{className:"text-blue-500"});default:return e.jsx(xt,{className:"text-gray-400"})}},js=i.memo(({notification:t,onRead:s})=>e.jsx(x.div,{className:`
      ${F.dropdown.content.item.wrapper}
      ${t.read?"opacity-60":""}
    `,whileHover:{x:5},onClick:()=>!t.read&&s(t._id),children:e.jsxs("div",{className:F.dropdown.content.item.content,children:[e.jsx("div",{className:F.dropdown.content.item.icon,children:Wn(t.type)}),e.jsxs("div",{className:F.dropdown.content.item.text.wrapper,children:[e.jsx("p",{className:F.dropdown.content.item.text.message,children:t.message}),e.jsx("span",{className:F.dropdown.content.item.text.time,children:Jn(t.createdAt)})]})]})}));js.displayName="NotificationItem";const ys=i.memo(({unreadCount:t})=>e.jsxs("div",{className:F.dropdown.header.wrapper,children:[e.jsx("h3",{className:F.dropdown.header.title,children:"Powiadomienia"}),t>0&&e.jsxs("span",{className:F.dropdown.header.badge,children:[t," nowe"]})]}));ys.displayName="NotificationsHeader";const gs=i.memo(({onClose:t})=>{var n,o;const{data:s,isLoading:a}=Tt(),{markAsRead:r}=Gn();return i.useEffect(()=>{const d=c=>{c.key==="Escape"&&t()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t]),e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:F.dropdown.container,onClick:d=>d.stopPropagation(),children:[e.jsx(ys,{unreadCount:(n=s==null?void 0:s.unreadCount)!=null?n:0}),a?e.jsx("div",{className:F.dropdown.content.loading,children:"Ładowanie powiadomień..."}):(o=s==null?void 0:s.notifications)!=null&&o.length?e.jsx("div",{className:F.dropdown.content.wrapper,children:s.notifications.map(d=>e.jsx(js,{notification:d,onRead:c=>r.mutate(c)},d._id))}):e.jsx("div",{className:F.dropdown.content.empty,children:"Brak nowych powiadomień"})]})});gs.displayName="NotificationsDropdown";const bs=i.memo(()=>{var d;const[t,s]=i.useState(!1),{data:a}=Tt(),r=(d=a==null?void 0:a.unreadCount)!=null?d:0,n=i.useCallback(()=>s(!1),[]),o=i.useCallback(c=>{c.stopPropagation(),s(l=>!l)},[]);return e.jsxs("div",{className:F.button.wrapper,children:[e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:`${F.button.base} ${t?F.button.active:""}`,children:[e.jsx(xt,{className:`
          ${F.button.icon.base}
          ${t?F.button.icon.active:F.button.icon.inactive}
        `}),e.jsx(H,{children:r>0&&e.jsx(x.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:F.button.badge,children:r>9?"9+":r})})]}),e.jsx(H,{children:t&&e.jsx(gs,{onClose:n})})]})});bs.displayName="NotificationsButton";const Ve={container:`
    w-[90%]
    xl:w-full
    flex justify-between items-center
    xl:block
    mt-5
    pb-2
    bg-dark/50 backdrop-blur-sm
    border-b border-js/10 
    fixed top-0
    md:top-4 right-0
    h-14
    z-[0]
    rounded-lg mx-4
  `,content:`
    h-full
    ml-32
    sm:ml-auto
    flex justify-between items-center
    max-w-[1000px]
    mx-auto
    relative
  `,actions:"flex items-center gap-3 absolute right-6",gradients:{text:"bg-gradient-to-r from-js to-js/80 bg-clip-text text-transparent",hover:"hover:bg-js/5",base:"bg-gradient-to-br from-js/5 to-js/10"},borders:{base:"border-js/20",hover:"hover:border-js/30"},transitions:{base:"transition-all duration-200"},text:{heading:"text-lg font-bold text-js",primary:"text-white",secondary:"text-gray-400"}},Un=()=>i.useMemo(()=>({container:{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}}}}),[]),Qn=t=>S(void 0,null,function*(){const s=yield fetch(`${$}users/profile`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error("Nie udało się pobrać danych użytkownika");return s.json()}),qn=["userProfile"],Zn=()=>{const{token:t}=O();return Q({queryKey:qn,queryFn:()=>Qn(t)})},fs=i.memo(()=>{const t=Un(),{data:s,isLoading:a,error:r}=Zn(),n=i.useMemo(()=>r?"Użytkowniku":a?"Ładowanie...":(s==null?void 0:s.data.user.username)||"Użytkowniku",[s==null?void 0:s.data.user.username,a,r]);return e.jsx(kt,{children:e.jsx(x.nav,{variants:t.container,initial:"initial",animate:"animate",className:Ve.container,"aria-label":"Górna nawigacja",children:e.jsxs("div",{className:Ve.content,children:[e.jsx(hs,{username:n}),e.jsx("div",{className:Ve.actions,children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 animate-pulse"}),children:e.jsx(bs,{})})})]})})})});fs.displayName="TopNavigation";const Kn=i.lazy(()=>V(()=>import("./app-components-DAszsJfg.js").then(t=>t.D),__vite__mapDeps([0,1,2,3,4,5,6]))),Vn=i.lazy(()=>V(()=>import("./app-components-DAszsJfg.js").then(t=>t.p),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>({default:t.LoadingSpinner}))),ws=i.memo(()=>{const t=us(),s=ns(),{logout:a}=O();return e.jsx(kt,{fallback:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Ładowanie..."}),children:e.jsx(Kn,{})}),children:e.jsxs("main",{className:"bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg flex min-h-screen",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Dashboard | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Panel użytkownika CodeLinesJS - dostęp do kursów, gier i statystyk nauki."})]}),e.jsx(ps,{}),e.jsxs("div",{className:`flex-1 ${!t&&!s?"ml-[100px]":""} md:ml-[100px]`,children:[e.jsx(fs,{}),e.jsx("div",{className:"mt-20 p-6",children:e.jsxs("div",{className:`${t||s?"flex":""} flex-col justify-center items-center gap-4 md:block`,children:[t||s?e.jsxs("div",{className:"flex flex-col gap-2 mb-4 md:hidden",children:[e.jsx(Ae,{to:"/dashboard",children:e.jsx("button",{"aria-label":"Wróć do strony głównej",className:"bg-js text-dark px-4 py-2 rounded-md w-full flex items-center justify-center",children:"Wróć do Home"})}),e.jsxs("button",{onClick:a,"aria-label":"Wyloguj się",className:"bg-red-600 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2",children:[e.jsx(Wt,{"aria-hidden":"true"}),"Wyloguj się"]})]}):null,e.jsx(i.Suspense,{fallback:e.jsx(Vn,{text:"Ładowanie zawartości..."}),children:e.jsx(Gi,{})})]})})]})]})})});ws.displayName="Dashboard";const od=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),ze={text:{heading:"font-bold text-js"},grid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",card:{base:"bg-dark/50 backdrop-blur-sm border border-js/10 shadow-xl",community:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-2 lg:order-1
    `,game:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-1 lg:order-2
    `,stats:`
      col-span-1 md:col-span-2 lg:col-span-1
      order-3
    `}},R={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-6",title:"text-xl font-bold text-js flex items-center gap-2",icon:"w-5 h-5"},content:{wrapper:"space-y-6",description:"text-gray-400 text-sm leading-relaxed",button:{wrapper:"flex justify-center",base:"px-6 py-3 bg-js text-dark font-medium rounded-lg transition-all duration-200",hover:"hover:bg-js/90 hover:shadow-lg hover:shadow-js/20",active:"active:scale-95"}}},Ns=()=>i.useMemo(()=>({container:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},button:{hover:{scale:1.05},tap:{scale:.95}}}),[]),vs=i.memo(()=>{const t=ye(),s=Ns(),a=()=>{t("/dashboard/learn")};return e.jsxs(x.div,{variants:s.container,initial:"hidden",animate:"show",className:R.container,children:[e.jsx("div",{className:R.header.wrapper,children:e.jsxs("h2",{className:R.header.title,children:[e.jsx(Pe,{className:R.header.icon}),"Nauka"]})}),e.jsxs("div",{className:R.content.wrapper,children:[e.jsx("p",{className:R.content.description,children:"Sprawdź najnowsze informacje i aktualności związane z nauką."}),e.jsx("div",{className:R.content.button.wrapper,children:e.jsx(x.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:s.button,className:`
              ${R.content.button.base}
              ${R.content.button.hover}
              ${R.content.button.active}
            `,children:"Sprawdź aktualności"})})]})]})});vs.displayName="CommunityBlock";const ks=i.memo(()=>{const t=ye(),s=Ns(),a=()=>{t("/dashboard/play")};return e.jsxs(x.div,{variants:s.container,initial:"hidden",animate:"show",className:R.container,children:[e.jsx("div",{className:R.header.wrapper,children:e.jsxs("h2",{className:R.header.title,children:[e.jsx(dt,{className:R.header.icon}),"Tryb Gry"]})}),e.jsxs("div",{className:R.content.wrapper,children:[e.jsx("p",{className:R.content.description,children:"Rozpocznij nową sesję gry, rozwiązuj wyzwania i zdobywaj punkty. Sprawdź swoje umiejętności w praktyce!"}),e.jsx("div",{className:R.content.button.wrapper,children:e.jsx(x.button,{onClick:a,whileHover:"hover",whileTap:"tap",variants:s.button,className:`
              ${R.content.button.base}
              ${R.content.button.hover}
              ${R.content.button.active}
            `,children:"Rozpocznij Grę"})})]})]})});ks.displayName="GameBlock";const ne={container:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",header:{wrapper:"flex justify-between items-center mb-4",title:"text-xl font-bold text-js",refreshButton:"p-2 text-js hover:text-js/80 transition-colors cursor-pointer"},stats:{grid:"grid grid-cols-1 sm:grid-cols-2 gap-4",item:{wrapper:"flex items-center gap-4 p-4 bg-dark/30 rounded-lg",icon:"text-2xl text-js",content:{wrapper:"flex flex-col",label:"text-sm text-gray-400",value:"text-xl font-bold text-js"}}},lastActive:"text-sm text-gray-400 mt-4"},Xn=()=>i.useCallback(t=>{try{if(!t)return"Brak danych";const s=new Date(t);return isNaN(s.getTime())?"Nieprawidłowa data":os(s,"dd MMM, HH:mm",{locale:ls})}catch(s){return console.error("Error formatting date:",s),"Nieprawidłowa data"}},[]),_e=i.memo(({icon:t,label:s,value:a})=>e.jsxs("div",{className:ne.stats.item.wrapper,children:[e.jsx("div",{className:ne.stats.item.icon,children:t}),e.jsxs("div",{className:ne.stats.item.content.wrapper,children:[e.jsx("p",{className:ne.stats.item.content.label,children:s}),e.jsx("p",{className:ne.stats.item.content.value,children:a})]})]}));_e.displayName="StatItem";const zs=i.memo(({stats:t})=>{const s=Xn();return e.jsxs("div",{className:ne.container,children:[e.jsxs("div",{className:ne.stats.grid,children:[e.jsx(_e,{icon:e.jsx(Ut,{}),label:"Poziom",value:t.progress.level}),e.jsx(_e,{icon:e.jsx(_,{}),label:"Punkty",value:t.progress.points}),e.jsx(_e,{icon:e.jsx(ut,{}),label:"Seria",value:`${t.achievements.streak.current} dni`})]}),e.jsxs("p",{className:ne.lastActive,children:["Ostatnia aktywność: ",s(t.user.lastActive)]})]})});zs.displayName="StatsBlock";const Le=i.memo(({type:t,message:s})=>{const a=()=>{switch(t){case"error":return"text-red-400";default:return"text-gray-400"}};return e.jsx("div",{className:"p-8 w-full flex items-center justify-center min-h-[400px]",children:e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:`text-xl ${a()}`,children:s||(t==="loading"?"Ładowanie danych...":t==="error"?"Wystąpił błąd podczas ładowania danych":"Brak danych do wyświetlenia")})})});Le.displayName="DashboardState";const Yn=()=>i.useMemo(()=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}}),[]),Ss=i.memo(()=>{const{data:t,isLoading:s,error:a}=Tt(),r=Yn();return s?e.jsx(G,{}):a?e.jsx(Le,{type:"error",message:a.message}):t?e.jsxs(x.div,{className:"p-1 md:p-12 w-full overflow-y-auto",variants:r.container,initial:"hidden",animate:"visible",children:[e.jsx(x.h1,{className:`${ze.text.heading} text-3xl mb-12`,variants:r.item,children:"Dashboard"}),e.jsxs("div",{className:ze.grid,children:[e.jsx(x.div,{variants:r.item,className:ze.card.community,children:e.jsx(vs,{})}),e.jsx(x.div,{variants:r.item,className:ze.card.game,children:e.jsx(ks,{})}),e.jsx(x.div,{variants:r.item,className:ze.card.stats,children:e.jsx(zs,{stats:t.data})})]})]}):e.jsx(Le,{type:"empty"})});Ss.displayName="DashboardContent";const ld=Object.freeze(Object.defineProperty({__proto__:null,DashboardContent:Ss},Symbol.toStringTag,{value:"Module"})),eo=t=>S(void 0,null,function*(){var r,n;const s=yield fetch(`${$}users/stats`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw s.status===401?new Error("Brak autoryzacji"):new Error("Błąd podczas pobierania statystyk");const a=yield s.json();return T(k({},a),{chartData:{daily:((r=a.chartData)==null?void 0:r.daily)||[],categories:((n=a.chartData)==null?void 0:n.categories)||[]}})}),Ct=()=>{const{token:t,isAuthenticated:s}=O(),{data:a,isLoading:r,error:n}=Q({queryKey:["userProgress"],queryFn:()=>eo(t),enabled:s&&!!t,staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(o,d)=>d.message==="Brak autoryzacji"?!1:o<3});return{stats:a,isLoading:r,error:n}},de={card:{base:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",title:"text-xl font-bold text-js mb-6",content:"h-full"},text:{heading:"text-3xl font-bold font-space text-js",subtitle:"text-gray-400 text-sm"}},Ts=i.memo(({level:t,experience:s,nextLevel:a})=>{const r=s/a*100;return e.jsxs("div",{className:de.card.base,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:de.card.title,children:["Poziom ",t]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[s," / ",a," XP do następnego poziomu"]})]}),e.jsx("div",{className:"hidden w-16 h-16 rounded-full bg-js/20 md:flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-js",children:t})})]}),e.jsx("div",{className:"relative h-4 bg-dark/50 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,ease:"easeOut"},className:"absolute top-0 left-0 h-full bg-js/50"})})]})});Ts.displayName="LevelProgress";const to={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},Cs=i.memo(({icon:t,label:s,value:a,subValue:r})=>e.jsx(x.div,{variants:to,className:`${de.card.base} hover:border-js/30 transition-all p-3 md:p-4`,children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"p-2 md:p-3 rounded-lg bg-js/10 shrink-0",children:e.jsx(t,{className:"w-5 h-5 md:w-6 md:h-6 text-js"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-0.5 md:mb-1",children:s}),e.jsx("p",{className:"text-xl md:text-2xl font-bold font-space text-js truncate",children:a}),r&&e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5 md:mt-1",children:r})]})]})}));Cs.displayName="StatCard";const so=()=>t=>{try{const s=new Date(t);return isNaN(s.getTime())?"Data nieznana":s.toLocaleDateString("pl-PL",{year:"numeric",month:"short",day:"numeric"})}catch(s){return"Data nieznana"}},ao={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ro={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},Ls=i.memo(({badge:t})=>{const s=so();return e.jsxs(x.div,{variants:ro,className:"min-w-[8rem] flex flex-col items-center p-4 bg-dark/30 rounded-lg border border-js/10 hover:border-js/30 transition-colors",children:[e.jsx("span",{className:"text-3xl mb-2",children:t.icon||"🏆"}),e.jsx("h4",{className:"text-js font-medium text-sm text-center",children:t.name}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s(t.earnedAt)}),t.description&&e.jsx("p",{className:"text-gray-400 text-xs mt-1 text-center",children:t.description},`${t.id}-description`)]})});Ls.displayName="BadgeCard";const Ps=i.memo(()=>e.jsxs("div",{className:de.card.base,children:[e.jsx("h3",{className:de.card.title,children:"Odznaki"}),e.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nie zdobyto jeszcze żadnych odznak"})]}));Ps.displayName="EmptyBadges";const As=i.memo(({badges:t})=>t!=null&&t.length?e.jsxs("div",{className:de.card.base,children:[e.jsx("h3",{className:de.card.title,children:"Odznaki"}),e.jsx(x.div,{variants:ao,initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:t.map(s=>e.jsx(Ls,{badge:s},s.name))})]}):e.jsx(Ps,{}));As.displayName="BadgesGrid";const Es=i.memo(({message:t})=>e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-500",children:t})}));Es.displayName="ErrorState";const io=t=>i.useMemo(()=>{var s;return t?[{id:"completed-lessons",icon:Z,label:"Ukończone Lekcje",value:((s=t.data.achievements.completedChallenges)==null?void 0:s.toString())||"0",gradient:"from-amber-500 to-orange-500"},{id:"current-streak",icon:Qt,label:"Aktualny Streak",value:`${t.data.achievements.streak.current||0} dni`,subValue:`Najlepszy: ${t.data.achievements.streak.best||0} dni`,gradient:"from-red-500 to-pink-500"}]:[]},[t]),no={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},$s=i.memo(({stats:t,isLoading:s,error:a})=>{const r=io(t);return s?e.jsx(G,{}):a?e.jsx(Es,{message:`Wystąpił błąd podczas ładowania statystyk: ${a.message}`}):t?e.jsxs(x.div,{variants:no,initial:"hidden",animate:"show",className:"space-y-6",children:[e.jsx(Ts,{level:t.data.progress.level,experience:t.data.progress.points,nextLevel:t.data.progress.pointsToNextLevel}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map(n=>e.jsx(Cs,k({},n),n.id))}),e.jsx(As,{badges:t.data.achievements.badges})]}):e.jsx("div",{className:"p-4 bg-dark/50 rounded-lg",children:e.jsx("p",{className:"text-gray-400",children:"Brak dostępnych statystyk"})})});$s.displayName="StatsOverview";const Rs=i.memo(({data:t})=>e.jsx(Nn,{width:"100%",height:300,children:e.jsxs(vn,{data:t,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(kn,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),e.jsx(zn,{dataKey:"date",stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"}}),e.jsx(Sn,{stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"},label:{value:"Punkty",angle:-90,position:"insideLeft",fill:"#666"}}),e.jsx(Tn,{contentStyle:{background:"#1A1A1A",border:"1px solid #333",borderRadius:"4px",padding:"8px"},labelStyle:{color:"#666"},itemStyle:{color:"#F7DF1E"}}),e.jsx(Cn,{type:"monotone",dataKey:"points",stroke:"#F7DF1E",strokeWidth:2,dot:{fill:"#F7DF1E",strokeWidth:2},activeDot:{r:6,fill:"#F7DF1E"}})]})}));Rs.displayName="DailyChart";const Fs=i.memo(({data:t,isLoading:s})=>s?e.jsx(G,{}):t?e.jsx("div",{className:"hidden md:flex flex-col gap-6 h-full",children:e.jsxs("div",{className:"bg-dark/50 rounded-lg p-6 flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-6",children:"Aktywność"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Rs,{data:t.daily})})]})}):null);Fs.displayName="StatsCharts";const Ds=i.memo(()=>{var l;const{stats:t,isLoading:s,error:a}=Ct(),[r,n]=i.useState(!1),[o,d]=i.useState(null);if(i.useEffect(()=>{var u,m,h;(m=(u=t==null?void 0:t.data)==null?void 0:u.progress)!=null&&m.levelUp&&(d({level:t.data.progress.level,rewards:((h=t.data.achievements)==null?void 0:h.badges)||[]}),n(!0))},[t]),s)return e.jsx(G,{});if(a)return e.jsx(Le,{type:"error",message:"Nie udało się załadować statystyk. Spróbuj ponownie później."});if(!t)return e.jsx(Le,{type:"empty",message:"Brak dostępnych statystyk."});const c={data:{progress:{level:t.data.progress.level,points:t.data.progress.points,pointsToNextLevel:t.data.progress.pointsToNextLevel},achievements:{streak:{current:t.data.achievements.streak.current,best:t.data.achievements.streak.best},completedChallenges:t.data.achievements.completedChallenges,badges:t.data.achievements.badges},badges:t.data.achievements.badges,unlockedFeatures:[],levelUp:t.data.progress.levelUp,rewards:(l=t.data.achievements.badges)!=null&&l.length?{badges:t.data.achievements.badges,bonusPoints:0,unlockedFeatures:[]}:void 0,chartData:{daily:t.data.stats.daily,categories:[]}}};return e.jsxs(e.Fragment,{children:[e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(re,{children:[e.jsx("title",{children:"Statystyki i Postępy | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Statystyki i Postępy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(x.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Statystyki i Postępy"})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 flex-1",children:[e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx($s,{stats:c,isLoading:s,error:a})}),e.jsx("div",{className:"flex flex-col gap-6 h-full",children:e.jsx(Fs,{data:t.data.stats,isLoading:s})})]})]}),e.jsx(bn,{isVisible:r,onClose:()=>n(!1),level:(o==null?void 0:o.level)||0,rewards:{badges:(o==null?void 0:o.rewards)||[],bonusPoints:0,unlockedFeatures:[]}})]})});Ds.displayName="StatsSection";const cd=Object.freeze(Object.defineProperty({__proto__:null,StatsSection:Ds},Symbol.toStringTag,{value:"Module"})),Ue=i.memo(({message:t,onRetry:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(X,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-gray-400 mb-4",children:t}),s&&e.jsx("button",{onClick:s,className:"px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:"Spróbuj ponownie"})]})),oo=[{id:"all",label:"Wszystkie"},{id:"beginner",label:"Podstawowe"},{id:"intermediate",label:"Średnie"},{id:"advanced",label:"Zaawansowane"}],Os=i.memo(({onFilterChange:t,className:s=""})=>{const[a,r]=qt(),n=a.get("filter")||"all";i.useEffect(()=>{t(n)},[n,t]);const o=d=>{r(d==="all"?{tab:"lessons"}:{filter:d,tab:"lessons"})};return e.jsx("div",{className:`flex gap-2 flex-wrap ${s}`,children:oo.map(d=>{const c=n===d.id;return e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(d.id),className:`w-fit px-3 py-1.5 rounded-lg text-sm font-medium transition-all
              ${c?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:d.label},d.id)})})});Os.displayName="LessonsFilter";const _s=i.memo(({onFilterChange:t})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Dostępne lekcje"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz interesującą Cię lekcję i rozpocznij naukę"})]}),e.jsx(Os,{onFilterChange:t})]}));_s.displayName="LessonsHeader";const lo={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},Ms=i.memo(({lesson:t})=>{const{title:s,description:a,duration:r,slug:n,isCompleted:o,isLocked:d,requiredLevel:c=1}=t,l=e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${d?"text-gray-500":"text-js"}`,children:s}),o&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-js/10 text-js",children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"Ukończono"]})]}),e.jsx("p",{className:`text-sm ${d?"text-gray-600":"text-gray-400"} line-clamp-2`,children:a})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:`flex items-center gap-1 ${d?"text-gray-600":"text-gray-400"}`,children:[e.jsx(D,{className:"w-3.5 h-3.5"}),r," min"]}),d&&e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ae,{className:"w-3.5 h-3.5"}),"Poziom ",c]})]}),!d&&e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx("span",{children:o?"Powtórz":"Rozpocznij"}),e.jsx(Zt,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]});return e.jsx(x.div,{variants:lo,className:`group relative ${d?"opacity-75":""}`,children:d?e.jsx("div",{className:"block p-6 rounded-xl bg-dark-800 border border-gray-800 cursor-not-allowed",children:l}):e.jsx(Ae,{to:`/dashboard/learn/lesson/${n}`,className:"block p-6 rounded-xl bg-dark-800 border border-js/10 hover:border-js/20 transition-colors",children:l})})});Ms.displayName="LessonCard";const co={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},mo=t=>{switch(t){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},Bs=i.memo(({lessons:t,filter:s,userData:a,isLoading:r=!1})=>{if(r)return e.jsx(G,{});const n=t.map(o=>T(k({},o),{isLocked:o.requiredLevel?o.requiredLevel>a.userLevel:!1}));return n.length===0?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Ge,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(pt,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:s==="all"?"Brak dostępnych lekcji":`Brak lekcji o poziomie ${mo(s)}`}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:s==="all"?"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później.":"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności."})]}):e.jsxs(x.div,{variants:co,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(re,{children:[e.jsx("title",{children:"Lekcje | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Lekcje JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),n.map(o=>e.jsx(Ms,{lesson:o},o.slug))]})});Bs.displayName="LessonsList";const xo=(t,s)=>S(void 0,null,function*(){const a=yield fetch(`${$}lessons/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!a.ok)throw a.status===404?new Error("lesson_not_found"):new Error("Błąd podczas pobierania lekcji");const r=yield a.json();return r.data?r.data:r}),uo=r=>S(void 0,[r],function*({lessonId:t,pathId:s,token:a}){if(!a)throw new Error("Brak tokenu autoryzacji");const n=yield fetch(`${$}lessons/${t}/complete`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({pathId:s})});if(!n.ok){const o=yield n.text();throw console.error("API error:",o),new Error(o||"Błąd podczas zakończenia lekcji")}return n.json()}),po=t=>S(void 0,null,function*(){if(!t)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${$}lessons`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok)throw s.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania lekcji");return yield s.json()}),Ot=t=>{switch(t){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},ho=()=>{var w,g,y;const[t,s]=i.useState("all"),[a]=i.useState("javascript"),{token:r}=O(),{data:n,isLoading:o,error:d,refetch:c}=Q({queryKey:["lessons"],queryFn:()=>po(r||""),retry:2,staleTime:1e3*60*5,refetchOnWindowFocus:!0,enabled:!!r}),l=(g=(w=n==null?void 0:n.data.lessons)==null?void 0:w[a])!=null?g:[],u=(y=n==null?void 0:n.data.stats)!=null?y:{total:0,completed:0,progress:0},m=i.useMemo(()=>t==="all"?l:l.filter(f=>f.difficulty===t),[l,t]),h=!l||l.length===0,p=!h&&m.length===0,j={currentFilter:t,label:Ot(t),isEmpty:h,hasNoLessonsForFilter:p,messages:{title:p?`Brak lekcji o poziomie ${Ot(t)}`:"Brak dostępnych lekcji",description:p?"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności lub wyświetl wszystkie lekcje.":"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później."}};return{filteredLessons:m,filter:t,setFilter:s,resetFilter:()=>s("all"),isLoading:o,error:d,refetch:c,isEmpty:h,hasNoLessonsForFilter:p,filterState:j,requiredLevel:n==null?void 0:n.data.requiredLevel,stats:u}},Is=i.memo(()=>{var h,p;const{user:t}=O(),{stats:s}=Ct(),a=(t==null?void 0:t.id)||"current-user",r=((p=(h=s==null?void 0:s.data)==null?void 0:h.progress)==null?void 0:p.level)||1,{filteredLessons:n,filter:o,setFilter:d,isLoading:c,requiredLevel:l,error:u,refetch:m}=ho();return u?e.jsx(Ue,{message:"Nie udało się pobrać listy lekcji. Spróbuj ponownie później.",onRetry:()=>m()}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(_s,{onFilterChange:d}),e.jsx(Bs,{lessons:n,filter:o,userId:a,userData:{userLevel:r,requiredLevel:l||1},isLoading:c})]})});Is.displayName="Lessons";const jo={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},Hs=i.memo(({resource:t,isRecommended:s})=>e.jsxs(x.div,{variants:jo,whileHover:{scale:1.02},className:"group relative bg-dark-800/50 border border-js/10 rounded-xl p-5 hover:border-js/20 transition-colors",children:[s&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-js text-dark px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),"Polecane"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-js mb-1 line-clamp-1",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:t.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${t.type==="documentation"?"bg-blue-500/10 text-blue-400":t.type==="tutorial"?"bg-green-500/10 text-green-400":t.type==="video"?"bg-red-500/10 text-red-400":"bg-purple-500/10 text-purple-400"}`,children:t.type==="documentation"?"Dokumentacja":t.type==="tutorial"?"Tutorial":t.type==="video"?"Wideo":"Artykuł"}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${t.difficulty==="beginner"?"bg-green-500/10 text-green-400":t.difficulty==="intermediate"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:t.difficulty==="beginner"?"Podstawowy":t.difficulty==="intermediate"?"Średni":"Zaawansowany"})]}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors text-sm",children:["Otwórz materiał",e.jsx(Ji,{className:"w-3 h-3"})]})]})]}));Hs.displayName="ResourceCard";const yo={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ot=i.memo(({title:t,subtitle:s,resources:a,isRecommended:r})=>e.jsxs("section",{children:[e.jsxs(re,{children:[e.jsx("title",{children:"Zasoby | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zasoby JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:t}),e.jsx("p",{className:"text-gray-400 text-sm",children:s})]}),e.jsx(x.div,{variants:yo,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(n=>e.jsx(Hs,{resource:n,isRecommended:r},n.id))})]}));ot.displayName="ResourceSection";const go=t=>S(void 0,null,function*(){if(!t)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${$}resources`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok)throw s.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania zasobów");return yield s.json()}),bo=()=>{var l;const{token:t}=O(),{data:s,isLoading:a,error:r,refetch:n}=Q({queryKey:["resources"],queryFn:()=>go(t||""),retry:2,staleTime:1e3*60*5,enabled:!!t}),o=((l=s==null?void 0:s.data)==null?void 0:l.resources)||[],d=o.filter(u=>u.isRecommended)||[],c=o.filter(u=>!u.isRecommended)||[];return{recommendedResources:d,otherResources:c,isLoading:a,error:r,refetch:n}},Gs=i.memo(()=>{const{recommendedResources:t,otherResources:s,isLoading:a,error:r,refetch:n}=bo();return r?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsx(Ue,{message:"Nie udało się pobrać materiałów. Spróbuj ponownie później.",onRetry:()=>n()})})}):a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(G,{})}):!(t!=null&&t.length)&&!(s!=null&&s.length)?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Kt,{className:"w-20 h-20 text-gray-600 opacity-20"}),e.jsx("div",{className:"absolute -right-2 -bottom-2",children:e.jsx(pt,{className:"w-8 h-8 text-gray-500"})})]}),e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Brak dostępnych materiałów"}),e.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"Aktualnie nie ma żadnych dostępnych materiałów. Sprawdź ponownie później lub skontaktuj się z administratorem."}),e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(),className:"mt-6 px-4 py-2 bg-js/10 text-js border border-js/20 rounded-lg text-sm font-medium hover:bg-js/20 transition-colors",children:"Odśwież materiały"})]}):e.jsxs("div",{className:"space-y-8",children:[(t==null?void 0:t.length)>0&&e.jsx(ot,{title:"Polecane materiały",subtitle:"Wyselekcjonowane materiały, które pomogą Ci w nauce",resources:t,isRecommended:!0}),(s==null?void 0:s.length)>0&&e.jsx(ot,{title:"Wszystkie materiały",subtitle:"Przeglądaj wszystkie dostępne materiały",resources:s})]})});Gs.displayName="Resources";const Xe=i.memo(({icon:t,title:s,label:a,value:r})=>e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(t,{className:"w-5 h-5 text-js"}),e.jsx("h4",{className:"font-medium text-gray-200",children:s})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsx("span",{className:"text-js",children:r})]})]})),fo=i.memo(({stats:t})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Xe,{icon:Vt,title:"Postęp nauki",label:"Ukończone ścieżki",value:`${t.completedPaths}/${t.totalPaths}`}),e.jsx(Xe,{icon:ut,title:"Punkty XP",label:"Zdobyte punkty",value:`${t.totalPoints} XP`}),e.jsx(Xe,{icon:D,title:"W trakcie",label:"Aktywne ścieżki",value:t.pathsInProgress})]})),wo=t=>S(void 0,null,function*(){if(!t)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${$}Learning-paths`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok)throw s.status===401?new Error("Nieautoryzowany - proszę się zalogować ponownie"):new Error("Błąd podczas pobierania ścieżek nauki");return yield s.json()}),Js=()=>{const{token:t}=O(),{data:s,isLoading:a,error:r,refetch:n}=Q({queryKey:["learningPaths","userProgress"],queryFn:()=>wo(t||""),staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!!t});return{paths:(s==null?void 0:s.data.paths)||[],userStats:s==null?void 0:s.data.userStats,isLoading:a,error:r,refetch:n,isEmpty:!(s!=null&&s.data.paths)||s.data.paths.length===0}},No=i.memo(()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-2",children:"Brak dostępnych ścieżek nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Aktualnie nie ma żadnych dostępnych ścieżek nauki. Sprawdź ponownie później."})]})),vo=t=>{const s=i.useMemo(()=>{var n,o,d,c;return{id:t.id,title:t.title||"Brak tytułu",description:t.description||"Brak opisu",estimatedTime:t.estimatedTime||0,isLocked:t.isLocked,requiredLevel:t.requiredLevel,progress:{completed:Array.isArray((n=t.progress)==null?void 0:n.completed)?t.progress.completed.length:Number((o=t.progress)==null?void 0:o.completed)||0,total:Number((d=t.progress)==null?void 0:d.total)||0,percentage:Number((c=t.progress)==null?void 0:c.percentage)||0},outcomes:Array.isArray(t.outcomes)?t.outcomes.map(l=>String(l)):[],requirements:Array.isArray(t.requirements)?t.requirements.map(l=>String(l)):[]}},[t]),a=i.useMemo(()=>`
    bg-dark-800/50 border rounded-xl p-6 transition-all
    ${s.isLocked?"border-gray-700/50 opacity-75":"border-js/10 hover:border-js/20"}
  `,[s.isLocked]),r=i.useMemo(()=>s.isLocked?{}:{scale:1.02},[s.isLocked]);return{safeData:s,cardStyles:a,hoverAnimation:r}},Ws=i.memo(({title:t,isLocked:s,requiredLevel:a})=>e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h3",{className:`text-lg font-bold ${s?"text-gray-400":"text-js"}`,children:t}),s&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:["Poziom ",a]})]})]}));Ws.displayName="PathHeader";const Us=i.memo(({description:t,outcomes:s,requirements:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:t}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Czego się nauczysz:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:s.map((r,n)=>e.jsx("li",{children:r},n))})]}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-js",children:"Wymagania:"}),e.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:a.map((r,n)=>e.jsx("li",{children:r},n))})]})]}));Us.displayName="PathContent";const Qs=i.memo(({progress:t})=>e.jsxs("div",{children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${t.percentage}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[e.jsxs("span",{children:[t.completed,"/",t.total," ukończone"]}),e.jsxs("span",{children:[t.percentage,"%"]})]})]}));Qs.displayName="ProgressBar";const qs=i.memo(({id:t,isLocked:s,estimatedTime:a,progress:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(D,{className:"w-4 h-4"}),a," min"]}),!s&&e.jsx(Ae,{to:`/dashboard/learn?tab=lessons&pathId=${t}`,className:"text-js hover:text-js/80 transition-colors",children:e.jsx(Zt,{className:"w-4 h-4"})})]}),e.jsx(Qs,{progress:r})]}));qs.displayName="PathFooter";const Zs=i.memo(({path:t})=>{const{safeData:s,cardStyles:a,hoverAnimation:r}=vo(t);return e.jsx(x.div,{whileHover:r,className:a,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ws,{title:s.title,isLocked:s.isLocked,requiredLevel:s.requiredLevel}),e.jsx(Us,{description:s.description,outcomes:s.outcomes,requirements:s.requirements}),e.jsx(qs,{id:s.id,isLocked:s.isLocked,estimatedTime:s.estimatedTime,progress:s.progress})]})})});Zs.displayName="PathCard";const Ks=i.memo(()=>{const{paths:t,userStats:s,isLoading:a,error:r,refetch:n,isEmpty:o}=Js();return a?e.jsx(G,{}):r?(console.error("Learning paths error:",r),e.jsx(Ue,{message:"Nie udało się pobrać ścieżek nauki. Spróbuj ponownie później.",onRetry:n})):o?e.jsx(No,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(fo,{stats:s||{completedPaths:0,totalPaths:0,totalPoints:0,pathsInProgress:0,recentActivity:[]}}),e.jsxs("section",{children:[e.jsx("header",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Ścieżki nauki"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz ścieżkę nauki dopasowaną do Twoich potrzeb"})]})}),e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(d=>e.jsx(Zs,{path:d},d.id))})]})]})});Ks.displayName="LearningPaths";const ko=[{id:"paths",label:"Ścieżki nauki",icon:Vt},{id:"lessons",label:"Lekcje",icon:Pe},{id:"resources",label:"Materiały",icon:be},{id:"recruitment",label:"Rekrutacja",icon:Wi,badge:"Nowość"}],Vs=i.memo(({activeTab:t,onTabChange:s})=>e.jsx("div",{className:"flex gap-2 flex-wrap",children:ko.map(a=>e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s(a.id),className:`relative flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all
            ${t===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label,a.badge&&e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-bold bg-gradient-to-r from-js to-js/80 text-dark rounded-full",children:a.badge}),t===a.id&&e.jsx(x.div,{layoutId:"activeTab",className:"absolute inset-0 bg-js/5 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},a.id))}));Vs.displayName="LearnTabs";const zo=()=>{const t=i.useMemo(()=>[{id:"technical-interview",title:"Przygotowanie do rozmowy technicznej",description:"Naucz się odpowiadać na pytania techniczne i rozwiązywać zadania programistyczne na żywo",icon:ht,isAvailable:!0,features:["Typowe pytania JavaScript","Zadania algorytmiczne","Code review na żywo","Whiteboarding"]},{id:"cv-preparation",title:"Przygotowanie CV",description:"Stwórz profesjonalne CV, które przyciągnie uwagę rekruterów i wyróżni Cię na rynku",icon:Ui,isAvailable:!1,features:["Szablony CV dla programistów","Opis projektów i umiejętności","Portfolio prezentacja","LinkedIn optimization"]}],[]),s=i.useMemo(()=>({technicalQuestions:100,practicalTasks:10,cvTips:10}),[]),a=i.useMemo(()=>({hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}}),[]),r=i.useMemo(()=>({hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}),[]);return{recruitmentSections:t,stats:s,containerVariants:a,itemVariants:r}},Xs=i.memo(()=>e.jsx("header",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx(Qi,{className:"w-5 h-5 text-js"}),e.jsx("h3",{className:"text-xl font-bold text-js",children:"Rekrutacja"}),e.jsx("span",{className:"px-2 py-0.5 bg-js/20 text-js text-xs font-bold rounded-full",children:"NOWOŚĆ"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Przygotuj się profesjonalnie do procesu rekrutacji w IT"})]})}));Xs.displayName="RecruitmentHeader";const Ys=i.memo(({section:t,variants:s,onClick:a})=>e.jsxs(x.div,{variants:s,whileHover:{scale:1.02},onClick:a,className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 hover:border-js/20 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-js/10 border border-js/20",children:e.jsx(t.icon,{className:"w-6 h-6 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-js transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:t.description})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Co znajdziesz w tej sekcji:"}),e.jsx("ul",{className:"space-y-2",children:t.features.map((r,n)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-js rounded-full"}),r]},n))})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Status:"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded border ${t.isAvailable?"bg-green-500/10 text-green-400 border-green-500/20":"bg-js/10 text-js border-js/20"}`,children:t.isAvailable?"Dostępne":"Wkrótce dostępne"})]})})]}));Ys.displayName="RecruitmentCard";const ea=i.memo(({stats:t,variants:s})=>e.jsxs(x.div,{variants:s,className:"bg-dark-700/30 border border-js/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(mt,{className:"w-5 h-5 text-js"}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Przygotuj się z nami!"})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Nasze materiały rekrutacyjne zostały przygotowane przez doświadczonych programistów i rekruterów. Znajdziesz tu praktyczne porady, które pomogą Ci znaleźć wymarzoną pracę w IT."}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-js font-bold text-lg",children:[t.technicalQuestions,"+"]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Pytań technicznych"})]}),e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-js font-bold text-lg",children:[t.practicalTasks,"+"]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Zadań praktycznych"})]}),e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-js font-bold text-lg",children:[t.cvTips,"+"]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Praktycznych porad jak stworzyć skuteczne CV"})]})]})]}));ea.displayName="RecruitmentStatsSection";const So=[{id:"theory",title:"Teoria",description:"Podstawowe koncepty i wiedza teoretyczna niezbędna podczas rozmów technicznych",icon:Pe,topics:["Podstawy JavaScript (var, let, const)","Hoisting i scope","Closures i funkcje wyższego rzędu","Prototypy i dziedziczenie","Event loop i asynchroniczność","ES6+ nowe funkcjonalności"]},{id:"practice",title:"Praktyka",description:"Zadania praktyczne i przykłady kodu często pojawiające się na rozmowach",icon:E,topics:["Algorytmy sortowania i wyszukiwania","Manipulacja tablicami i obiektami","Zadania z rekurencją","Problemy z string-ami","Live coding challenges","Debugowanie kodu"]}],To=[{category:"Przed rozmową",tips:["Przejrzyj podstawy JavaScript","Przygotuj pytania do firmy","Przetestuj kamerę i mikrofon"]},{category:"W trakcie rozmowy",tips:["Myśl na głos","Zadawaj pytania doprecyzowujące","Nie bój się przyznać do niewiedzy"]},{category:"Live coding",tips:["Zacznij od prostego rozwiązania","Testuj kod na przykładach","Optymalizuj tylko na końcu"]}],Co=()=>{const t=i.useMemo(()=>({hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}}),[]),s=i.useMemo(()=>({hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}),[]);return{interviewBlocks:So,interviewTips:To,containerVariants:t,itemVariants:s}},ta=i.memo(({onBack:t})=>e.jsx("header",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-js transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Powrót"})]}),e.jsx("div",{className:"w-px h-5 bg-gray-600 mx-2"}),e.jsx(ht,{className:"w-5 h-5 text-js"}),e.jsx("h3",{className:"text-xl font-bold text-js",children:"Przygotowanie do rozmowy technicznej"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Naucz się odpowiadać na pytania techniczne i rozwiązywać zadania programistyczne na żywo"})]})}));ta.displayName="TechnicalInterviewHeader";const sa=i.memo(({block:t,variants:s,onClick:a})=>e.jsxs(x.div,{variants:s,whileHover:{scale:1.02},onClick:a,className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 hover:border-js/20 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-js/10 border border-js/20",children:e.jsx(t.icon,{className:"w-6 h-6 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-js transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:t.description})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Tematy do nauki:"}),e.jsx("ul",{className:"space-y-2",children:t.topics.map((r,n)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-js rounded-full"}),r]},n))})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Dostępność:"}),e.jsx("span",{className:"text-xs bg-green-500/10 text-green-400 border border-green-500/20 px-2 py-1 rounded",children:"Dostępne"})]})})]}));sa.displayName="InterviewBlockCard";const aa=i.memo(({tips:t,variants:s})=>e.jsxs(x.div,{variants:s,className:"bg-dark-700/30 border border-js/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ht,{className:"w-5 h-5 text-js"}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Porady na rozmowę techniczną"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:t.map((a,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-js text-sm",children:a.category}),e.jsx("ul",{className:"text-sm text-gray-400 space-y-1",children:a.tips.map((n,o)=>e.jsxs("li",{children:["• ",n]},o))})]},r))})]}));aa.displayName="InterviewTipsSection";const _t=[{id:1,question:"Co to jest hoisting w JavaScript?",options:["Proces optymalizacji kodu przez przeglądarkę","Przenoszenie deklaracji zmiennych i funkcji na górę zakresu","Mechanizm dziedziczenia w JavaScript","Sposób na łączenie różnych plików JavaScript"],correctAnswer:1,explanation:"Hoisting to mechanizm JavaScript w którym deklaracje zmiennych i funkcji są przenoszone na górę ich zakresu podczas kompilacji.",category:"Podstawy"},{id:2,question:"Jaka jest różnica między 'var', 'let' i 'const'?",options:["Nie ma różnicy, wszystkie działają tak samo","var ma function scope, let i const mają block scope","var i let można przedefiniować, const nie","let można używać tylko w pętlach"],correctAnswer:1,explanation:"var ma function scope, podczas gdy let i const mają block scope. Dodatkowo const nie może być ponownie przypisywane.",category:"Podstawy"},{id:3,question:"Co to jest closure w JavaScript?",options:["Sposób na zamykanie okien przeglądarki","Funkcja która ma dostęp do zmiennych z zewnętrznego zakresu","Metoda optymalizacji pamięci","Sposób na ukrywanie kodu przed użytkownikiem"],correctAnswer:1,explanation:"Closure to funkcja, która ma dostęp do zmiennych z zewnętrznego (otaczającego) zakresu nawet po tym, jak zewnętrzna funkcja zakończy wykonywanie.",category:"Zaawansowane"},{id:4,question:"Jak działa Event Loop w JavaScript?",options:["Wykonuje kod synchronicznie linia po linii","Zarządza kolejką zdarzeń i stosem wywołań","Optymalizuje wydajność aplikacji","Łączy różne pliki JavaScript"],correctAnswer:1,explanation:"Event Loop zarządza wykonaniem kodu asynchronicznego, przenosząc zadania z kolejki zdarzeń na stos wywołań gdy jest pusty.",category:"Asynchroniczność"},{id:5,question:"Co zwraca typeof null w JavaScript?",options:["'null'","'undefined'","'object'","'boolean'"],correctAnswer:2,explanation:"typeof null zwraca 'object' - to jest znany bug w JavaScript, który istnieje od samego początku języka.",category:"Podstawy"},{id:6,question:"Co to są prototypy w JavaScript?",options:["Wersje beta aplikacji JavaScript","Mechanizm dziedziczenia oparty na obiektach","Sposób na definiowanie zmiennych globalnych","Metoda optymalizacji kodu"],correctAnswer:1,explanation:"Prototypy to mechanizm dziedziczenia w JavaScript, gdzie obiekty mogą dziedziczyć właściwości i metody z innych obiektów.",category:"Prototypy"},{id:7,question:"Czym się różni '==' od '===' w JavaScript?",options:["Nie ma różnicy","== porównuje wartości, === porównuje wartości i typy","=== jest szybsze od ==","== można używać tylko z liczbami"],correctAnswer:1,explanation:"== wykonuje porównanie z konwersją typów, podczas gdy === porównuje bez konwersji (strict equality).",category:"Podstawy"},{id:8,question:"Co to jest async/await w JavaScript?",options:["Sposób na definiowanie zmiennych asynchronicznych","Syntactic sugar dla Promise w celu pisania kodu asynchronicznego","Metoda optymalizacji wydajności","Sposób na łączenie plików JavaScript"],correctAnswer:1,explanation:"async/await to składnia która ułatwia pracę z Promise, pozwalając pisać kod asynchroniczny w sposób podobny do synchronicznego.",category:"Asynchroniczność"},{id:9,question:"Co to jest destructuring w ES6?",options:["Usuwanie elementów z tablicy","Rozpakowywanie wartości z tablic lub obiektów do zmiennych","Niszczenie obiektów w pamięci","Łączenie wielu obiektów w jeden"],correctAnswer:1,explanation:"Destructuring to składnia pozwalająca na wyciąganie wartości z tablic lub właściwości z obiektów do odrębnych zmiennych.",category:"ES6+"},{id:10,question:"Jak działa 'this' w arrow functions?",options:["Działa tak samo jak w zwykłych funkcjach","Zawsze wskazuje na obiekt window","Dziedziczy 'this' z otaczającego kontekstu","Jest zawsze undefined"],correctAnswer:2,explanation:"Arrow functions nie mają własnego 'this' - dziedziczą go z otaczającego kontekstu leksykalnego.",category:"ES6+"},{id:11,question:"Co to jest Promise w JavaScript?",options:["Sposób na definiowanie zmiennych","Obiekt reprezentujący ewentualne zakończenie operacji asynchronicznej","Metoda optymalizacji kodu","Sposób na łączenie funkcji"],correctAnswer:1,explanation:"Promise to obiekt reprezentujący ewentualne zakończenie (lub niepowodzenie) operacji asynchronicznej i jej wynik.",category:"Asynchroniczność"},{id:12,question:"Co zwraca Array.map()?",options:["Modyfikuje oryginalną tablicę","Zwraca nową tablicę z przetworzonymi elementami","Zwraca pierwszy element tablicy","Zwraca długość tablicy"],correctAnswer:1,explanation:"Array.map() zwraca nową tablicę zawierającą wyniki wywołania podanej funkcji dla każdego elementu oryginalnej tablicy.",category:"Tablice"},{id:13,question:"Czym jest spread operator (...) w JavaScript?",options:["Operator matematyczny","Składnia pozwalająca na rozłożenie elementów tablicy lub obiektu","Sposób na komentowanie kodu","Operator porównania"],correctAnswer:1,explanation:"Spread operator (...) pozwala na rozłożenie elementów iterowalnycgh (jak tablice) lub właściwości obiektów.",category:"ES6+"},{id:14,question:"Co to jest callback function?",options:["Funkcja która zawsze zwraca false","Funkcja przekazana jako argument do innej funkcji","Funkcja wywoływana automatycznie","Funkcja która nie przyjmuje parametrów"],correctAnswer:1,explanation:"Callback to funkcja przekazana jako argument do innej funkcji, która zostanie wywołana w określonym momencie.",category:"Funkcje"},{id:15,question:"Jak działa JSON.parse()?",options:["Konwertuje obiekt JavaScript do JSON","Parsuje string JSON do obiektu JavaScript","Sprawdza czy string jest poprawnym JSON","Kompresuje dane JSON"],correctAnswer:1,explanation:"JSON.parse() parsuje string JSON i konstruuje wartość JavaScript lub obiekt opisany przez string.",category:"JSON"},{id:16,question:"Co to jest temporal dead zone?",options:["Czas gdy aplikacja nie odpowiada","Okres między deklaracją let/const a inicjalizacją","Strefa w kodzie gdzie zmienne są usuwane","Czas ładowania strony"],correctAnswer:1,explanation:"Temporal Dead Zone to okres między wejściem do zakresu a deklaracją zmiennej let/const, gdzie zmienna nie może być użyta.",category:"Zaawansowane"},{id:17,question:"Czym różni się forEach od map?",options:["forEach zwraca nową tablicę, map nie","map zwraca nową tablicę, forEach zwraca undefined","Nie ma różnicy","forEach jest szybsze"],correctAnswer:1,explanation:"map zwraca nową tablicę z przetworzonymi elementami, podczas gdy forEach wykonuje funkcję dla każdego elementu ale zwraca undefined.",category:"Tablice"},{id:18,question:"Co to jest IIFE?",options:["Internet Information Function Expression","Immediately Invoked Function Expression","Internal Interface Function Expression","Inherited Instance Function Expression"],correctAnswer:1,explanation:"IIFE (Immediately Invoked Function Expression) to funkcja która jest wywołana natychmiast po jej zdefiniowaniu.",category:"Funkcje"},{id:19,question:"Jak działa Object.create()?",options:["Tworzy kopię istniejącego obiektu","Tworzy nowy obiekt z określonym prototypem","Konwertuje tablicę na obiekt","Łączy dwa obiekty w jeden"],correctAnswer:1,explanation:"Object.create() tworzy nowy obiekt z określonym obiektem prototypu i właściwościami.",category:"Prototypy"},{id:20,question:"Co zwraca typeof []?",options:["'array'","'object'","'list'","'undefined'"],correctAnswer:1,explanation:"typeof [] zwraca 'object' ponieważ tablice w JavaScript są specjalnym typem obiektów.",category:"Podstawy"}],Lo=()=>({totalQuestions:_t.length,questions:_t}),Po=[{value:5,label:"5 pytań",time:"~5 min"},{value:10,label:"10 pytań",time:"~10 min"},{value:15,label:"15 pytań",time:"~15 min"},{value:20,label:"20 pytań",time:"~20 min"}],{totalQuestions:Ao}=Lo(),Eo={topics:"podstawy JavaScript, hoisting, closures, prototypy, event loop, ES6+",details:[{title:"Pytania w bazie",description:`${Ao} pytań dostępnych`},{title:"Format",description:"Pytania wielokrotnego wyboru"},{title:"Czas",description:"Bez ograniczeń czasowych"}]},$o=()=>{const[t,s]=i.useState(10),a=i.useMemo(()=>({hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}}),[]),r=i.useMemo(()=>({hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}),[]);return{selectedCount:t,questionOptions:Po,testInfo:Eo,containerVariants:a,cardVariants:r,handleQuestionCountChange:o=>{s(o)}}},Ro=(t=10)=>S(void 0,null,function*(){try{const s=yield ue.get(`theory-questions?limit=${t}`);if(s.error)return{data:null,error:s.error,status:s.status};if(s.data){if(s.data.success&&s.data.data)return{data:s.data.data,error:null,status:s.status};if(Array.isArray(s.data))return{data:s.data,error:null,status:s.status}}return{data:null,error:"Nieprawidłowa struktura odpowiedzi z serwera",status:s.status}}catch(s){return{data:null,error:"Błąd połączenia z serwerem",status:0}}}),Fo=(t,s)=>S(void 0,null,function*(){try{const a=yield ue.post(`theory-questions/${t}/check`,{answer:s},{requiresAuth:!0});if(a.error)return{data:null,error:a.error,status:a.status};if(a.data){if(a.data.success&&a.data.data)return{data:a.data.data,error:null,status:a.status};if("isCorrect"in a.data&&"correctAnswer"in a.data&&"explanation"in a.data&&"points"in a.data)return{data:a.data,error:null,status:a.status}}return{data:null,error:"Nieprawidłowa struktura odpowiedzi przy sprawdzaniu",status:a.status}}catch(a){return{data:null,error:"Błąd połączenia z serwerem",status:0}}}),Do=t=>({id:parseInt(t._id.slice(-6),16),question:t.question,options:t.options,correctAnswer:t.correctAnswer,explanation:t.explanation,category:t.category}),Oo=t=>({questionId:parseInt(t.questionId.slice(-6),16),selectedAnswer:t.selectedAnswer,isCorrect:t.isCorrect,timeTaken:t.timeTaken,explanation:t.explanation,correctAnswer:t.correctAnswer}),_o=()=>{const[t,s]=i.useState("setup"),[a,r]=i.useState(10),[n,o]=i.useState([]),[d,c]=i.useState(0),[l,u]=i.useState(null),[m,h]=i.useState([]),[p,j]=i.useState(0),[w,g]=i.useState(0),[y,f]=i.useState(!1),[z,C]=i.useState(null),v=i.useCallback(B=>S(void 0,null,function*(){f(!0),C(null);try{const W=yield Ro(B);if(W.error){C(W.error),f(!1);return}if(W.data){const pe=W.data.map(le=>T(k({},le),{id:le._id}));o(pe),r(B),c(0),u(null),h([]),s("inProgress"),j(Date.now()),g(Date.now())}}catch(W){C("Błąd podczas ładowania pytań")}finally{f(!1)}}),[]),N=i.useCallback(B=>{u(B)},[]),b=i.useCallback(()=>S(void 0,null,function*(){var pe,le,At;if(l===null)return;const B=n[d],W=(Date.now()-w)/1e3;try{const Re=yield Fo(B._id,l),Ze={questionId:B.id,selectedAnswer:l,isCorrect:((pe=Re.data)==null?void 0:pe.isCorrect)||!1,timeTaken:W,explanation:((le=Re.data)==null?void 0:le.explanation)||"",correctAnswer:(At=Re.data)==null?void 0:At.correctAnswer};h(ke=>[...ke,Ze]),d===n.length-1?s("completed"):(c(ke=>ke+1),u(null),g(Date.now()))}catch(Re){C("Błąd podczas sprawdzania odpowiedzi");const Ze=l===B.correctAnswer,ke={questionId:B.id,selectedAnswer:l,isCorrect:Ze,timeTaken:W,explanation:B.explanation,correctAnswer:B.correctAnswer};h(Ke=>[...Ke,ke]),d===n.length-1?s("completed"):(c(Ke=>Ke+1),u(null),g(Date.now()))}}),[l,n,d,w]),L=i.useCallback(()=>{s("setup"),r(10),o([]),c(0),u(null),h([]),j(0),g(0),f(!1),C(null)},[]),A=i.useCallback(()=>{n.length>0?v(n.length):L()},[n.length,v,L]),J=i.useCallback(()=>{s("setup")},[]),I=i.useCallback(()=>p===0?0:((t==="completed"?Date.now():p)-p)/1e3,[p,t]),K=i.useCallback(()=>n.length===0?0:(d+1)/n.length*100,[d,n.length]),ve=i.useCallback(()=>n[d],[n,d]),qe=i.useCallback(()=>{const B=m.filter(le=>le.isCorrect).length,W=m.length,pe=W>0?Math.round(B/W*100):0;return{correctAnswers:B,totalQuestions:W,percentage:pe,totalTime:I()}},[m,I]);return{testState:t,selectedQuestionCount:a,questions:n.map(Do),currentQuestionIndex:d,selectedAnswer:l,answers:m.map(Oo),loading:y,error:z,startTest:v,selectAnswer:N,nextQuestion:b,resetTest:L,restartTest:A,goBackToSetup:J,setSelectedQuestionCount:r,getTotalTime:I,getProgress:K,getCurrentQuestion:ve,getStats:qe,isAnswerSelected:l!==null,isLastQuestion:d===n.length-1,canProceed:l!==null}},ra=i.memo(({onBack:t,label:s="Powrót"})=>e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-js transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s})]}));ra.displayName="BackButton";const ia=i.memo(()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-6 rounded-full bg-js/10 border border-js/20",children:e.jsx(Pe,{className:"w-12 h-12 text-js"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Test teorii JavaScript"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Sprawdź swoją wiedzę teoretyczną z JavaScript. Wybierz ilość pytań i rozpocznij test."})]})]}));ia.displayName="TheoryHeader";const na=i.memo(({options:t,selectedCount:s,onSelectionChange:a})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-js",children:[e.jsx(qi,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Wybierz ilość pytań"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(r=>e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(r.value),className:`p-4 rounded-xl border transition-all ${s===r.value?"bg-js/10 border-js text-js":"bg-dark-700/30 border-gray-600 text-gray-300 hover:border-js/50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:r.label}),e.jsxs("div",{className:"text-sm opacity-70 flex items-center justify-center gap-1 mt-1",children:[e.jsx(D,{className:"w-3 h-3"}),r.time]})]})},r.value))})]}));na.displayName="QuestionSelector";const oa=i.memo(({details:t})=>e.jsxs("div",{className:"bg-dark-700/30 border border-js/10 rounded-xl p-6 space-y-3",children:[e.jsx("h4",{className:"text-js font-semibold text-center",children:"Informacje o teście"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-gray-400",children:t.map((s,a)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-white",children:s.title}),e.jsx("div",{children:s.description})]},a))})]}));oa.displayName="TestInfoSection";const la=i.memo(({questionCount:t,onStart:s,loading:a=!1})=>e.jsx(x.button,{whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},onClick:s,disabled:a,className:`w-full bg-gradient-to-r from-js to-js/80 text-dark font-bold py-4 px-8 rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-3 text-lg ${a?"opacity-50 cursor-not-allowed":""}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-dark border-t-transparent rounded-full animate-spin"}),"Ładowanie pytań..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-5 h-5"}),"Rozpocznij test (",t," pytań)"]})}));la.displayName="StartButton";const Mo=(t,s,a)=>{const r=i.useMemo(()=>t[s],[t,s]),n=i.useMemo(()=>(s+1)/a*100,[s,a]),o=i.useMemo(()=>s===a-1,[s,a]);return{currentQuestion:r,progress:n,isLastQuestion:o,getOptionLetter:c=>String.fromCharCode(65+c)}},ca=i.memo(({onBack:t,currentQuestionIndex:s,totalQuestions:a,progress:r})=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(me,{}),"Powrót"]}),e.jsxs("div",{className:"text-white text-lg font-medium",children:["Pytanie ",s+1," z ",a]})]}),e.jsx("div",{className:"w-full h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-gradient-to-r from-js to-js/80",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.5}})})]}));ca.displayName="TestHeader";const da=i.memo(({question:t,selectedAnswer:s,onAnswerSelect:a,currentQuestionIndex:r,getOptionLetter:n})=>e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-8 mb-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-js text-sm font-medium mb-2 uppercase tracking-wide",children:t.category}),e.jsx("h2",{className:"text-white text-2xl font-bold leading-relaxed",children:t.question})]}),e.jsx("div",{className:"space-y-4",children:t.options.map((o,d)=>e.jsx(x.button,{onClick:()=>a(d),className:`w-full p-4 rounded-xl border-2 text-left transition-all duration-200 ${s===d?"border-js bg-js/10 text-white":"border-js/10 bg-dark-700/50 text-gray-300 hover:border-js/20 hover:bg-dark-700"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s===d?"border-js bg-js":"border-gray-600"}`,children:s===d&&e.jsx(ee,{className:"text-dark text-xs"})}),e.jsx("span",{className:"text-lg",children:o})]}),e.jsx("div",{className:"text-gray-500 text-sm font-medium",children:n(d)})]})},d))})]},r));da.displayName="QuestionCard";const ma=i.memo(({onNext:t,selectedAnswer:s,isLastQuestion:a})=>{const r=s!==null,n=()=>S(void 0,null,function*(){r&&(yield t())});return e.jsx("div",{className:"flex justify-end",children:e.jsx(x.button,{onClick:n,disabled:!r,className:`px-8 py-4 rounded-xl font-medium text-lg transition-all duration-200 ${r?"bg-gradient-to-r from-js to-js/80 text-dark hover:shadow-lg hover:shadow-js/20":"bg-dark-700 text-gray-500 cursor-not-allowed"}`,whileHover:r?{scale:1.05}:{},whileTap:r?{scale:.95}:{},children:a?"Zakończ test":"Następne pytanie"})})});ma.displayName="TestActions";const xa=i.memo(({questions:t,currentQuestionIndex:s,selectedAnswer:a,onAnswerSelect:r,onNext:n,onBack:o,totalQuestions:d})=>{const{currentQuestion:c,progress:l,isLastQuestion:u,getOptionLetter:m}=Mo(t,s,d);return e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsx(ca,{onBack:o,currentQuestionIndex:s,totalQuestions:d,progress:l}),e.jsx(da,{question:c,selectedAnswer:a,onAnswerSelect:r,currentQuestionIndex:s,getOptionLetter:m}),e.jsx(ma,{onNext:n,selectedAnswer:a,isLastQuestion:u})]})})});xa.displayName="TestScreen";const Bo=(t,s,a=0)=>{const r=i.useMemo(()=>{const l=s.filter(p=>p.isCorrect).length,u=t.length,m=Math.round(l/u*100),h=t.reduce((p,j,w)=>{var y;const g=j.category;return p[g]||(p[g]={total:0,correct:0}),p[g].total++,(y=s[w])!=null&&y.isCorrect&&p[g].correct++,p},{});return{correctAnswers:l,totalQuestions:u,percentage:m,categoryStats:h,averageTime:a/u||0}},[t,s,a]),o=(l=>l>=90?{level:"Doskonały",color:"text-green-400",bgColor:"bg-green-500/10"}:l>=80?{level:"Bardzo dobry",color:"text-blue-400",bgColor:"bg-blue-500/10"}:l>=70?{level:"Dobry",color:"text-js",bgColor:"bg-js/10"}:l>=60?{level:"Zadowalający",color:"text-orange-400",bgColor:"bg-orange-500/10"}:{level:"Wymaga poprawy",color:"text-red-400",bgColor:"bg-red-500/10"})(r.percentage);return{stats:r,performance:o,formatTime:l=>{if(l<60)return`${Math.round(l)}s`;const u=Math.floor(l/60),m=Math.round(l%60);return`${u}:${m.toString().padStart(2,"0")}`},getRecommendations:(()=>{const l=[];r.percentage>=90?l.push("Doskonały wynik! Jesteś gotowy na rozmowę techniczną."):r.percentage>=70?l.push("Dobry wynik! Powtórz tematy gdzie miałeś błędy."):l.push("Warto powtórzyć materiał i przejść test ponownie.");const u=Object.entries(r.categoryStats).filter(([,m])=>m.correct/m.total<.7).slice(0,2).map(([m])=>`• Skup się na temacie: ${m}`);return[...l,...u]})()}},ua=i.memo(({onBack:t})=>e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(me,{}),"Powrót do teorii"]}),e.jsx("div",{className:"text-white text-xl font-bold",children:"Wyniki testu"})]}));ua.displayName="ResultsHeader";const pa=i.memo(({correctAnswers:t,totalQuestions:s,percentage:a,performance:r})=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-8 mb-8 text-center",children:e.jsxs(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:[e.jsx(Z,{className:"text-js text-6xl mx-auto mb-4"}),e.jsxs("div",{className:"text-white text-4xl font-bold mb-2",children:[t,"/",s]}),e.jsxs("div",{className:"text-js text-2xl font-bold mb-4",children:[a,"% poprawnych odpowiedzi"]}),e.jsx("div",{className:`inline-block px-6 py-3 rounded-full ${r.bgColor} ${r.color} font-medium text-lg`,children:r.level})]})}));pa.displayName="MainResultCard";const ha=i.memo(({correctAnswers:t,totalQuestions:s,totalTime:a,formatTime:r})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ut,{className:"text-js text-xl"}),e.jsx("h3",{className:"text-white text-lg font-bold",children:"Statystyki"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Poprawne:"}),e.jsx("span",{className:"text-green-400 font-medium",children:t})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Błędne:"}),e.jsx("span",{className:"text-red-400 font-medium",children:s-t})]}),a>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Czas całkowity:"}),e.jsx("span",{className:"text-white font-medium",children:r(a)})]})]})]}));ha.displayName="StatsCard";const ja=i.memo(({categoryStats:t})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Kt,{className:"text-js text-xl"}),e.jsx("h3",{className:"text-white text-lg font-bold",children:"Według kategorii"})]}),e.jsx("div",{className:"space-y-3",children:Object.entries(t).map(([s,a])=>{const r=Math.round(a.correct/a.total*100);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:s}),e.jsxs("span",{className:"text-white font-medium",children:[a.correct,"/",a.total," (",r,"%)"]})]}),e.jsx("div",{className:"w-full h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-gradient-to-r from-js to-js/80",initial:{width:0},animate:{width:`${r}%`},transition:{delay:.5,duration:1}})})]},s)})})]}));ja.displayName="CategoryStatsCard";const ya=i.memo(({recommendations:t,percentage:s})=>{const a=()=>s>=90?"text-green-400":s>=70?"text-js":"text-orange-400";return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(_,{className:"text-js text-xl"}),e.jsx("h3",{className:"text-white text-lg font-bold",children:"Rekomendacje"})]}),e.jsx("div",{className:"space-y-3 text-sm",children:t.map((r,n)=>e.jsx("p",{className:n===0?a():"text-gray-400",children:r},n))})]})});ya.displayName="RecommendationsCard";const ga=i.memo(({questions:t,answers:s})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-dark-800/50 backdrop-blur-sm border border-js/10 rounded-2xl p-6 mb-8",children:[e.jsx("h3",{className:"text-white text-lg font-bold mb-6",children:"Szczegółowe odpowiedzi"}),e.jsx("div",{className:"space-y-4",children:t.map((a,r)=>{var d;const n=s[r],o=n==null?void 0:n.isCorrect;return e.jsx("div",{className:"border border-js/10 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${o?"bg-green-500":"bg-red-500"}`,children:o?e.jsx(ee,{className:"text-white text-xs"}):e.jsx(yt,{className:"text-white text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:a.category}),e.jsx("div",{className:"text-white font-medium mb-2",children:a.question}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`text-sm ${o?"text-green-400":"text-red-400"}`,children:["Twoja odpowiedź: ",a.options[(n==null?void 0:n.selectedAnswer)||0]]}),e.jsxs("div",{className:"text-green-400 text-sm",children:["Poprawna odpowiedź: ",a.options[(d=n==null?void 0:n.correctAnswer)!=null?d:a.correctAnswer]]}),e.jsxs("div",{className:"text-gray-300 text-sm bg-dark-700/50 p-3 rounded-lg",children:[e.jsx("strong",{children:"Wyjaśnienie:"})," ",(n==null?void 0:n.explanation)||a.explanation]})]})]})]})},a.id)})})]}));ga.displayName="DetailedAnswers";const ba=i.memo(({onRestart:t})=>e.jsx("div",{className:"flex gap-4 justify-center",children:e.jsxs(x.button,{onClick:t,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-js to-js/80 text-dark font-medium rounded-xl hover:shadow-lg hover:shadow-js/20 transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(gt,{}),"Rozpocznij ponownie"]})}));ba.displayName="ResultsActions";const fa=i.memo(({questions:t,answers:s,onRestart:a,onBack:r,totalTime:n=0})=>{const{stats:o,performance:d,formatTime:c,getRecommendations:l}=Bo(t,s,n);return e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(ua,{onBack:r}),e.jsx(pa,{correctAnswers:o.correctAnswers,totalQuestions:o.totalQuestions,percentage:o.percentage,performance:d}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(ha,{correctAnswers:o.correctAnswers,totalQuestions:o.totalQuestions,totalTime:n,formatTime:c}),e.jsx(ja,{categoryStats:o.categoryStats}),e.jsx(ya,{recommendations:l,percentage:o.percentage})]}),e.jsx(ga,{questions:t,answers:s}),e.jsx(ba,{onRestart:a})]})})});fa.displayName="ResultsScreen";const wa=i.memo(({onBack:t})=>{const{selectedCount:s,questionOptions:a,testInfo:r,cardVariants:n,handleQuestionCountChange:o}=$o(),{testState:d,questions:c,currentQuestionIndex:l,selectedAnswer:u,answers:m,loading:h,error:p,startTest:j,selectAnswer:w,nextQuestion:g,resetTest:y,restartTest:f,goBackToSetup:z,setSelectedQuestionCount:C,getTotalTime:v}=_o(),N=()=>S(void 0,null,function*(){yield j(s)}),b=()=>{z()},L=()=>{y(),t()};return d==="inProgress"?e.jsx(xa,{questions:c,currentQuestionIndex:l,selectedAnswer:u,onAnswerSelect:w,onNext:g,onBack:b,totalQuestions:c.length}):d==="completed"?e.jsx(fa,{questions:c,answers:m,onRestart:f,onBack:b,totalTime:v()}):e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"max-w-2xl w-full space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(ra,{onBack:L})}),e.jsxs(x.div,{variants:n,initial:"hidden",animate:"visible",className:"bg-dark-700/50 border border-js/10 rounded-2xl p-8 text-center space-y-8",children:[e.jsx(ia,{}),e.jsx(na,{options:a,selectedCount:s,onSelectionChange:A=>{C(A),o(A)}}),e.jsx(oa,{details:r.details}),e.jsx(la,{questionCount:s,onStart:N,loading:h}),p&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-400 text-center",children:p})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-center text-gray-400 text-sm",children:["Tematy: ",r.topics]})]})})});wa.displayName="TheorySection";const Io=(t=50)=>S(void 0,null,function*(){try{const s=yield ue.get(`practice-tasks?limit=${t}`);if(s.error)return{data:null,error:s.error,status:s.status};if(s.data){if(s.data.success&&s.data.data)return{data:s.data.data,error:null,status:s.status};if(Array.isArray(s.data))return{data:s.data,error:null,status:s.status}}return{data:null,error:"Nieprawidłowa struktura odpowiedzi z serwera",status:s.status}}catch(s){return{data:null,error:"Błąd połączenia z serwerem",status:0}}}),Ho=t=>S(void 0,null,function*(){try{const s=yield ue.get(`practice-tasks/${t}/solution`);if(s.error)return{data:null,error:s.error,status:s.status};if(s.data){if(s.data.success&&s.data.data)return{data:s.data.data,error:null,status:s.status};if("solution"in s.data)return{data:s.data,error:null,status:s.status}}return{data:null,error:"Rozwiązanie nie zostało znalezione",status:404}}catch(s){return{data:null,error:"Błąd podczas pobierania rozwiązania",status:0}}}),Go=()=>S(void 0,null,function*(){try{const t=yield ue.get("practice-tasks/categories");if(t.error)return{data:null,error:t.error,status:t.status};if(t.data){if(t.data.success&&t.data.data)return{data:["Wszystkie",...t.data.data],error:null,status:t.status};if(Array.isArray(t.data))return{data:["Wszystkie",...t.data],error:null,status:t.status}}return{data:["Wszystkie"],error:null,status:t.status}}catch(t){return{data:["Wszystkie"],error:null,status:0}}}),Jo=()=>S(void 0,null,function*(){try{const t=yield ue.get("practice-tasks/stats");if(t.error)return{data:null,error:t.error,status:t.status};if(t.data){if(t.data.success&&t.data.data)return{data:t.data.data,error:null,status:t.status};if("totalTasks"in t.data&&"tasksByDifficulty"in t.data)return{data:t.data,error:null,status:t.status}}return{data:null,error:"Błąd podczas pobierania statystyk",status:t.status}}catch(t){return{data:null,error:"Błąd podczas pobierania statystyk",status:0}}}),Mt=t=>({id:t._id,title:t.title,description:t.description,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimatedTime,taskContent:t.taskContent,solution:t.solution||"",tips:t.tips,tags:t.tags}),Na=()=>{const[t,s]=i.useState(!1),[a,r]=i.useState(null),n=i.useCallback((l=50)=>S(void 0,null,function*(){s(!0),r(null);try{const u=yield Io(l);return u.error?(r(u.error),{data:null,error:u.error}):u.data?{data:u.data.map(Mt),error:null}:{data:null,error:"Brak danych"}}catch(u){const m="Błąd podczas ładowania zadań";return r(m),{data:null,error:m}}finally{s(!1)}}),[]),o=i.useCallback(()=>S(void 0,null,function*(){try{const l=yield Go();return l.error?(r(l.error),{data:null,error:l.error}):{data:l.data,error:null}}catch(l){const u="Błąd podczas ładowania kategorii";return r(u),{data:null,error:u}}}),[]),d=i.useCallback(()=>S(void 0,null,function*(){try{const l=yield Jo();return l.error?(r(l.error),{data:null,error:l.error}):l.data?{data:{total:l.data.totalTasks,easy:l.data.tasksByDifficulty.easy,medium:l.data.tasksByDifficulty.medium,hard:l.data.tasksByDifficulty.hard},error:null}:{data:null,error:"Brak danych statystyk"}}catch(l){const u="Błąd podczas ładowania statystyk";return r(u),{data:null,error:u}}}),[]),c=i.useCallback(l=>S(void 0,null,function*(){s(!0),r(null);try{const u=yield Ho(l);return u.error?(r(u.error),{data:null,error:u.error}):{data:u.data,error:null}}catch(u){const m="Błąd podczas ładowania rozwiązania";return r(m),{data:null,error:m}}finally{s(!1)}}),[]);return{loading:t,error:a,loadTasks:n,loadCategories:o,loadStats:d,loadSolution:c,convertApiTaskToLocal:Mt}},Wo=t=>{const[s,a]=i.useState("Wszystkie"),[r,n]=i.useState("all"),[o,d]=i.useState(""),c=i.useMemo(()=>t.filter(m=>{const h=s==="Wszystkie"||m.category===s,p=r==="all"||m.difficulty===r,j=m.title.toLowerCase().includes(o.toLowerCase())||m.description.toLowerCase().includes(o.toLowerCase())||m.tags.some(w=>w.toLowerCase().includes(o.toLowerCase()));return h&&p&&j}),[t,s,r,o]);return{selectedCategory:s,selectedDifficulty:r,searchQuery:o,filteredTasks:c,setSelectedCategory:a,setSelectedDifficulty:n,setSearchQuery:d,resetFilters:()=>{a("Wszystkie"),n("all"),d("")},getActiveFiltersCount:()=>{let m=0;return s!=="Wszystkie"&&m++,r!=="all"&&m++,o.trim()!==""&&m++,m}}},Uo=()=>{const[t,s]=i.useState(null),[a,r]=i.useState(!1),[n,o]=i.useState(!1),{loadSolution:d}=Na(),c=i.useCallback(h=>{s(h),r(!1)},[]),l=i.useCallback(()=>{s(null),r(!1)},[]),u=i.useCallback(()=>S(void 0,null,function*(){if(t){if(!a&&(!t.solution||t.solution==="")){o(!0);try{const h=yield d(t.id);h.data&&h.data.solution&&s(p=>p?T(k({},p),{solution:h.data.solution}):null)}catch(h){console.error("Błąd podczas ładowania rozwiązania:",h)}finally{o(!1)}}r(h=>!h)}}),[t,a,d]),m=i.useCallback(()=>{s(null),r(!1),o(!1)},[]);return{selectedTask:t,showSolution:a,solutionLoading:n,handleTaskSelect:c,handleBackToList:l,handleShowSolution:u,resetTask:m}},Qo=()=>{const[t,s]=i.useState([]),[a,r]=i.useState(["Wszystkie"]),[n,o]=i.useState({total:0,easy:0,medium:0,hard:0}),{loading:d,error:c,loadTasks:l,loadCategories:u,loadStats:m}=Na(),h=Wo(t),p=Uo();return i.useEffect(()=>{S(void 0,null,function*(){try{const[w,g,y]=yield Promise.all([l(50),u(),m()]);w.data&&s(w.data),g.data&&r(["Wszystkie",...g.data]),y.data&&o(y.data)}catch(w){console.error("Błąd podczas ładowania danych:",w)}})},[l,u,m]),{tasks:h.filteredTasks,categories:a,stats:n,loading:d,error:c,selectedCategory:h.selectedCategory,selectedDifficulty:h.selectedDifficulty,searchQuery:h.searchQuery,setSelectedCategory:h.setSelectedCategory,setSelectedDifficulty:h.setSelectedDifficulty,setSearchQuery:h.setSearchQuery,resetFilters:h.resetFilters,getActiveFiltersCount:h.getActiveFiltersCount,selectedTask:p.selectedTask,showSolution:p.showSolution,solutionLoading:p.solutionLoading,handleTaskSelect:p.handleTaskSelect,handleBackToList:p.handleBackToList,handleShowSolution:p.handleShowSolution,resetTask:p.resetTask}},qo={easy:"Łatwe",medium:"Średnie",hard:"Trudne"},Zo=({task:t})=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:t.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${t.difficulty==="easy"?"bg-green-500/10 text-green-400 border-green-500/20":t.difficulty==="medium"?"bg-js/10 text-js border-js/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:qo[t.difficulty]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.estimatedTime," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:t.category})]})]}),e.jsx("p",{className:"text-gray-300 text-lg",children:t.description})]}),Ko=({task:t})=>e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-js"}),"Zadanie"]}),e.jsx("div",{className:"bg-dark-700/30 border border-gray-600 rounded-lg",children:e.jsx(bt,{language:"javascript",style:Xt,customStyle:{background:"transparent",padding:"1rem",fontSize:"0.875rem",borderRadius:"0.5rem"},children:t.taskContent})})]}),Vo=({task:t})=>t.tips.length===0?null:e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-js"}),"Wskazówki"]}),e.jsx("ul",{className:"space-y-2",children:t.tips.map((s,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-300",children:[e.jsx("span",{className:"text-js mt-1",children:"•"}),e.jsx("span",{children:s})]},a))})]}),Xo=({task:t,showSolution:s,copied:a,onShowSolution:r,onCopySolution:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"flex items-center gap-2 bg-js hover:bg-js/80 text-dark px-6 py-3 rounded-lg font-medium transition-colors",children:[s?e.jsx(Zi,{className:"w-4 h-4"}):e.jsx(Ki,{className:"w-4 h-4"}),s?"Ukryj rozwiązanie":"Pokaż rozwiązanie"]}),s&&e.jsxs(x.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${a?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:[a?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(Yt,{className:"w-4 h-4"}),a?"Skopiowane!":"Kopiuj kod"]})]}),s&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-700/50 border border-green-500/20 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-green-400"}),"Rozwiązanie"]}),e.jsx("div",{className:"bg-dark-700/30 border border-gray-600 rounded-lg",children:e.jsx(bt,{language:"javascript",style:Xt,customStyle:{background:"transparent",padding:"1rem",fontSize:"0.875rem",borderRadius:"0.5rem"},children:t.solution})})]})]}),Yo=({task:t})=>t.tags.length===0?null:e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:t.tags.map((s,a)=>e.jsx("span",{className:"px-3 py-1 bg-dark-700/30 border border-gray-600 text-gray-300 rounded-full text-sm",children:s},a))}),el=({task:t,showSolution:s,onBack:a,onShowSolution:r})=>{const[n,o]=i.useState(!1),d=()=>S(void 0,null,function*(){try{yield navigator.clipboard.writeText(t.solution),o(!0),setTimeout(()=>o(!1),2e3)}catch(c){console.error("Nie udało się skopiować tekstu: ",c)}});return e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-dark backdrop-blur-sm z-50 overflow-y-auto",children:e.jsxs("div",{className:"min-h-screen p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Powrót do listy zadań"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(Zo,{task:t}),e.jsx(Ko,{task:t}),e.jsx(Vo,{task:t}),e.jsx(Xo,{task:t,showSolution:s,copied:n,onShowSolution:r,onCopySolution:d}),e.jsx(Yo,{task:t})]})]})})},tl={easy:"Łatwe",medium:"Średnie",hard:"Trudne"},sl=({task:t,index:s,onSelect:a})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(t),className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 cursor-pointer hover:border-js/20 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white pr-4 group-hover:text-js transition-colors",children:t.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${t.difficulty==="easy"?"bg-green-500/10 text-green-400 border-green-500/20":t.difficulty==="medium"?"bg-js/10 text-js border-js/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:tl[t.difficulty]})]}),e.jsx("p",{className:"text-gray-300 mb-4 line-clamp-3",children:t.description}),e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.estimatedTime," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:t.category})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags.slice(0,3).map((r,n)=>e.jsx("span",{className:"px-2 py-1 bg-dark-700/30 border border-js text-white rounded text-xs",children:r},n)),t.tags.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-dark-700/30 border border-js text-white rounded text-xs",children:["+",t.tags.length-3]})]})]}),al=({stats:t})=>e.jsxs("div",{className:"flex justify-center gap-8 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.total}),e.jsx("div",{className:"text-sm text-gray-400",children:"Wszystkich zadań"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.easy}),e.jsx("div",{className:"text-sm text-gray-400",children:"Łatwych"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-js",children:t.medium}),e.jsx("div",{className:"text-sm text-gray-400",children:"Średnich"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.hard}),e.jsx("div",{className:"text-sm text-gray-400",children:"Trudnych"})]})]}),rl=({categories:t,selectedCategory:s,selectedDifficulty:a,searchQuery:r,onCategoryChange:n,onDifficultyChange:o,onSearchQueryChange:d,onResetFilters:c})=>e.jsxs("div",{className:"bg-dark-700/50 border border-js/10 rounded-xl p-6 space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(Vi,{className:"w-4 h-4 text-js"}),"Filtry"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Szukaj zadań...",value:r,onChange:l=>d(l.target.value),className:"w-full pl-10 pr-4 py-2 bg-dark border border-js rounded-lg text-white placeholder-white focus:outline-none focus:border-js/50"})]}),e.jsx("select",{value:s,onChange:l=>n(l.target.value),className:"px-4 py-2 bg-dark-700/30 border border-js rounded-lg text-white focus:outline-none focus:border-js/50",style:{backgroundColor:"#1b1a1b",color:"white"},children:t.map(l=>e.jsx("option",{value:l,style:{backgroundColor:"#1b1a1b",color:"white"},children:l},l))}),e.jsxs("select",{value:a,onChange:l=>o(l.target.value),className:"px-4 py-2 bg-dark-700/30 border border-js rounded-lg text-white focus:outline-none focus:border-js/50",style:{backgroundColor:"#1b1a1b",color:"white"},children:[e.jsx("option",{value:"all",style:{backgroundColor:"#1b1a1b",color:"white"},children:"Wszystkie poziomy"}),e.jsx("option",{value:"easy",style:{backgroundColor:"#1b1a1b",color:"white"},children:"Łatwe"}),e.jsx("option",{value:"medium",style:{backgroundColor:"#1b1a1b",color:"white"},children:"Średnie"}),e.jsx("option",{value:"hard",style:{backgroundColor:"#1b1a1b",color:"white"},children:"Trudne"})]})]}),e.jsx("button",{onClick:c,className:"text-js hover:text-js/80 text-sm transition-colors",children:"Resetuj filtry"})]}),il=({onResetFilters:t})=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-4",children:"Nie znaleziono zadań"}),e.jsx("button",{onClick:t,className:"text-js hover:text-js/80 transition-colors",children:"Resetuj filtry"})]}),va=({onBack:t})=>{const{tasks:s,categories:a,stats:r,selectedTask:n,showSolution:o,selectedCategory:d,selectedDifficulty:c,searchQuery:l,loading:u,error:m,setSelectedCategory:h,setSelectedDifficulty:p,setSearchQuery:j,handleTaskSelect:w,handleBackToList:g,handleShowSolution:y,resetFilters:f}=Qo();return n?e.jsx(el,{task:n,showSolution:o,onBack:g,onShowSolution:y}):u?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-300",children:"Ładowanie zadań..."})]})}):m?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-red-400 text-xl",children:"⚠️"}),e.jsx("p",{className:"text-red-400",children:m}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Spróbuj ponownie"})]})}):e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Powrót"})]})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Zadania Praktyczne"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Rozwiąż praktyczne zadania programistyczne, które często pojawiają się na rozmowach kwalifikacyjnych."}),e.jsx(al,{stats:r})]}),e.jsx(rl,{categories:a,selectedCategory:d,selectedDifficulty:c,searchQuery:l,onCategoryChange:h,onDifficultyChange:z=>p(z),onSearchQueryChange:j,onResetFilters:f}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map((z,C)=>e.jsx(sl,{task:z,index:C,onSelect:w},z.id))}),s.length===0&&e.jsx(il,{onResetFilters:f})]})};va.displayName="PracticeSection";const ka=i.memo(({onBack:t})=>{const[s,a]=i.useState("main"),{interviewBlocks:r,interviewTips:n,containerVariants:o,itemVariants:d}=Co(),c=u=>{u==="theory"?a("theory"):u==="practice"&&a("practice")},l=()=>{a("main")};return s==="theory"?e.jsx(wa,{onBack:l}):s==="practice"?e.jsx(va,{onBack:l}):e.jsxs(x.div,{variants:o,initial:"hidden",animate:"visible",className:"space-y-8",children:[e.jsx(ta,{onBack:t}),e.jsx(x.div,{variants:o,className:"grid md:grid-cols-2 gap-6",children:r.map(u=>e.jsx(sa,{block:u,variants:d,onClick:()=>c(u.id)},u.id))}),e.jsx(aa,{tips:n,variants:d})]})});ka.displayName="TechnicalInterviewSection";const za=i.memo(()=>{const[t,s]=i.useState("main"),{recruitmentSections:a,stats:r,containerVariants:n,itemVariants:o}=zo(),d=l=>{l==="technical-interview"?s("technical-interview"):l==="cv-preparation"&&s("cv-preparation")},c=()=>{s("main")};return t==="technical-interview"?e.jsx(ka,{onBack:c}):e.jsxs(x.div,{variants:n,initial:"hidden",animate:"visible",className:"space-y-8",children:[e.jsx(Xs,{}),e.jsx(x.div,{variants:n,className:"grid md:grid-cols-2 gap-6",children:a.map(l=>e.jsx(Ys,{section:l,variants:o,onClick:()=>d(l.id)},l.id))}),e.jsx(ea,{stats:r,variants:o})]})});za.displayName="Recruitment";const Sa=()=>{const[t,s]=i.useState(()=>localStorage.getItem("token")||sessionStorage.getItem("token")),r=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}").id;return i.useEffect(()=>{const n=()=>{s(localStorage.getItem("token")||sessionStorage.getItem("token"))};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[]),{token:t,isAuthenticated:!!t,userId:r}},Ta=i.memo(()=>{const[t,s]=qt(),{isAuthenticated:a}=Sa(),r=t.get("tab")||"paths",n=d=>{s(c=>(d==="paths"?(c.delete("tab"),c.delete("filter")):c.set("tab",d),c))},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return a?e.jsxs(x.div,{variants:o,initial:"hidden",animate:"visible",className:"min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(re,{children:[e.jsx("title",{children:"Nauka | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Nauka JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(fn,{title:"Nauka JavaScript",subtitle:"Wybierz swoją ścieżkę nauki i rozpocznij przygodę z JS",className:"mb-8",titleClassName:"text-js drop-shadow-lg",subtitleClassName:"text-gray-400"}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6",children:[e.jsx(Vs,{activeTab:r,onTabChange:n}),e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,type:"spring",stiffness:200,damping:20},className:"mt-8",children:[r==="paths"&&e.jsx(Ks,{}),r==="lessons"&&e.jsx(Is,{}),r==="resources"&&e.jsx(Gs,{}),r==="recruitment"&&e.jsx(za,{})]},r)]})]})]}):e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(G,{})})});Ta.displayName="LearnSection";const dd=Object.freeze(Object.defineProperty({__proto__:null,LearnSection:Ta},Symbol.toStringTag,{value:"Module"})),nl=(t,s,a,r)=>S(void 0,null,function*(){const n=yield fetch(`${$}users/${t}/lessons/${s}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(a)});if(!n.ok)throw new Error("Błąd podczas aktualizacji postępu");return n.json()}),ol=t=>{const{userId:s,token:a}=Sa(),r=ge(),{refetch:n}=Js(),[o,d]=i.useState(0),{data:c,isLoading:l,error:u,refetch:m}=Q({queryKey:["lesson",t],queryFn:()=>xo(t,a),enabled:!!t,retry:!1}),h=(u==null?void 0:u.message)==="lesson_not_found",p=oe({mutationFn:uo,onSuccess:()=>{r.invalidateQueries({queryKey:["userProgress"]}),r.invalidateQueries({queryKey:["lessons"]}),r.invalidateQueries({queryKey:["lesson",t]}),n()}}),j=oe({mutationFn:z=>nl(s,t,z,a),onSuccess:()=>{r.invalidateQueries({queryKey:["userProgress"]})}}),w=z=>{d(z)},g=z=>S(void 0,null,function*(){!s||!t||(yield j.mutateAsync({completedSections:[...(c==null?void 0:c.completedSections)||[],z],isCompleted:!1,points:0}))}),y=z=>S(void 0,null,function*(){!s||!t||(yield j.mutateAsync({completedSections:(c==null?void 0:c.completedSections)||[],isCompleted:!1,points:z}))}),f=()=>S(void 0,null,function*(){if(!t||!c)return console.error("Brak wymaganych danych:",{lessonSlug:t,lesson:c}),Promise.reject(new Error("Brak wymaganych danych"));try{const z=yield p.mutateAsync({lessonId:c.id,pathId:c.pathId,token:a});return yield m(),yield n(),P.success("Lekcja ukończona!",{duration:3e3,position:"bottom-right"}),z}catch(z){throw console.error("Błąd podczas kończenia lekcji:",z),P.error("Nie udało się ukończyć lekcji. Spróbuj ponownie.",{duration:4e3,position:"bottom-right"}),z}});return{lesson:c,isLoading:l,error:u,isNotFound:h,activeSection:o,progress:c==null?void 0:c.progress,refetch:m,handleSectionChange:w,handleSectionComplete:g,handleQuizComplete:y,handleLessonComplete:f,completeLessonMutation:p}},$e=i.memo(({children:t})=>e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t})}));$e.displayName="LessonLayout";const Ca=i.memo(()=>e.jsxs(Ae,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors mb-6",children:[e.jsx(es,{className:"w-4 h-4"}),"Wróć do listy lekcji"]}));Ca.displayName="BackToLessons";const Ye={BEGINNER:"beginner",INTERMEDIATE:"intermediate",ADVANCED:"advanced"},ll={[Ye.BEGINNER]:"bg-green-500/10 text-green-400",[Ye.INTERMEDIATE]:"bg-yellow-500/10 text-yellow-400",[Ye.ADVANCED]:"bg-red-500/10 text-red-400"},La=i.memo(({difficulty:t})=>e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${ll[t]}`,children:t==="beginner"?"Podstawowy":t==="intermediate"?"Średni":"Zaawansowany"}));La.displayName="DifficultyBadge";const Pa=i.memo(({xp:t})=>e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2.5 py-1 rounded-lg text-sm",children:[e.jsx(_,{className:"w-4 h-4"}),t," XP"]}));Pa.displayName="XpBadge";const cl=i.memo(({title:t,duration:s,difficulty:a,xp:r})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(La,{difficulty:a}),e.jsx(Pa,{xp:r})]}),e.jsx("h1",{className:"text-3xl font-bold text-js mb-4",children:t}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),s," min"]})})]})),dl=t=>t?t.replace(/<!--[\s\S]*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"nodata:").replace(/eval\s*\(/gi,"").replace(/new\s+Function\s*\(/gi,""):"",ml=bt,Aa=i.memo(({code:t,language:s,showLineNumbers:a=!0,className:r})=>{const n=dl(t),o=()=>{navigator.clipboard.writeText(n)};return e.jsxs("div",{className:`relative group ${r}`,children:[e.jsx("button",{onClick:o,className:`absolute right-2 top-2 p-2 rounded-lg bg-dark/50 text-gray-400 \r
          opacity-0 group-hover:opacity-100 transition-opacity hover:text-js`,title:"Kopiuj kod",children:e.jsx(Yt,{className:"w-4 h-4"})}),e.jsx(ml,{language:s,style:Xi,showLineNumbers:a,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.5rem",background:"transparent"},codeTagProps:{style:{fontFamily:"JetBrains Mono, monospace"}},children:n})]})});Aa.displayName="CodeBlock";const xl=i.memo(({example:t,index:s})=>t.code?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-200",children:["Przykład ",s+1,":"]}),e.jsx(Aa,{code:t.code,language:t.language||"javascript",showLineNumbers:!0,className:"rounded-lg border border-js/10"}),t.explanation&&e.jsx("p",{className:"text-gray-400 text-sm",children:t.explanation})]}):e.jsx("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-js/10",children:e.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Ten przykład nie zawiera jeszcze kodu."})})),Ea=i.memo(({section:t,index:s})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-js",children:[s+1,". ",t.title]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:t.content}),e.jsx("div",{className:"space-y-8 mt-8",children:t.examples&&t.examples.length>0&&e.jsx("div",{className:"space-y-8 mt-8",children:t.examples.map((a,r)=>e.jsx(xl,{example:a,index:r},r))})})]}));Ea.displayName="LessonSection";const et={perfect:{icon:Z,label:"Perfekcyjnie!",color:"text-yellow-500"},excellent:{icon:Ut,label:"Świetnie!",color:"text-js"},good:{icon:_,label:"Mogło być lepiej!",color:"text-blue-500"}},ul=t=>t===100?et.perfect:t>=80?et.excellent:et.good,$a=i.memo(({correctAnswers:t,totalQuestions:s})=>{const a=t/s*100,r=ul(a),n=r.icon;return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:`w-12 h-12 ${r.color}`}),e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},className:"absolute -right-2 -bottom-2",children:e.jsx(_,{className:"w-6 h-6 text-yellow-500 animate-pulse"})})]})}),e.jsx("h3",{className:`text-xl font-bold ${r.color} mb-2`,children:r.label}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Poprawne odpowiedzi: ",t," z ",s]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x.div,{initial:{width:0},animate:{width:"100%"},className:"h-2 bg-dark rounded-full overflow-hidden mx-auto",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:`h-full ${a===100?"bg-yellow-500":"bg-js"}`,transition:{delay:.5,duration:.8}})}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Math.round(a),"% poprawnych odpowiedzi"]})]})]})}),Ra=i.memo(({questions:t,onComplete:s})=>{const[a,r]=i.useState(0),[n,o]=i.useState(null),[d,c]=i.useState(0),[l,u]=i.useState(!1),[m,h]=i.useState(!1),p=100,j=a/t.length*100,w=y=>{o(y),h(!0),y===t[a].correctAnswer&&c(f=>f+1)},g=()=>{a<t.length-1?(r(y=>y+1),o(null),h(!1)):(s(d,t.length),u(!0))};return l?e.jsx($a,{correctAnswers:d,totalQuestions:t.length,earnedXP:Math.round(d/t.length*p)}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Pytanie ",a+1," z ",t.length]}),e.jsx("span",{className:"text-js",children:"•"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(j),"% ukończone"]})]}),m&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg text-gray-400 text-sm",children:t[a].explanation}),n!==null&&e.jsx(x.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"w-full py-3 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:a<t.length-1?"Następne pytanie":"Zakończ quiz"}),e.jsx("div",{className:"text-lg font-medium text-gray-200",children:t[a].question}),e.jsx("div",{className:"space-y-3",children:t[a].options.map((y,f)=>e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:n!==null,onClick:()=>w(f),className:`w-full p-4 rounded-lg border text-left transition-colors
              ${n===null?"border-js/10 hover:border-js/20":f===t[a].correctAnswer?"border-green-500 bg-green-500/10 text-green-400":n===f?"border-red-500 bg-red-500/10 text-red-400":"border-js/10 opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:y}),n!==null&&(f===t[a].correctAnswer?e.jsx(ee,{className:"w-4 h-4 text-green-400"}):n===f?e.jsx(yt,{className:"w-4 h-4 text-red-400"}):null)]})},f))})]})});Ra.displayName="LessonQuiz";$a.displayName="QuizSummary";const Fa=i.memo(({lesson:t,onQuizComplete:s})=>{if(!t)return null;if(!t.content)return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8 text-center",children:[e.jsx("h2",{className:"text-xl text-js mb-4",children:"Brak treści lekcji"}),e.jsx("p",{className:"text-gray-400",children:"Treść lekcji jest niedostępna. Spróbuj ponownie później."})]})});const{sections:a=[]}=t.content;return e.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:e.jsx(x.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(cl,{title:t.title,duration:String(t.duration),difficulty:t.difficulty,xp:t.points}),e.jsxs("div",{className:"space-y-8",children:[a.map((r,n)=>e.jsx(Ea,{section:r,index:n},n)),t.content.quiz&&e.jsx(Ra,{questions:t.content.quiz,onComplete:s})]})]})})})});Fa.displayName="LessonMainContent";const Da=i.memo(({isCompleted:t,onComplete:s})=>{const[a,r]=i.useState(0),[n,o]=i.useState(!1),d=wn(0),c=ye();i.useEffect(()=>{const m=document.querySelector(".lesson-content");if(!m)return;const h=()=>{const{scrollTop:p,scrollHeight:j,clientHeight:w}=m,g=p/(j-w)*100;r(Math.min(g,100)),d.set(Math.min(g,100))};return m.addEventListener("scroll",h),h(),()=>m.removeEventListener("scroll",h)},[d]);const l=a>=98&&!t,u=()=>S(void 0,null,function*(){if(!l||n){console.log("Nie można ukończyć lekcji:",{isLessonCompleted:l,isSubmitting:n});return}try{o(!0),yield s(),c("/dashboard/learn?tab=lessons")}catch(m){}finally{o(!1)}});return e.jsx("div",{className:"mb-5 fixed bottom-0 left-0 right-0 bg-dark-800/95 border-t border-js/10 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 mr-8",children:[e.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:e.jsx(x.div,{style:{width:`${a}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),e.jsx("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:e.jsxs("span",{children:[Math.round(a),"% przeczytane"]})})]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:!l||n,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors
            ${l&&!n?"bg-js/10 text-js hover:bg-js/20":"bg-gray-800/50 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(ee,{className:"w-4 h-4"}),n?"Zapisywanie...":l?"Zakończ lekcję":"Przeczytaj całą lekcję"]})]})})});Da.displayName="LessonProgress";const Oa=i.memo(({lesson:t,activeSection:s,progress:a,onSectionComplete:r,onQuizComplete:n,onLessonComplete:o})=>{if(!t)return null;const c=(t.sections||[]).length;return e.jsx(e.Fragment,{children:e.jsxs($e,{children:[e.jsx(Ca,{}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(Fa,{lesson:t,onSectionComplete:r,onQuizComplete:n})}),e.jsx(Da,{currentSection:s,totalSections:c,progress:a,isCompleted:t.isCompleted||!1,onComplete:o})]})})});Oa.displayName="LessonContent";const lt=i.memo(()=>e.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4",children:"Lekcja nie została znaleziona"}),e.jsxs(Ae,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors",children:[e.jsx(es,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})]})})}));lt.displayName="LessonNotFound";const _a=()=>{var j;const{lessonSlug:t}=ft(),{stats:s,isLoading:a}=Ct();if(!t)return e.jsx(ts,{to:"/dashboard/learn",replace:!0});const{lesson:r,isLoading:n,error:o,isNotFound:d,activeSection:c,progress:l,handleSectionComplete:u,handleQuizComplete:m,handleLessonComplete:h}=ol(t);if(n||a)return e.jsx(hl,{});if(d)return e.jsx(lt,{});if(o)return e.jsx(jl,{onRetry:()=>window.location.reload()});if(!r)return e.jsx(lt,{});const p=((j=s==null?void 0:s.data)==null?void 0:j.progress.level)||0;return r.requiredLevel&&p<r.requiredLevel?e.jsx(pl,{requiredLevel:r.requiredLevel,userLevel:p}):e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsxs("title",{children:[r.title," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:r.description})]}),e.jsx(Oa,{lesson:r,activeSection:c,progress:typeof l=="number"?l:0,onSectionComplete:u,onQuizComplete:m,onLessonComplete:h})]})},pl=({requiredLevel:t,userLevel:s})=>e.jsx($e,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:e.jsxs("div",{className:"bg-dark-800/50 p-8 rounded-xl border border-js/10 max-w-md",children:[e.jsx("div",{className:"mb-4 bg-js/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto",children:e.jsx(ae,{className:"text-js text-2xl"})}),e.jsx("h2",{className:"text-xl font-bold text-js mb-2",children:"Lekcja zablokowana"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Aby odblokować tę lekcję, musisz osiągnąć poziom ",t,"."]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Twój obecny poziom: ",e.jsx("span",{className:"text-js font-medium",children:s})]}),e.jsx("button",{onClick:()=>window.location.href="/dashboard/learn",className:"mt-4 px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors w-full",children:"Wróć do listy lekcji"})]})})}),hl=()=>e.jsx($e,{children:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(G,{})})}),jl=({onRetry:t})=>e.jsx($e,{children:e.jsx(Ue,{message:"Nie udało się pobrać lekcji. Spróbuj ponownie później.",onRetry:t})});_a.displayName="LessonPage";const md=Object.freeze(Object.defineProperty({__proto__:null,LessonPage:_a},Symbol.toStringTag,{value:"Module"})),yl=[{id:"profile",label:"Profil",icon:ss},{id:"security",label:"Bezpieczeństwo",icon:ae},{id:"preferences",label:"Preferencje",icon:Gt},{id:"delete",label:"Usuń konto",icon:wt}],Fe={container:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 h-fit shadow-lg",nav:"flex flex-col gap-2",button:t=>`
    flex items-center gap-3 p-3 rounded-lg text-left
    transition-colors duration-200
    ${t?"bg-js/20 text-js":"text-gray-400 hover:text-js hover:bg-js/10"}
  `,icon:"w-5 h-5"},Ma=i.memo(({activeView:t,onViewChange:s})=>{const a=i.useCallback(r=>{s(r)},[s]);return e.jsx("div",{className:Fe.container,children:e.jsx("nav",{className:Fe.nav,children:yl.map(r=>e.jsxs(x.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:()=>a(r.id),className:Fe.button(t===r.id),children:[e.jsx(r.icon,{className:Fe.icon}),r.label]},r.id))})})});Ma.displayName="SettingsSidebar";const Ba=t=>({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}),gl=t=>S(void 0,null,function*(){var o;const s=yield fetch(`${$}settings/profile`,{headers:Ba(t)});if(!s.ok)throw new Error("Błąd podczas pobierania profilu");const a=yield s.json(),r=a.data||a,n=r.user||r;return{username:n.username||"",email:n.email||"",profile:{bio:n.bio||((o=r.profile)==null?void 0:o.bio)||""}}}),bl=(t,s)=>S(void 0,null,function*(){var n;const a={username:t.username,email:t.email,bio:((n=t.profile)==null?void 0:n.bio)||""},r=yield fetch(`${$}settings/profile`,{method:"PUT",headers:Ba(s),body:JSON.stringify(a)});if(!r.ok){const o=yield r.json().catch(()=>({}));throw new Error(o.message||"Błąd podczas aktualizacji profilu")}return r.json()}),Me=["profile"],Ia=()=>{var d;const t=ge(),{token:s}=O(),{data:a,isLoading:r,error:n}=Q({queryKey:Me,queryFn:()=>gl(s||""),enabled:!!s,staleTime:1e3*60*5}),o=oe({mutationFn:c=>bl(c,s||""),onSuccess:c=>{t.setQueryData(Me,c),t.invalidateQueries({queryKey:Me})}});return{profile:a,username:(a==null?void 0:a.username)||"",email:(a==null?void 0:a.email)||"",bio:((d=a==null?void 0:a.profile)==null?void 0:d.bio)||"",isLoading:r,error:n,updateProfile:o}},fl=M.object({username:M.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika może mieć maksymalnie 20 znaków"),email:M.string().email("Nieprawidłowy adres email"),profile:M.object({bio:M.string().max(160,"Bio może mieć maksymalnie 160 znaków").optional(),avatar:M.string().optional()})}),wl=({onSubmit:t,defaultValues:s})=>{var n,o;const a=Je({resolver:We(fl),defaultValues:{username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",profile:{bio:((n=s==null?void 0:s.profile)==null?void 0:n.bio)||"",avatar:((o=s==null?void 0:s.profile)==null?void 0:o.avatar)||""}}}),r=d=>S(void 0,null,function*(){try{yield t(d)}catch(c){console.error("Failed to update profile:",c)}});return{form:a,onSubmit:a.handleSubmit(r)}},Nl=t=>{var d;const{updateProfile:s}=Ia(),a=i.useCallback(c=>S(void 0,null,function*(){var l;try{yield s.mutateAsync({username:c.username,email:c.email,profile:{bio:((l=c.profile)==null?void 0:l.bio)||""}})}catch(u){throw console.error("Błąd w useProfileFormLogic:",u),u}}),[s]),r={username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",profile:{bio:((d=t==null?void 0:t.profile)==null?void 0:d.bio)||""}},{form:n,onSubmit:o}=wl({onSubmit:a,defaultValues:r});return{form:n,onSubmit:o}},he={form:`w-full max-w-2xl sm:ml-0 sm:mr-auto 
    space-y-8 px-4 sm:px-0`,usernameContainer:"flex flex-col gap-4",container:`bg-dark/30 backdrop-blur-sm rounded-xl 
    p-4 sm:p-6 md:p-8 border border-js/10 
    space-y-6 md:space-y-8`,header:"flex flex-col md:flex-row gap-6 md:gap-8",infoSection:"w-full md:w-2/3 space-y-6",bioSection:"space-y-4",bioLabel:`block text-gray-400 
    text-sm sm:text-base 
    font-medium`,bioTextarea:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-sm sm:text-base 
    min-h-[120px] max-h-[240px] 
    resize-y
    transition-colors duration-200`,error:"text-red-500 text-sm mt-1",successMessage:"text-green-500 mt-2 text-sm font-medium"},Ha=i.memo(({register:t,errors:s})=>{var a,r;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:he.usernameContainer,children:e.jsx(je,k({type:"text",label:"Nazwa użytkownika",placeholder:"Wprowadź nazwę użytkownika",icon:e.jsx(ss,{}),error:(a=s.username)==null?void 0:a.message},t("username")))}),e.jsx(je,k({type:"email",label:"Email",placeholder:"Wprowadź adres email",icon:e.jsx(Yi,{}),error:(r=s.email)==null?void 0:r.message},t("email")))]})});Ha.displayName="UserInfoFields";const De={container:"space-y-2",label:"block text-gray-400 text-sm",textarea:`w-full h-32 px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    resize-none`,error:"text-red-500 text-sm"},Ga=i.memo(({register:t,errors:s,defaultValue:a})=>{var r;return e.jsxs("div",{className:De.container,children:[e.jsx("label",{className:De.label,children:"Bio"}),e.jsx("textarea",T(k({},t("profile.bio")),{className:De.textarea,placeholder:a||"Napisz coś o sobie..."})),((r=s.profile)==null?void 0:r.bio)&&e.jsx("span",{className:De.error,children:s.profile.bio.message})]})});Ga.displayName="BioField";const tt={container:`flex flex-col-reverse sm:flex-row justify-end gap-3 sm:gap-4
    w-full sm:w-auto mt-6 sm:mt-8`,cancelButton:`w-full sm:w-auto order-1 sm:order-none
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10 hover:border-js/30 hover:bg-dark/60
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
  `,submitButton:`w-full sm:w-auto
    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg
    bg-js text-dark
    hover:bg-js/90
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-colors duration-200
    text-sm sm:text-base font-medium
    flex items-center justify-center
  `},Qe=i.memo(({onCancel:t,isSubmitting:s,submitText:a="Zapisz zmiany",loadingText:r="Zapisywanie",disabled:n=!1})=>e.jsxs("div",{className:tt.container,children:[e.jsx(Ce,{type:"button",onClick:t,className:tt.cancelButton,disabled:s,children:"Anuluj zmiany"}),e.jsx(Ce,{type:"submit",disabled:s||n,className:tt.submitButton,children:s?e.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-[100px]",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:r})]}):e.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:a})})]}));Qe.displayName="FormButtons";const Ja=i.memo(({handleCancel:t,register:s,errors:a,defaultBio:r,isSubmitting:n,isPending:o,onSubmit:d,isSaved:c=!1,isDirty:l=!1})=>e.jsxs(x.form,{onSubmit:d,className:he.form,initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:he.container,children:e.jsxs("div",{className:he.header,children:[e.jsxs("div",{className:he.infoSection,children:[e.jsx(Ha,{register:s,errors:a}),e.jsx(Ga,{register:s,errors:a,defaultValue:r})]}),c&&!l&&e.jsx("div",{className:he.successMessage,children:"✓ Zapisano zmiany"})]})}),e.jsx(Qe,{onCancel:t,isSubmitting:n||o,submitText:"Zapisz profil",loadingText:"Zapisywanie",disabled:!l||n})]}));Ja.displayName="ProfileFormContent";const Wa=i.memo(()=>{const{profile:t,username:s,email:a,bio:r,isLoading:n,updateProfile:o}=Ia(),{form:d,onSubmit:c}=Nl(t||null),l=ge(),[u,m]=i.useState(!1),[h,p]=i.useState(!1),{register:j,formState:{errors:w,isDirty:g},reset:y,setValue:f,watch:z}=d,C=z();i.useEffect(()=>{g&&p(!1)},[C,g]),i.useEffect(()=>{t&&(f("username",s),f("email",a),f("profile.bio",r))},[t,f,s,a,r]);const v=i.useCallback(()=>{try{t&&(y(t),P.success("Zmiany zostały anulowane"),p(!1))}catch(b){P.error("Nie udało się anulować zmian")}},[t,y]),N=b=>S(void 0,null,function*(){if(!g){P.success("Nie wprowadzono żadnych zmian");return}try{m(!0),yield c(b),yield l.invalidateQueries({queryKey:Me}),p(!0),P.success("Profil został zaktualizowany pomyślnie")}catch(L){L instanceof Error?P.error(L.message||"Wystąpił błąd podczas aktualizacji profilu"):P.error("Wystąpił nieznany błąd podczas aktualizacji profilu")}finally{m(!1)}});return n?e.jsx(G,{}):e.jsxs(e.Fragment,{children:[h&&!g&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-2 rounded-lg mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Twój profil został zaktualizowany pomyślnie"]}),e.jsx(Ja,{handleCancel:v,register:j,errors:w,defaultBio:r,isSubmitting:u||o.isPending,isPending:o.isPending,onSubmit:N,isSaved:h,isDirty:g})]})});Wa.displayName="ProfileForm";const Ua=i.memo(({form:t,errors:s})=>{var r,n,o;const{register:a}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(je,k({type:"password",label:"Aktualne hasło",placeholder:"Wprowadź aktualne hasło",icon:e.jsx(ae,{}),error:(r=s.currentPassword)==null?void 0:r.message},a("currentPassword"))),e.jsx(je,k({type:"password",label:"Nowe hasło",placeholder:"Wprowadź nowe hasło",icon:e.jsx(ae,{}),error:(n=s.newPassword)==null?void 0:n.message},a("newPassword"))),e.jsx(je,k({type:"password",label:"Powtórz nowe hasło",placeholder:"Powtórz nowe hasło",icon:e.jsx(ae,{}),error:(o=s.confirmPassword)==null?void 0:o.message},a("confirmPassword")))]})});Ua.displayName="PasswordFields";const vl=M.object({currentPassword:M.string().min(1,"Aktualne hasło jest wymagane").min(8,"Hasło musi mieć minimum 8 znaków"),newPassword:M.string().min(1,"Nowe hasło jest wymagane").min(8,"Nowe hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać wielką literę").regex(/[0-9]/,"Hasło musi zawierać cyfrę"),confirmPassword:M.string().min(1,"Potwierdzenie hasła jest wymagane")}).refine(t=>t.newPassword===t.confirmPassword,{message:"Hasła muszą być takie same",path:["confirmPassword"]});class Qa extends Error{constructor(s,a){super(a),this.code=s,this.name="SecurityError"}}const kl=(t,s)=>S(void 0,null,function*(){const a=yield fetch(`${$}settings/security/password`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const r=yield a.json(),n=r.message||"Wystąpił błąd podczas zmiany hasła",o=r.code||"UNKNOWN_ERROR";throw new Qa(o,n)}}),zl=({onSuccess:t,onError:s}={})=>{const{token:a}=O(),r=Je({resolver:We(vl),mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),n=oe({mutationFn:o=>kl({currentPassword:o.currentPassword,newPassword:o.newPassword},a||""),onSuccess:()=>{r.reset(),t==null||t()},onError:s});return{form:r,onSubmit:r.handleSubmit(o=>n.mutateAsync(o)),isUpdating:n.isPending}},Sl=()=>{const t=i.useCallback(()=>{P.success("Hasło zostało zmienione")},[]),s=i.useCallback(n=>{if(n instanceof Qa){P.error(n.message);return}P.error("Wystąpił błąd podczas zmiany hasła")},[]),a=i.useCallback(()=>{P.success("Zmiany zostały anulowane")},[]),r=i.useCallback(()=>{P.error("Nie udało się anulować zmian")},[]);return{handleSuccess:t,handleError:s,handleCancel:a,handleCancelError:r}},Tl={initial:{opacity:0},animate:{opacity:1}},qa=i.memo(()=>{const{handleSuccess:t,handleError:s,handleCancel:a,handleCancelError:r}=Sl(),{form:n,onSubmit:o,isUpdating:d}=zl({onSuccess:()=>{t(),n.reset()},onError:s}),{formState:{errors:c,isSubmitting:l},reset:u}=n,m=i.useCallback(()=>{try{u(),a()}catch(h){r()}},[u,a,r]);return e.jsxs(x.form,T(k({onSubmit:o,className:"w-full max-w-md sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0"},Tl),{children:[e.jsx(Ua,{form:n,errors:c}),e.jsx(Qe,{onCancel:m,isSubmitting:l||d,submitText:"Zmień hasło",loadingText:"Zmienianie hasła"})]}))});qa.displayName="SecurityForm";const Cl=M.object({emailNotifications:M.boolean(),pushNotifications:M.boolean(),language:M.literal("pl")}),Ll=({onSubmit:t,defaultValues:s})=>{const a=Je({resolver:We(Cl),defaultValues:s||{emailNotifications:!1,pushNotifications:!1,language:"pl"},mode:"onChange",reValidateMode:"onChange",resetOptions:{keepDirtyValues:!0,keepValues:!0}}),r=a.handleSubmit(n=>S(void 0,null,function*(){try{yield t(n)}catch(o){console.error("Failed to update preferences:",o)}}));return{form:a,onSubmit:r}};class U extends Error{constructor(s,a){super(a),this.code=s,this.name="PreferencesError"}}const Pl=t=>S(void 0,null,function*(){var s,a;try{const r=yield fetch(`${$}settings/preferences`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){if(r.status===401)throw new U("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const d=yield r.json().catch(()=>null);throw new U((d==null?void 0:d.code)||"UNKNOWN_ERROR",(d==null?void 0:d.message)||"Błąd podczas pobierania preferencji")}const n=yield r.json(),o=n.data||n;return{emailNotifications:(s=o.emailNotifications)!=null?s:!1,pushNotifications:(a=o.pushNotifications)!=null?a:!1,language:o.language||"pl"}}catch(r){throw r instanceof U?r:(console.error("Błąd w fetchPreferences:",r),new U("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas pobierania preferencji"))}}),Al=(t,s)=>S(void 0,null,function*(){var a,r;try{const n=yield fetch(`${$}settings/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){if(n.status===401)throw new U("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const c=yield n.json().catch(()=>({code:"UNKNOWN_ERROR"}));throw new U((c==null?void 0:c.code)||"UNKNOWN_ERROR",(c==null?void 0:c.message)||"Wystąpił błąd podczas aktualizacji preferencji")}const o=yield n.json(),d=o.data||o;return{emailNotifications:(a=d.emailNotifications)!=null?a:!1,pushNotifications:(r=d.pushNotifications)!=null?r:!1,language:d.language||"pl"}}catch(n){throw n instanceof U?n:(console.error("Błąd w updatePreferences:",n),new U("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas aktualizacji preferencji"))}}),st=["preferences"],El=()=>{const{token:t,logout:s}=O(),a=ge(),{data:r,isLoading:n,error:o,refetch:d}=Q({queryKey:st,queryFn:()=>Pl(t||""),enabled:!!t,staleTime:1e3*60*5,retry:(l,u)=>u instanceof U&&u.code==="AUTH_ERROR"?(P.error("Sesja wygasła. Zaloguj się ponownie."),s==null||s(),!1):l<3});o&&!(o instanceof U&&o.code==="AUTH_ERROR")&&P.error(o instanceof Error?o.message:"Wystąpił błąd podczas ładowania preferencji");const c=oe({mutationFn:l=>Al(l,t||""),onSuccess:l=>{a.setQueryData(st,l),a.invalidateQueries({queryKey:st}),P.success("Preferencje zostały zaktualizowane")},onError:l=>{if(l instanceof U&&l.code==="AUTH_ERROR"){P.error("Sesja wygasła. Zaloguj się ponownie."),s==null||s();return}P.error(l instanceof Error?l.message:"Wystąpił błąd podczas aktualizacji preferencji")}});return{preferences:r,isLoading:n,error:o,updatePreferences:c,refetch:d}},$l=()=>{const{preferences:t,isLoading:s,updatePreferences:a,refetch:r}=El(),[n,o]=i.useState(!1),[d,c]=i.useState(!1),{form:l,onSubmit:u}=Ll({onSubmit:f=>S(void 0,null,function*(){try{o(!0),yield a.mutateAsync({emailNotifications:f.emailNotifications,pushNotifications:f.pushNotifications,language:"pl"}),c(!0),yield r()}catch(z){throw console.error("Błąd w usePreferencesFormLogic:",z),z instanceof U?z:z instanceof Error?new Error(z.message||"Wystąpił błąd podczas aktualizacji preferencji"):new Error("Wystąpił nieznany błąd podczas aktualizacji preferencji")}finally{o(!1)}})}),{register:m,formState:{isDirty:h},setValue:p,watch:j,reset:w}=l,g=j();i.useEffect(()=>{h&&c(!1)},[g,h]),i.useEffect(()=>{t&&(p("emailNotifications",t.emailNotifications),p("pushNotifications",t.pushNotifications),p("language","pl"))},[t,p]);const y=()=>{try{t&&(w({emailNotifications:t.emailNotifications,pushNotifications:t.pushNotifications,language:"pl"}),c(!1),P.success("Zmiany zostały anulowane"))}catch(f){console.error("Błąd podczas anulowania zmian:",f),P.error("Nie udało się anulować zmian")}};return{isLoading:s,register:m,formValues:g,isSubmitting:n||a.isPending,isPending:a.isPending,isDirty:h,isSaved:d,updatePreferences:a,handleCancel:y,onSubmit:u,setValue:p}},te={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",optionsContainer:"space-y-4 ml-4 sm:ml-8",optionLabel:`flex items-start sm:items-center gap-3 hover:cursor-pointer group
    transition-colors duration-200`,checkbox:`w-5 h-5 rounded border-gray-600 bg-gray-700 text-js 
    focus:ring-js/50 mt-1 sm:mt-0`,optionText:"group-hover:text-js transition-colors duration-200",optionTitle:"block text-gray-200 text-base sm:text-lg",optionDescription:"block text-sm text-gray-400 mt-1"},Za=i.memo(({register:t,values:s,onChange:a})=>e.jsxs("div",{className:te.section,children:[e.jsxs("h3",{className:te.title,children:[e.jsx(xt,{className:te.icon}),"Powiadomienia"]}),e.jsx("div",{className:te.optionsContainer,children:e.jsxs("label",{className:te.optionLabel,children:[e.jsx("input",T(k({type:"checkbox"},t("emailNotifications")),{checked:s.emailNotifications,onChange:r=>a("emailNotifications",r.target.checked),className:te.checkbox})),e.jsxs("div",{className:te.optionText,children:[e.jsx("span",{className:te.optionTitle,children:"Powiadomienia email"}),e.jsx("span",{className:te.optionDescription,children:"Otrzymuj powiadomienia na email"})]})]})})]}));Za.displayName="NotificationsSection";const Se={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",container:"ml-4 sm:ml-8",select:`w-full max-w-xs px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 text-base sm:text-lg
    focus:ring-2 focus:ring-js/50 focus:border-transparent 
    transition-colors`},Ka=i.memo(({register:t})=>e.jsxs("div",{className:Se.section,children:[e.jsxs("h3",{className:Se.title,children:[e.jsx(Nt,{className:Se.icon}),"Język"]}),e.jsx("div",{className:Se.container,children:e.jsx("select",T(k({},t("language")),{className:Se.select,children:e.jsx("option",{value:"pl",children:"Polski"})}))})]}));Ka.displayName="LanguageSection";const Va=i.memo(({register:t,formValues:s,setValue:a,onSubmit:r,onCancel:n,isSubmitting:o,isPending:d})=>e.jsxs(x.form,{onSubmit:r,className:"w-full max-w-2xl sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 md:p-8 border border-js/10 space-y-6",children:[e.jsx(Za,{register:t,values:s,onChange:(c,l)=>a(c,l)}),e.jsx("div",{className:"w-full h-px bg-js/10"}),e.jsx(Ka,{register:t})]}),e.jsx(Qe,{onCancel:n,isSubmitting:o||d,submitText:"Zapisz preferencje",loadingText:"Zapisywanie",disabled:o})]}));Va.displayName="PreferencesFormContent";const Xa=i.memo(()=>{const{isLoading:t,register:s,formValues:a,isSubmitting:r,isPending:n,isDirty:o,isSaved:d,handleCancel:c,onSubmit:l,setValue:u}=$l(),m=h=>S(void 0,null,function*(){h.preventDefault();try{yield l(h)}catch(p){console.error("Błąd podczas zapisywania preferencji:",p),p instanceof Error?P.error(p.message):P.error("Wystąpił nieznany błąd podczas zapisywania preferencji")}});return t?e.jsx(G,{}):e.jsx(Va,{register:s,formValues:a,setValue:u,onSubmit:m,onCancel:c,isSubmitting:r,isPending:n,isDirty:o,isSaved:d})});Xa.displayName="PreferencesForm";const Rl=()=>{const[t,s]=i.useState(!1),a=i.useCallback(()=>{s(!0)},[]),r=i.useCallback(()=>{s(!1)},[]);return{showConfirmation:t,handleShowConfirmation:a,handleHideConfirmation:r}};class Be extends Error{constructor(s,a){super(a),this.code=s,this.name="AccountError"}}const Fl=(t,s)=>S(void 0,null,function*(){const a=yield fetch(`${$}settings/account`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const r=yield a.json();throw r.code==="INVALID_PASSWORD"?new Be("INVALID_PASSWORD","Podane hasło jest nieprawidłowe"):r.code==="INVALID_CONFIRMATION"?new Be("INVALID_CONFIRMATION","Nieprawidłowe potwierdzenie"):new Be("UNKNOWN_ERROR","Wystąpił błąd podczas usuwania konta")}}),Dl=M.object({password:M.string().min(1,"Hasło jest wymagane"),confirmation:M.string().refine(t=>t==="USUŃ KONTO",{message:"Wpisz dokładnie 'USUŃ KONTO' aby potwierdzić"})}),Ol=({onSuccess:t,onError:s}={})=>{const a=Je({resolver:We(Dl)}),{token:r}=O(),n=oe({mutationFn:d=>Fl(d,r||""),onSuccess:()=>{a.reset(),t==null||t(),window.location.href="/logowanie"},onError:s}),o=a.handleSubmit(d=>S(void 0,null,function*(){yield n.mutateAsync(d)}));return{form:a,onSubmit:o,isDeleting:n.isPending}},_l=t=>{const s=i.useCallback(()=>{P.success("Konto zostało usunięte")},[]),a=i.useCallback(c=>{if(c instanceof Be)switch(c.code){case"INVALID_PASSWORD":P.error("Podane hasło jest nieprawidłowe");return;case"INVALID_CONFIRMATION":P.error("Nieprawidłowe potwierdzenie");return}P.error("Nie udało się usunąć konta")},[]),r=i.useCallback(()=>{try{t(),P.success("Operacja została anulowana")}catch(c){P.error("Nie udało się anulować operacji")}},[t]),{form:n,onSubmit:o,isDeleting:d}=Ol({onSuccess:s,onError:a});return{form:n,onSubmit:o,isDeleting:d,handleCancel:r}},Ml=["Wszystkie twoje dane zostaną usunięte","Stracisz dostęp do wszystkich kursów","Twoje postępy w nauce zostaną utracone","Nie będzie możliwości przywrócenia konta"],Oe={container:`
    bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
    backdrop-blur-sm
  `,content:"flex flex-col sm:flex-row items-start gap-4",icon:"text-red-500 text-xl sm:text-2xl mt-1 flex-shrink-0",title:"text-red-400 font-medium text-lg sm:text-xl mb-2",list:`
    text-gray-400 space-y-2 list-disc list-inside
    text-sm sm:text-base leading-relaxed
  `},Ya=i.memo(()=>e.jsx("div",{className:`
      bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6
      backdrop-blur-sm
    `,role:"alert","aria-label":"Ostrzeżenie o usuwaniu konta",children:e.jsxs("div",{className:Oe.content,children:[e.jsx(X,{className:Oe.icon,"data-testid":"warning-icon"}),e.jsxs("div",{children:[e.jsx("h3",{className:Oe.title,children:"Usuwanie konta jest nieodwracalne"}),e.jsx("ul",{className:Oe.list,children:Ml.map((t,s)=>e.jsx("li",{children:t},s))})]})]})}));Ya.displayName="WarningBox";const er=i.memo(({onConfirm:t})=>e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md sm:ml-0 sm:mr-auto px-4 sm:px-0",children:[e.jsx(Ya,{}),e.jsx(Ce,{type:"button",onClick:t,className:`w-full px-6 py-3 rounded-lg bg-red-500/20 text-red-400 \r
        hover:bg-red-500/30 transition-colors duration-200 shadow-none\r
        text-base sm:text-lg font-medium`,children:"Chcę usunąć konto"})]}));er.displayName="InitialWarning";const se={form:"space-y-6",confirmationField:"space-y-2",label:"block text-gray-400 text-sm sm:text-base",hint:"text-sm text-gray-500",input:`w-full px-4 py-3 rounded-lg 
    bg-dark/50 border border-js/10 
    text-gray-300 placeholder-gray-500
    focus:outline-none focus:ring-2 focus:ring-js/50
    text-base sm:text-lg
  `,error:"text-red-500 text-sm",buttons:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 mt-8",submitButton:`w-full sm:w-auto order-2 sm:order-1
    px-4 sm:px-6 py-3 rounded-lg
    bg-red-500/20 text-red-400 
    hover:bg-red-500/30
    transition-colors duration-200 shadow-none
    text-sm sm:text-base font-medium
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `,cancelButton:`w-full sm:w-auto order-1 sm:order-2
    px-4 sm:px-6 py-3 rounded-lg
    bg-dark/50 text-gray-400
    border border-js/10
    hover:text-js hover:border-js/30
    hover:bg-dark/60
    transition-colors duration-200 shadow-none
    text-sm sm:text-base
    disabled:opacity-50 disabled:cursor-not-allowed
    whitespace-nowrap
  `},tr=i.memo(({register:t,errors:s,isSubmitting:a,onCancel:r,onSubmit:n})=>{var o;return e.jsxs(x.form,{initial:{opacity:0},animate:{opacity:1},className:se.form,onSubmit:n,children:[e.jsx(je,k({id:"password",type:"password",label:"Hasło",placeholder:"Wprowadź hasło aby potwierdzić",icon:e.jsx(ae,{}),error:(o=s.password)==null?void 0:o.message},t("password"))),e.jsxs("div",{className:se.confirmationField,children:[e.jsx("label",{htmlFor:"confirmation",className:se.label,children:"Potwierdzenie"}),e.jsx("p",{className:se.hint,children:'Wpisz "USUŃ KONTO" aby potwierdzić'}),e.jsx("input",T(k({id:"confirmation",type:"text"},t("confirmation")),{className:se.input})),s.confirmation&&e.jsx("p",{className:se.error,children:s.confirmation.message})]}),e.jsxs("div",{className:se.buttons,children:[e.jsx(Ce,{type:"submit",disabled:a,className:se.submitButton,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Usuwanie"})]}):"Definitywnie usuń konto"}),e.jsx(Ce,{type:"button",onClick:r,disabled:a,className:se.cancelButton,children:"Anuluj"})]})]})});tr.displayName="ConfirmationForm";const sr=i.memo(()=>{const{showConfirmation:t,handleShowConfirmation:s,handleHideConfirmation:a}=Rl(),{form:r,onSubmit:n,isDeleting:o,handleCancel:d}=_l(a);return t?e.jsx(tr,{register:r.register,errors:r.formState.errors,isSubmitting:o,onCancel:d,onSubmit:n}):e.jsx(er,{onConfirm:s})});sr.displayName="DeleteAccountForm";const ar=i.memo(({activeView:t})=>e.jsx(H,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-dark/30 backdrop-blur-sm rounded-xl p-6 border border-js/10 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold font-space text-js mb-6",children:[t==="profile"&&"Edytuj Profil",t==="security"&&"Bezpieczeństwo",t==="preferences"&&"Preferencje",t==="delete"&&"Usuń Konto"]}),t==="profile"&&e.jsx(Wa,{}),t==="security"&&e.jsx(qa,{}),t==="preferences"&&e.jsx(Xa,{}),t==="delete"&&e.jsx(sr,{})]},t)}));ar.displayName="SettingsContent";const rr=i.memo(()=>{const[t,s]=i.useState("profile");return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[e.jsxs(re,{children:[e.jsx("title",{children:"Ustawienia | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx(x.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Ustawienia"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(Ma,{activeView:t,onViewChange:s}),e.jsxs(re,{children:[e.jsxs("title",{children:[t.charAt(0).toUpperCase()+t.slice(1)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(ar,{activeView:t})})]})]})});rr.displayName="SettingsSection";const xd=Object.freeze(Object.defineProperty({__proto__:null,SettingsSection:rr},Symbol.toStringTag,{value:"Module"})),ir=i.memo(()=>e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.div,{whileHover:{scale:1.1,rotate:15},className:"p-3 rounded-xl bg-gradient-to-br from-js/20 to-js/20",children:e.jsx(dt,{className:"w-8 h-8 text-js"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-transparent bg-clip-text bg-gradient-to-r from-js to-js",children:"Gry JavaScript"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Ucz się JavaScriptu poprzez zabawę i wyzwania"})]})]})}));ir.displayName="GamesHeader";const nr=i.memo(()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:t*.1},className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gray-800/50 animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-800/50 rounded animate-pulse w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse w-4/5"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"})]}),e.jsx("div",{className:"h-8 w-24 bg-gray-800/50 rounded animate-pulse"})]})]})]},t))}));nr.displayName="GamesListSkeleton";const or=i.memo(({query:t})=>{const a=t?{title:"Brak wyników wyszukiwania",description:`Nie znaleziono gier dla zapytania "${t}"`,icon:Ge}:{title:"Brak gier w tej kategorii",description:"Spróbuj wybrać inną kategorię lub wróć później",icon:pt};return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",bounce:.4},className:"w-20 h-20 mb-6 rounded-full bg-js/10 flex items-center justify-center",children:e.jsx(a.icon,{className:"w-10 h-10 text-js"})}),e.jsx(x.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold text-js mb-2 text-center",children:a.title}),e.jsx(x.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400 text-center max-w-md",children:a.description})]})});or.displayName="NoGamesFound";const lr=i.memo(({game:t})=>{const s=ye(),a=()=>{t.isLevelAvailable&&s(`/dashboard/play/${t.slug}`)},r=!t.isLevelAvailable;return e.jsxs(x.div,{whileHover:{scale:r?1:1.02},className:`group bg-dark-800/50 border rounded-xl overflow-hidden transition-all ${r?"border-gray-700/50 opacity-50 cursor-not-allowed":"border-js/10 hover:border-js/20"}`,children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-js/5 to-js/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-js/10 px-4 py-2 rounded-lg border border-js/20",children:e.jsx("span",{className:"font-mono text-js/80 font-medium",children:t.slug})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/90 to-transparent"}),r?e.jsx("div",{className:"absolute inset-0 m-auto w-12 h-12 bg-gray-700 text-gray-400 rounded-full flex items-center justify-center",children:e.jsx(ae,{className:"w-5 h-5"})}):e.jsx(x.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:a,className:"absolute inset-0 m-auto w-12 h-12 bg-js text-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(jt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-js line-clamp-1",children:t.title}),e.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2 py-0.5 rounded-lg text-sm",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),t.rewardPoints]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:r?`Dostępne od poziomu ${t.requiredLevel}`:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("div",{className:"flex items-center gap-4 text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),t.rating.average.toFixed(1)]})}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium
            ${t.difficulty==="easy"?"bg-green-500/10 text-green-400":t.difficulty==="medium"?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"}`,children:t.difficulty==="easy"?"Łatwy":t.difficulty==="medium"?"Średni":"Trudny"})]})]})]})});lr.displayName="GameCard";const Bl=t=>S(void 0,null,function*(){const s=yield fetch(`${$}games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error("Nie udało się pobrać gier");return s.json()}),ie=()=>{const{token:t}=O();return Q({queryKey:["games"],queryFn:()=>Bl(t||""),select:s=>({games:s.data,pagination:s.data}),staleTime:5*60*1e3})},cr=i.memo(({sortBy:t,searchQuery:s,selectedDifficulty:a})=>{const{data:r,isLoading:n,isError:o}=ie();if(n)return e.jsx(nr,{});if(o)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-400",children:"Wystąpił błąd podczas ładowania gier. Spróbuj ponownie później."})});if(!(r!=null&&r.games))return null;const d=r.games.filter(c=>(a==="all"||c.difficulty===a)&&(c.title.toLowerCase().includes(s.toLowerCase())||c.description.toLowerCase().includes(s.toLowerCase()))).sort((c,l)=>{switch(t){case"newest":return new Date(l.createdAt).getTime()-new Date(c.createdAt).getTime();case"popular":return l.completions.count-c.completions.count;case"difficulty":return l.difficulty.localeCompare(c.difficulty);case"xp":return l.rewardPoints-c.rewardPoints;default:return 0}});return d.length?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4 sm:gap-6",children:d.map(c=>{const l={_id:c._id,id:c._id,slug:c.slug,isLevelAvailable:c.isLevelAvailable,title:c.title,description:c.description,difficulty:c.difficulty,category:"game",isCompleted:!1,rating:{average:0,count:0},completions:c.completions,completedCount:c.completions.count,thumbnailUrl:"",rewardPoints:c.rewardPoints,xpPoints:c.rewardPoints,requiredLevel:c.requiredLevel};return e.jsx(lr,{game:l},l._id)})}):e.jsx(or,{query:s})});cr.displayName="GamesList";const Il=[{id:"newest",label:"Najnowsze",icon:D},{id:"popular",label:"Popularne",icon:Qt},{id:"difficulty",label:"Trudność",icon:_},{id:"xp",label:"Punkty XP",icon:Z}],dr=i.memo(({activeSortOption:t,onSortChange:s})=>e.jsxs("div",{className:"flex items-center gap-4 lg:ml-auto",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Sortuj:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Il.map(a=>{const r=a.icon;return e.jsxs(x.button,{onClick:()=>s(a.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium
                transition-all duration-200
                ${t===a.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}
              `,children:[e.jsx(r,{className:"w-4 h-4"}),a.label]},a.id)})})]}));dr.displayName="GamesSorting";const mr=i.memo(({value:t,onChange:s})=>{const a=i.useCallback(r=>{s(r.target.value)},[s]);return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t,onChange:a,placeholder:"Szukaj gry...",className:`\r
            w-full pl-10 pr-4 py-1.5 \r
            bg-dark border border-js/10\r
            rounded-lg text-sm text-gray-200\r
            focus:outline-none focus:border-js/30\r
            transition-colors duration-200\r
          `}),e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-js/50"})]}),e.jsx(x.div,{initial:!1,animate:{width:t?"100%":"0%",opacity:t?1:0},className:"absolute bottom-0 left-0 h-0.5 bg-js/20 rounded-full"})]})});mr.displayName="GamesSearch";const Hl=[{value:"all",label:"Wszystkie"},{value:"easy",label:"Łatwe",color:"text-emerald-400"},{value:"medium",label:"Średnie",color:"text-indigo-400"},{value:"hard",label:"Trudne",color:"text-rose-400"}],xr=i.memo(({selectedDifficulty:t,onDifficultyChange:s})=>e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 flex-wrap",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Poziom:"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:Hl.map(a=>e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(a.value),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all relative
              ${t===a.value?`text-${a.color||"gray-200"}`:"text-gray-400 hover:text-gray-300"}`,children:[t===a.value&&e.jsx(x.div,{layoutId:"difficulty-background",className:`absolute inset-0 bg-gray-800/50 border rounded-lg -z-10 border-${a.color||"gray-400"}`,transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx(H,{mode:"wait",children:e.jsx(x.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:t===a.value?e.jsx(en,{className:`w-3 h-3 ${a.color||"text-gray-400"}`}):e.jsx(tn,{className:"w-3 h-3"})},t===a.value?"circle":"circle-outline")}),a.label]},a.value))})]}));xr.displayName="GamesDifficulty";const ur=i.memo(()=>{const[t,s]=i.useState("newest"),[a,r]=i.useState(""),[n,o]=i.useState("all");return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full m-0 min-h-screen bg-dark/50 backdrop-blur-sm",children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Gry | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Games CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ir,{}),e.jsxs("div",{className:"mt-8 bg-dark-800/50 border border-js/10 rounded-xl p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"w-full sm:w-72",children:e.jsx(mr,{value:a,onChange:r})}),e.jsx(dr,{activeSortOption:t,onSortChange:s})]}),e.jsx("div",{className:"mt-4",children:e.jsx(xr,{selectedDifficulty:n,onDifficultyChange:o})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(cr,{sortBy:t,searchQuery:a,selectedDifficulty:n})})]})]})]})});ur.displayName="GamesSection";const ud=Object.freeze(Object.defineProperty({__proto__:null,GamesSection:ur},Symbol.toStringTag,{value:"Module"})),Gl=i.memo(({title:t})=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-js",children:t})})),Jl=i.createContext(null),Wl=({children:t})=>{const[s,a]=i.useState(null),[r,n]=i.useState(!1),[o,d]=i.useState(null),c=i.useCallback(l=>S(void 0,null,function*(){n(!0),d(null);const{token:u}=O();try{const m=yield fetch(`${$}/games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}});if(!m.ok)throw new Error("Nie udało się pobrać zawartości gry");const p=(yield m.json()).data.games.find(j=>j.slug===l);if(!p)throw new Error("Nie znaleziono gry");a({title:p.title,description:p.description,difficulty:p.difficulty,rating:p.rating,completions:p.completions,rewardPoints:p.rewardPoints,gameData:p.gameData,estimatedTime:p.estimatedTime,isCompleted:p.isCompleted})}catch(m){d(m instanceof Error?m.message:"Wystąpił nieznany błąd")}finally{n(!1)}}),[]);return e.jsx(Jl.Provider,{value:{gameContent:s,isLoading:r,error:o,fetchGameContent:c},children:t})};nt.setConfig({FORBID_ATTR:["style","onerror","onload","fscommand","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onfullscreenchange","onfullscreenerror","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwheel"],ADD_TAGS:["meta"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","iframe","embed","base"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,SANITIZE_DOM:!0,WHOLE_DOCUMENT:!1,USE_PROFILES:{html:!0,mathMl:!1,svg:!1}});const Bt={"scope-explorer":i.lazy(()=>V(()=>Promise.resolve().then(()=>bc),void 0)),"js-typo-hunter":i.lazy(()=>V(()=>Promise.resolve().then(()=>Sc),void 0)),"async-quest":i.lazy(()=>V(()=>Promise.resolve().then(()=>Ac),void 0)),"regex-raider":i.lazy(()=>V(()=>Promise.resolve().then(()=>Rc),void 0)),"js-quiz":i.lazy(()=>V(()=>Promise.resolve().then(()=>Mc),void 0)),"method-quiz":i.lazy(()=>V(()=>Promise.resolve().then(()=>Kc),void 0))},pr=i.memo(()=>{const{slug:t}=ft(),s=typeof t=="string"?nt.sanitize(t):"";if(!s||!Bt[s])return e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Gra nie została znaleziona"})});const a=Bt[s];return e.jsxs(Wl,{children:[e.jsxs(Y,{children:[e.jsxs("title",{children:[nt.sanitize(s)," | CodeLinesJS"]}),e.jsx("meta",{name:"description",content:"Gra CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"w-full h-full",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{children:"Ładowanie gry..."}),children:e.jsx(a,{})})})]})});pr.displayName="GameplayArea";const hr=i.memo(({game:t})=>{const s=ye(),a=()=>{s("/dashboard/play")};return e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark-800 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-js/10 text-js hover:bg-js/20 transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Powrót do menu"})]})}),e.jsx(Gl,{title:t.title}),e.jsx("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:e.jsx("div",{className:"lg:col-span-12",children:e.jsx(pr,{})})})]})})});hr.displayName="GameplaySection";const jr=i.memo(()=>{const{slug:t}=ft(),{data:s}=ie();if(!(s!=null&&s.games))return null;const a=s.games.find(r=>r.slug===t);return a?e.jsx(hr,{game:a}):e.jsx(ts,{to:"/dashboard/play",replace:!0})});jr.displayName="GameplayRouter";const pd=Object.freeze(Object.defineProperty({__proto__:null,GameplayRouter:jr},Symbol.toStringTag,{value:"Module"})),Ul=({code:t,onChange:s,onMount:a,isEditorReady:r})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] rounded overflow-hidden relative",children:[!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark/50",children:e.jsx(xe,{className:"w-8 h-8 text-js animate-spin"})}),e.jsx(as,{theme:"vs-dark",language:"javascript",height:"100%",defaultLanguage:"javascript",value:t,onChange:s,onMount:a})]}),yr=i.memo(({output:t,onClear:s,isExecuting:a})=>e.jsxs("div",{className:"h-[calc(100%-4rem)] bg-[#1e1e1e] rounded-lg overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-dark/30 border-b border-js/10",children:[e.jsx("span",{className:"text-sm text-gray-400",children:a?"Wykonywanie...":"Gotowe"}),e.jsx("button",{"data-testid":"clear-console-btn",onClick:s,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść konsolę",children:e.jsx(wt,{className:"w-4 h-4"})})]}),e.jsx("div",{"data-testid":"console-output",className:"flex-1 p-4 font-mono text-sm overflow-auto",children:t.map((r,n)=>e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-gray-300 mb-1",children:r},n))})]}));yr.displayName="ConsoleOutput";const Ql=({output:t,isExecuting:s,onClear:a,onRun:r})=>e.jsxs("div",{className:"bg-dark/50 rounded-lg p-4 border border-js/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Konsola"}),e.jsx("button",{"data-testid":"run-code-btn",onClick:r,disabled:s,className:"px-4 py-2 bg-js text-dark font-medium rounded hover:bg-js/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Wykonywanie...":"Uruchom"})]}),e.jsx(yr,{output:t,onClear:a,isExecuting:s})]}),ql=3e3,Zl=()=>{const[t,s]=i.useState([]),[a,r]=i.useState(!1),n=i.useCallback(()=>{s([])},[]),o=i.useCallback(d=>{r(!0);const c=[],l=console.log;return new Promise((u,m)=>{const h=setTimeout(()=>{m(new Error("Przekroczono limit czasu wykonania"))},ql);try{console.log=(...p)=>{c.push(p.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" "))},S(void 0,null,function*(){try{new Function("console",`
              "use strict";
              ${d}
            `)(console),s(c),clearTimeout(h),u()}catch(p){s([`Błąd: ${p instanceof Error?p.message:"Nieznany błąd"}`]),m(p)}})}finally{console.log=l,r(!1)}})},[]);return{output:t,isExecuting:a,executeCode:o,clearConsole:n}},at="code_history",Kl=10,Vl=()=>{const[t,s]=i.useState(()=>{const n=localStorage.getItem(at);return n?JSON.parse(n):[]}),a=i.useCallback(n=>{s(o=>{const d=[{code:n,timestamp:Date.now()},...o.filter(c=>c.code!==n)].slice(0,Kl);return localStorage.setItem(at,JSON.stringify(d)),d})},[]),r=i.useCallback(()=>{localStorage.removeItem(at),s([])},[]);return{history:t,addToHistory:a,clearHistory:r}},Xl=t=>{const s=i.useRef(null),[a,r]=i.useState(t),[n,o]=i.useState(!1),d=l=>{s.current=l,o(!0)},c=i.useCallback(l=>{l&&r(l)},[]);return i.useEffect(()=>{Ln.init().then(l=>{l.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})})},[]),{code:a,isEditorReady:n,handleEditorDidMount:d,handleEditorChange:c}},Yl=`// Witaj w edytorze CodeLinesJS!
// Napisz swój kod JavaScript tutaj

function przywitajSie(imie) {
  return \`Cześć, \${imie}!\`;
}

console.log(przywitajSie("Programisto"));`,ec=()=>({saveToFile:i.useCallback(s=>{const a=new Blob([s],{type:"text/javascript"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`code_${new Date().toISOString().slice(0,10)}.js`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},[])}),gr=i.memo(({history:t,onSelect:s,onClear:a})=>e.jsxs("div",{"data-testid":"history-panel",className:"absolute top-full right-0 mt-2 w-64 bg-dark/95 rounded-lg border border-js/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-js/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-js",children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Historia"})]}),t.length>0&&e.jsx("button",{"data-testid":"clear-history-btn",onClick:a,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść historię",children:e.jsx(wt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.length===0?e.jsx("div",{className:"p-3 text-sm text-gray-400",children:"Brak historii"}):t.map((r,n)=>e.jsxs(x.button,{"data-testid":`history-item-${n}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},onClick:()=>s(r.code),className:"w-full p-3 text-left hover:bg-js/10 transition-colors border-b border-js/5 last:border-0",children:[e.jsx("div",{className:"text-sm text-gray-300 truncate",children:r.code.split(`
`)[0]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(r.timestamp).toLocaleString()})]},r.timestamp))})]}));gr.displayName="CodeHistory";const br=i.memo(()=>{const{output:t,isExecuting:s,executeCode:a,clearConsole:r}=Zl(),{history:n,addToHistory:o,clearHistory:d}=Vl(),{code:c,isEditorReady:l,handleEditorDidMount:u,handleEditorChange:m}=Xl(Yl),{saveToFile:h}=ec(),[p,j]=i.useState(!1),w=()=>{j(!1)},g=i.useCallback(()=>S(void 0,null,function*(){yield a(c),o(c)}),[c,a,o]);return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full p-6",children:[e.jsxs(re,{children:[e.jsx("title",{children:"Edytor Kodu | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Edytor kodu JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Edytor Kodu JavaScript"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{"data-testid":"save-code-btn",onClick:()=>h(c),disabled:!l,className:"px-4 py-2 text-sm text-js border border-js/20 rounded hover:bg-js/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(sn,{className:"w-4 h-4 mr-2 inline-block"}),"Zapisz do Pliku"]}),e.jsx("button",{"data-testid":"history-btn",onClick:()=>j(y=>!y),className:"p-2 text-gray-400 hover:text-js transition-colors",title:"Historia kodu",children:e.jsx(rs,{className:"w-5 h-5"})}),p&&e.jsx(gr,{history:n,onSelect:w,onClear:d})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[e.jsx(Ul,{code:c,onChange:m,onMount:()=>u(null),isEditorReady:l}),e.jsx(Ql,{output:t,isExecuting:s,onClear:r,onRun:g})]})]})});br.displayName="CodeEditor";const hd=Object.freeze(Object.defineProperty({__proto__:null,CodeEditor:br},Symbol.toStringTag,{value:"Module"})),fr=i.memo(()=>e.jsx("div",{className:"absolute inset-0",children:e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-[#1a1a1a] opacity-90"}),e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"})]})}));fr.displayName="PageBackground";const wr=i.memo(({title:t="Zgłoś błąd lub sugestię",description:s="Znalazłeś błąd w aplikacji lub masz pomysł na nową funkcję? Daj nam znać! Twoje opinie pomagają nam ulepszać CodeLinesJS."})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-js mb-4",children:t}),e.jsx("p",{className:"text-gray-400 text-lg",children:s})]}));wr.displayName="PageHeader";const tc=(t,s)=>S(void 0,null,function*(){const a=yield fetch(`${$}reports`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)});if(!a.ok)throw new Error("Nie udało się wysłać zgłoszenia");return a.json()}),sc=()=>{const{token:t}=O(),[s,a]=i.useState(!1),[r,n]=i.useState(!1),[o,d]=i.useState(null),[c,l]=i.useState({title:"",description:"",category:"bug",email:""}),[u,m]=i.useState({}),h=()=>{const y={};return c.title.trim()?c.title.length<5&&(y.title="Tytuł musi mieć co najmniej 5 znaków"):y.title="Tytuł jest wymagany",c.description.trim()?c.description.length<20&&(y.description="Opis musi mieć co najmniej 20 znaków"):y.description="Opis jest wymagany",c.category||(y.category="Kategoria jest wymagana"),c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(y.email="Podaj prawidłowy adres email"):y.email="Email jest wymagany",m(y),Object.keys(y).length===0},p=y=>{const{name:f,value:z}=y.target;l(C=>T(k({},C),{[f]:z}))},j=()=>{l({title:"",description:"",category:"bug",email:""}),m({})};return{formData:c,errors:u,isSubmitting:s,submitSuccess:r,submitError:o,handleChange:p,handleSubmit:y=>S(void 0,null,function*(){if(y.preventDefault(),!!h()){a(!0),d(null);try{yield tc(t||"",c),n(!0),j()}catch(f){d(f instanceof Error?f.message:"Wystąpił nieznany błąd")}finally{a(!1)}}}),resetSuccess:()=>{n(!1)}}},Te=i.memo(({id:t,name:s,label:a,type:r="text",value:n,onChange:o,error:d,placeholder:c,options:l,rows:u=5})=>{const m=`w-full bg-dark/50 border ${d?"border-red-500":"border-js/20"} rounded-lg p-3 text-white focus:border-js focus:outline-none`;return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:t,className:"block text-gray-300 mb-1",children:a}),r==="textarea"?e.jsx("textarea",{id:t,name:s,value:n,onChange:o,rows:u,className:m,placeholder:c}):r==="select"?e.jsx("select",{id:t,name:s,value:n,onChange:o,className:m,children:l==null?void 0:l.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}):e.jsx("input",{type:r,id:t,name:s,value:n,onChange:o,className:m,placeholder:c}),d&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d})]})});Te.displayName="FormField";const Nr=i.memo(({isSubmitting:t,label:s="Wyślij zgłoszenie",loadingLabel:a="Wysyłanie..."})=>e.jsx(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:t,className:"w-full bg-js text-dark font-medium py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-js/90 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-dark border-t-transparent rounded-full"}),e.jsx("span",{children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(an,{}),e.jsx("span",{children:s})]})}));Nr.displayName="SubmitButton";const vr=i.memo(({onReset:t,title:s="Dziękujemy za zgłoszenie!",message:a="Twoje zgłoszenie zostało przyjęte. Odpowiemy najszybciej jak to możliwe.",buttonLabel:r="Zgłoś kolejny błąd"})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-green-400 font-medium mb-2",children:s}),e.jsx("p",{className:"text-gray-400",children:a}),e.jsx("button",{onClick:t,className:"mt-4 bg-js text-dark font-medium px-4 py-2 rounded-lg hover:bg-js/90 transition-colors",children:r})]}));vr.displayName="SuccessMessage";const kr=i.memo(({message:t})=>e.jsx("div",{className:"mb-4 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400",children:t})}));kr.displayName="ErrorMessage";const zr=i.memo(({title:t="Zgłoś błąd"})=>e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-lg bg-js/10",children:e.jsx(Jt,{className:"w-6 h-6 text-js"})}),e.jsx("h2",{className:"text-2xl font-bold text-js",children:t})]}));zr.displayName="FormHeader";const ac=[{value:"bug",label:"Błąd w aplikacji"},{value:"feature",label:"Propozycja funkcji"},{value:"content",label:"Problem z treścią"},{value:"other",label:"Inne"}],Sr=i.memo(()=>{const{formData:t,errors:s,isSubmitting:a,submitSuccess:r,submitError:n,handleChange:o,handleSubmit:d,resetSuccess:c}=sc();return e.jsxs("div",{className:"w-full max-w-3xl mx-auto bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:[e.jsx(zr,{}),r?e.jsx(vr,{onReset:c}):e.jsxs("form",{onSubmit:d,children:[e.jsx(Te,{id:"title",name:"title",label:"Tytuł",value:t.title,onChange:o,error:s.title,placeholder:"Krótki opis problemu"}),e.jsx(Te,{id:"category",name:"category",label:"Kategoria",type:"select",value:t.category,onChange:o,error:s.category,options:ac}),e.jsx(Te,{id:"description",name:"description",label:"Szczegółowy opis",type:"textarea",value:t.description,onChange:o,error:s.description,placeholder:"Opisz dokładnie napotkany problem, podaj kroki do jego odtworzenia"}),e.jsx(Te,{id:"email",name:"email",label:"Email kontaktowy",type:"email",value:t.email,onChange:o,error:s.email,placeholder:"Twój adres email"}),n&&e.jsx(kr,{message:n}),e.jsx(Nr,{isSubmitting:a})]})]})});Sr.displayName="ReportForm";const Tr=i.memo(({email:t="kontakt@codelinesjs.pl"})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Inne sposoby kontaktu"}),e.jsxs("p",{className:"text-gray-400",children:["Możesz również skontaktować się z nami bezpośrednio przez email:"," ",e.jsx("a",{href:`mailto:${t}`,className:"text-js hover:underline",children:t})]})]}));Tr.displayName="ContactSection";const rc=()=>i.useMemo(()=>({container:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}}}),[]),Cr=i.memo(()=>{const t=rc();return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-dark via-dark-medium to-dark py-16 md:py-24 relative overflow-hidden",children:[e.jsx(fr,{}),e.jsxs(re,{children:[e.jsx("title",{children:"Zgłoś Błąd | CodeLinesJS"}),e.jsx("meta",{name:"description",content:"Zgłoś błąd w CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs(x.div,{variants:t.container,initial:"hidden",animate:"show",className:"flex flex-col items-center gap-12",children:[e.jsx(x.div,{variants:t.item,children:e.jsx(wr,{})}),e.jsx(x.div,{variants:t.item,className:"w-full",children:e.jsx(Sr,{})}),e.jsx(x.div,{variants:t.item,children:e.jsx(Tr,{})})]})})]})});Cr.displayName="ReportBugPage";const jd=Object.freeze(Object.defineProperty({__proto__:null,ReportBugPage:Cr},Symbol.toStringTag,{value:"Module"})),ic=t=>S(void 0,null,function*(){const s=yield fetch(`${$}users/active`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error("Błąd podczas pobierania aktywnych użytkowników");return s.json()}),nc=()=>{var u,m;const{token:t}=O(),{data:s,isLoading:a,error:r,refetch:n}=Q({queryKey:["activeUsers"],queryFn:()=>ic(t||""),retry:2,refetchInterval:3e4,staleTime:1e3*60,enabled:!!t}),o=((u=s==null?void 0:s.data)==null?void 0:u.users)||[],d=o.slice(0,8),c=o.length>8?o.length-8:0,l=((m=s==null?void 0:s.data)==null?void 0:m.totalActive)||0;return{users:o,visibleUsers:d,extraUsers:c,totalActive:l,isLoading:a,error:r,refetch:n}},Lr=i.memo(()=>{const{visibleUsers:t,extraUsers:s,isLoading:a,error:r}=nc();return a?e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map((n,o)=>e.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-700 animate-pulse"},o))})]}):r?null:e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[e.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.map(n=>e.jsx(x.div,{className:"relative group",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:17},children:e.jsxs("div",{className:"w-10 h-10 rounded-full relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-js flex items-center justify-center",children:e.jsx("span",{className:"text-dark font-bold text-xl",children:n.username.charAt(0).toUpperCase()})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-dark",children:e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"})})]})},n._id)),s>0&&e.jsxs(x.div,{whileHover:{scale:1.1},className:`w-10 h-10 rounded-full bg-js/10 flex items-center justify-center\r
                     text-js text-sm font-medium border-2 border-dark/50`,children:["+",s]})]})]})});Lr.displayName="ActiveUsers";const Pr=i.memo(()=>e.jsx("div",{className:"space-y-6",children:e.jsx(Lr,{})}));Pr.displayName="CommunityFeed";const oc=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Ar=i.memo(({username:t,size:s="md",className:a=""})=>{const r=t&&typeof t=="string"?t.charAt(0).toUpperCase():"?",n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},o={sm:"text-sm",md:"text-base",lg:"text-xl"};return e.jsx("div",{className:`
      rounded-full bg-js flex items-center justify-center text-black font-bold
      ${n[s]} ${o[s]} ${a}
    `,children:r})});Ar.displayName="UserAvatar";const Er=i.memo(({user:t,index:s,animationDelay:a=.1})=>{const r=t.position,n=r<=3?"text-yellow-500":"text-gray-400",d=t.isCurrentUser?"bg-js/10 border-js/30":"bg-dark-card/50 border-js/5 hover:border-js/10";return e.jsx("div",{className:`backdrop-blur-sm rounded-lg border p-4 transition-all flex items-center justify-between ${d}`,style:{animation:`fadeIn 0.5s ease-out ${a*(s+1)}s both`},children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`font-bold text-xl min-w-8 ${n}`,children:[r<=3&&e.jsx(rn,{className:"inline mr-1"}),r]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ar,{username:t.username,avatar:t.avatar,size:"md",className:r<=3?"ring-2 ring-yellow-500/30":""}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg text-white",children:[t.username,t.isCurrentUser&&e.jsx("span",{className:"ml-2 text-xs font-medium bg-js text-black px-2 py-0.5 rounded font-bold",children:"Ty"})]}),e.jsxs("div",{className:"text-gray-400 text-sm",children:["Poziom: ",e.jsx("span",{className:"text-js",children:t.stats.level})," • Punkty: ",e.jsx("span",{className:"text-js",children:t.stats.points})]})]})]})]})})});Er.displayName="RankingItem";const $r=i.memo(({users:t,isLoading:s=!1,pagination:a})=>s?e.jsx(G,{}):t!=null&&t.length?e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:t.map((r,n)=>e.jsx(Er,{user:r,index:n},`${r.username}-${r.position}`))}),a&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-js/10",children:[e.jsxs("button",{onClick:a.prevPage,disabled:!a.hasPrevPage||a.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${a.hasPrevPage&&!a.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Poprzednia strona",children:[e.jsx(on,{className:"w-5 h-5"}),e.jsx("span",{children:"Poprzednia"})]}),e.jsx("div",{className:"text-gray-400 flex items-center",children:a.isLoadingPage?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-js",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-js",children:"Ładowanie..."})]}):`Strona ${a.page} z ${a.totalPages||1}`}),e.jsxs("button",{onClick:a.nextPage,disabled:!a.hasNextPage||a.isLoadingPage,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition
              ${a.hasNextPage&&!a.isLoadingPage?"text-js hover:bg-js/10":"text-gray-500 cursor-not-allowed"}`,"aria-label":"Następna strona",children:[e.jsx("span",{children:"Następna"}),e.jsx(ln,{className:"w-5 h-5"})]})]})]}):e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("div",{children:"Brak danych rankingowych do wyświetlenia"})]}));$r.displayName="RankingList";const Rr=i.memo(({icon:t,label:s,value:a,className:r=""})=>e.jsxs(x.div,{className:`bg-dark/20 rounded-lg p-4 border border-js/5 ${r}`,whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(t,{className:"w-6 h-6 text-js mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:s}),e.jsx("p",{className:"text-2xl font-bold text-js",children:a})]}));Rr.displayName="StatCard";const Fr=i.memo(({currentUserStats:t,isLoading:s=!1})=>{if(s)return e.jsx("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:e.jsx(G,{})});if(!t)return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-6",children:"Twoje Statystyki"}),e.jsx("p",{className:"text-gray-400",children:"Nie udało się załadować twoich statystyk. Zaloguj się, aby zobaczyć swoje miejsce w rankingu."})]});const a=[{icon:Z,label:"Twoja pozycja",value:`#${t.rank}`},{icon:_,label:"Poziom",value:typeof t.level=="number"?t.level.toLocaleString():t.level},{icon:cn,label:"Punkty",value:typeof t.points=="number"?t.points.toLocaleString():t.points}];return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-js mb-6",children:["Twoje Statystyki ",t.username&&`(${t.username})`]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map(r=>e.jsx(Rr,{icon:r.icon,label:r.label,value:r.value},r.label))})]})});Fr.displayName="RankingStats";const lc=(t=1,s=10)=>{const[a,r]=i.useState(t),n=s,{data:o,isLoading:d,error:c}=Q({queryKey:["ranking",a,n],queryFn:()=>S(void 0,null,function*(){const y=yield ue.get(`ranking?page=${a}&limit=${n}`,{requiresAuth:!0});if(y.error)throw new Error(y.error);return y})}),l=o==null?void 0:o.data,u=l==null?void 0:l.ranking,m=(l==null?void 0:l.totalUsers)||0,h=l==null?void 0:l.meta,p=(h==null?void 0:h.totalPages)||Math.ceil(m/n),j=()=>{a<p&&r(y=>y+1)},w=()=>{a>1&&r(y=>y-1)},g=y=>{y>=1&&y<=p&&r(y)};return{ranking:u,totalUsers:m,userStats:l==null?void 0:l.userStats,isLoading:d,error:c,page:a,limit:n,nextPage:j,prevPage:w,goToPage:g,totalPages:p,pagination:h?{page:h.page,limit:h.limit,totalItems:h.totalResults,totalPages:h.totalPages}:null}},cc=()=>{const{ranking:t,userStats:s,isLoading:a,error:r,page:n,totalPages:o,nextPage:d,prevPage:c,goToPage:l}=lc(),u=i.useMemo(()=>t||[],[t]),m=i.useMemo(()=>{var p,j;return s?{username:s.username,rank:s.rank,level:((p=s.stats)==null?void 0:p.level)||"-",points:((j=s.stats)==null?void 0:j.points)||"-",avatar:s.avatar}:null},[s]),h=i.useMemo(()=>({page:n,totalPages:o,hasNextPage:n<o,hasPrevPage:n>1,nextPage:d,prevPage:c,goToPage:l,isLoadingPage:a&&!!u.length}),[n,o,d,c,l,a,u.length]);return{users:u,currentUserStats:m,isLoading:a,error:r,pagination:h}},Dr=i.memo(()=>{const{users:t,currentUserStats:s,isLoading:a,error:r,pagination:n}=cc();return a&&!n.page?e.jsx(it,{text:"Ładowanie rankingu..."}):r?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-red-500 text-2xl mb-2",children:"Błąd ładowania"}),e.jsx("p",{className:"text-gray-400",children:r instanceof Error?r.message:"Nie udało się załadować danych rankingu. Spróbuj ponownie później."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js",children:"Ranking"}),n.isLoadingPage&&e.jsxs("div",{className:"text-xs text-gray-400 flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-js",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Aktualizowanie..."]})]}),e.jsx($r,{users:t,isLoading:a,pagination:n})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(Fr,{currentUserStats:s,isLoading:a})})]})});Dr.displayName="CommunityRanking";const dc=Object.freeze(Object.defineProperty({__proto__:null,default:Dr},Symbol.toStringTag,{value:"Module"})),Ie=i.memo(({category:t,stats:s})=>{const a=()=>{switch(t){case"scope":return E;case"closure":return Ee;case"hoisting":return vt}},r=()=>{switch(t){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},n=a(),o=s.correct/s.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:r()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});Ie.displayName="CategoryProgress";const Or=i.memo(({stats:t,isGameOver:s,finalTime:a})=>{const r=o=>{const d=Math.floor(o/60),c=o%60;return`${d}:${c.toString().padStart(2,"0")}`},n=s?a:t.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t.currentLevel,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:t.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",t.correctAnswers,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[r(n),"/",r(t.maxTime)]})})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(Ie,{category:"scope",stats:t.categoryStats.scope}),e.jsx(Ie,{category:"closure",stats:t.categoryStats.closure}),e.jsx(Ie,{category:"hoisting",stats:t.categoryStats.hoisting})]})]})});Or.displayName="ScopeExplorerStats";const fe=i.memo(({gameContent:t,onStart:s})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-4 text-center",children:t.title}),e.jsx("div",{className:"mb-6 text-gray-400 text-center",children:t.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom trudności"}),e.jsx("div",{className:"text-lg font-bold text-js capitalize",children:t.difficulty})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty do zdobycia"}),e.jsxs("div",{className:"text-lg font-bold text-js flex items-center justify-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),t.rewardPoints]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Szacowany czas"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t.estimatedTime," min"]})]})]}),e.jsxs("button",{onClick:s,className:"w-full px-6 py-4 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Rozpocznij grę"})]})]}));fe.displayName="GameIntro";const mc=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>t==null?void 0:t.games.find(n=>n.slug==="scope-explorer"),[t==null?void 0:t.games]),isLoading:s,error:a}},we=({maxTime:t,onTimeEnd:s,isPaused:a})=>{const[r,n]=i.useState(0),[o,d]=i.useState(!1),c=i.useCallback(()=>{d(!0)},[]),l=i.useCallback(()=>{d(!1)},[]),u=i.useCallback(()=>{n(0),d(!1)},[]);return i.useEffect(()=>{let m;return o&&!a&&(m=window.setInterval(()=>{n(h=>{const p=h+1;return p>=t?(l(),s(),t):p})},1e3)),()=>{m&&window.clearInterval(m)}},[o,a,t,s,l]),{timeElapsed:r,resetTimer:u,startTimer:c,stopTimer:l,isRunning:o}},xc=({gameContent:t,isPaused:s})=>{var C;const[a,r]=i.useState(!1),[n,o]=i.useState(!1),[d,c]=i.useState(0),[l,u]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=we({maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,onTimeEnd:()=>{o(!0),c(m),j()},isPaused:s});i.useEffect(()=>{u(v=>T(k({},v),{timeElapsed:m}))},[m]),i.useEffect(()=>{if(!(t!=null&&t.gameData))return;const v={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;v[b].total++,v[b].points+=N.points||0}),u(N=>T(k({},N),{totalLevels:t.gameData.length,maxTime:t.estimatedTime?t.estimatedTime*60:300,categoryStats:v}))},[t]);const w=i.useCallback((v,N)=>{u(b=>T(k({},b),{score:b.score+v,correctAnswers:b.correctAnswers+1,categoryStats:T(k({},b.categoryStats),{[N]:T(k({},b.categoryStats[N]),{correct:b.categoryStats[N].correct+1})})}))},[]),g=i.useCallback(()=>{var N;const v=l.currentLevel+1;if(v>(((N=t==null?void 0:t.gameData)==null?void 0:N.length)||0)){o(!0),c(m),j();return}u(b=>T(k({},b),{currentLevel:v}))},[l.currentLevel,m,(C=t==null?void 0:t.gameData)==null?void 0:C.length,j]),y=i.useCallback(()=>{if(!(t!=null&&t.gameData))return;const v={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;v[b].total++,v[b].points+=N.points||0}),u({currentLevel:1,totalLevels:t.gameData.length,score:0,timeElapsed:0,maxTime:t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0,categoryStats:v}),o(!1),c(0),h(),p()},[h,p,t]),f=i.useCallback(()=>{r(!0),p()},[p]),z=i.useCallback(()=>{o(!0),c(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:d,gameStats:l,currentChallenge:t!=null&&t.gameData?t.gameData[l.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:g,handleRestart:y,handleStartGame:f,handleGameOver:z}},_r=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(xe,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(X,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:s.message})]})}):e.jsx(e.Fragment,{children:a}));_r.displayName="LoadingErrorContainer";const uc=t=>{switch(t){case"scope":return E;case"closure":return Ee;case"hoisting":return vt}},pc=t=>{switch(t){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},hc=t=>{switch(t){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},jc=t=>{switch(t){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},Mr=({onEscape:t,onEnter:s,onNumber1:a,onNumber2:r,onNumber3:n,onNumber4:o,disabled:d=!1})=>{const c=i.useCallback(l=>{if(!d)switch(l.key){case"Escape":t==null||t();break;case"Enter":s==null||s();break;case"1":a==null||a();break;case"2":r==null||r();break;case"3":n==null||n();break;case"4":o==null||o();break}},[t,s,a,r,n,o,d]);i.useEffect(()=>(window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)),[c])},Br=i.memo(({currentLevel:t,totalLevels:s})=>{const a=(t-1)/s*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});Br.displayName="ScopeExplorerProgress";const yc=mn,Ir=i.memo(({currentChallenge:t,onScoreUpdate:s,onLevelComplete:a,currentLevel:r,totalLevels:n,onGameOver:o})=>{const[d,c]=i.useState(null),[l,u]=i.useState(!1),[m,h]=i.useState(null),[p,j]=i.useState(!1),w=i.useCallback(f=>{c(f);const z=f===t.correct;h(z),u(!0),z?(s(t.points||10,t.category),setTimeout(()=>{a(),c(null),u(!1),h(null),j(!1)},1500)):setTimeout(()=>{o()},2e3)},[t,s,a,o]),g=i.useCallback(f=>{!l&&f<t.options.length&&w(t.options[f])},[l,t.options,w]);Mr({onNumber1:()=>g(0),onNumber2:()=>g(1),onNumber3:()=>g(2),disabled:l});const y=uc(t.category);return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(Br,{currentLevel:r,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(y,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:pc(t.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${hc(t.difficulty)}`,children:jc(t.difficulty)})]}),e.jsx("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg overflow-hidden",children:e.jsx(yc,{language:"javascript",style:dn,customStyle:{padding:"1.5rem",borderRadius:"0.5rem",fontSize:"1.1rem",background:"transparent"},children:t.code})}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:t.options.map((f,z)=>e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w(f),disabled:l,className:`
              w-full break-words
              relative p-4 rounded-lg font-mono text-lg transition-colors
              ${d===f?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `,children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:z+1}),f]},f))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-3) aby wybrać odpowiedź"}),l&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:[m?"Świetnie! ":"Spróbuj jeszcze raz. ",t.explanation]})}),p&&!m&&e.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-js/10 border border-js/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-js",children:[e.jsx("span",{className:"font-medium",children:"Podpowiedź:"})," Zwróć uwagę na zakres zmiennych i ich dostępność w różnych kontekstach."]})})]},r)});Ir.displayName="ScopeExplorerGame";const gc=(t,s)=>S(void 0,null,function*(){try{const a=yield fetch(`${$}progress/points`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({points:s})});if(!a.ok)throw new Error("Nie udało się zaktualizować punktów");return yield a.json()}catch(a){throw console.error("Błąd podczas aktualizacji punktów:",a),a}}),Ne=()=>{const{token:t}=O(),s=ge(),a=oe({mutationFn:r=>S(void 0,null,function*(){return gc(t||"",r)}),onSuccess:()=>{s.invalidateQueries({queryKey:["userProgress"]})}});return{updatePoints:a.mutate,isUpdating:a.isPending,error:a.error}},Hr=i.memo(({score:t,timeElapsed:s,challenges:a,correctAnswers:r,categoryStats:n,onRestart:o})=>{const{updatePoints:d}=Ne();i.useEffect(()=>{d(t)},[t,d]);const c=u=>{const m=Math.floor(u/60),h=u%60;return`${m}:${h.toString().padStart(2,"0")}`},l=u=>{switch(u){case"scope":return E;case"closure":return Ee;case"hoisting":return vt;default:return E}};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:r===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",r,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:c(s)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),Object.entries(n).map(([u,m])=>{const h=l(u);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(h,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js",children:u==="scope"?"Zakres zmiennych":u==="closure"?"Domknięcia":"Hoisting"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Ukończone zadania: ",m.correct,"/",m.total]})]})]}),e.jsxs("div",{className:"text-sm font-medium text-js",children:[m.points," pkt"]})]},u)})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});Hr.displayName="ScopeExplorerSummary";const Gr=()=>{const t=i.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),s=i.useMemo(()=>({initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3}}),[]),a=i.useMemo(()=>({initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}}),[]);return{containerAnimation:t,gameAnimation:s,summaryAnimation:a}},Jr=i.memo(({isGameOver:t,gameStats:s,currentChallenge:a,finalTime:r,challenges:n,onScoreUpdate:o,onLevelComplete:d,onGameOver:c,onRestart:l})=>{const{gameAnimation:u,summaryAnimation:m}=Gr();return!a&&!t?null:e.jsx(H,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:t?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(Hr,{score:s.score,timeElapsed:r,challenges:n||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:e.jsx(Ir,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:d,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:c})},`level-${s.currentLevel}`)})})});Jr.displayName="GameContent";const Wr=({title:t,description:s,gameName:a="JSTypoHunter"}={})=>{const r=i.useMemo(()=>t?`${t} | CodeLinesJS`:`${a} - Gra programistyczna | CodeLinesJS`,[t,a]),n=i.useMemo(()=>s||`Zagraj w ${a} - interaktywną grę programistyczną, która pomoże Ci rozwinąć umiejętności kodowania.`,[s,a]);return{pageTitle:r,pageDescription:n}},Ur=i.memo(({isPaused:t=!1})=>{const{gameContent:s,isLoading:a,error:r}=mc(),{containerAnimation:n}=Gr(),{pageTitle:o,pageDescription:d}=Wr(),{isGameStarted:c,isGameOver:l,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:w,handleStartGame:g,handleGameOver:y}=xc({gameContent:s,isPaused:t});return e.jsx(_r,{isLoading:a,error:r,children:s&&e.jsx(e.Fragment,{children:c?e.jsxs(x.div,T(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:d})]}),e.jsx(Or,{stats:m,isGameOver:l,finalTime:u}),e.jsx(Jr,{isGameOver:l,gameStats:m,currentChallenge:h,finalTime:u,challenges:s.gameData,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:w})]})):e.jsx(fe,{gameContent:s,onStart:g})})})});Ur.displayName="ScopeExplorer";const bc=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),Qr=i.memo(({stats:t})=>{const s=a=>{const r=Math.floor(a/60),n=a%60;return`${r}:${n.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t.currentLevel,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:t.score})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 gap-3 flex items-center",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[s(t.timeElapsed),"/",s(t.maxTime)]})})]})]})]})});Qr.displayName="JSTypoHunterStats";const fc=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>t==null?void 0:t.games.find(n=>n.slug==="js-typo-hunter"),[t]),isLoading:s,error:a}},wc=t=>{switch(t){case"easy":return 10;case"medium":return 20;case"hard":return 30;default:return 10}},Nc=({gameContent:t,isPaused:s})=>{var v;const[a,r]=i.useState(!1),[n,o]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[d,c]=i.useState(!1),[l,u]=i.useState(0),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=we({maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,onTimeEnd:()=>{c(!0),u(m),j()},isPaused:s}),w=i.useCallback(N=>{var J;const b=(J=t==null?void 0:t.gameData)==null?void 0:J[n.currentLevel-1],L=wc((b==null?void 0:b.difficulty)||"easy"),A=N+L;o(I=>T(k({},I),{score:I.score+A,correctAnswers:I.correctAnswers+1}))},[n.currentLevel,t]),g=i.useCallback(()=>{c(!0),u(m),j()},[m,j]),y=i.useCallback(()=>{setTimeout(()=>{var b;const N=n.currentLevel+1;N>(((b=t==null?void 0:t.gameData)==null?void 0:b.length)||0)?(c(!0),u(m),j()):o(L=>T(k({},L),{currentLevel:N}))},1e3)},[n.currentLevel,t,m,j]),f=i.useCallback(()=>{var N;t&&(o({currentLevel:1,totalLevels:((N=t==null?void 0:t.gameData)==null?void 0:N.length)||0,score:0,timeElapsed:0,maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0}),c(!1),u(0),h(),p())},[h,p,t]),z=i.useCallback(()=>{r(!0),p()},[p]);i.useEffect(()=>{o(N=>T(k({},N),{timeElapsed:m}))},[m]),i.useEffect(()=>{t&&o(N=>{var b;return T(k({},N),{totalLevels:((b=t.gameData)==null?void 0:b.length)||0,maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300})})},[t]);const C=(v=t==null?void 0:t.gameData)==null?void 0:v[n.currentLevel-1];return{isGameStarted:a,isGameOver:d,gameStats:n,finalTime:l,currentChallenge:C,handleScoreUpdate:w,handleIncorrectAnswer:g,handleLevelComplete:y,handleRestart:f,handleStartGame:z}},vc=({title:t,description:s,gameName:a="JSTypoHunter"}={})=>{const r=i.useMemo(()=>t||`${a} | CodeLinesJS`,[t,a]),n=i.useMemo(()=>s||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[s,a]);return{pageTitle:r,pageDescription:n}},qr=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"animate-spin text-4xl text-js mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Ładowanie gry..."})]})}):s?e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"text-4xl text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-red-400",children:s.message})]})}):a?e.jsx(e.Fragment,{children:a}):e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"text-4xl text-yellow-500 mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Gra niedostępna"})]})}));qr.displayName="LoadingError";const Zr=i.memo(({type:t,message:s})=>t?e.jsx(H,{children:e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`
          absolute top-4 left-1/2 -translate-x-1/2 
          px-4 py-2 rounded-lg flex items-center gap-2
          ${t==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}
        `,children:[t==="success"?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:s})]})}):null);Zr.displayName="JSTypoHunterFeedback";const Kr=i.memo(({hint:t,isVisible:s})=>s?e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 p-3 bg-js/10 border border-js/20 rounded-lg flex items-start gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-js mb-1",children:"Podpowiedź:"}),e.jsx("div",{className:"text-sm text-gray-400",children:t})]})]}):null);Kr.displayName="JSTypoHunterHint";const kc=t=>{switch(t){case"syntax":return E;case"naming":return xn;case"logic":return be}},zc=t=>{switch(t){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Vr=i.memo(({currentChallenge:t,onScoreUpdate:s,onLevelComplete:a,onIncorrectAnswer:r})=>{const[n,o]=i.useState(t.code),[d,c]=i.useState({type:null,message:""}),[l,u]=i.useState(0),m=3,h=g=>{g!==void 0&&o(g)},p=(g,y)=>{const f=g.trim().replace(/\s+/g," "),z=y.trim().replace(/\s+/g," ");return f.includes(z)?!0:((N,b)=>{if(N===b)return 1;let L=0;const A=N.length>b.length?N:b,J=N.length>b.length?b:N;for(let I=0;I<J.length;I++)J[I]===A[I]&&L++;return L/A.length})(f,z)>.8},j=i.useCallback(()=>{const g=n.split(`
`);let y=!1;for(const f of g)if(p(f,t.correct)){y=!0;break}if(y){c({type:"success",message:"Świetnie! Poprawna odpowiedź!"});const f=Math.max(10-l*2,1);s(f),setTimeout(()=>{a(),o(t.code),c({type:null,message:""}),u(0)},1500)}else u(f=>f+1),l+1>=m?(c({type:"error",message:"Niestety, przekroczyłeś liczbę prób. Koniec gry!"}),setTimeout(()=>{r()},1500)):(c({type:"error",message:`Niestety, to nie jest prawidłowa odpowiedź. Pozostałe próby: ${m-l-1}`}),setTimeout(()=>{c({type:null,message:""})},1500))},[n,t,l,s,a,r]),w=kc(t.category);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[e.jsx(Zr,{type:d.type,message:d.message}),e.jsxs("div",{className:"mb-4 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(w,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:t.category==="syntax"?"Błąd składni":t.category==="naming"?"Błąd nazewnictwa":"Błąd logiki"})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${zc(t.difficulty)}`,children:t.difficulty==="easy"?"Łatwy":t.difficulty==="medium"?"Średni":"Trudny"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.explanation||"Znajdź i popraw błąd w kodzie."}),e.jsxs("p",{className:"mt-1 text-gray-500 text-sm",children:["Pozostałe próby: ",m-l]})]}),e.jsx("div",{className:"rounded-lg",children:e.jsx(as,{className:"w-full h-full flex flex-wrap",theme:"vs-dark",height:"400px",defaultLanguage:"javascript",value:n,onChange:h,options:{selectOnLineNumbers:!0,automaticLayout:!0,theme:"vs-dark",wordWrap:"on"}})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Sprawdź"})}),e.jsx(Kr,{hint:t.hint||"",isVisible:l>0})]})});Vr.displayName="JSTypoHunterGame";const Xr=i.memo(({score:t,timeElapsed:s,correctAnswers:a,totalLevels:r,onRestart:n})=>{const{updatePoints:o}=Ne();i.useEffect(()=>{o(t)},[t,o]);const d=c=>{const l=Math.floor(c/60),u=c%60;return`${l}:${u.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===r?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",r]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap",children:d(s)})]})]})]}),e.jsx("button",{onClick:n,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});Xr.displayName="JSTypoHunterSummary";const Yr=i.memo(({isGameOver:t,gameStats:s,finalTime:a,currentChallenge:r,totalLevels:n,onScoreUpdate:o,onLevelComplete:d,onIncorrectAnswer:c,onRestart:l})=>e.jsx(H,{mode:"wait",children:t?e.jsx(Xr,{score:s.score,timeElapsed:a,correctAnswers:s.correctAnswers,totalLevels:n,onRestart:l},"game-over"):e.jsx(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:e.jsx(Vr,{currentChallenge:r,onScoreUpdate:o,onLevelComplete:d,onIncorrectAnswer:c})},`level-${s.currentLevel}`)}));Yr.displayName="GameContent";const ei=i.memo(({isPaused:t=!1})=>{var y;const{gameContent:s,isLoading:a,error:r}=fc(),{pageTitle:n,pageDescription:o}=vc(),{isGameStarted:d,isGameOver:c,gameStats:l,finalTime:u,currentChallenge:m,handleScoreUpdate:h,handleIncorrectAnswer:p,handleLevelComplete:j,handleRestart:w,handleStartGame:g}=Nc({gameContent:s,isPaused:t});return e.jsx(qr,{isLoading:a,error:r,children:s&&e.jsx(e.Fragment,{children:d?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[e.jsxs(Y,{children:[e.jsx("title",{children:n}),e.jsx("meta",{name:"description",content:o})]}),e.jsx(Qr,{stats:l}),e.jsx(Yr,{isGameOver:c,gameStats:l,finalTime:u,currentChallenge:m,totalLevels:((y=s==null?void 0:s.gameData)==null?void 0:y.length)||0,onScoreUpdate:h,onLevelComplete:j,onIncorrectAnswer:p,onRestart:w})]}):e.jsx(fe,{gameContent:s,onStart:g})})})});ei.displayName="JSTypoHunter";const Sc=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"})),ti=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>{if(!(!t||!t.games||!Array.isArray(t.games)))return t.games.find(n=>n.slug==="async-quest")},[t]),isLoading:s,error:a}},Tc=({gameContent:t,isPaused:s})=>{var N;const[a,r]=i.useState(!1),n={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}},[o,d]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0,categoryStats:n}),[c,l]=i.useState(!1),[u,m]=i.useState(0),{timeElapsed:h,resetTimer:p,startTimer:j,stopTimer:w}=we({maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,onTimeEnd:()=>{l(!0),m(h),w()},isPaused:s});i.useEffect(()=>{t&&d(b=>{var L;return T(k({},b),{totalLevels:((L=t.gameData)==null?void 0:L.length)||0})})},[t]),i.useEffect(()=>{!c&&!s&&d(b=>T(k({},b),{timeElapsed:h}))},[h,c,s]),i.useEffect(()=>{!c&&!s&&j()},[c,s,j]);const g=i.useCallback((b,L)=>{d(A=>T(k({},A),{score:A.score+b,correctAnswers:A.correctAnswers+1,categoryStats:T(k({},A.categoryStats),{[L]:T(k({},A.categoryStats[L]),{total:A.categoryStats[L].total+1,correct:A.categoryStats[L].correct+1,points:A.categoryStats[L].points+b})})}))},[]),y=i.useCallback(()=>{const b=o.currentLevel+1;b>o.totalLevels?(l(!0),m(h),w()):d(L=>T(k({},L),{currentLevel:b}))},[o.currentLevel,o.totalLevels,h,w]),f=i.useCallback(()=>{l(!0),m(h),w()},[h,w]),z=i.useCallback(()=>{var L,A;if(!t)return;const b={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}};(L=t.gameData)==null||L.forEach(J=>{J.category&&b[J.category].total++}),d({currentLevel:1,totalLevels:((A=t.gameData)==null?void 0:A.length)||0,score:0,timeElapsed:0,maxTime:t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0,categoryStats:b}),l(!1),p(),j()},[t,p,j]),C=i.useCallback(()=>{r(!0),j()},[j]),v=(N=t==null?void 0:t.gameData)==null?void 0:N[o.currentLevel-1];return{isGameStarted:a,isGameOver:c,gameStats:o,finalTime:u,currentChallenge:v,handleScoreUpdate:g,handleLevelComplete:y,handleGameOver:f,handleRestart:z,handleStartGame:C}},Cc=({title:t,description:s,gameName:a="Async Quest"}={})=>{const r=i.useMemo(()=>t||`${a} | CodeLinesJS`,[t,a]),n=i.useMemo(()=>s||`${a} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`,[s,a]);return{pageTitle:r,pageDescription:n}},si=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-purple-300 mb-4",children:e.jsx(xe,{})}),e.jsx("p",{className:"text-xl font-medium text-purple-200",children:"Ładowanie gry..."})]}):s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(X,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:s.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-purple-300",children:"Gra niedostępna"})}));si.displayName="LoadingError";const ai=i.memo(({currentLevel:t,totalLevels:s})=>{const a=(t-1)/s*100;return e.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})});ai.displayName="AsyncQuestProgress";const Lc=()=>{const[t,s]=i.useState(!1),[a,r]=i.useState([]);return{executeCode:i.useCallback(o=>S(void 0,null,function*(){s(!0),r([]);try{const u={console:{log:(...h)=>{r(p=>[...p,h.map(j=>String(j)).join(" ")])},error:(...h)=>{r(p=>[...p,`Error: ${h.map(j=>String(j)).join(" ")}`])}},fetch:()=>Promise.resolve({json:()=>Promise.resolve({data:"mock data"})}),setTimeout:(h,p)=>setTimeout(h,Math.min(p,1e3)),Promise},m=`
        with (context) {
          ${o}
        }
      `;return yield new Function("context",m)(u),{success:!0,output:a}}catch(d){return console.error("Błąd podczas wykonywania kodu:",d),{success:!1,output:a,error:d.message}}finally{s(!1)}}),[]),isRunning:t,output:a,clearOutput:()=>r([])}},Pc=(t,s)=>{const a=l=>l.replace(/\s+/g," ").trim(),r=a(t),n=a(s);if(r===n)return!0;const o=l=>l.includes("async")&&l.includes("function"),d=l=>l.includes(".then(")&&l.includes(".catch("),c=l=>l.includes("try")&&l.includes("catch");return!(o(s)&&!o(t)||d(s)&&!d(t)||c(s)&&!c(t))},ri=i.memo(({type:t,message:s,code:a,explanation:r})=>e.jsx(x.div,{initial:{opacity:0,y:t==="hint"?-10:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${t==="hint"?"bg-js/10 border border-js/20":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[t==="hint"?e.jsx(be,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}):e.jsx(X,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`text-sm font-medium ${t==="hint"?"text-js":"text-red-400"}`,children:t==="hint"?"Podpowiedź:":"Błąd:"}),e.jsx("div",{className:"text-sm text-gray-400",children:s}),a&&e.jsx("div",{className:"mt-2 p-2 bg-dark-900 rounded-lg font-mono text-sm text-gray-300",children:a}),r&&e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-js",children:"Wyjaśnienie: "}),r]})]})]})}));ri.displayName="AsyncQuestHint";const It=(t,s)=>{if(s==="async-await"){if(!t.includes("async"))return{message:"Funkcja powinna być oznaczona jako asynchroniczna.",explanation:"Użyj słowa kluczowego async przed deklaracją funkcji.",example:"async function getData() { ... }"};if(!t.includes("await"))return{message:"Brak słowa kluczowego await przy wywołaniu asynchronicznym.",explanation:"Użyj await aby poczekać na wynik operacji asynchronicznej.",example:"const data = await fetchData();"}}if(s==="promises"){if(!t.includes(".catch"))return{message:"Brak obsługi błędów w łańcuchu Promise.",explanation:"Dodaj .catch() aby obsłużyć potencjalne błędy.",example:"fetch(url).then(...).catch(error => { ... })"};if(!t.includes(".then"))return{message:"Brak obsługi wyniku Promise.",explanation:"Użyj .then() aby obsłużyć wynik pomyślnego wykonania.",example:"promise.then(result => { ... })"}}return s==="callbacks"&&!t.includes("new Promise")?{message:"Przekształć callback w Promise.",explanation:"Użyj konstruktora Promise aby opakować callback.",example:"new Promise((resolve, reject) => { ... })"}:{message:"Sprawdź poprawność składni kodu.",explanation:"Upewnij się, że kod jest zgodny z wymaganiami zadania."}},ii=i.memo(({currentChallenge:t,onScoreUpdate:s,onLevelComplete:a,currentLevel:r,totalLevels:n,onGameOver:o})=>{const[d,c]=i.useState(t.code),[l,u]=i.useState(!1),[m,h]=i.useState(null),[p,j]=i.useState(null),[w,g]=i.useState(!1),y=i.useRef(null),f=i.useRef(null),z=i.useRef(null),{executeCode:C,isRunning:v,clearOutput:N}=Lc();i.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"center"})},[]);const b=K=>{y.current=K,g(!0),setTimeout(()=>{K.focus()},100)},L=i.useCallback(K=>{K!==void 0&&(c(K),h(null),j(null),N())},[N]),A=i.useCallback(()=>{z.current&&z.current.scrollIntoView({behavior:"smooth",block:"center"})},[]),J=i.useCallback(()=>S(void 0,null,function*(){if(d){u(!1),N(),j(null);try{const K=yield Pc(d,t.correct),ve=yield C(d);if(K&&ve.success)h(!0),u(!0),s(t.points,t.category),setTimeout(()=>{A()},100),setTimeout(()=>{a()},1500);else{h(!1),u(!0);const qe=It(d,t.category);j(qe),setTimeout(()=>{A()},100),setTimeout(()=>{o()},2e3)}}catch(K){h(!1),u(!0);const ve=It(d,t.category);j(ve),setTimeout(()=>{A()},100),setTimeout(()=>{o()},2e3)}}}),[d,t,C,s,a,o,N,A]),I={minimap:{enabled:!1},fontSize:14,lineHeight:24,fontFamily:"JetBrains Mono, monospace",fontLigatures:!0,wordWrap:"on",automaticLayout:!0,padding:{top:16,bottom:16},scrollBeyondLastLine:!1,folding:!0,lineNumbers:"on",renderLineHighlight:"all",suggestOnTriggerCharacters:!0,parameterHints:{enabled:!0},tabSize:2,theme:"vs-dark"};return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-js",children:t.title}),e.jsx(ai,{currentLevel:r,totalLevels:n})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-js mb-3",children:"Opis zadania"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:t.description}),e.jsxs("div",{className:"p-4 bg-dark-700/50 border border-js/20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-js mb-2",children:"Zadanie"}),e.jsx("p",{className:"text-gray-300 text-base",children:t.task})]})]})]}),e.jsxs("div",{ref:f,className:"bg-dark-800/50 rounded-xl p-6",children:[e.jsx("div",{className:"h-[500px] relative rounded-lg overflow-hidden border border-js/10",children:e.jsx(un,{height:"100%",defaultLanguage:"javascript",value:d,onChange:L,onMount:b,options:T(k({},I),{fontSize:16,lineHeight:26}),className:"w-full"})}),e.jsx("button",{onClick:J,disabled:v||!w,className:`mt-4 w-full px-6 py-3 rounded-lg font-medium transition-colors ${v||!w?"bg-gray-500 cursor-not-allowed":"bg-js text-dark hover:bg-js/90"}`,children:v?"Wykonywanie...":"Uruchom kod"})]}),l&&e.jsx(x.div,{ref:z,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-6",children:e.jsx(ri,{type:m?"hint":"error",message:m?"Świetnie! Rozwiązanie jest poprawne.":t.error,explanation:m||p==null?void 0:p.explanation,code:m||p==null?void 0:p.example})})]})});ii.displayName="AsyncQuestGame";const ce=i.memo(({category:t,stats:s})=>{const a=()=>{switch(t){case"promises":return E;case"async-await":return hn;case"callbacks":return pn}},r=()=>{switch(t){case"promises":return"Promises";case"async-await":return"Async/Await";case"callbacks":return"Callbacks"}},n=a(),o=s.correct/s.total*100;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(n,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:r()}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),e.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})});ce.displayName="CategoryProgress";const ni=i.memo(({score:t,timeElapsed:s,challenges:a,correctAnswers:r,categoryStats:n,onRestart:o})=>{const{updatePoints:d}=Ne();i.useEffect(()=>{d(t)},[t,d]);const c=l=>{const u=Math.floor(l/60),m=l%60;return`${u}:${m.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:r===a.length?"Gratulacje!":"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t," punktów"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",r,"/",a.length]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),e.jsx("div",{className:"text-lg font-bold text-js",children:c(s)})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),e.jsx(ce,{category:"promises",stats:n.promises}),e.jsx(ce,{category:"async-await",stats:n["async-await"]}),e.jsx(ce,{category:"callbacks",stats:n.callbacks})]}),e.jsx("button",{onClick:o,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]})});ni.displayName="AsyncQuestSummary";const oi=i.memo(({isGameOver:t,gameStats:s,finalTime:a,currentChallenge:r,gameContent:n,onScoreUpdate:o,onLevelComplete:d,onGameOver:c,onRestart:l})=>e.jsx(H,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:t?e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:e.jsx(ni,{score:s.score,timeElapsed:a,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):e.jsx(x.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:e.jsx(ii,{currentChallenge:r,onScoreUpdate:o,onLevelComplete:d,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:c})},`level-${s.currentLevel}`)})}));oi.displayName="GameContent";const li=i.memo(({stats:t,isGameOver:s,finalTime:a})=>{const r=o=>{const d=Math.floor(o/60),c=o%60;return`${d}:${c.toString().padStart(2,"0")}`},n=s?a:t.timeElapsed;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t.currentLevel,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:t.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",t.correctAnswers,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[r(n),"/",r(t.maxTime)]})})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx(ce,{category:"promises",stats:t.categoryStats.promises}),e.jsx(ce,{category:"async-await",stats:t.categoryStats["async-await"]}),e.jsx(ce,{category:"callbacks",stats:t.categoryStats.callbacks})]})]})});li.displayName="AsyncQuestStats";const ci=i.memo(({isGameStarted:t,isGameOver:s,gameStats:a,onGameStart:r})=>{const{gameContent:n}=ti();return t?e.jsx(li,{stats:a,isGameOver:s,finalTime:a.timeElapsed}):n?e.jsx(fe,{gameContent:n,onStart:r}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-purple-200",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",onClick:r,children:"Rozpocznij mimo to"})]})});ci.displayName="GameHeader";const di=i.memo(()=>{const{gameContent:t,isLoading:s,error:a}=ti(),{isGameStarted:r,isGameOver:n,gameStats:o,finalTime:d,currentChallenge:c,handleScoreUpdate:l,handleLevelComplete:u,handleGameOver:m,handleRestart:h,handleStartGame:p}=Tc({gameContent:t,isPaused:!1}),{pageTitle:j,pageDescription:w}=Cc();return e.jsxs("div",{className:"flex flex-col h-full text-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs(Y,{children:[e.jsx("title",{children:j}),e.jsx("meta",{name:"description",content:w})]}),e.jsx(si,{isLoading:s,error:a,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx(ci,{isGameStarted:r,isGameOver:n,gameStats:o,onGameStart:p}),r&&e.jsx(oi,{isGameOver:n,gameStats:o,finalTime:d,currentChallenge:c,gameContent:t,onScoreUpdate:l,onLevelComplete:u,onGameOver:m,onRestart:h})]})})]})});di.displayName="AsyncQuest";const Ac=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"})),mi=i.memo(({stats:t,isGameOver:s,finalTime:a})=>{const r=o=>{const d=Math.floor(o/60),c=o%60;return`${d}:${c.toString().padStart(2,"0")}`},n=s?a:t.timeElapsed;return e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t.currentLevel,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-lg font-bold text-js",children:t.score}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",t.correctAnswers,"/",t.totalLevels]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),e.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:e.jsxs("span",{className:"block w-full break-words",children:[r(n),"/",r(t.maxTime)]})})]})]})]})});mi.displayName="RegexRaiderStats";const Ec=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>t==null?void 0:t.games.find(n=>n.slug==="regex-raider"),[t==null?void 0:t.games]),isLoading:s,error:a}},$c=({gameContent:t,isPaused:s})=>{const[a,r]=i.useState(!1),[n,o]=i.useState(!1),[d,c]=i.useState(0),[l,u]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=we({maxTime:l.maxTime,onTimeEnd:()=>{o(!0),c(m),j()},isPaused:s});i.useEffect(()=>{t!=null&&t.gameData&&u(C=>T(k({},C),{totalLevels:t.gameData.length}))},[t]),i.useEffect(()=>{n||u(C=>T(k({},C),{timeElapsed:m}))},[m,n]);const w=i.useCallback(C=>{u(v=>T(k({},v),{score:v.score+C,correctAnswers:v.correctAnswers+1}))},[]),g=i.useCallback(()=>{u(C=>{const v=C.currentLevel+1;return v>C.totalLevels&&(o(!0),c(m),j()),T(k({},C),{currentLevel:v})})},[m,j]),y=i.useCallback(()=>{u(C=>({currentLevel:1,totalLevels:C.totalLevels,score:0,timeElapsed:0,maxTime:300,correctAnswers:0})),o(!1),h(),p()},[h,p]),f=i.useCallback(()=>{o(!0),c(m),j()},[m,j]),z=i.useCallback(()=>{r(!0),p()},[p]);return{isGameStarted:a,isGameOver:n,finalTime:d,gameStats:l,currentChallenge:t!=null&&t.gameData?t.gameData[l.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:g,handleRestart:y,handleStartGame:z,handleGameOver:f}},xi=()=>{const t=i.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),[]),s=i.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}}),[]),a=i.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3}}),[]);return{containerAnimation:t,gameAnimation:s,summaryAnimation:a}},ui=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:e.jsx(xe,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):s?e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsxs(x.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:e.jsx(X,{})}),e.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),e.jsx("div",{className:"text-gray-400",children:s.message})]})}):e.jsx(e.Fragment,{children:a}));ui.displayName="LoadingErrorContainer";const pi=i.memo(({pattern:t,explanation:s,example:a})=>e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(be,{className:"w-4 h-4 text-js"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:s}),t&&e.jsx("div",{className:"font-mono text-sm bg-dark-900/50 p-2 rounded text-js",children:t}),a&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Przykład: ",e.jsx("span",{className:"text-gray-400",children:a})]})]})]})}));pi.displayName="RegexRaiderHint";const hi=i.memo(({onScoreUpdate:t,onLevelComplete:s,currentLevel:a,onGameOver:r})=>{const{data:n}=ie(),o=n==null?void 0:n.games.find(g=>g.slug==="regex-raider"),[d,c]=i.useState(""),[l,u]=i.useState([]),[m,h]=i.useState(null);if(!o)return null;const p=o.gameData[a-1],j=i.useCallback(g=>{const y=g.target.value;c(y),h(null);try{const f=new RegExp(y,"g"),z=p.text.match(f)||[];u(z)}catch(f){u([])}},[p]),w=i.useCallback(()=>{try{const g=p.text.match(new RegExp(d,"g"))||[],y=p.text.match(new RegExp(p.correctRegex,"g"))||[],f=g.length===y.length&&g.every(z=>y.includes(z));h(f),f?(t(10),setTimeout(()=>{s(),c(""),u([]),h(null)},1500)):setTimeout(()=>{r()},1500)}catch(g){h(!1),setTimeout(()=>{r()},1500)}},[d,p,t,s,r]);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Zadanie:"}),e.jsx("div",{className:"text-lg text-js mb-4",children:p.task}),e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Tekst:"}),e.jsx("div",{className:"font-mono bg-dark-900/50 p-4 rounded-lg text-gray-300",children:p.text})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:d,onChange:j,placeholder:"Wpisz wyrażenie regularne...",style:{backgroundColor:"#1a1a1a"},className:"bg-dark-900 flex-1 border border-js/10 rounded-lg px-4 py-2 text-js font-mono placeholder-yellow-500"}),e.jsx("button",{onClick:w,className:"px-6 py-2 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Sprawdź"})]}),l.length>0&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-dark-900/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Znalezione dopasowania:"}),e.jsx("div",{className:"space-y-1",children:l.map((g,y)=>e.jsx("div",{className:"font-mono text-js",children:g},y))})]}),m!==null&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsx("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:m?"Świetnie! Wyrażenie regularne jest poprawne!":"Wyrażenie nie znajduje wszystkich wymaganych dopasowań."})}),m===!1&&e.jsx(pi,{pattern:p.correctRegex,explanation:"Niepoprawne wyrażenie regularne. Gra zostanie zakończona...",example:`Poprawne wyrażenie: ${p.correctRegex}`})]})]})});hi.displayName="RegexRaiderGame";const ji=i.memo(({score:t,timeElapsed:s,correctAnswers:a,totalLevels:r,onRestart:n})=>{const{updatePoints:o}=Ne();i.useEffect(()=>{o(t)},[t,o]);const d=c=>{const l=Math.floor(c/60),u=c%60;return`${l}:${u.toString().padStart(2,"0")}`};return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:"Koniec gry!"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[t," punktów"]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Rozwiązane zadania"}),e.jsxs("div",{className:"text-lg font-bold text-js",children:[a,"/",r]})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-js"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Czas gry"}),e.jsx("div",{className:"text-lg font-bold text-js",children:d(s)})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:n,className:"px-6 py-3 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})})]})});ji.displayName="RegexRaiderSummary";const yi=i.memo(({isGameOver:t,gameStats:s,finalTime:a,onScoreUpdate:r,onLevelComplete:n,onGameOver:o,onRestart:d})=>{const{gameAnimation:c,summaryAnimation:l}=xi();return e.jsx(H,{mode:"wait",children:t?e.jsx(x.div,{initial:l.initial,animate:l.animate,exit:l.exit,transition:l.transition,children:e.jsx(ji,{score:s.score,timeElapsed:a,correctAnswers:s.correctAnswers,totalLevels:s.totalLevels,onRestart:d})},"game-over"):e.jsx(x.div,{initial:c.initial,animate:c.animate,exit:c.exit,transition:c.transition,className:"w-full",children:e.jsx(hi,{onScoreUpdate:r,onLevelComplete:n,currentLevel:s.currentLevel,onGameOver:o})},`level-${s.currentLevel}`)})});yi.displayName="GameContent";const gi=i.memo(({isPaused:t=!1})=>{const{gameContent:s,isLoading:a,error:r}=Ec(),{containerAnimation:n}=xi(),{pageTitle:o,pageDescription:d}=Wr(),{isGameStarted:c,isGameOver:l,finalTime:u,gameStats:m,handleScoreUpdate:h,handleLevelComplete:p,handleRestart:j,handleStartGame:w,handleGameOver:g}=$c({gameContent:s,isPaused:t});return e.jsx(ui,{isLoading:a,error:r,children:s&&e.jsx(e.Fragment,{children:c?e.jsxs(x.div,T(k({},n),{className:"w-full space-y-6",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:d})]}),e.jsx(mi,{stats:m,isGameOver:l,finalTime:u}),e.jsx(yi,{isGameOver:l,gameStats:m,finalTime:u,onScoreUpdate:h,onLevelComplete:p,onGameOver:g,onRestart:j})]})):e.jsx(fe,{gameContent:s,onStart:w})})})});gi.displayName="RegexRaider";const Rc=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"})),bi=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>{if(!(!t||!t.games||!Array.isArray(t.games)))return t.games.find(n=>n.slug==="js-quiz")},[t]),isLoading:s,error:a}},Fc=({gameContent:t,isPaused:s})=>{var C;const[a,r]=i.useState(!1),[n,o]=i.useState(!1),[d,c]=i.useState(0),[l,u]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=we({maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,onTimeEnd:()=>{o(!0),c(m),j()},isPaused:s});i.useEffect(()=>{u(v=>T(k({},v),{timeElapsed:m}))},[m]),i.useEffect(()=>{if(!(t!=null&&t.gameData))return;const v={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;b&&v[b]&&(v[b].total++,v[b].points+=N.points||0)}),u(N=>T(k({},N),{totalLevels:t.gameData.length,maxTime:t.estimatedTime?t.estimatedTime*60:300,categoryStats:v}))},[t]);const w=i.useCallback((v,N)=>{u(b=>T(k({},b),{score:b.score+v,correctAnswers:b.correctAnswers+1,categoryStats:T(k({},b.categoryStats),{[N]:b.categoryStats[N]?T(k({},b.categoryStats[N]),{correct:b.categoryStats[N].correct+1}):{total:0,correct:1,points:v}})}))},[]),g=i.useCallback(()=>{var N;const v=l.currentLevel+1;if(v>(((N=t==null?void 0:t.gameData)==null?void 0:N.length)||0)){o(!0),c(m),j();return}u(b=>T(k({},b),{currentLevel:v}))},[l.currentLevel,m,(C=t==null?void 0:t.gameData)==null?void 0:C.length,j]),y=i.useCallback(()=>{if(!(t!=null&&t.gameData))return;const v={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;b&&v[b]&&(v[b].total++,v[b].points+=N.points||0)}),u({currentLevel:1,totalLevels:t.gameData.length,score:0,timeElapsed:0,maxTime:t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0,categoryStats:v}),o(!1),c(0),h(),p()},[h,p,t]),f=i.useCallback(()=>{r(!0),p()},[p]),z=i.useCallback(()=>{o(!0),c(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:d,gameStats:l,currentChallenge:t!=null&&t.gameData?t.gameData[l.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:g,handleRestart:y,handleStartGame:f,handleGameOver:z}},Dc=({title:t,description:s,gameName:a="JS Quiz"}={})=>{const r=i.useMemo(()=>t||`${a} - Quiz JavaScript | CodeLinesJS`,[t,a]),n=i.useMemo(()=>s||`Sprawdź swoją wiedzę z JavaScript w quizie ${a}. Odpowiadaj na pytania i zdobywaj punkty za poprawne odpowiedzi.`,[s,a]);return{pageTitle:r,pageDescription:n}},fi=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:e.jsx(xe,{})}),e.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie gry..."})]}):s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(X,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:s.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-js/80",children:"Gra niedostępna"})}));fi.displayName="LoadingErrorContainer";const wi=t=>{switch(t){case"basics":return E;case"advanced":return yn;case"frameworks":return jn;default:return E}},Ni=t=>{switch(t){case"basics":return"Podstawy JavaScript";case"advanced":return"Zaawansowany JS";case"frameworks":return"Frameworki JS"}},Oc=t=>{switch(t){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400"}},_c=t=>{switch(t){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},vi=i.memo(({currentLevel:t,totalLevels:s})=>{const a=t/s*100;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-1 text-sm text-gray-400",children:[e.jsxs("span",{children:["Pytanie ",t," z ",s]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5}})})]})});vi.displayName="JSQuizProgress";const Lt=()=>{const t=i.useMemo(()=>({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}}),[]),s=i.useMemo(()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4}}),[]),a=i.useMemo(()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}}),[]),r=i.useMemo(()=>({initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.3}}),[]);return{containerAnimation:t,gameAnimation:s,summaryAnimation:a,optionAnimation:r}},ki=i.memo(({currentChallenge:t,onScoreUpdate:s,onLevelComplete:a,currentLevel:r,totalLevels:n,onGameOver:o})=>{const[d,c]=i.useState(null),[l,u]=i.useState(!1),[m,h]=i.useState(null),{optionAnimation:p}=Lt(),j=i.useCallback(y=>{c(y);const f=y===t.correct;h(f),u(!0),f?(s(t.points||10,t.category),setTimeout(()=>{a(),c(null),u(!1),h(null)},1500)):setTimeout(()=>{o()},2e3)},[t,s,a,o]),w=i.useCallback(y=>{!l&&y<t.options.length&&j(t.options[y])},[l,t.options,j]);Mr({onNumber1:()=>w(0),onNumber2:()=>w(1),onNumber3:()=>w(2),onNumber4:()=>w(3),disabled:l});const g=wi(t.category)||E;return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(vi,{currentLevel:r,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(g,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Ni(t.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Oc(t.difficulty)}`,children:_c(t.difficulty)})]}),e.jsx("div",{className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:t.question})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.options.map((y,f)=>e.jsxs(x.button,T(k({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(y),disabled:l,className:`
              w-full
              relative p-4 rounded-lg font-medium text-left transition-colors
              ${d===y?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `},p),{transition:T(k({},p.transition),{delay:f*.1}),children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:f+1}),y]}),y))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-4) aby wybrać odpowiedź"}),l&&e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm ${m?"text-green-400":"text-red-400"}`,children:[m?"Świetnie! ":"Spróbuj jeszcze raz. ",t.explanation]})})]},r)});ki.displayName="JSQuizGame";const zi=i.memo(({score:t,timeElapsed:s,challenges:a,correctAnswers:r,categoryStats:n,onRestart:o})=>{const{updatePoints:d}=Ne();i.useEffect(()=>{d(t)},[t,d]);const c=m=>{const h=Math.floor(m/60),p=m%60;return`${h}:${p<10?"0":""}${p}`},l=(m,h)=>h>0?Math.round(m/h*100):0,u=()=>n?Object.entries(n).filter(([m,h])=>h&&typeof h=="object").map(([m,h])=>{const p=wi(m),j=l(h.correct||0,h.total||0);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-js"}),e.jsx("h3",{className:"text-lg font-medium",children:Ni(m)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsxs("span",{children:["Poprawne: ",h.correct||0,"/",h.total||0]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5,delay:.5}})})]},m)}):null;return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Quizu!"}),e.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",t," punktów, odpowiadając poprawnie na ",r," z"," ",(a==null?void 0:a.length)||0," pytań."]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(Z,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-2xl font-bold",children:t})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(ee,{className:"text-3xl text-green-400 mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),e.jsxs("div",{className:"text-2xl font-bold",children:[r,"/",(a==null?void 0:a.length)||0]})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(D,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),e.jsx("div",{className:"text-2xl font-bold",children:c(s)})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u()})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:e.jsxs("button",{onClick:o,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[e.jsx(gt,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})});zi.displayName="JSQuizSummary";const Si=i.memo(({isGameOver:t,gameStats:s,currentChallenge:a,finalTime:r,gameContent:n,onScoreUpdate:o,onLevelComplete:d,onGameOver:c,onRestart:l})=>{const{gameAnimation:u,summaryAnimation:m}=Lt();return!a&&!t?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})}):e.jsx(H,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:t?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(zi,{score:s.score,timeElapsed:r,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:a&&e.jsx(ki,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:d,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:c})},`level-${s.currentLevel}`)})})});Si.displayName="GameContent";const Ti=i.memo(({stats:t,isGameOver:s,finalTime:a})=>{const r=o=>{const d=Math.floor(o/60),c=o%60;return`${d}:${c<10?"0":""}${c}`},n=s?a:t.timeElapsed;return e.jsx("div",{className:"w-full p-4 bg-dark-800/50 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(x.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx(Z,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"font-semibold",children:t.score})]})]}),e.jsxs(x.div,{className:"flex items-center gap-2 text-green-400",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(ee,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne"}),e.jsxs("div",{className:"font-semibold",children:[t.correctAnswers," / ",t.totalLevels]})]})]}),e.jsxs(x.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(D,{className:"text-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Czas"}),e.jsx("div",{className:"font-semibold",children:r(n)})]})]})]})})});Ti.displayName="JSQuizStats";const ct=i.memo(({isGameStarted:t,isGameOver:s,gameStats:a,onGameStart:r})=>{const{gameContent:n}=bi();return t?e.jsx(Ti,{stats:a,isGameOver:s,finalTime:a.timeElapsed}):n?e.jsx(fe,{gameContent:n,onStart:r}):e.jsxs("div",{className:"w-full p-6 text-center",children:[e.jsx("p",{className:"text-lg text-js/80",children:"Brak danych gry"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-js/80 hover:bg-js text-white rounded-md transition-colors",onClick:r,children:"Rozpocznij mimo to"})]})});ct.displayName="GameHeader";const Ci=i.memo(({isPaused:t=!1})=>{const{gameContent:s,isLoading:a,error:r}=bi(),{containerAnimation:n}=Lt(),{pageTitle:o,pageDescription:d}=Dc(),{isGameStarted:c,isGameOver:l,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:w,handleStartGame:g,handleGameOver:y}=Fc({gameContent:s,isPaused:t});return e.jsx(fi,{isLoading:a,error:r,children:s&&e.jsx(e.Fragment,{children:c?e.jsxs(x.div,T(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:d})]}),e.jsx(ct,{isGameStarted:c,isGameOver:l,gameStats:m,onGameStart:g}),e.jsx(Si,{isGameOver:l,gameStats:m,currentChallenge:h,finalTime:u,gameContent:s,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:w})]})):e.jsx(ct,{isGameStarted:c,isGameOver:l,gameStats:m,onGameStart:g})})})});Ci.displayName="JSQuiz";const Mc=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"})),Bc=()=>{const{data:t,isLoading:s,error:a}=ie();return{gameContent:i.useMemo(()=>{if(!(!t||!t.games||!Array.isArray(t.games)))return t.games.find(n=>n.slug==="method-quiz")},[t]),isLoading:s,error:a}},Li=i.memo(({isLoading:t,error:s,children:a})=>t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:e.jsx(xe,{})}),e.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie Method Quiz..."})]}):s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:e.jsx(X,{})}),e.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),e.jsx("p",{className:"text-md text-red-200",children:s.message})]}):a?e.jsx(e.Fragment,{children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-lg text-js/80",children:"Method Quiz niedostępny"})}));Li.displayName="LoadingErrorContainer";const Pt=()=>i.useMemo(()=>({containerAnimation:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeOut"}},gameAnimation:{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3}},summaryAnimation:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}},optionAnimation:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2}}}),[]),Ic=()=>i.useMemo(()=>({pageTitle:"Method Quiz | CodeLinesJS",pageDescription:"Sprawdź swoją znajomość metod JavaScript! Uzupełnij brakujące metody w kodzie i zobacz jak dobrze znasz Array, String, Object i DOM methods."}),[]),Hc=({gameContent:t,isPaused:s})=>{var C;const[a,r]=i.useState(!1),[n,o]=i.useState(!1),[d,c]=i.useState(0),[l,u]=i.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}}}),{timeElapsed:m,resetTimer:h,startTimer:p,stopTimer:j}=we({maxTime:t!=null&&t.estimatedTime?t.estimatedTime*60:300,onTimeEnd:()=>{o(!0),c(m),j()},isPaused:s});i.useEffect(()=>{u(v=>T(k({},v),{timeElapsed:m}))},[m]),i.useEffect(()=>{if(!(t!=null&&t.gameData))return;const v={"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;b&&v[b]&&(v[b].total++,v[b].points+=N.points||0)}),u(N=>T(k({},N),{totalLevels:t.gameData.length,maxTime:t.estimatedTime?t.estimatedTime*60:300,categoryStats:v}))},[t]);const w=i.useCallback((v,N)=>{u(b=>T(k({},b),{score:b.score+v,correctAnswers:b.correctAnswers+1,categoryStats:T(k({},b.categoryStats),{[N]:b.categoryStats[N]?T(k({},b.categoryStats[N]),{correct:b.categoryStats[N].correct+1}):{total:0,correct:1,points:v}})}))},[]),g=i.useCallback(()=>{var N;const v=l.currentLevel+1;if(v>(((N=t==null?void 0:t.gameData)==null?void 0:N.length)||0)){o(!0),c(m),j();return}u(b=>T(k({},b),{currentLevel:v}))},[l.currentLevel,m,(C=t==null?void 0:t.gameData)==null?void 0:C.length,j]),y=i.useCallback(()=>{if(!(t!=null&&t.gameData))return;const v={"array-methods":{total:0,correct:0,points:0},"string-methods":{total:0,correct:0,points:0},"object-methods":{total:0,correct:0,points:0},"dom-methods":{total:0,correct:0,points:0}};t.gameData.forEach(N=>{const b=N.category;b&&v[b]&&(v[b].total++,v[b].points+=N.points||0)}),u({currentLevel:1,totalLevels:t.gameData.length,score:0,timeElapsed:0,maxTime:t.estimatedTime?t.estimatedTime*60:300,correctAnswers:0,categoryStats:v}),o(!1),c(0),h(),p()},[h,p,t]),f=i.useCallback(()=>{r(!0),p()},[p]),z=i.useCallback(()=>{o(!0),c(m),j()},[m,j]);return{isGameStarted:a,isGameOver:n,finalTime:d,gameStats:l,currentChallenge:t!=null&&t.gameData?t.gameData[l.currentLevel-1]:void 0,handleScoreUpdate:w,handleLevelComplete:g,handleRestart:y,handleStartGame:f,handleGameOver:z}},Gc=({currentLevel:t,totalLevels:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Pytanie ",t," z ",s]}),e.jsx("div",{className:"w-48 bg-dark-700 rounded-full h-2",children:e.jsx("div",{className:"bg-js h-2 rounded-full transition-all duration-300",style:{width:`${t/s*100}%`}})})]}),Jc=t=>{switch(t){case"array-methods":return rt;case"string-methods":return is;case"object-methods":return Ee;case"dom-methods":return Nt;default:return E}},Wc=t=>{switch(t){case"array-methods":return"Array Methods";case"string-methods":return"String Methods";case"object-methods":return"Object Methods";case"dom-methods":return"DOM Methods";default:return"Methods"}},Uc=t=>{switch(t){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},Qc=t=>{switch(t){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny";default:return t}},Pi=i.memo(({currentChallenge:t,onScoreUpdate:s,onLevelComplete:a,currentLevel:r,totalLevels:n,onGameOver:o})=>{const[d,c]=i.useState(null),[l,u]=i.useState(!1),[m,h]=i.useState(null),{optionAnimation:p}=Pt(),j=i.useCallback(g=>{c(g);const y=g===t.correct;h(y),u(!0),y?(s(t.points||10,t.category),setTimeout(()=>{a(),c(null),u(!1),h(null)},2500)):setTimeout(()=>{o()},3e3)},[t,s,a,o]),w=Jc(t.category);return e.jsxs(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[e.jsx(Gc,{currentLevel:r,totalLevels:n}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:e.jsx(w,{className:"w-4 h-4 text-js"})}),e.jsx("div",{className:"text-sm text-gray-400",children:Wc(t.category)})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Uc(t.difficulty)}`,children:Qc(t.difficulty)})]}),e.jsxs("div",{className:"p-6 bg-dark-900/80 border border-js/20 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(E,{className:"text-js text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Fragment kodu"})]}),e.jsx("pre",{className:"text-green-400 font-mono text-sm whitespace-pre-wrap overflow-x-auto",children:t.codeSnippet})]}),e.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-2",children:["Jaka metoda powinna być w miejscu ",e.jsx("span",{className:"text-js font-mono",children:"___"}),"?"]}),t.hint&&e.jsxs("p",{className:"text-sm text-gray-400",children:["💡 Podpowiedź: ",t.hint]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.options.map((g,y)=>e.jsxs(x.button,T(k({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(g),disabled:l,className:`
              w-full
              relative p-4 rounded-lg font-medium text-left transition-colors font-mono
              ${d===g?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}
            `},p),{transition:T(k({},p.transition),{delay:y*.1}),children:[e.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500 font-sans",children:String.fromCharCode(65+y)}),e.jsxs("div",{className:"pl-6",children:[g,"()"]})]}),g))}),e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Wybierz poprawną metodę JavaScript (A-D)"}),l&&e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg space-y-3 ${m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:[e.jsxs("p",{className:`text-sm font-medium ${m?"text-green-400":"text-red-400"}`,children:[m?"🎉 Świetnie!":"❌ Niepoprawne.",t.explanation]}),t.expectedOutput&&e.jsxs("div",{className:"p-3 bg-dark-900/50 rounded border border-js/10",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Oczekiwany wynik:"}),e.jsx("code",{className:"text-green-400 font-mono text-sm",children:t.expectedOutput})]}),m&&e.jsxs("p",{className:"text-sm text-green-300",children:["+",t.points||10," punktów"]})]})]},r)});Pi.displayName="MethodQuizGame";const qc=t=>{switch(t){case"array-methods":return rt;case"string-methods":return is;case"object-methods":return Ee;case"dom-methods":return Nt;default:return rt}},Zc=t=>{switch(t){case"array-methods":return"Array Methods";case"string-methods":return"String Methods";case"object-methods":return"Object Methods";case"dom-methods":return"DOM Methods";default:return"Methods"}},Ai=i.memo(({score:t,timeElapsed:s,challenges:a,correctAnswers:r,categoryStats:n,onRestart:o})=>{const{updatePoints:d}=Ne();i.useEffect(()=>{d(t)},[t,d]);const c=m=>{const h=Math.floor(m/60),p=m%60;return`${h}:${p<10?"0":""}${p}`},l=(m,h)=>h>0?Math.round(m/h*100):0,u=()=>n?Object.entries(n).filter(([m,h])=>h&&typeof h=="object").map(([m,h])=>{const p=qc(m),j=l(h.correct||0,h.total||0);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-js"}),e.jsx("h3",{className:"text-lg font-medium",children:Zc(m)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsxs("span",{children:["Poprawne: ",h.correct||0,"/",h.total||0]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${j}%`},transition:{duration:.5,delay:.5}})})]},m)}):null;return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Method Quiz!"}),e.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",t," punktów, odpowiadając poprawnie na ",r," z"," ",(a==null?void 0:a.length)||0," pytań o metodach JavaScript."]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(Z,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),e.jsx("div",{className:"text-2xl font-bold",children:t})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(ee,{className:"text-3xl text-green-400 mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),e.jsxs("div",{className:"text-2xl font-bold",children:[r,"/",(a==null?void 0:a.length)||0]})]}),e.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(D,{className:"text-3xl text-js mb-2"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),e.jsx("div",{className:"text-2xl font-bold",children:c(s)})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u()})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:e.jsxs("button",{onClick:o,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[e.jsx(gt,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})});Ai.displayName="MethodQuizSummary";const Ei=i.memo(({isGameOver:t,gameStats:s,currentChallenge:a,finalTime:r,gameContent:n,onScoreUpdate:o,onLevelComplete:d,onGameOver:c,onRestart:l})=>{const{gameAnimation:u,summaryAnimation:m}=Pt();return!a&&!t?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})}):e.jsx(H,{mode:"wait",children:e.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:t?e.jsx(x.div,{initial:m.initial,animate:m.animate,exit:m.exit,transition:m.transition,children:e.jsx(Ai,{score:s.score,timeElapsed:r,challenges:(n==null?void 0:n.gameData)||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):e.jsx(x.div,{initial:u.initial,animate:u.animate,exit:u.exit,transition:u.transition,className:"w-full",children:a&&e.jsx(Pi,{currentChallenge:a,onScoreUpdate:o,onLevelComplete:d,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:c})},`level-${s.currentLevel}`)})})});Ei.displayName="GameContent";const Ht=({isGameStarted:t,onGameStart:s,gameStats:a})=>t?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-800/50 border-b border-js/10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Method Quiz"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Poziom: ",a.currentLevel,"/",a.totalLevels]}),e.jsxs("span",{children:["Punkty: ",a.score]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Method Quiz"}),e.jsx("p",{className:"text-gray-400 text-center mb-8 max-w-md",children:"Sprawdź swoją znajomość metod JavaScript! Uzupełnij brakujące metody w fragmentach kodu."}),e.jsx("button",{onClick:s,className:"bg-js hover:bg-js/80 text-dark px-8 py-3 rounded-lg font-medium text-lg transition-colors",children:"Rozpocznij Quiz"})]}),$i=i.memo(({isPaused:t=!1})=>{const{gameContent:s,isLoading:a,error:r}=Bc(),{containerAnimation:n}=Pt(),{pageTitle:o,pageDescription:d}=Ic(),{isGameStarted:c,isGameOver:l,finalTime:u,gameStats:m,currentChallenge:h,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:w,handleStartGame:g,handleGameOver:y}=Hc({gameContent:s,isPaused:t});return e.jsx(Li,{isLoading:a,error:r,children:s&&e.jsx(e.Fragment,{children:c?e.jsxs(x.div,T(k({},n),{className:"w-full h-full flex flex-col",children:[e.jsxs(Y,{children:[e.jsx("title",{children:o}),e.jsx("meta",{name:"description",content:d})]}),e.jsx(Ht,{isGameStarted:c,isGameOver:l,gameStats:m,onGameStart:g}),e.jsx(Ei,{isGameOver:l,gameStats:m,currentChallenge:h,finalTime:u,gameContent:s,onScoreUpdate:p,onLevelComplete:j,onGameOver:y,onRestart:w})]})):e.jsx(Ht,{isGameStarted:c,isGameOver:l,gameStats:m,onGameStart:g})})})});$i.displayName="MethodQuiz";const Kc=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"}));export{nd as C,od as D,ud as G,dd as L,jd as R,cd as S,V as _,ld as a,md as b,xd as c,pd as d,hd as e};
