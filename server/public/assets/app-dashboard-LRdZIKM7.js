const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-components-D-uSeCsa.js","assets/vendor-react-BdIbG8GJ.js","assets/vendor-other-emba8bVk.js","assets/vendor-monaco-Cqmi-0nO.js","assets/vendor-framer-motion-1lk-eln3.js","assets/app-auth-CJJBmgdH.js","assets/app-community-Zxu4pqBB.js","assets/vendor-charts-5wQIs0x5.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,o=(e,s)=>{for(var t in s||(s={}))i.call(s,t)&&r(e,t,s[t]);if(a)for(var t of a(s))n.call(s,t)&&r(e,t,s[t]);return e},l=(e,a)=>s(e,t(a)),c=(e,s,t)=>new Promise(((a,i)=>{var n=e=>{try{o(t.next(e))}catch(s){i(s)}},r=e=>{try{o(t.throw(e))}catch(s){i(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,r);o((t=t.apply(e,s)).next())}));import{_ as d,u as m,A as x}from"./app-auth-CJJBmgdH.js";import{r as u,_ as p,j as h,$ as j,H as g,a0 as y,a1 as b,p as v,z as f,a2 as w,y as N,Q as k,n as S,a3 as z,a4 as C,u as L,a5 as T,U as P,a6 as E,a7 as A,a8 as O,A as R,D as $,L as _,a9 as D,aa as G,q as B,P as M,s as U,ab as F,c as W,ac as I,v as H,M as q,h as J,ad as V,ae as Z,af as K,ag as Q,ah as X,ai as Y,aj as ee,ak as se,al as te,am as ae,an as ie,ao as ne,w as re,d as oe,N as le,m as ce,ap as de,e as me,g as xe,aq as ue,ar as pe,as as he,at as je,f as ge,au as ye,av as be,aw as ve,ax as fe,ay as we,az as Ne,aA as ke,aB as Se,aC as ze,aD as Ce,aE as Le,aF as Te,aG as Pe,aH as Ee,aI as Ae,J as Oe,O as Re,aJ as $e}from"./vendor-react-BdIbG8GJ.js";import{L as _e,f as De,g as Ge,h as Be,i as Me,c as Ue,B as Fe}from"./app-components-D-uSeCsa.js";import{m as We,A as Ie,a as He}from"./vendor-framer-motion-1lk-eln3.js";import{u as qe,M as Je}from"./app-community-Zxu4pqBB.js";import{f as Ve,p as Ze,z as Ke,t as Qe,c as Xe}from"./vendor-other-emba8bVk.js";import{R as Ye,L as es,C as ss,X as ts,Y as as,T as is,b as ns}from"./vendor-charts-5wQIs0x5.js";import{l as rs}from"./vendor-monaco-Cqmi-0nO.js";const os={activeView:"community"},ls=(e,s)=>"SET_ACTIVE_VIEW"===s.type?l(o({},e),{activeView:s.payload}):e,cs=u.memo((()=>{const e=p().pathname,s="/dashboard/community"===e||"/dashboard/community/"===e||/^\/dashboard\/community\/?$/.test(e),t=e.includes("/dashboard/community/ranking");return h.jsxs("div",{className:"flex gap-4 mb-8 pb-2",children:[h.jsxs(j,{to:"/dashboard/community",className:"flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all "+(s?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"),children:[h.jsx("i",{className:"fas fa-newspaper"}),"Aktualności"]}),h.jsxs(j,{to:"/dashboard/community/ranking",className:"flex items-center gap-2 px-6 py-3 font-semibold rounded-lg transition-all "+(t?"bg-js/10 text-js border-b-2 border-js shadow-md":"text-gray-400 hover:text-js hover:bg-js/5"),children:[h.jsx("i",{className:"fas fa-trophy"}),"Ranking"]})]})}));cs.displayName="CommunityNavigation";const ds=u.lazy((()=>d((()=>Promise.resolve().then((()=>xn))),void 0))),ms=u.lazy((()=>d((()=>Promise.resolve().then((()=>vn))),void 0))),xs=u.memo((()=>{const e=p(),{state:{activeView:s},setActiveView:t}=(()=>{const[e,s]=u.useReducer(ls,os);return{state:e,setActiveView:u.useCallback((e=>{s({type:"SET_ACTIVE_VIEW",payload:e})}),[])}})();return u.useEffect((()=>{const a=e.pathname.split("community").pop()||"community";a!==s&&t(a)}),[e.pathname,s,t]),h.jsxs("div",{className:"p-8 w-full min-h-screen bg-dark/50 backdrop-blur-sm",children:[h.jsxs(g,{children:[h.jsx("title",{children:"Community | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Community CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx("div",{className:"max-w-7xl mx-auto",children:h.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[h.jsx(cs,{}),h.jsxs(y,{children:[h.jsx(b,{index:!0,element:h.jsx(u.Suspense,{fallback:h.jsx(_e,{text:"Ładowanie aktualności..."}),children:h.jsx(ds,{})})}),h.jsx(b,{path:"ranking",element:h.jsx(u.Suspense,{fallback:h.jsx(_e,{text:"Ładowanie rankingu..."}),children:h.jsx(ms,{})})})]})]})})]})}));xs.displayName="CommunitySection";const us=Object.freeze(Object.defineProperty({__proto__:null,CommunitySection:xs},Symbol.toStringTag,{value:"Module"})),ps={expanded:{width:"240px",transition:{type:"spring",stiffness:300,damping:30}},collapsed:{width:"100px",transition:{type:"spring",stiffness:300,damping:30}}},hs={expanded:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:30}},collapsed:{opacity:0,x:-10,transition:{duration:.2}}},js=u.memo((({isExpanded:e})=>h.jsx("div",{className:"px-4 mb-8",children:h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-js/20 flex items-center justify-center",children:h.jsx(v,{className:"text-xl text-js"})}),h.jsx(Ie,{mode:"wait",children:e&&h.jsx(We.span,{variants:hs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-bold text-js font-space",children:"CodeLinesJS"})})]})})));js.displayName="NavigationLogo";const gs=u.memo((({icon:e,label:s,isActive:t=!1,isExpanded:a,onClick:i,variant:n="default",id:r})=>h.jsxs(We.button,{onClick:i,"data-testid":`nav-button-${null==s?void 0:s.toLowerCase().replace(/\s/g,"-")}`,className:`\n      ${"code"===r&&"hidden lg:flex"}\n      w-full flex items-center gap-3 px-4 py-3 \n      rounded-lg transition-all duration-200\n      backdrop-blur-sm\n      ${"default"===n?t?"bg-js/20 border-l-2 border-js text-js":"text-gray-400 hover:text-js hover:bg-js/10":t?"bg-red-500/20 text-red-400":"text-red-400 hover:bg-red-500/10"}\n    `,whileHover:{scale:1.02,x:5},whileTap:{scale:.98},children:[h.jsx(We.span,{className:"text-xl min-w-[24px]",whileHover:{rotate:10},style:{color:"currentColor"},children:e}),h.jsx(Ie,{mode:"wait",children:a&&s&&h.jsx(We.span,{variants:hs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-medium font-space whitespace-nowrap",style:{color:"currentColor"},children:s})})]})));gs.displayName="NavigationButton";const ys=u.memo((({title:e,items:s,isExpanded:t,activeItem:a,onItemClick:i,index:n,isLastSection:r})=>h.jsxs(We.div,{className:"space-y-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:[t&&h.jsx(We.h2,{variants:hs,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"text-xs font-bold text-js/60 uppercase tracking-wider px-3 mb-2",children:e}),s.map((e=>h.jsx(gs,{id:e.id,icon:e.icon,label:e.label,isActive:a===e.id,isExpanded:t,onClick:()=>i(e)},e.id))),!r&&h.jsx("div",{className:"mx-3 my-4",children:h.jsx("div",{className:"border-t border-js/5"})})]},e)));ys.displayName="NavigationSection";const bs="/dashboard",vs=[`${bs}/community`,`${bs}/community/ranking`,`${bs}/community/groups`,`${bs}/learn`,`${bs}/play`,`${bs}/play/regex-raider`,`${bs}/play/async-quest`,`${bs}/play/js-typo-hunter`,`${bs}/play/scope-explorer`,`${bs}/settings`],fs=()=>{const e=p();return u.useMemo((()=>{const s=e.pathname,t=vs.includes(s),a=s.startsWith(`${bs}/learn/lesson/`);return t||a}),[e.pathname])},ws=[{id:"dashboard",label:"Dashboard",icon:h.jsx(f,{}),section:"main",path:"/dashboard"},{id:"stats",label:"Statystyki",icon:h.jsx(w,{}),section:"main",path:"/dashboard/stats"},{id:"play",label:"Graj",icon:h.jsx(N,{}),section:"game",path:"/dashboard/play"},{id:"learn",label:"Nauka",icon:h.jsx(k,{}),section:"game",path:"/dashboard/learn"},{id:"code",label:"Edytor",icon:h.jsx(v,{}),section:"game",path:"/dashboard/code"},{id:"community",label:"Społeczność",icon:h.jsx(S,{}),section:"social",path:"/dashboard/community"},{id:"settings",label:"Ustawienia",icon:h.jsx(z,{}),section:"social",path:"/dashboard/settings"},{id:"report",label:"Zgłoś błąd",icon:h.jsx(C,{}),section:"social",path:"/dashboard/report"}],Ns={main:"Główne",game:"Nauka",social:"Społeczność"},ks=u.memo((()=>{const e=L(),{isExpanded:s,setIsExpanded:t,activeItem:a,setActiveItem:i}=(()=>{const[e,s]=u.useState(!1),[t,a]=u.useState("dashboard"),i=p();return u.useEffect((()=>{const e=i.pathname.split("/").pop()||"dashboard";a(e)}),[i]),u.useEffect((()=>{const e=()=>{window.innerWidth<768&&s(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),{isExpanded:e,setIsExpanded:s,activeItem:t,setActiveItem:a}})(),{logout:n}=m(),r=fs(),o=qe(),l=u.useCallback((s=>{i(s.id),s.path&&e(s.path)}),[e,i]),c=u.useCallback((()=>{t((e=>!e))}),[t]),d=u.useMemo((()=>Object.entries(ws.reduce(((e,s)=>(e[s.section]||(e[s.section]=[]),e[s.section].push(s),e)),{}))),[]),x=u.useMemo((()=>r||o?"hidden md:flex":""),[r,o]);return r&&window.innerWidth<Je?null:h.jsx(De,{children:h.jsxs(We.nav,{initial:"collapsed",animate:s?"expanded":"collapsed",variants:ps,className:`${x} fixed left-0 top-0 bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg border-r border-js/10 flex flex-col py-6 z-40 shadow-xl shadow-black/10 h-full`,"aria-label":"Menu nawigacyjne",children:[h.jsx(js,{isExpanded:s}),h.jsx(We.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:c,className:"absolute -right-3 top-8 w-6 h-6 bg-js rounded-full flex items-center justify-center hover:opacity-90 transition-all shadow-lg shadow-js/20","aria-label":s?"Zwiń menu":"Rozwiń menu",children:h.jsx(We.span,{animate:{rotate:s?180:0},className:"text-dark text-sm font-bold",initial:"collapsed","aria-hidden":"true",children:"→"})}),h.jsx("div",{className:"overflow-x-hidden flex-1 px-3 space-y-6",children:h.jsx(Ie,{mode:"sync",children:d.map((([e,t],i)=>h.jsx(ys,{title:Ns[e]||e,items:t,isExpanded:s,activeItem:a,onItemClick:l,index:i,isLastSection:i===d.length-1},e)))})}),h.jsx("div",{className:"pt-4 border-t border-js/10",children:h.jsx(gs,{id:"logout",icon:h.jsx(T,{"aria-hidden":"true"}),label:"Wyloguj się",isExpanded:s,onClick:n,variant:"danger"})})]})})}));ks.displayName="DashboardNavigation";const Ss=u.memo((({username:e})=>h.jsx(We.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-js font-bold text-xl",children:["Witaj, ",e,"! 👋"]}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Miło Cię znów widzieć"})]})})));Ss.displayName="WelcomeSection";const zs=()=>{const{token:e}=m();return P({queryKey:["userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak autoryzacji");const s=yield fetch(`${x}users/stats`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw new Error("Brak autoryzacji - zaloguj się ponownie");const e=yield s.json();throw new Error(e.message||"Błąd podczas pobierania danych")}return s.json()})))(e||""),enabled:!!e,staleTime:3e5,refetchInterval:6e4,retry:(e,s)=>e<2&&!s.message.includes("autoryzacji")})},Cs={dropdown:{container:"\n      absolute right-0 top-12 w-80 bg-dark/95 rounded-xl \n      border border-js/10 shadow-xl backdrop-blur-sm z-[2147483647]\n    ",header:{wrapper:"flex justify-between items-center mb-4 p-4",title:"text-xl font-bold text-js",badge:"px-2 py-1 text-xs bg-js/20 text-js rounded-full"},content:{wrapper:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar p-4",loading:"py-8 text-center text-gray-400",empty:"py-8 text-center text-gray-400",item:{wrapper:"\n          p-3 rounded-lg bg-dark/50 hover:bg-dark/70\n          border border-js/10 hover:border-js/20\n          cursor-pointer transition-all duration-200\n        ",content:"flex items-start gap-3",icon:"mt-1",text:{wrapper:"flex-1",message:"text-white",time:"text-sm text-gray-400 mt-1"}}}},button:{wrapper:"hidden xl:block relative",base:"\n      relative p-2 rounded-lg\n      hover:bg-js/5 transition-colors duration-200\n    ",active:"bg-dark/50",icon:{base:"w-5 h-5",active:"text-js",inactive:"text-gray-400"},badge:"\n      absolute -top-1 -right-1 bg-red-500 text-white \n      rounded-full min-w-[18px] h-[18px] text-xs \n      flex items-center justify-center px-1 font-medium\n    "}},Ls=e=>{try{const s=e instanceof Date?e:new Date(e);return isNaN(s.getTime())?"Nieprawidłowa data":Ve(s,"dd MMM, HH:mm",{locale:Ze})}catch(s){return"Nieprawidłowa data"}},Ts=e=>{switch(e){case"challenge":return h.jsx($,{className:"text-yellow-500"});case"achievement":return h.jsx(R,{className:"text-green-500"});case"social":return h.jsx(S,{className:"text-blue-500"});default:return h.jsx(O,{className:"text-gray-400"})}},Ps=u.memo((({notification:e,onRead:s})=>h.jsx(We.div,{className:`\n      ${Cs.dropdown.content.item.wrapper}\n      ${e.read?"opacity-60":""}\n    `,whileHover:{x:5},onClick:()=>!e.read&&s(e._id),children:h.jsxs("div",{className:Cs.dropdown.content.item.content,children:[h.jsx("div",{className:Cs.dropdown.content.item.icon,children:Ts(e.type)}),h.jsxs("div",{className:Cs.dropdown.content.item.text.wrapper,children:[h.jsx("p",{className:Cs.dropdown.content.item.text.message,children:e.message}),h.jsx("span",{className:Cs.dropdown.content.item.text.time,children:Ls(e.createdAt)})]})]})})));Ps.displayName="NotificationItem";const Es=u.memo((({unreadCount:e})=>h.jsxs("div",{className:Cs.dropdown.header.wrapper,children:[h.jsx("h3",{className:Cs.dropdown.header.title,children:"Powiadomienia"}),e>0&&h.jsxs("span",{className:Cs.dropdown.header.badge,children:[e," nowe"]})]})));Es.displayName="NotificationsHeader";const As=u.memo((({onClose:e})=>{var s,t;const{data:a,isLoading:i}=zs(),{markAsRead:n}=(()=>{const{token:e}=m(),s=E();return{markAsRead:A({mutationFn:s=>c(void 0,null,(function*(){const t=yield fetch(`${x}/dashboard/notifications/${s}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Nie udało się oznaczyć jako przeczytane");return t.json()})),onSuccess:()=>{s.invalidateQueries({queryKey:["dashboard"]})}})}})();return u.useEffect((()=>{const s=s=>{"Escape"===s.key&&e()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)}),[e]),h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:Cs.dropdown.container,onClick:e=>e.stopPropagation(),children:[h.jsx(Es,{unreadCount:null!=(s=null==a?void 0:a.unreadCount)?s:0}),i?h.jsx("div",{className:Cs.dropdown.content.loading,children:"Ładowanie powiadomień..."}):(null==(t=null==a?void 0:a.notifications)?void 0:t.length)?h.jsx("div",{className:Cs.dropdown.content.wrapper,children:a.notifications.map((e=>h.jsx(Ps,{notification:e,onRead:e=>n.mutate(e)},e._id)))}):h.jsx("div",{className:Cs.dropdown.content.empty,children:"Brak nowych powiadomień"})]})}));As.displayName="NotificationsDropdown";const Os=u.memo((()=>{var e;const[s,t]=u.useState(!1),{data:a}=zs(),i=null!=(e=null==a?void 0:a.unreadCount)?e:0,n=u.useCallback((()=>t(!1)),[]),r=u.useCallback((e=>{e.stopPropagation(),t((e=>!e))}),[]);return h.jsxs("div",{className:Cs.button.wrapper,children:[h.jsxs(We.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:`${Cs.button.base} ${s?Cs.button.active:""}`,children:[h.jsx(O,{className:`\n          ${Cs.button.icon.base}\n          ${s?Cs.button.icon.active:Cs.button.icon.inactive}\n        `}),h.jsx(Ie,{children:i>0&&h.jsx(We.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:Cs.button.badge,children:i>9?"9+":i})})]}),h.jsx(Ie,{children:s&&h.jsx(As,{onClose:n})})]})}));Os.displayName="NotificationsButton";const Rs={container:"\n    w-[90%]\n    xl:w-full\n    flex justify-between items-center\n    xl:block\n    mt-5\n    pb-2\n    bg-dark/50 backdrop-blur-sm\n    border-b border-js/10 \n    fixed top-0\n    md:top-4 right-0\n    h-14\n    z-[0]\n    rounded-lg mx-4\n  ",content:"\n    h-full\n    ml-32\n    sm:ml-auto\n    flex justify-between items-center\n    max-w-[1000px]\n    mx-auto\n    relative\n  ",actions:"flex items-center gap-3 absolute right-6",gradients:{text:"bg-gradient-to-r from-js to-js/80 bg-clip-text text-transparent",hover:"hover:bg-js/5",base:"bg-gradient-to-br from-js/5 to-js/10"},borders:{base:"border-js/20",hover:"hover:border-js/30"},transitions:{base:"transition-all duration-200"},text:{heading:"text-lg font-bold text-js",primary:"text-white",secondary:"text-gray-400"}},$s=["userProfile"],_s=()=>{const{token:e}=m();return P({queryKey:$s,queryFn:()=>(e=>c(void 0,null,(function*(){const s=yield fetch(`${x}users/profile`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Nie udało się pobrać danych użytkownika");return s.json()})))(e)})},Ds=u.memo((()=>{const e=u.useMemo((()=>({container:{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}}}})),[]),{data:s,isLoading:t,error:a}=_s(),i=u.useMemo((()=>a?"Użytkowniku":t?"Ładowanie...":(null==s?void 0:s.data.user.username)||"Użytkowniku"),[null==s?void 0:s.data.user.username,t,a]);return h.jsx(De,{children:h.jsx(We.nav,{variants:e.container,initial:"initial",animate:"animate",className:Rs.container,"aria-label":"Górna nawigacja",children:h.jsxs("div",{className:Rs.content,children:[h.jsx(Ss,{username:i}),h.jsx("div",{className:Rs.actions,children:h.jsx(u.Suspense,{fallback:h.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 animate-pulse"}),children:h.jsx(Os,{})})})]})})})}));Ds.displayName="TopNavigation";const Gs=u.lazy((()=>d((()=>import("./app-components-D-uSeCsa.js").then((e=>e.D))),__vite__mapDeps([0,1,2,3,4,5,6,7])))),Bs=u.lazy((()=>d((()=>import("./app-components-D-uSeCsa.js").then((e=>e.q))),__vite__mapDeps([0,1,2,3,4,5,6,7])).then((e=>({default:e.LoadingSpinner}))))),Ms=u.memo((()=>{const e=fs(),s=qe(),{logout:t}=m();return h.jsx(De,{fallback:h.jsx(u.Suspense,{fallback:h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Ładowanie..."}),children:h.jsx(Gs,{})}),children:h.jsxs("main",{className:"bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg flex min-h-screen",children:[h.jsxs(g,{children:[h.jsx("title",{children:"Dashboard | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Panel użytkownika CodeLinesJS - dostęp do kursów, gier i statystyk nauki."})]}),h.jsx(ks,{}),h.jsxs("div",{className:`flex-1 ${e||s?"":"ml-[100px]"} md:ml-[100px]`,children:[h.jsx(Ds,{}),h.jsx("div",{className:"mt-20 p-6",children:h.jsxs("div",{className:(e||s?"flex":"")+" flex-col justify-center items-center gap-4 md:block",children:[e||s?h.jsxs("div",{className:"flex flex-col gap-2 mb-4 md:hidden",children:[h.jsx(_,{to:"/dashboard",children:h.jsx("button",{"aria-label":"Wróć do strony głównej",className:"bg-js text-dark px-4 py-2 rounded-md w-full flex items-center justify-center",children:"Wróć do Home"})}),h.jsxs("button",{onClick:t,"aria-label":"Wyloguj się",className:"bg-red-600 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2",children:[h.jsx(T,{"aria-hidden":"true"}),"Wyloguj się"]})]}):null,h.jsx(u.Suspense,{fallback:h.jsx(Bs,{text:"Ładowanie zawartości..."}),children:h.jsx(D,{})})]})})]})]})})}));Ms.displayName="Dashboard";const Us=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"})),Fs={text:{heading:"font-bold text-js"},grid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",card:{base:"bg-dark/50 backdrop-blur-sm border border-js/10 shadow-xl",community:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-2 lg:order-1\n    ",game:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-1 lg:order-2\n    ",stats:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-3\n    "}},Ws="bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",Is={wrapper:"flex justify-between items-center mb-6",title:"text-xl font-bold text-js flex items-center gap-2",icon:"w-5 h-5"},Hs={wrapper:"space-y-6",description:"text-gray-400 text-sm leading-relaxed",button:{wrapper:"flex justify-center",base:"px-6 py-3 bg-js text-dark font-medium rounded-lg transition-all duration-200",hover:"hover:bg-js/90 hover:shadow-lg hover:shadow-js/20",active:"active:scale-95"}},qs=()=>u.useMemo((()=>({container:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},button:{hover:{scale:1.05},tap:{scale:.95}}})),[]),Js=u.memo((()=>{const e=L(),s=qs();return h.jsxs(We.div,{variants:s.container,initial:"hidden",animate:"show",className:Ws,children:[h.jsx("div",{className:Is.wrapper,children:h.jsxs("h2",{className:Is.title,children:[h.jsx(k,{className:Is.icon}),"Nauka"]})}),h.jsxs("div",{className:Hs.wrapper,children:[h.jsx("p",{className:Hs.description,children:"Sprawdź najnowsze informacje i aktualności związane z nauką."}),h.jsx("div",{className:Hs.button.wrapper,children:h.jsx(We.button,{onClick:()=>{e("/dashboard/learn")},whileHover:"hover",whileTap:"tap",variants:s.button,className:`\n              ${Hs.button.base}\n              ${Hs.button.hover}\n              ${Hs.button.active}\n            `,children:"Sprawdź aktualności"})})]})]})}));Js.displayName="CommunityBlock";const Vs=u.memo((()=>{const e=L(),s=qs();return h.jsxs(We.div,{variants:s.container,initial:"hidden",animate:"show",className:Ws,children:[h.jsx("div",{className:Is.wrapper,children:h.jsxs("h2",{className:Is.title,children:[h.jsx(N,{className:Is.icon}),"Tryb Gry"]})}),h.jsxs("div",{className:Hs.wrapper,children:[h.jsx("p",{className:Hs.description,children:"Rozpocznij nową sesję gry, rozwiązuj wyzwania i zdobywaj punkty. Sprawdź swoje umiejętności w praktyce!"}),h.jsx("div",{className:Hs.button.wrapper,children:h.jsx(We.button,{onClick:()=>{e("/dashboard/play")},whileHover:"hover",whileTap:"tap",variants:s.button,className:`\n              ${Hs.button.base}\n              ${Hs.button.hover}\n              ${Hs.button.active}\n            `,children:"Rozpocznij Grę"})})]})]})}));Vs.displayName="GameBlock";const Zs="bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",Ks={grid:"grid grid-cols-1 sm:grid-cols-2 gap-4",item:{wrapper:"flex items-center gap-4 p-4 bg-dark/30 rounded-lg",icon:"text-2xl text-js",content:{wrapper:"flex flex-col",label:"text-sm text-gray-400",value:"text-xl font-bold text-js"}}},Qs="text-sm text-gray-400 mt-4",Xs=u.memo((({icon:e,label:s,value:t})=>h.jsxs("div",{className:Ks.item.wrapper,children:[h.jsx("div",{className:Ks.item.icon,children:e}),h.jsxs("div",{className:Ks.item.content.wrapper,children:[h.jsx("p",{className:Ks.item.content.label,children:s}),h.jsx("p",{className:Ks.item.content.value,children:t})]})]})));Xs.displayName="StatItem";const Ys=u.memo((({stats:e})=>{const s=u.useCallback((e=>{try{if(!e)return"Brak danych";const s=new Date(e);return isNaN(s.getTime())?"Nieprawidłowa data":Ve(s,"dd MMM, HH:mm",{locale:Ze})}catch(s){return"Nieprawidłowa data"}}),[]);return h.jsxs("div",{className:Zs,children:[h.jsxs("div",{className:Ks.grid,children:[h.jsx(Xs,{icon:h.jsx(G,{}),label:"Poziom",value:e.progress.level}),h.jsx(Xs,{icon:h.jsx(B,{}),label:"Punkty",value:e.progress.points}),h.jsx(Xs,{icon:h.jsx(M,{}),label:"Seria",value:`${e.achievements.streak.current} dni`})]}),h.jsxs("p",{className:Qs,children:["Ostatnia aktywność: ",s(e.user.lastActive)]})]})}));Ys.displayName="StatsBlock";const et=u.memo((({type:e,message:s})=>h.jsx("div",{className:"p-8 w-full flex items-center justify-center min-h-[400px]",children:h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},className:"text-xl "+("error"===e?"text-red-400":"text-gray-400"),children:s||("loading"===e?"Ładowanie danych...":"error"===e?"Wystąpił błąd podczas ładowania danych":"Brak danych do wyświetlenia")})})));et.displayName="DashboardState";const st=u.memo((()=>{const{data:e,isLoading:s,error:t}=zs(),a=u.useMemo((()=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}})),[]);return s?h.jsx(Ge,{}):t?h.jsx(et,{type:"error",message:t.message}):e?h.jsxs(We.div,{className:"p-1 md:p-12 w-full overflow-y-auto",variants:a.container,initial:"hidden",animate:"visible",children:[h.jsx(We.h1,{className:`${Fs.text.heading} text-3xl mb-12`,variants:a.item,children:"Dashboard"}),h.jsxs("div",{className:Fs.grid,children:[h.jsx(We.div,{variants:a.item,className:Fs.card.community,children:h.jsx(Js,{})}),h.jsx(We.div,{variants:a.item,className:Fs.card.game,children:h.jsx(Vs,{})}),h.jsx(We.div,{variants:a.item,className:Fs.card.stats,children:h.jsx(Ys,{stats:e.data})})]})]}):h.jsx(et,{type:"empty"})}));st.displayName="DashboardContent";const tt=Object.freeze(Object.defineProperty({__proto__:null,DashboardContent:st},Symbol.toStringTag,{value:"Module"})),at=()=>{const{token:e,isAuthenticated:s}=m(),{data:t,isLoading:a,error:i}=P({queryKey:["userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){var s,t;const a=yield fetch(`${x}users/stats`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw new Error("Brak autoryzacji");throw new Error("Błąd podczas pobierania statystyk")}const i=yield a.json();return l(o({},i),{chartData:{daily:(null==(s=i.chartData)?void 0:s.daily)||[],categories:(null==(t=i.chartData)?void 0:t.categories)||[]}})})))(e),enabled:s&&!!e,staleTime:3e5,gcTime:18e5,retry:(e,s)=>"Brak autoryzacji"!==s.message&&e<3});return{stats:t,isLoading:a,error:i}},it={base:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",title:"text-xl font-bold text-js mb-6",content:"h-full"},nt=u.memo((({level:e,experience:s,nextLevel:t})=>{const a=s/t*100;return h.jsxs("div",{className:it.base,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:it.title,children:["Poziom ",e]}),h.jsxs("p",{className:"text-gray-400 text-sm",children:[s," / ",t," XP do następnego poziomu"]})]}),h.jsx("div",{className:"hidden w-16 h-16 rounded-full bg-js/20 md:flex items-center justify-center",children:h.jsx("span",{className:"text-2xl font-bold text-js",children:e})})]}),h.jsx("div",{className:"relative h-4 bg-dark/50 rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,ease:"easeOut"},className:"absolute top-0 left-0 h-full bg-js/50"})})]})}));nt.displayName="LevelProgress";const rt={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},ot=u.memo((({icon:e,label:s,value:t,subValue:a})=>h.jsx(We.div,{variants:rt,className:`${it.base} hover:border-js/30 transition-all p-3 md:p-4`,children:h.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[h.jsx("div",{className:"p-2 md:p-3 rounded-lg bg-js/10 shrink-0",children:h.jsx(e,{className:"w-5 h-5 md:w-6 md:h-6 text-js"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-0.5 md:mb-1",children:s}),h.jsx("p",{className:"text-xl md:text-2xl font-bold font-space text-js truncate",children:t}),a&&h.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5 md:mt-1",children:a})]})]})})));ot.displayName="StatCard";const lt={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ct={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},dt=u.memo((({badge:e})=>{const s=e=>{try{const s=new Date(e);return isNaN(s.getTime())?"Data nieznana":s.toLocaleDateString("pl-PL",{year:"numeric",month:"short",day:"numeric"})}catch(s){return"Data nieznana"}};return h.jsxs(We.div,{variants:ct,className:"min-w-[8rem] flex flex-col items-center p-4 bg-dark/30 rounded-lg border border-js/10 hover:border-js/30 transition-colors",children:[h.jsx("span",{className:"text-3xl mb-2",children:e.icon||"🏆"}),h.jsx("h4",{className:"text-js font-medium text-sm text-center",children:e.name}),h.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s(e.earnedAt)}),e.description&&h.jsx("p",{className:"text-gray-400 text-xs mt-1 text-center",children:e.description},`${e.id}-description`)]})}));dt.displayName="BadgeCard";const mt=u.memo((()=>h.jsxs("div",{className:it.base,children:[h.jsx("h3",{className:it.title,children:"Odznaki"}),h.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nie zdobyto jeszcze żadnych odznak"})]})));mt.displayName="EmptyBadges";const xt=u.memo((({badges:e})=>(null==e?void 0:e.length)?h.jsxs("div",{className:it.base,children:[h.jsx("h3",{className:it.title,children:"Odznaki"}),h.jsx(We.div,{variants:lt,initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:e.map((e=>h.jsx(dt,{badge:e},e.name)))})]}):h.jsx(mt,{})));xt.displayName="BadgesGrid";const ut=u.memo((({message:e})=>h.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:h.jsx("p",{className:"text-red-500",children:e})})));ut.displayName="ErrorState";const pt={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ht=u.memo((({stats:e,isLoading:s,error:t})=>{const a=(e=>u.useMemo((()=>{var s;return e?[{id:"completed-lessons",icon:$,label:"Ukończone Lekcje",value:(null==(s=e.data.achievements.completedChallenges)?void 0:s.toString())||"0",gradient:"from-amber-500 to-orange-500"},{id:"current-streak",icon:U,label:"Aktualny Streak",value:`${e.data.achievements.streak.current||0} dni`,subValue:`Najlepszy: ${e.data.achievements.streak.best||0} dni`,gradient:"from-red-500 to-pink-500"}]:[]}),[e]))(e);return s?h.jsx(Ge,{}):t?h.jsx(ut,{message:`Wystąpił błąd podczas ładowania statystyk: ${t.message}`}):e?h.jsxs(We.div,{variants:pt,initial:"hidden",animate:"show",className:"space-y-6",children:[h.jsx(nt,{level:e.data.progress.level,experience:e.data.progress.points,nextLevel:e.data.progress.pointsToNextLevel}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map((e=>h.jsx(ot,o({},e),e.id)))}),h.jsx(xt,{badges:e.data.achievements.badges})]}):h.jsx("div",{className:"p-4 bg-dark/50 rounded-lg",children:h.jsx("p",{className:"text-gray-400",children:"Brak dostępnych statystyk"})})}));ht.displayName="StatsOverview";const jt=u.memo((({data:e})=>h.jsx(Ye,{width:"100%",height:300,children:h.jsxs(es,{data:e,margin:{top:5,right:20,bottom:5,left:0},children:[h.jsx(ss,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),h.jsx(ts,{dataKey:"date",stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"}}),h.jsx(as,{stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"},label:{value:"Punkty",angle:-90,position:"insideLeft",fill:"#666"}}),h.jsx(is,{contentStyle:{background:"#1A1A1A",border:"1px solid #333",borderRadius:"4px",padding:"8px"},labelStyle:{color:"#666"},itemStyle:{color:"#F7DF1E"}}),h.jsx(ns,{type:"monotone",dataKey:"points",stroke:"#F7DF1E",strokeWidth:2,dot:{fill:"#F7DF1E",strokeWidth:2},activeDot:{r:6,fill:"#F7DF1E"}})]})})));jt.displayName="DailyChart";const gt=u.memo((({data:e,isLoading:s})=>s?h.jsx(Ge,{}):e?h.jsx("div",{className:"hidden md:flex flex-col gap-6 h-full",children:h.jsxs("div",{className:"bg-dark/50 rounded-lg p-6 flex-1",children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-6",children:"Aktywność"}),h.jsx("div",{className:"h-[300px]",children:h.jsx(jt,{data:e.daily})})]})}):null));gt.displayName="StatsCharts";const yt=u.memo((()=>{var e;const{stats:s,isLoading:t,error:a}=at(),[i,n]=u.useState(!1),[r,o]=u.useState(null);if(u.useEffect((()=>{var e,t,a;(null==(t=null==(e=null==s?void 0:s.data)?void 0:e.progress)?void 0:t.levelUp)&&(o({level:s.data.progress.level,rewards:(null==(a=s.data.achievements)?void 0:a.badges)||[]}),n(!0))}),[s]),t)return h.jsx(Ge,{});if(a)return h.jsx(et,{type:"error",message:"Nie udało się załadować statystyk. Spróbuj ponownie później."});if(!s)return h.jsx(et,{type:"empty",message:"Brak dostępnych statystyk."});const l={data:{progress:{level:s.data.progress.level,points:s.data.progress.points,pointsToNextLevel:s.data.progress.pointsToNextLevel},achievements:{streak:{current:s.data.achievements.streak.current,best:s.data.achievements.streak.best},completedChallenges:s.data.achievements.completedChallenges,badges:s.data.achievements.badges},badges:s.data.achievements.badges,unlockedFeatures:[],levelUp:s.data.progress.levelUp,rewards:(null==(e=s.data.achievements.badges)?void 0:e.length)?{badges:s.data.achievements.badges,bonusPoints:0,unlockedFeatures:[]}:void 0,chartData:{daily:s.data.stats.daily,categories:[]}}};return h.jsxs(h.Fragment,{children:[h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[h.jsxs(F,{children:[h.jsx("title",{children:"Statystyki i Postępy | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Statystyki i Postępy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx(We.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:h.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Statystyki i Postępy"})}),h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 flex-1",children:[h.jsx("div",{className:"flex flex-col gap-6",children:h.jsx(ht,{stats:l,isLoading:t,error:a})}),h.jsx("div",{className:"flex flex-col gap-6 h-full",children:h.jsx(gt,{data:s.data.stats,isLoading:t})})]})]}),h.jsx(Be,{isVisible:i,onClose:()=>n(!1),level:(null==r?void 0:r.level)||0,rewards:{badges:(null==r?void 0:r.rewards)||[],bonusPoints:0,unlockedFeatures:[]}})]})}));yt.displayName="StatsSection";const bt=Object.freeze(Object.defineProperty({__proto__:null,StatsSection:yt},Symbol.toStringTag,{value:"Module"})),vt=u.memo((({message:e,onRetry:s})=>h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[h.jsx(W,{className:"w-12 h-12 text-red-500 mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Wystąpił błąd"}),h.jsx("p",{className:"text-gray-400 mb-4",children:e}),s&&h.jsx("button",{onClick:s,className:"px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:"Spróbuj ponownie"})]}))),ft=[{id:"all",label:"Wszystkie"},{id:"beginner",label:"Podstawowe"},{id:"intermediate",label:"Średnie"},{id:"advanced",label:"Zaawansowane"}],wt=u.memo((({onFilterChange:e,className:s=""})=>{const[t,a]=I(),i=t.get("filter")||"all";u.useEffect((()=>{e(i)}),[i,e]);return h.jsx("div",{className:`flex gap-2 flex-wrap ${s}`,children:ft.map((e=>{const s=i===e.id;return h.jsx(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{return s=e.id,void a("all"===s?{tab:"lessons"}:{filter:s,tab:"lessons"});var s},className:"w-fit px-3 py-1.5 rounded-lg text-sm font-medium transition-all\n              "+(s?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"),children:e.label},e.id)}))})}));wt.displayName="LessonsFilter";const Nt=u.memo((({onFilterChange:e})=>h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Dostępne lekcje"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz interesującą Cię lekcję i rozpocznij naukę"})]}),h.jsx(wt,{onFilterChange:e})]})));Nt.displayName="LessonsHeader";const kt={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},St=u.memo((({lesson:e})=>{const{title:s,description:t,duration:a,slug:i,isCompleted:n,isLocked:r,requiredLevel:o=1}=e,l=h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{className:"space-y-1 flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h3",{className:"text-lg font-semibold "+(r?"text-gray-500":"text-js"),children:s}),n&&h.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-js/10 text-js",children:[h.jsx(H,{className:"w-3 h-3 mr-1"}),"Ukończono"]})]}),h.jsx("p",{className:`text-sm ${r?"text-gray-600":"text-gray-400"} line-clamp-2`,children:t})]})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[h.jsxs("span",{className:"flex items-center gap-1 "+(r?"text-gray-600":"text-gray-400"),children:[h.jsx(q,{className:"w-3.5 h-3.5"}),a," min"]}),r&&h.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[h.jsx(J,{className:"w-3.5 h-3.5"}),"Poziom ",o]})]}),!r&&h.jsxs("div",{className:"flex items-center gap-2 text-js",children:[h.jsx("span",{children:n?"Powtórz":"Rozpocznij"}),h.jsx(V,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]});return h.jsx(We.div,{variants:kt,className:"group relative "+(r?"opacity-75":""),children:r?h.jsx("div",{className:"block p-6 rounded-xl bg-dark-800 border border-gray-800 cursor-not-allowed",children:l}):h.jsx(_,{to:`/dashboard/learn/lesson/${i}`,className:"block p-6 rounded-xl bg-dark-800 border border-js/10 hover:border-js/20 transition-colors",children:l})})}));St.displayName="LessonCard";const zt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Ct=e=>{switch(e){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},Lt=u.memo((({lessons:e,filter:s,userData:t})=>{const a=e.map((e=>l(o({},e),{isLocked:!!e.requiredLevel&&e.requiredLevel>t.userLevel})));return 0===a.length?h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[h.jsxs("div",{className:"relative mb-6",children:[h.jsx(Z,{className:"w-20 h-20 text-gray-600 opacity-20"}),h.jsx("div",{className:"absolute -right-2 -bottom-2",children:h.jsx(K,{className:"w-8 h-8 text-gray-500"})})]}),h.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"all"===s?"Brak dostępnych lekcji":`Brak lekcji o poziomie ${Ct(s)}`}),h.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"all"===s?"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później.":"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności."})]}):h.jsxs(We.div,{variants:zt,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs(F,{children:[h.jsx("title",{children:"Lekcje | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Lekcje JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),a.map((e=>h.jsx(St,{lesson:e},e.slug)))]})}));Lt.displayName="LessonsList";const Tt=e=>c(void 0,[e],(function*({lessonId:e,pathId:s,token:t}){if(!t)throw new Error("Brak tokenu autoryzacji");const a=yield fetch(`${x}lessons/${e}/complete`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({pathId:s})});if(!a.ok){const e=yield a.text();throw new Error(e||"Błąd podczas zakończenia lekcji")}return a.json()})),Pt=e=>{switch(e){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},Et=()=>{var e,s,t;const[a,i]=u.useState("all"),[n]=u.useState("javascript"),{token:r}=m(),{data:o,isLoading:l,error:d,refetch:p}=P({queryKey:["lessons"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${x}lessons`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Nieautoryzowany - proszę się zalogować ponownie");throw new Error("Błąd podczas pobierania lekcji")}return yield s.json()})))(r||""),retry:2,staleTime:3e5,refetchOnWindowFocus:!0,enabled:!!r}),h=null!=(s=null==(e=null==o?void 0:o.data.lessons)?void 0:e[n])?s:[],j=null!=(t=null==o?void 0:o.data.stats)?t:{total:0,completed:0,progress:0},g=u.useMemo((()=>"all"===a?h:h.filter((e=>e.difficulty===a))),[h,a]),y=!h||0===h.length,b=!y&&0===g.length,v={currentFilter:a,label:Pt(a),isEmpty:y,hasNoLessonsForFilter:b,messages:{title:b?`Brak lekcji o poziomie ${Pt(a)}`:"Brak dostępnych lekcji",description:b?"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności lub wyświetl wszystkie lekcje.":"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później."}};return{filteredLessons:g,filter:a,setFilter:i,resetFilter:()=>i("all"),isLoading:l,error:d,refetch:p,isEmpty:y,hasNoLessonsForFilter:b,filterState:v,requiredLevel:null==o?void 0:o.data.requiredLevel,stats:j}},At=u.memo((()=>{var e,s;const{user:t}=m(),{stats:a}=at(),i=(null==t?void 0:t.id)||"current-user",n=(null==(s=null==(e=null==a?void 0:a.data)?void 0:e.progress)?void 0:s.level)||1,{filteredLessons:r,filter:o,setFilter:l,isLoading:c,requiredLevel:d,error:x,refetch:u}=Et();return x?h.jsx(vt,{message:"Nie udało się pobrać listy lekcji. Spróbuj ponownie później.",onRetry:()=>u()}):c&&!a?h.jsx(Ge,{}):h.jsxs("div",{className:"space-y-6",children:[h.jsx(Nt,{onFilterChange:l}),h.jsx(Lt,{lessons:r,filter:o,userId:i,userData:{userLevel:n,requiredLevel:d||1}})]})}));At.displayName="Lessons";const Ot={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},Rt=u.memo((({resource:e,isRecommended:s})=>h.jsxs(We.div,{variants:Ot,whileHover:{scale:1.02},className:"group relative bg-dark-800/50 border border-js/10 rounded-xl p-5 hover:border-js/20 transition-colors",children:[s&&h.jsxs("div",{className:"absolute -top-2 -right-2 bg-js text-dark px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[h.jsx(B,{className:"w-3 h-3"}),"Polecane"]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-lg font-bold text-js mb-1 line-clamp-1",children:e.title}),h.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:e.description})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[h.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("documentation"===e.type?"bg-blue-500/10 text-blue-400":"tutorial"===e.type?"bg-green-500/10 text-green-400":"video"===e.type?"bg-red-500/10 text-red-400":"bg-purple-500/10 text-purple-400"),children:"documentation"===e.type?"Dokumentacja":"tutorial"===e.type?"Tutorial":"video"===e.type?"Wideo":"Artykuł"}),h.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("beginner"===e.difficulty?"bg-green-500/10 text-green-400":"intermediate"===e.difficulty?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"),children:"beginner"===e.difficulty?"Podstawowy":"intermediate"===e.difficulty?"Średni":"Zaawansowany"})]}),h.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors text-sm",children:["Otwórz materiał",h.jsx(Q,{className:"w-3 h-3"})]})]})]})));Rt.displayName="ResourceCard";const $t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_t=u.memo((({title:e,subtitle:s,resources:t,isRecommended:a})=>h.jsxs("section",{children:[h.jsxs(F,{children:[h.jsx("title",{children:"Zasoby | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Zasoby JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:e}),h.jsx("p",{className:"text-gray-400 text-sm",children:s})]}),h.jsx(We.div,{variants:$t,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e=>h.jsx(Rt,{resource:e,isRecommended:a},e.id)))})]})));_t.displayName="ResourceSection";const Dt=()=>{var e;const{token:s}=m(),{data:t,isLoading:a,error:i,refetch:n}=P({queryKey:["resources"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${x}resources`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Nieautoryzowany - proszę się zalogować ponownie");throw new Error("Błąd podczas pobierania zasobów")}return yield s.json()})))(s||""),retry:2,staleTime:3e5,enabled:!!s}),r=(null==(e=null==t?void 0:t.data)?void 0:e.resources)||[];return{recommendedResources:r.filter((e=>e.isRecommended))||[],otherResources:r.filter((e=>!e.isRecommended))||[],isLoading:a,error:i,refetch:n}},Gt=u.memo((()=>{const{recommendedResources:e,otherResources:s,isLoading:t,error:a,refetch:i}=Dt();return a?h.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:h.jsx(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:h.jsx(vt,{message:"Nie udało się pobrać materiałów. Spróbuj ponownie później.",onRetry:()=>i()})})}):t?h.jsx("div",{className:"flex justify-center py-12",children:h.jsx(Ge,{})}):(null==e?void 0:e.length)||(null==s?void 0:s.length)?h.jsxs("div",{className:"space-y-8",children:[(null==e?void 0:e.length)>0&&h.jsx(_t,{title:"Polecane materiały",subtitle:"Wyselekcjonowane materiały, które pomogą Ci w nauce",resources:e,isRecommended:!0}),(null==s?void 0:s.length)>0&&h.jsx(_t,{title:"Wszystkie materiały",subtitle:"Przeglądaj wszystkie dostępne materiały",resources:s})]}):h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[h.jsxs("div",{className:"relative mb-6",children:[h.jsx(X,{className:"w-20 h-20 text-gray-600 opacity-20"}),h.jsx("div",{className:"absolute -right-2 -bottom-2",children:h.jsx(K,{className:"w-8 h-8 text-gray-500"})})]}),h.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Brak dostępnych materiałów"}),h.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"Aktualnie nie ma żadnych dostępnych materiałów. Sprawdź ponownie później lub skontaktuj się z administratorem."}),h.jsx(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(),className:"mt-6 px-4 py-2 bg-js/10 text-js border border-js/20 rounded-lg text-sm font-medium hover:bg-js/20 transition-colors",children:"Odśwież materiały"})]})}));Gt.displayName="Resources";const Bt=u.memo((({icon:e,title:s,label:t,value:a})=>h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(e,{className:"w-5 h-5 text-js"}),h.jsx("h4",{className:"font-medium text-gray-200",children:s})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("span",{className:"text-gray-400",children:t}),h.jsx("span",{className:"text-js",children:a})]})]}))),Mt=u.memo((({stats:e})=>h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(Bt,{icon:Y,title:"Postęp nauki",label:"Ukończone ścieżki",value:`${e.completedPaths}/${e.totalPaths}`}),h.jsx(Bt,{icon:M,title:"Punkty XP",label:"Zdobyte punkty",value:`${e.totalPoints} XP`}),h.jsx(Bt,{icon:q,title:"W trakcie",label:"Aktywne ścieżki",value:e.pathsInProgress})]}))),Ut=()=>{const{token:e}=m(),{data:s,isLoading:t,error:a,refetch:i}=P({queryKey:["learningPaths","userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak tokenu autoryzacji");const s=yield fetch(`${x}Learning-paths`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Nieautoryzowany - proszę się zalogować ponownie");throw new Error("Błąd podczas pobierania ścieżek nauki")}return yield s.json()})))(e||""),staleTime:3e5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!!e});return{paths:(null==s?void 0:s.data.paths)||[],userStats:null==s?void 0:s.data.userStats,isLoading:t,error:a,refetch:i,isEmpty:!(null==s?void 0:s.data.paths)||0===s.data.paths.length}},Ft=u.memo((()=>h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-2",children:"Brak dostępnych ścieżek nauki"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Aktualnie nie ma żadnych dostępnych ścieżek nauki. Sprawdź ponownie później."})]}))),Wt=u.memo((({title:e,isLocked:s,requiredLevel:t})=>h.jsxs("div",{className:"flex items-start justify-between gap-4",children:[h.jsx("h3",{className:"text-lg font-bold "+(s?"text-gray-400":"text-js"),children:e}),s&&h.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[h.jsx(J,{className:"w-4 h-4"}),h.jsxs("span",{children:["Poziom ",t]})]})]})));Wt.displayName="PathHeader";const It=u.memo((({description:e,outcomes:s,requirements:t})=>h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-gray-400 text-sm",children:e}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium text-js",children:"Czego się nauczysz:"}),h.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:s.map(((e,s)=>h.jsx("li",{children:e},s)))})]}),t.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium text-js",children:"Wymagania:"}),h.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:t.map(((e,s)=>h.jsx("li",{children:e},s)))})]})]})));It.displayName="PathContent";const Ht=u.memo((({progress:e})=>h.jsxs("div",{children:[h.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${e.percentage}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),h.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[h.jsxs("span",{children:[e.completed,"/",e.total," ukończone"]}),h.jsxs("span",{children:[e.percentage,"%"]})]})]})));Ht.displayName="ProgressBar";const qt=u.memo((({id:e,isLocked:s,estimatedTime:t,progress:a})=>h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[h.jsx(q,{className:"w-4 h-4"}),t," min"]}),!s&&h.jsx(_,{to:`/dashboard/learn?tab=lessons&pathId=${e}`,className:"text-js hover:text-js/80 transition-colors",children:h.jsx(V,{className:"w-4 h-4"})})]}),h.jsx(Ht,{progress:a})]})));qt.displayName="PathFooter";const Jt=u.memo((({path:e})=>{const{safeData:s,cardStyles:t,hoverAnimation:a}=(e=>{const s=u.useMemo((()=>{var s,t,a,i;return{id:e.id,title:e.title||"Brak tytułu",description:e.description||"Brak opisu",estimatedTime:e.estimatedTime||0,isLocked:e.isLocked,requiredLevel:e.requiredLevel,progress:{completed:Array.isArray(null==(s=e.progress)?void 0:s.completed)?e.progress.completed.length:Number(null==(t=e.progress)?void 0:t.completed)||0,total:Number(null==(a=e.progress)?void 0:a.total)||0,percentage:Number(null==(i=e.progress)?void 0:i.percentage)||0},outcomes:Array.isArray(e.outcomes)?e.outcomes.map((e=>String(e))):[],requirements:Array.isArray(e.requirements)?e.requirements.map((e=>String(e))):[]}}),[e]),t=u.useMemo((()=>`\n    bg-dark-800/50 border rounded-xl p-6 transition-all\n    ${s.isLocked?"border-gray-700/50 opacity-75":"border-js/10 hover:border-js/20"}\n  `),[s.isLocked]),a=u.useMemo((()=>s.isLocked?{}:{scale:1.02}),[s.isLocked]);return{safeData:s,cardStyles:t,hoverAnimation:a}})(e);return h.jsx(We.div,{whileHover:a,className:t,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Wt,{title:s.title,isLocked:s.isLocked,requiredLevel:s.requiredLevel}),h.jsx(It,{description:s.description,outcomes:s.outcomes,requirements:s.requirements}),h.jsx(qt,{id:s.id,isLocked:s.isLocked,estimatedTime:s.estimatedTime,progress:s.progress})]})})}));Jt.displayName="PathCard";const Vt=u.memo((()=>{const{paths:e,userStats:s,isLoading:t,error:a,refetch:i,isEmpty:n}=Ut();return t?h.jsx(Ge,{}):a?h.jsx(vt,{message:"Nie udało się pobrać ścieżek nauki. Spróbuj ponownie później.",onRetry:i}):n?h.jsx(Ft,{}):h.jsxs("div",{className:"space-y-8",children:[h.jsx(Mt,{stats:s||{completedPaths:0,totalPaths:0,totalPoints:0,pathsInProgress:0,recentActivity:[]}}),h.jsxs("section",{children:[h.jsx("header",{className:"flex items-center justify-between mb-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Ścieżki nauki"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz ścieżkę nauki dopasowaną do Twoich potrzeb"})]})}),h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map((e=>h.jsx(Jt,{path:e},e.id)))})]})]})}));Vt.displayName="LearningPaths";const Zt=[{id:"paths",label:"Ścieżki nauki",icon:Y},{id:"lessons",label:"Lekcje",icon:k},{id:"resources",label:"Materiały",icon:ee}],Kt=u.memo((({activeTab:e,onTabChange:s})=>h.jsx("div",{className:"flex gap-2 flex-wrap",children:Zt.map((t=>h.jsxs(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s(t.id),className:"relative flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all\n            "+(e===t.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"),children:[h.jsx(t.icon,{className:"w-4 h-4"}),t.label,e===t.id&&h.jsx(We.div,{layoutId:"activeTab",className:"absolute inset-0 bg-js/5 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},t.id)))})));Kt.displayName="LearnTabs";const Qt=()=>{const[e,s]=u.useState((()=>localStorage.getItem("token")||sessionStorage.getItem("token"))),t=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}").id;return u.useEffect((()=>{const e=()=>{s(localStorage.getItem("token")||sessionStorage.getItem("token"))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),{token:e,isAuthenticated:!!e,userId:t}},Xt=u.memo((()=>{const[e,s]=I(),{isAuthenticated:t}=Qt(),a=e.get("tab")||"paths";return t?h.jsxs(We.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},initial:"hidden",animate:"visible",className:"min-h-screen bg-dark/50 backdrop-blur-sm",children:[h.jsxs(F,{children:[h.jsx("title",{children:"Nauka | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Nauka JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx(Me,{title:"Nauka JavaScript",subtitle:"Wybierz swoją ścieżkę nauki i rozpocznij przygodę z JS",className:"mb-8",titleClassName:"text-js drop-shadow-lg",subtitleClassName:"text-gray-400"}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6",children:[h.jsx(Kt,{activeTab:a,onTabChange:e=>{s((s=>("paths"===e?(s.delete("tab"),s.delete("filter")):s.set("tab",e),s)))}}),h.jsxs(We.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,type:"spring",stiffness:200,damping:20},className:"mt-8",children:["paths"===a&&h.jsx(Vt,{}),"lessons"===a&&h.jsx(At,{}),"resources"===a&&h.jsx(Gt,{})]},a)]})]})]}):h.jsx("div",{className:"flex justify-center py-12",children:h.jsx(Ge,{})})}));Xt.displayName="LearnSection";const Yt=Object.freeze(Object.defineProperty({__proto__:null,LearnSection:Xt},Symbol.toStringTag,{value:"Module"})),ea=e=>{const{userId:s,token:t}=Qt(),a=E(),{refetch:i}=Ut(),[n,r]=u.useState(0),{data:o,isLoading:l,error:d,refetch:m}=P({queryKey:["lesson",e],queryFn:()=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${x}lessons/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok){if(404===t.status)throw new Error("lesson_not_found");throw new Error("Błąd podczas pobierania lekcji")}const a=yield t.json();return a.data?a.data:a})))(e,t),enabled:!!e,retry:!1}),p="lesson_not_found"===(null==d?void 0:d.message),h=A({mutationFn:Tt,onSuccess:()=>{a.invalidateQueries({queryKey:["userProgress"]}),a.invalidateQueries({queryKey:["lessons"]}),a.invalidateQueries({queryKey:["lesson",e]}),i()}}),j=A({mutationFn:a=>((e,s,t,a)=>c(void 0,null,(function*(){const i=yield fetch(`${x}users/${e}/lessons/${s}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)});if(!i.ok)throw new Error("Błąd podczas aktualizacji postępu");return i.json()})))(s,e,a,t),onSuccess:()=>{a.invalidateQueries({queryKey:["userProgress"]})}});return{lesson:o,isLoading:l,error:d,isNotFound:p,activeSection:n,progress:null==o?void 0:o.progress,refetch:m,handleSectionChange:e=>{r(e)},handleSectionComplete:t=>c(void 0,null,(function*(){s&&e&&(yield j.mutateAsync({completedSections:[...(null==o?void 0:o.completedSections)||[],t],isCompleted:!1,points:0}))})),handleQuizComplete:t=>c(void 0,null,(function*(){s&&e&&(yield j.mutateAsync({completedSections:(null==o?void 0:o.completedSections)||[],isCompleted:!1,points:t}))})),handleLessonComplete:()=>c(void 0,null,(function*(){if(!e||!o)return Promise.reject(new Error("Brak wymaganych danych"));try{const e=yield h.mutateAsync({lessonId:o.id,pathId:o.pathId,token:t});return yield m(),yield i(),se.success("Lekcja ukończona!",{duration:3e3,position:"bottom-right"}),e}catch(s){throw se.error("Nie udało się ukończyć lekcji. Spróbuj ponownie.",{duration:4e3,position:"bottom-right"}),s}})),completeLessonMutation:h}},sa=u.memo((({children:e})=>h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e})})));sa.displayName="LessonLayout";const ta=u.memo((()=>h.jsxs(_,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors mb-6",children:[h.jsx(te,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})));ta.displayName="BackToLessons";const aa="beginner",ia="intermediate",na="advanced",ra={[aa]:"bg-green-500/10 text-green-400",[ia]:"bg-yellow-500/10 text-yellow-400",[na]:"bg-red-500/10 text-red-400"},oa=u.memo((({difficulty:e})=>h.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${ra[e]}`,children:"beginner"===e?"Podstawowy":"intermediate"===e?"Średni":"Zaawansowany"})));oa.displayName="DifficultyBadge";const la=u.memo((({xp:e})=>h.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2.5 py-1 rounded-lg text-sm",children:[h.jsx(B,{className:"w-4 h-4"}),e," XP"]})));la.displayName="XpBadge";const ca=u.memo((({title:e,duration:s,difficulty:t,xp:a})=>h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx(oa,{difficulty:t}),h.jsx(la,{xp:a})]}),h.jsx("h1",{className:"text-3xl font-bold text-js mb-4",children:e}),h.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(q,{className:"w-4 h-4"}),s," min"]})})]}))),da=ne,ma=u.memo((({code:e,language:s,showLineNumbers:t=!0,className:a})=>{const i=(e=>e?e.replace(/<!--[\s\S]*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"nodata:").replace(/eval\s*\(/gi,"").replace(/new\s+Function\s*\(/gi,""):"")(e);return h.jsxs("div",{className:`relative group ${a}`,children:[h.jsx("button",{onClick:()=>{navigator.clipboard.writeText(i)},className:"absolute right-2 top-2 p-2 rounded-lg bg-dark/50 text-gray-400 \r\n          opacity-0 group-hover:opacity-100 transition-opacity hover:text-js",title:"Kopiuj kod",children:h.jsx(ae,{className:"w-4 h-4"})}),h.jsx(da,{language:s,style:ie,showLineNumbers:t,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.5rem",background:"transparent"},codeTagProps:{style:{fontFamily:"JetBrains Mono, monospace"}},children:i})]})}));ma.displayName="CodeBlock";const xa=u.memo((({example:e,index:s})=>e.code?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-200",children:["Przykład ",s+1,":"]}),h.jsx(ma,{code:e.code,language:e.language||"javascript",showLineNumbers:!0,className:"rounded-lg border border-js/10"}),e.explanation&&h.jsx("p",{className:"text-gray-400 text-sm",children:e.explanation})]}):h.jsx("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-js/10",children:h.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Ten przykład nie zawiera jeszcze kodu."})}))),ua=u.memo((({section:e,index:s})=>h.jsxs("section",{className:"space-y-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-js",children:[s+1,". ",e.title]}),h.jsx("div",{className:"prose prose-invert max-w-none",children:e.content}),h.jsx("div",{className:"space-y-8 mt-8",children:e.examples&&e.examples.length>0&&h.jsx("div",{className:"space-y-8 mt-8",children:e.examples.map(((e,s)=>h.jsx(xa,{example:e,index:s},s)))})})]})));ua.displayName="LessonSection";const pa={perfect:{icon:$,label:"Perfekcyjnie!",color:"text-yellow-500"},excellent:{icon:G,label:"Świetnie!",color:"text-js"},good:{icon:B,label:"Mogło być lepiej!",color:"text-blue-500"}},ha=u.memo((({correctAnswers:e,totalQuestions:s})=>{const t=e/s*100,a=(e=>100===e?pa.perfect:e>=80?pa.excellent:pa.good)(t),i=a.icon;return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 text-center",children:[h.jsx("div",{className:"flex justify-center mb-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(i,{className:`w-12 h-12 ${a.color}`}),h.jsx(We.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},className:"absolute -right-2 -bottom-2",children:h.jsx(B,{className:"w-6 h-6 text-yellow-500 animate-pulse"})})]})}),h.jsx("h3",{className:`text-xl font-bold ${a.color} mb-2`,children:a.label}),h.jsxs("p",{className:"text-gray-400 mb-4",children:["Poprawne odpowiedzi: ",e," z ",s]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(We.div,{initial:{width:0},animate:{width:"100%"},className:"h-2 bg-dark rounded-full overflow-hidden mx-auto",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full "+(100===t?"bg-yellow-500":"bg-js"),transition:{delay:.5,duration:.8}})}),h.jsxs("p",{className:"text-sm text-gray-400",children:[Math.round(t),"% poprawnych odpowiedzi"]})]})]})})),ja=u.memo((({questions:e,onComplete:s})=>{const[t,a]=u.useState(0),[i,n]=u.useState(null),[r,o]=u.useState(0),[l,c]=u.useState(!1),[d,m]=u.useState(!1),x=t/e.length*100;return l?h.jsx(ha,{correctAnswers:r,totalQuestions:e.length,earnedXP:Math.round(r/e.length*100)}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"text-sm text-gray-400",children:["Pytanie ",t+1," z ",e.length]}),h.jsx("span",{className:"text-js",children:"•"})]}),h.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(x),"% ukończone"]})]}),d&&h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg text-gray-400 text-sm",children:e[t].explanation}),null!==i&&h.jsx(We.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{t<e.length-1?(a((e=>e+1)),n(null),m(!1)):(s(r,e.length),c(!0))},className:"w-full py-3 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:t<e.length-1?"Następne pytanie":"Zakończ quiz"}),h.jsx("div",{className:"text-lg font-medium text-gray-200",children:e[t].question}),h.jsx("div",{className:"space-y-3",children:e[t].options.map(((s,a)=>h.jsx(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:null!==i,onClick:()=>{return n(s=a),m(!0),void(s===e[t].correctAnswer&&o((e=>e+1)));var s},className:"w-full p-4 rounded-lg border text-left transition-colors\n              "+(null===i?"border-js/10 hover:border-js/20":a===e[t].correctAnswer?"border-green-500 bg-green-500/10 text-green-400":i===a?"border-red-500 bg-red-500/10 text-red-400":"border-js/10 opacity-50"),children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:s}),null!==i&&(a===e[t].correctAnswer?h.jsx(H,{className:"w-4 h-4 text-green-400"}):i===a?h.jsx(re,{className:"w-4 h-4 text-red-400"}):null)]})},a)))})]})}));ja.displayName="LessonQuiz",ha.displayName="QuizSummary";const ga=u.memo((({lesson:e,onQuizComplete:s})=>{if(!e)return null;if(!e.content)return h.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8 text-center",children:[h.jsx("h2",{className:"text-xl text-js mb-4",children:"Brak treści lekcji"}),h.jsx("p",{className:"text-gray-400",children:"Treść lekcji jest niedostępna. Spróbuj ponownie później."})]})});const{sections:t=[]}=e.content;return h.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:h.jsx(We.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:h.jsxs("div",{className:"space-y-8",children:[h.jsx(ca,{title:e.title,duration:String(e.duration),difficulty:e.difficulty,xp:e.points}),h.jsxs("div",{className:"space-y-8",children:[t.map(((e,s)=>h.jsx(ua,{section:e,index:s},s))),e.content.quiz&&h.jsx(ja,{questions:e.content.quiz,onComplete:s})]})]})})})}));ga.displayName="LessonMainContent";const ya=u.memo((({isCompleted:e,onComplete:s})=>{const[t,a]=u.useState(0),[i,n]=u.useState(!1),r=He(0),o=L();u.useEffect((()=>{const e=document.querySelector(".lesson-content");if(!e)return;const s=()=>{const{scrollTop:s,scrollHeight:t,clientHeight:i}=e,n=s/(t-i)*100;a(Math.min(n,100)),r.set(Math.min(n,100))};return e.addEventListener("scroll",s),s(),()=>e.removeEventListener("scroll",s)}),[r]);const l=t>=98&&!e;return h.jsx("div",{className:"mb-5 fixed bottom-0 left-0 right-0 bg-dark-800/95 border-t border-js/10 backdrop-blur-sm",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1 mr-8",children:[h.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:h.jsx(We.div,{style:{width:`${t}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),h.jsx("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:h.jsxs("span",{children:[Math.round(t),"% przeczytane"]})})]}),h.jsxs(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(void 0,null,(function*(){if(l&&!i)try{n(!0),yield s(),o("/dashboard/learn?tab=lessons")}catch(e){}finally{n(!1)}})),disabled:!l||i,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors\n            "+(l&&!i?"bg-js/10 text-js hover:bg-js/20":"bg-gray-800/50 text-gray-500 cursor-not-allowed"),children:[h.jsx(H,{className:"w-4 h-4"}),i?"Zapisywanie...":l?"Zakończ lekcję":"Przeczytaj całą lekcję"]})]})})}));ya.displayName="LessonProgress";const ba=u.memo((({lesson:e,activeSection:s,progress:t,onSectionComplete:a,onQuizComplete:i,onLessonComplete:n})=>{if(!e)return null;const r=(e.sections||[]).length;return h.jsx(h.Fragment,{children:h.jsxs(sa,{children:[h.jsx(ta,{}),h.jsx("div",{className:"w-full flex items-center justify-center",children:h.jsx(ga,{lesson:e,onSectionComplete:a,onQuizComplete:i})}),h.jsx(ya,{currentSection:s,totalSections:r,progress:t,isCompleted:e.isCompleted||!1,onComplete:n})]})})}));ba.displayName="LessonContent";const va=u.memo((()=>h.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-4",children:"Lekcja nie została znaleziona"}),h.jsxs(_,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors",children:[h.jsx(te,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})]})})})));va.displayName="LessonNotFound";const fa=()=>{var e;const{lessonSlug:s}=oe(),{stats:t,isLoading:a}=at();if(!s)return h.jsx(le,{to:"/dashboard/learn",replace:!0});const{lesson:i,isLoading:n,error:r,isNotFound:o,activeSection:l,progress:c,handleSectionComplete:d,handleQuizComplete:m,handleLessonComplete:x}=ea(s);if(n||a)return h.jsx(Na,{});if(o)return h.jsx(va,{});if(r)return h.jsx(ka,{onRetry:()=>window.location.reload()});if(!i)return h.jsx(va,{});const u=(null==(e=null==t?void 0:t.data)?void 0:e.progress.level)||0;return i.requiredLevel&&u<i.requiredLevel?h.jsx(wa,{requiredLevel:i.requiredLevel,userLevel:u}):h.jsxs(h.Fragment,{children:[h.jsxs(F,{children:[h.jsxs("title",{children:[i.title," | CodeLinesJS"]}),h.jsx("meta",{name:"description",content:i.description})]}),h.jsx(ba,{lesson:i,activeSection:l,progress:"number"==typeof c?c:0,onSectionComplete:d,onQuizComplete:m,onLessonComplete:x})]})},wa=({requiredLevel:e,userLevel:s})=>h.jsx(sa,{children:h.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:h.jsxs("div",{className:"bg-dark-800/50 p-8 rounded-xl border border-js/10 max-w-md",children:[h.jsx("div",{className:"mb-4 bg-js/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto",children:h.jsx(J,{className:"text-js text-2xl"})}),h.jsx("h2",{className:"text-xl font-bold text-js mb-2",children:"Lekcja zablokowana"}),h.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Aby odblokować tę lekcję, musisz osiągnąć poziom ",e,"."]}),h.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Twój obecny poziom: ",h.jsx("span",{className:"text-js font-medium",children:s})]}),h.jsx("button",{onClick:()=>window.location.href="/dashboard/learn",className:"mt-4 px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors w-full",children:"Wróć do listy lekcji"})]})})}),Na=()=>h.jsx(sa,{children:h.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:h.jsx(Ge,{})})}),ka=({onRetry:e})=>h.jsx(sa,{children:h.jsx(vt,{message:"Nie udało się pobrać lekcji. Spróbuj ponownie później.",onRetry:e})});fa.displayName="LessonPage";const Sa=Object.freeze(Object.defineProperty({__proto__:null,LessonPage:fa},Symbol.toStringTag,{value:"Module"})),za=[{id:"profile",label:"Profil",icon:ce},{id:"security",label:"Bezpieczeństwo",icon:J},{id:"preferences",label:"Preferencje",icon:z},{id:"delete",label:"Usuń konto",icon:de}],Ca="bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 h-fit shadow-lg",La="flex flex-col gap-2",Ta=e=>`\n    flex items-center gap-3 p-3 rounded-lg text-left\n    transition-colors duration-200\n    ${e?"bg-js/20 text-js":"text-gray-400 hover:text-js hover:bg-js/10"}\n  `,Pa="w-5 h-5",Ea=u.memo((({activeView:e,onViewChange:s})=>{const t=u.useCallback((e=>{s(e)}),[s]);return h.jsx("div",{className:Ca,children:h.jsx("nav",{className:La,children:za.map((s=>h.jsxs(We.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:()=>t(s.id),className:Ta(e===s.id),children:[h.jsx(s.icon,{className:Pa}),s.label]},s.id)))})})}));Ea.displayName="SettingsSidebar";const Aa=e=>({Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),Oa=["profile"],Ra=()=>{var e;const s=E(),{token:t}=m(),{data:a,isLoading:i,error:n}=P({queryKey:Oa,queryFn:()=>(e=>c(void 0,null,(function*(){var s;const t=yield fetch(`${x}settings/profile`,{headers:Aa(e)});if(!t.ok)throw new Error("Błąd podczas pobierania profilu");const a=yield t.json(),i=a.data||a,n=i.user||i;return{username:n.username||"",email:n.email||"",profile:{bio:n.bio||(null==(s=i.profile)?void 0:s.bio)||""}}})))(t||""),enabled:!!t,staleTime:3e5}),r=A({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){var t;const a={username:e.username,email:e.email,bio:(null==(t=e.profile)?void 0:t.bio)||""},i=yield fetch(`${x}settings/profile`,{method:"PUT",headers:Aa(s),body:JSON.stringify(a)});if(!i.ok){const e=yield i.json().catch((()=>({})));throw new Error(e.message||"Błąd podczas aktualizacji profilu")}return i.json()})))(e,t||""),onSuccess:e=>{s.setQueryData(Oa,e),s.invalidateQueries({queryKey:Oa})}});return{profile:a,username:(null==a?void 0:a.username)||"",email:(null==a?void 0:a.email)||"",bio:(null==(e=null==a?void 0:a.profile)?void 0:e.bio)||"",isLoading:i,error:n,updateProfile:r}},$a=Ke.object({username:Ke.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika może mieć maksymalnie 20 znaków"),email:Ke.string().email("Nieprawidłowy adres email"),profile:Ke.object({bio:Ke.string().max(160,"Bio może mieć maksymalnie 160 znaków").optional(),avatar:Ke.string().optional()})}),_a=e=>{var s;const{updateProfile:t}=Ra(),a=u.useCallback((e=>c(void 0,null,(function*(){var s;try{yield t.mutateAsync({username:e.username,email:e.email,profile:{bio:(null==(s=e.profile)?void 0:s.bio)||""}})}catch(a){throw a}}))),[t]),i={username:(null==e?void 0:e.username)||"",email:(null==e?void 0:e.email)||"",profile:{bio:(null==(s=null==e?void 0:e.profile)?void 0:s.bio)||""}},{form:n,onSubmit:r}=(({onSubmit:e,defaultValues:s})=>{var t,a;const i=me({resolver:Qe($a),defaultValues:{username:(null==s?void 0:s.username)||"",email:(null==s?void 0:s.email)||"",profile:{bio:(null==(t=null==s?void 0:s.profile)?void 0:t.bio)||"",avatar:(null==(a=null==s?void 0:s.profile)?void 0:a.avatar)||""}}});return{form:i,onSubmit:i.handleSubmit((s=>c(void 0,null,(function*(){try{yield e(s)}catch(t){}}))))}})({onSubmit:a,defaultValues:i});return{form:n,onSubmit:r}},Da={form:"w-full max-w-2xl sm:ml-0 sm:mr-auto \n    space-y-8 px-4 sm:px-0",usernameContainer:"flex flex-col gap-4",container:"bg-dark/30 backdrop-blur-sm rounded-xl \n    p-4 sm:p-6 md:p-8 border border-js/10 \n    space-y-6 md:space-y-8",header:"flex flex-col md:flex-row gap-6 md:gap-8",infoSection:"w-full md:w-2/3 space-y-6",bioSection:"space-y-4",bioLabel:"block text-gray-400 \n    text-sm sm:text-base \n    font-medium",bioTextarea:"w-full px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    text-sm sm:text-base \n    min-h-[120px] max-h-[240px] \n    resize-y\n    transition-colors duration-200",error:"text-red-500 text-sm mt-1",successMessage:"text-green-500 mt-2 text-sm font-medium"},Ga=u.memo((({register:e,errors:s})=>{var t,a;return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Da.usernameContainer,children:h.jsx(Ue,o({type:"text",label:"Nazwa użytkownika",placeholder:"Wprowadź nazwę użytkownika",icon:h.jsx(ce,{}),error:null==(t=s.username)?void 0:t.message},e("username")))}),h.jsx(Ue,o({type:"email",label:"Email",placeholder:"Wprowadź adres email",icon:h.jsx(xe,{}),error:null==(a=s.email)?void 0:a.message},e("email")))]})}));Ga.displayName="UserInfoFields";const Ba={container:"space-y-2",label:"block text-gray-400 text-sm",textarea:"w-full h-32 px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10\n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    resize-none",error:"text-red-500 text-sm"},Ma=u.memo((({register:e,errors:s,defaultValue:t})=>{var a;return h.jsxs("div",{className:Ba.container,children:[h.jsx("label",{className:Ba.label,children:"Bio"}),h.jsx("textarea",l(o({},e("profile.bio")),{className:Ba.textarea,placeholder:t||"Napisz coś o sobie..."})),(null==(a=s.profile)?void 0:a.bio)&&h.jsx("span",{className:Ba.error,children:s.profile.bio.message})]})}));Ma.displayName="BioField";const Ua={container:"flex flex-col-reverse sm:flex-row justify-end gap-3 sm:gap-4\n    w-full sm:w-auto mt-6 sm:mt-8",cancelButton:"w-full sm:w-auto order-1 sm:order-none\n    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg\n    bg-dark/50 text-gray-400\n    border border-js/10 hover:border-js/30 hover:bg-dark/60\n    disabled:opacity-50 disabled:cursor-not-allowed\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base font-medium\n  ",submitButton:"w-full sm:w-auto\n    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg\n    bg-js text-dark\n    hover:bg-js/90\n    disabled:opacity-50 disabled:cursor-not-allowed\n    transition-colors duration-200\n    text-sm sm:text-base font-medium\n    flex items-center justify-center\n  "},Fa=u.memo((({onCancel:e,isSubmitting:s,submitText:t="Zapisz zmiany",loadingText:a="Zapisywanie",disabled:i=!1})=>h.jsxs("div",{className:Ua.container,children:[h.jsx(Fe,{type:"button",onClick:e,className:Ua.cancelButton,disabled:s,children:"Anuluj zmiany"}),h.jsx(Fe,{type:"submit",disabled:s||i,className:Ua.submitButton,children:s?h.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-[100px]",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:a})]}):h.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:t})})]})));Fa.displayName="FormButtons";const Wa=u.memo((({handleCancel:e,register:s,errors:t,defaultBio:a,isSubmitting:i,isPending:n,onSubmit:r,isSaved:o=!1,isDirty:l=!1})=>h.jsxs(We.form,{onSubmit:r,className:Da.form,initial:{opacity:0},animate:{opacity:1},children:[h.jsx("div",{className:Da.container,children:h.jsxs("div",{className:Da.header,children:[h.jsxs("div",{className:Da.infoSection,children:[h.jsx(Ga,{register:s,errors:t}),h.jsx(Ma,{register:s,errors:t,defaultValue:a})]}),o&&!l&&h.jsx("div",{className:Da.successMessage,children:"✓ Zapisano zmiany"})]})}),h.jsx(Fa,{onCancel:e,isSubmitting:i||n,submitText:"Zapisz profil",loadingText:"Zapisywanie",disabled:!l||i})]})));Wa.displayName="ProfileFormContent";const Ia=u.memo((()=>{const{profile:e,username:s,email:t,bio:a,isLoading:i,updateProfile:n}=Ra(),{form:r,onSubmit:o}=_a(e||null),l=E(),[d,m]=u.useState(!1),[x,p]=u.useState(!1),{register:j,formState:{errors:g,isDirty:y},reset:b,setValue:v,watch:f}=r,w=f();u.useEffect((()=>{y&&p(!1)}),[w,y]),u.useEffect((()=>{e&&(v("username",s),v("email",t),v("profile.bio",a))}),[e,v,s,t,a]);const N=u.useCallback((()=>{try{e&&(b(e),se.success("Zmiany zostały anulowane"),p(!1))}catch(s){se.error("Nie udało się anulować zmian")}}),[e,b]);return i?h.jsx(Ge,{}):h.jsxs(h.Fragment,{children:[x&&!y&&h.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-2 rounded-lg mb-4 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"✓"}),"Twój profil został zaktualizowany pomyślnie"]}),h.jsx(Wa,{handleCancel:N,register:j,errors:g,defaultBio:a,isSubmitting:d||n.isPending,isPending:n.isPending,onSubmit:e=>c(void 0,null,(function*(){if(y)try{m(!0),yield o(e),yield l.invalidateQueries({queryKey:Oa}),p(!0),se.success("Profil został zaktualizowany pomyślnie")}catch(s){s instanceof Error?se.error(s.message||"Wystąpił błąd podczas aktualizacji profilu"):se.error("Wystąpił nieznany błąd podczas aktualizacji profilu")}finally{m(!1)}else se.success("Nie wprowadzono żadnych zmian")})),isSaved:x,isDirty:y})]})}));Ia.displayName="ProfileForm";const Ha=u.memo((({form:e,errors:s})=>{var t,a,i;const{register:n}=e;return h.jsxs("div",{className:"space-y-6",children:[h.jsx(Ue,o({type:"password",label:"Aktualne hasło",placeholder:"Wprowadź aktualne hasło",icon:h.jsx(J,{}),error:null==(t=s.currentPassword)?void 0:t.message},n("currentPassword"))),h.jsx(Ue,o({type:"password",label:"Nowe hasło",placeholder:"Wprowadź nowe hasło",icon:h.jsx(J,{}),error:null==(a=s.newPassword)?void 0:a.message},n("newPassword"))),h.jsx(Ue,o({type:"password",label:"Powtórz nowe hasło",placeholder:"Powtórz nowe hasło",icon:h.jsx(J,{}),error:null==(i=s.confirmPassword)?void 0:i.message},n("confirmPassword")))]})}));Ha.displayName="PasswordFields";const qa=Ke.object({currentPassword:Ke.string().min(1,"Aktualne hasło jest wymagane").min(8,"Hasło musi mieć minimum 8 znaków"),newPassword:Ke.string().min(1,"Nowe hasło jest wymagane").min(8,"Nowe hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać wielką literę").regex(/[0-9]/,"Hasło musi zawierać cyfrę"),confirmPassword:Ke.string().min(1,"Potwierdzenie hasła jest wymagane")}).refine((e=>e.newPassword===e.confirmPassword),{message:"Hasła muszą być takie same",path:["confirmPassword"]});class Ja extends Error{constructor(e,s){super(s),this.code=e,this.name="SecurityError"}}const Va=({onSuccess:e,onError:s}={})=>{const{token:t}=m(),a=me({resolver:Qe(qa),mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),i=A({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${x}settings/security/password`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=yield t.json(),s=e.message||"Wystąpił błąd podczas zmiany hasła",a=e.code||"UNKNOWN_ERROR";throw new Ja(a,s)}})))({currentPassword:e.currentPassword,newPassword:e.newPassword},t||""),onSuccess:()=>{a.reset(),null==e||e()},onError:s});return{form:a,onSubmit:a.handleSubmit((e=>i.mutateAsync(e))),isUpdating:i.isPending}},Za={initial:{opacity:0},animate:{opacity:1}},Ka=u.memo((()=>{const{handleSuccess:e,handleError:s,handleCancel:t,handleCancelError:a}={handleSuccess:u.useCallback((()=>{se.success("Hasło zostało zmienione")}),[]),handleError:u.useCallback((e=>{e instanceof Ja?se.error(e.message):se.error("Wystąpił błąd podczas zmiany hasła")}),[]),handleCancel:u.useCallback((()=>{se.success("Zmiany zostały anulowane")}),[]),handleCancelError:u.useCallback((()=>{se.error("Nie udało się anulować zmian")}),[])},{form:i,onSubmit:n,isUpdating:r}=Va({onSuccess:()=>{e(),i.reset()},onError:s}),{formState:{errors:c,isSubmitting:d},reset:m}=i,x=u.useCallback((()=>{try{m(),t()}catch(e){a()}}),[m,t,a]);return h.jsxs(We.form,l(o({onSubmit:n,className:"w-full max-w-md sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0"},Za),{children:[h.jsx(Ha,{form:i,errors:c}),h.jsx(Fa,{onCancel:x,isSubmitting:d||r,submitText:"Zmień hasło",loadingText:"Zmienianie hasła"})]}))}));Ka.displayName="SecurityForm";const Qa=Ke.object({emailNotifications:Ke.boolean(),pushNotifications:Ke.boolean(),language:Ke.literal("pl")});class Xa extends Error{constructor(e,s){super(s),this.code=e,this.name="PreferencesError"}}const Ya=["preferences"],ei=()=>{const{token:e,logout:s}=m(),t=E(),{data:a,isLoading:i,error:n,refetch:r}=P({queryKey:Ya,queryFn:()=>(e=>c(void 0,null,(function*(){var s,t;try{const a=yield fetch(`${x}settings/preferences`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw new Xa("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const e=yield a.json().catch((()=>null));throw new Xa((null==e?void 0:e.code)||"UNKNOWN_ERROR",(null==e?void 0:e.message)||"Błąd podczas pobierania preferencji")}const i=yield a.json(),n=i.data||i;return{emailNotifications:null!=(s=n.emailNotifications)&&s,pushNotifications:null!=(t=n.pushNotifications)&&t,language:n.language||"pl"}}catch(n){if(n instanceof Xa)throw n;throw new Xa("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas pobierania preferencji")}})))(e||""),enabled:!!e,staleTime:3e5,retry:(e,t)=>t instanceof Xa&&"AUTH_ERROR"===t.code?(se.error("Sesja wygasła. Zaloguj się ponownie."),null==s||s(),!1):e<3});!n||n instanceof Xa&&"AUTH_ERROR"===n.code||se.error(n instanceof Error?n.message:"Wystąpił błąd podczas ładowania preferencji");const o=A({mutationFn:s=>((e,s)=>c(void 0,null,(function*(){var t,a;try{const i=yield fetch(`${x}settings/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok){if(401===i.status)throw new Xa("AUTH_ERROR","Sesja wygasła. Zaloguj się ponownie.");const e=yield i.json().catch((()=>({code:"UNKNOWN_ERROR"})));throw new Xa((null==e?void 0:e.code)||"UNKNOWN_ERROR",(null==e?void 0:e.message)||"Wystąpił błąd podczas aktualizacji preferencji")}const n=yield i.json(),r=n.data||n;return{emailNotifications:null!=(t=r.emailNotifications)&&t,pushNotifications:null!=(a=r.pushNotifications)&&a,language:r.language||"pl"}}catch(n){if(n instanceof Xa)throw n;throw new Xa("UNKNOWN_ERROR","Wystąpił nieznany błąd podczas aktualizacji preferencji")}})))(s,e||""),onSuccess:e=>{t.setQueryData(Ya,e),t.invalidateQueries({queryKey:Ya}),se.success("Preferencje zostały zaktualizowane")},onError:e=>{if(e instanceof Xa&&"AUTH_ERROR"===e.code)return se.error("Sesja wygasła. Zaloguj się ponownie."),void(null==s||s());se.error(e instanceof Error?e.message:"Wystąpił błąd podczas aktualizacji preferencji")}});return{preferences:a,isLoading:i,error:n,updatePreferences:o,refetch:r}},si=()=>{const{preferences:e,isLoading:s,updatePreferences:t,refetch:a}=ei(),[i,n]=u.useState(!1),[r,o]=u.useState(!1),{form:l,onSubmit:d}=(({onSubmit:e,defaultValues:s})=>{const t=me({resolver:Qe(Qa),defaultValues:s||{emailNotifications:!1,pushNotifications:!1,language:"pl"},mode:"onChange",reValidateMode:"onChange",resetOptions:{keepDirtyValues:!0,keepValues:!0}}),a=t.handleSubmit((s=>c(void 0,null,(function*(){try{yield e(s)}catch(t){}}))));return{form:t,onSubmit:a}})({onSubmit:e=>c(void 0,null,(function*(){try{n(!0),yield t.mutateAsync({emailNotifications:e.emailNotifications,pushNotifications:e.pushNotifications,language:"pl"}),o(!0),yield a()}catch(s){throw s instanceof Xa?s:s instanceof Error?new Error(s.message||"Wystąpił błąd podczas aktualizacji preferencji"):new Error("Wystąpił nieznany błąd podczas aktualizacji preferencji")}finally{n(!1)}}))}),{register:m,formState:{isDirty:x},setValue:p,watch:h,reset:j}=l,g=h();u.useEffect((()=>{x&&o(!1)}),[g,x]),u.useEffect((()=>{e&&(p("emailNotifications",e.emailNotifications),p("pushNotifications",e.pushNotifications),p("language","pl"))}),[e,p]);return{isLoading:s,register:m,formValues:g,isSubmitting:i||t.isPending,isPending:t.isPending,isDirty:x,isSaved:r,updatePreferences:t,handleCancel:()=>{try{e&&(j({emailNotifications:e.emailNotifications,pushNotifications:e.pushNotifications,language:"pl"}),o(!1),se.success("Zmiany zostały anulowane"))}catch(s){se.error("Nie udało się anulować zmian")}},onSubmit:d,setValue:p}},ti={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",optionsContainer:"space-y-4 ml-4 sm:ml-8",optionLabel:"flex items-start sm:items-center gap-3 hover:cursor-pointer group\n    transition-colors duration-200",checkbox:"w-5 h-5 rounded border-gray-600 bg-gray-700 text-js \n    focus:ring-js/50 mt-1 sm:mt-0",optionText:"group-hover:text-js transition-colors duration-200",optionTitle:"block text-gray-200 text-base sm:text-lg",optionDescription:"block text-sm text-gray-400 mt-1"},ai=u.memo((({register:e,values:s,onChange:t})=>h.jsxs("div",{className:ti.section,children:[h.jsxs("h3",{className:ti.title,children:[h.jsx(O,{className:ti.icon}),"Powiadomienia"]}),h.jsx("div",{className:ti.optionsContainer,children:h.jsxs("label",{className:ti.optionLabel,children:[h.jsx("input",l(o({type:"checkbox"},e("emailNotifications")),{checked:s.emailNotifications,onChange:e=>t("emailNotifications",e.target.checked),className:ti.checkbox})),h.jsxs("div",{className:ti.optionText,children:[h.jsx("span",{className:ti.optionTitle,children:"Powiadomienia email"}),h.jsx("span",{className:ti.optionDescription,children:"Otrzymuj powiadomienia na email"})]})]})})]})));ai.displayName="NotificationsSection";const ii={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",container:"ml-4 sm:ml-8",select:"w-full max-w-xs px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 text-base sm:text-lg\n    focus:ring-2 focus:ring-js/50 focus:border-transparent \n    transition-colors"},ni=u.memo((({register:e})=>h.jsxs("div",{className:ii.section,children:[h.jsxs("h3",{className:ii.title,children:[h.jsx(ue,{className:ii.icon}),"Język"]}),h.jsx("div",{className:ii.container,children:h.jsx("select",l(o({},e("language")),{className:ii.select,children:h.jsx("option",{value:"pl",children:"Polski"})}))})]})));ni.displayName="LanguageSection";const ri=u.memo((({register:e,formValues:s,setValue:t,onSubmit:a,onCancel:i,isSubmitting:n,isPending:r})=>h.jsxs(We.form,{onSubmit:a,className:"w-full max-w-2xl sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0",initial:{opacity:0},animate:{opacity:1},children:[h.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 md:p-8 border border-js/10 space-y-6",children:[h.jsx(ai,{register:e,values:s,onChange:(e,s)=>t(e,s)}),h.jsx("div",{className:"w-full h-px bg-js/10"}),h.jsx(ni,{register:e})]}),h.jsx(Fa,{onCancel:i,isSubmitting:n||r,submitText:"Zapisz preferencje",loadingText:"Zapisywanie",disabled:n})]})));ri.displayName="PreferencesFormContent";const oi=u.memo((()=>{const{isLoading:e,register:s,formValues:t,isSubmitting:a,isPending:i,isDirty:n,isSaved:r,handleCancel:o,onSubmit:l,setValue:d}=si();return e?h.jsx(Ge,{}):h.jsx(ri,{register:s,formValues:t,setValue:d,onSubmit:e=>c(void 0,null,(function*(){e.preventDefault();try{yield l(e)}catch(s){s instanceof Error?se.error(s.message):se.error("Wystąpił nieznany błąd podczas zapisywania preferencji")}})),onCancel:o,isSubmitting:a,isPending:i,isDirty:n,isSaved:r})}));oi.displayName="PreferencesForm";class li extends Error{constructor(e,s){super(s),this.code=e,this.name="AccountError"}}const ci=Ke.object({password:Ke.string().min(1,"Hasło jest wymagane"),confirmation:Ke.string().refine((e=>"USUŃ KONTO"===e),{message:"Wpisz dokładnie 'USUŃ KONTO' aby potwierdzić"})}),di=({onSuccess:e,onError:s}={})=>{const t=me({resolver:Qe(ci)}),{token:a}=m(),i=A({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${x}settings/account`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=yield t.json();if("INVALID_PASSWORD"===e.code)throw new li("INVALID_PASSWORD","Podane hasło jest nieprawidłowe");if("INVALID_CONFIRMATION"===e.code)throw new li("INVALID_CONFIRMATION","Nieprawidłowe potwierdzenie");throw new li("UNKNOWN_ERROR","Wystąpił błąd podczas usuwania konta")}})))(e,a||""),onSuccess:()=>{t.reset(),null==e||e(),window.location.href="/logowanie"},onError:s}),n=t.handleSubmit((e=>c(void 0,null,(function*(){yield i.mutateAsync(e)}))));return{form:t,onSubmit:n,isDeleting:i.isPending}},mi=["Wszystkie twoje dane zostaną usunięte","Stracisz dostęp do wszystkich kursów","Twoje postępy w nauce zostaną utracone","Nie będzie możliwości przywrócenia konta"],xi={container:"\n    bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6\n    backdrop-blur-sm\n  ",content:"flex flex-col sm:flex-row items-start gap-4",icon:"text-red-500 text-xl sm:text-2xl mt-1 flex-shrink-0",title:"text-red-400 font-medium text-lg sm:text-xl mb-2",list:"\n    text-gray-400 space-y-2 list-disc list-inside\n    text-sm sm:text-base leading-relaxed\n  "},ui=u.memo((()=>h.jsx("div",{className:"\n      bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6\n      backdrop-blur-sm\n    ",role:"alert","aria-label":"Ostrzeżenie o usuwaniu konta",children:h.jsxs("div",{className:xi.content,children:[h.jsx(W,{className:xi.icon,"data-testid":"warning-icon"}),h.jsxs("div",{children:[h.jsx("h3",{className:xi.title,children:"Usuwanie konta jest nieodwracalne"}),h.jsx("ul",{className:xi.list,children:mi.map(((e,s)=>h.jsx("li",{children:e},s)))})]})]})})));ui.displayName="WarningBox";const pi=u.memo((({onConfirm:e})=>h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md sm:ml-0 sm:mr-auto px-4 sm:px-0",children:[h.jsx(ui,{}),h.jsx(Fe,{type:"button",onClick:e,className:"w-full px-6 py-3 rounded-lg bg-red-500/20 text-red-400 \r\n        hover:bg-red-500/30 transition-colors duration-200 shadow-none\r\n        text-base sm:text-lg font-medium",children:"Chcę usunąć konto"})]})));pi.displayName="InitialWarning";const hi={form:"space-y-6",confirmationField:"space-y-2",label:"block text-gray-400 text-sm sm:text-base",hint:"text-sm text-gray-500",input:"w-full px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    text-base sm:text-lg\n  ",error:"text-red-500 text-sm",buttons:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 mt-8",submitButton:"w-full sm:w-auto order-2 sm:order-1\n    px-4 sm:px-6 py-3 rounded-lg\n    bg-red-500/20 text-red-400 \n    hover:bg-red-500/30\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base font-medium\n    disabled:opacity-50 disabled:cursor-not-allowed\n    whitespace-nowrap\n  ",cancelButton:"w-full sm:w-auto order-1 sm:order-2\n    px-4 sm:px-6 py-3 rounded-lg\n    bg-dark/50 text-gray-400\n    border border-js/10\n    hover:text-js hover:border-js/30\n    hover:bg-dark/60\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base\n    disabled:opacity-50 disabled:cursor-not-allowed\n    whitespace-nowrap\n  "},ji=u.memo((({register:e,errors:s,isSubmitting:t,onCancel:a,onSubmit:i})=>{var n;return h.jsxs(We.form,{initial:{opacity:0},animate:{opacity:1},className:hi.form,onSubmit:i,children:[h.jsx(Ue,o({id:"password",type:"password",label:"Hasło",placeholder:"Wprowadź hasło aby potwierdzić",icon:h.jsx(J,{}),error:null==(n=s.password)?void 0:n.message},e("password"))),h.jsxs("div",{className:hi.confirmationField,children:[h.jsx("label",{htmlFor:"confirmation",className:hi.label,children:"Potwierdzenie"}),h.jsx("p",{className:hi.hint,children:'Wpisz "USUŃ KONTO" aby potwierdzić'}),h.jsx("input",l(o({id:"confirmation",type:"text"},e("confirmation")),{className:hi.input})),s.confirmation&&h.jsx("p",{className:hi.error,children:s.confirmation.message})]}),h.jsxs("div",{className:hi.buttons,children:[h.jsx(Fe,{type:"submit",disabled:t,className:hi.submitButton,children:t?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"Usuwanie"})]}):"Definitywnie usuń konto"}),h.jsx(Fe,{type:"button",onClick:a,disabled:t,className:hi.cancelButton,children:"Anuluj"})]})]})}));ji.displayName="ConfirmationForm";const gi=u.memo((()=>{const{showConfirmation:e,handleShowConfirmation:s,handleHideConfirmation:t}=(()=>{const[e,s]=u.useState(!1);return{showConfirmation:e,handleShowConfirmation:u.useCallback((()=>{s(!0)}),[]),handleHideConfirmation:u.useCallback((()=>{s(!1)}),[])}})(),{form:a,onSubmit:i,isDeleting:n,handleCancel:r}=(e=>{const s=u.useCallback((()=>{se.success("Konto zostało usunięte")}),[]),t=u.useCallback((e=>{if(e instanceof li)switch(e.code){case"INVALID_PASSWORD":return void se.error("Podane hasło jest nieprawidłowe");case"INVALID_CONFIRMATION":return void se.error("Nieprawidłowe potwierdzenie")}se.error("Nie udało się usunąć konta")}),[]),a=u.useCallback((()=>{try{e(),se.success("Operacja została anulowana")}catch(s){se.error("Nie udało się anulować operacji")}}),[e]),{form:i,onSubmit:n,isDeleting:r}=di({onSuccess:s,onError:t});return{form:i,onSubmit:n,isDeleting:r,handleCancel:a}})(t);return e?h.jsx(ji,{register:a.register,errors:a.formState.errors,isSubmitting:n,onCancel:r,onSubmit:i}):h.jsx(pi,{onConfirm:s})}));gi.displayName="DeleteAccountForm";const yi=u.memo((({activeView:e})=>h.jsx(Ie,{mode:"wait",children:h.jsxs(We.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-dark/30 backdrop-blur-sm rounded-xl p-6 border border-js/10 shadow-lg",children:[h.jsxs("h2",{className:"text-2xl font-bold font-space text-js mb-6",children:["profile"===e&&"Edytuj Profil","security"===e&&"Bezpieczeństwo","preferences"===e&&"Preferencje","delete"===e&&"Usuń Konto"]}),"profile"===e&&h.jsx(Ia,{}),"security"===e&&h.jsx(Ka,{}),"preferences"===e&&h.jsx(oi,{}),"delete"===e&&h.jsx(gi,{})]},e)})));yi.displayName="SettingsContent";const bi=u.memo((()=>{const[e,s]=u.useState("profile");return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[h.jsxs(F,{children:[h.jsx("title",{children:"Ustawienia | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx(We.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:h.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Ustawienia"})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[h.jsx(Ea,{activeView:e,onViewChange:s}),h.jsxs(F,{children:[h.jsxs("title",{children:[e.charAt(0).toUpperCase()+e.slice(1)," | CodeLinesJS"]}),h.jsx("meta",{name:"description",content:"Ustawienia CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx("div",{className:"lg:col-span-3",children:h.jsx(yi,{activeView:e})})]})]})}));bi.displayName="SettingsSection";const vi=Object.freeze(Object.defineProperty({__proto__:null,SettingsSection:bi},Symbol.toStringTag,{value:"Module"})),fi=u.memo((()=>h.jsx(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(We.div,{whileHover:{scale:1.1,rotate:15},className:"p-3 rounded-xl bg-gradient-to-br from-js/20 to-js/20",children:h.jsx(N,{className:"w-8 h-8 text-js"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold font-space text-transparent bg-clip-text bg-gradient-to-r from-js to-js",children:"Gry JavaScript"}),h.jsx("p",{className:"text-gray-400 mt-1",children:"Ucz się JavaScriptu poprzez zabawę i wyzwania"})]})]})})));fi.displayName="GamesHeader";const wi=u.memo((()=>h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map((e=>h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*e},className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700/50 overflow-hidden",children:[h.jsx("div",{className:"aspect-video bg-gray-800/50 animate-pulse"}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsx("div",{className:"h-6 bg-gray-800/50 rounded animate-pulse w-3/4"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse"}),h.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse w-4/5"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"}),h.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"})]}),h.jsx("div",{className:"h-8 w-24 bg-gray-800/50 rounded animate-pulse"})]})]})]},e)))})));wi.displayName="GamesListSkeleton";const Ni=u.memo((({query:e})=>{const s=e?{title:"Brak wyników wyszukiwania",description:`Nie znaleziono gier dla zapytania "${e}"`,icon:Z}:{title:"Brak gier w tej kategorii",description:"Spróbuj wybrać inną kategorię lub wróć później",icon:K};return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16",children:[h.jsx(We.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",bounce:.4},className:"w-20 h-20 mb-6 rounded-full bg-js/10 flex items-center justify-center",children:h.jsx(s.icon,{className:"w-10 h-10 text-js"})}),h.jsx(We.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold text-js mb-2 text-center",children:s.title}),h.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400 text-center max-w-md",children:s.description})]})}));Ni.displayName="NoGamesFound";const ki=u.memo((({game:e})=>{const s=L(),t=!e.isLevelAvailable;return h.jsxs(We.div,{whileHover:{scale:t?1:1.02},className:"group bg-dark-800/50 border rounded-xl overflow-hidden transition-all "+(t?"border-gray-700/50 opacity-50 cursor-not-allowed":"border-js/10 hover:border-js/20"),children:[h.jsxs("div",{className:"relative aspect-video",children:[h.jsx("div",{className:"w-full h-full bg-gradient-to-br from-js/5 to-js/20 flex items-center justify-center",children:h.jsx("div",{className:"bg-js/10 px-4 py-2 rounded-lg border border-js/20",children:h.jsx("span",{className:"font-mono text-js/80 font-medium",children:e.slug})})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/90 to-transparent"}),t?h.jsx("div",{className:"absolute inset-0 m-auto w-12 h-12 bg-gray-700 text-gray-400 rounded-full flex items-center justify-center",children:h.jsx(J,{className:"w-5 h-5"})}):h.jsx(We.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{e.isLevelAvailable&&s(`/dashboard/play/${e.slug}`)},className:"absolute inset-0 m-auto w-12 h-12 bg-js text-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(pe,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[h.jsx("h3",{className:"text-lg font-bold text-js line-clamp-1",children:e.title}),h.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2 py-0.5 rounded-lg text-sm",children:[h.jsx($,{className:"w-3.5 h-3.5"}),e.rewardPoints]})]}),h.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:t?`Dostępne od poziomu ${e.requiredLevel}`:e.description}),h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"flex items-center gap-4 text-gray-400",children:h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(B,{className:"w-4 h-4"}),e.rating.average.toFixed(1)]})}),h.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("easy"===e.difficulty?"bg-green-500/10 text-green-400":"medium"===e.difficulty?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"),children:"easy"===e.difficulty?"Łatwy":"medium"===e.difficulty?"Średni":"Trudny"})]})]})]})}));ki.displayName="GameCard";const Si=()=>{const{token:e}=m();return P({queryKey:["games"],queryFn:()=>(e=>c(void 0,null,(function*(){const s=yield fetch(`${x}games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Nie udało się pobrać gier");return s.json()})))(e||""),select:e=>({games:e.data,pagination:e.data}),staleTime:3e5})},zi=u.memo((({sortBy:e,searchQuery:s,selectedDifficulty:t})=>{const{data:a,isLoading:i,isError:n}=Si();if(i)return h.jsx(wi,{});if(n)return h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-red-400",children:"Wystąpił błąd podczas ładowania gier. Spróbuj ponownie później."})});if(!(null==a?void 0:a.games))return null;const r=a.games.filter((e=>("all"===t||e.difficulty===t)&&(e.title.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())))).sort(((s,t)=>{switch(e){case"newest":return new Date(t.createdAt).getTime()-new Date(s.createdAt).getTime();case"popular":return t.completions.count-s.completions.count;case"difficulty":return t.difficulty.localeCompare(s.difficulty);case"xp":return t.rewardPoints-s.rewardPoints;default:return 0}}));return r.length?h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4 sm:gap-6",children:r.map((e=>{const s={_id:e._id,id:e._id,slug:e.slug,isLevelAvailable:e.isLevelAvailable,title:e.title,description:e.description,difficulty:e.difficulty,category:"game",isCompleted:!1,rating:{average:0,count:0},completions:e.completions,completedCount:e.completions.count,thumbnailUrl:"",rewardPoints:e.rewardPoints,xpPoints:e.rewardPoints,requiredLevel:e.requiredLevel};return h.jsx(ki,{game:s},s._id)}))}):h.jsx(Ni,{query:s})}));zi.displayName="GamesList";const Ci=[{id:"newest",label:"Najnowsze",icon:q},{id:"popular",label:"Popularne",icon:U},{id:"difficulty",label:"Trudność",icon:B},{id:"xp",label:"Punkty XP",icon:$}],Li=u.memo((({activeSortOption:e,onSortChange:s})=>h.jsxs("div",{className:"flex items-center gap-4 lg:ml-auto",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Sortuj:"}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:Ci.map((t=>{const a=t.icon;return h.jsxs(We.button,{onClick:()=>s(t.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium\n                transition-all duration-200\n                ${e===t.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}\n              `,children:[h.jsx(a,{className:"w-4 h-4"}),t.label]},t.id)}))})]})));Li.displayName="GamesSorting";const Ti=u.memo((({value:e,onChange:s})=>{const t=u.useCallback((e=>{s(e.target.value)}),[s]);return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:e,onChange:t,placeholder:"Szukaj gry...",className:"\r\n            w-full pl-10 pr-4 py-1.5 \r\n            bg-dark border border-js/10\r\n            rounded-lg text-sm text-gray-200\r\n            focus:outline-none focus:border-js/30\r\n            transition-colors duration-200\r\n          "}),h.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-js/50"})]}),h.jsx(We.div,{initial:!1,animate:{width:e?"100%":"0%",opacity:e?1:0},className:"absolute bottom-0 left-0 h-0.5 bg-js/20 rounded-full"})]})}));Ti.displayName="GamesSearch";const Pi=[{value:"all",label:"Wszystkie"},{value:"easy",label:"Łatwe",color:"text-emerald-400"},{value:"medium",label:"Średnie",color:"text-indigo-400"},{value:"hard",label:"Trudne",color:"text-rose-400"}],Ei=u.memo((({selectedDifficulty:e,onDifficultyChange:s})=>h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Poziom:"}),h.jsx("div",{className:"flex gap-3 flex-wrap",children:Pi.map((t=>h.jsxs(We.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(t.value),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all relative\n              "+(e===t.value?`text-${t.color||"gray-200"}`:"text-gray-400 hover:text-gray-300"),children:[e===t.value&&h.jsx(We.div,{layoutId:"difficulty-background",className:`absolute inset-0 bg-gray-800/50 border rounded-lg -z-10 border-${t.color||"gray-400"}`,transition:{type:"spring",bounce:.2,duration:.6}}),h.jsx(Ie,{mode:"wait",children:h.jsx(We.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:e===t.value?h.jsx(he,{className:`w-3 h-3 ${t.color||"text-gray-400"}`}):h.jsx(je,{className:"w-3 h-3"})},e===t.value?"circle":"circle-outline")}),t.label]},t.value)))})]})));Ei.displayName="GamesDifficulty";const Ai=u.memo((()=>{const[e,s]=u.useState("newest"),[t,a]=u.useState(""),[i,n]=u.useState("all");return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full m-0 min-h-screen bg-dark/50 backdrop-blur-sm",children:[h.jsxs(g,{children:[h.jsx("title",{children:"Gry | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Games CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx(fi,{}),h.jsxs("div",{className:"mt-8 bg-dark-800/50 border border-js/10 rounded-xl p-4 sm:p-6",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsx("div",{className:"w-full sm:w-72",children:h.jsx(Ti,{value:t,onChange:a})}),h.jsx(Li,{activeSortOption:e,onSortChange:s})]}),h.jsx("div",{className:"mt-4",children:h.jsx(Ei,{selectedDifficulty:i,onDifficultyChange:n})})]}),h.jsx("div",{className:"mt-6",children:h.jsx(zi,{sortBy:e,searchQuery:t,selectedDifficulty:i})})]})]})]})}));Ai.displayName="GamesSection";const Oi=Object.freeze(Object.defineProperty({__proto__:null,GamesSection:Ai},Symbol.toStringTag,{value:"Module"})),Ri=u.memo((({title:e})=>h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("h1",{className:"text-2xl font-bold text-js",children:e})}))),$i=u.createContext(null),_i=({children:e})=>{const[s,t]=u.useState(null),[a,i]=u.useState(!1),[n,r]=u.useState(null),o=u.useCallback((e=>c(void 0,null,(function*(){i(!0),r(null);const{token:s}=m();try{const a=yield fetch(`${x}/games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error("Nie udało się pobrać zawartości gry");const i=(yield a.json()).data.games.find((s=>s.slug===e));if(!i)throw new Error("Nie znaleziono gry");t({title:i.title,description:i.description,difficulty:i.difficulty,rating:i.rating,completions:i.completions,rewardPoints:i.rewardPoints,gameData:i.gameData,estimatedTime:i.estimatedTime,isCompleted:i.isCompleted})}catch(a){r(a instanceof Error?a.message:"Wystąpił nieznany błąd")}finally{i(!1)}}))),[]);return h.jsx($i.Provider,{value:{gameContent:s,isLoading:a,error:n,fetchGameContent:o},children:e})};Xe.setConfig({FORBID_ATTR:["style","onerror","onload","fscommand","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onfullscreenchange","onfullscreenerror","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwheel"],ADD_TAGS:["meta"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","iframe","embed","base"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,SANITIZE_DOM:!0,WHOLE_DOCUMENT:!1,USE_PROFILES:{html:!0,mathMl:!1,svg:!1}});const Di={"scope-explorer":u.lazy((()=>d((()=>Promise.resolve().then((()=>Bn))),void 0))),"js-typo-hunter":u.lazy((()=>d((()=>Promise.resolve().then((()=>Zn))),void 0))),"async-quest":u.lazy((()=>d((()=>Promise.resolve().then((()=>lr))),void 0))),"regex-raider":u.lazy((()=>d((()=>Promise.resolve().then((()=>gr))),void 0))),"js-quiz":u.lazy((()=>d((()=>Promise.resolve().then((()=>Ar))),void 0)))},Gi=u.memo((()=>{const{slug:e}=oe(),s="string"==typeof e?Xe.sanitize(e):"";if(!s||!Di[s])return h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"text-gray-400",children:"Gra nie została znaleziona"})});const t=Di[s];return h.jsxs(_i,{children:[h.jsxs(g,{children:[h.jsxs("title",{children:[Xe.sanitize(s)," | CodeLinesJS"]}),h.jsx("meta",{name:"description",content:"Gra CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx("div",{className:"w-full h-full",children:h.jsx(u.Suspense,{fallback:h.jsx("div",{children:"Ładowanie gry..."}),children:h.jsx(t,{})})})]})}));Gi.displayName="GameplayArea";const Bi=u.memo((({game:e})=>{const s=L();return h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark-800 flex items-center justify-center",children:h.jsxs("div",{className:"max-w-7xl w-full mx-auto px-4 py-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-6",children:h.jsxs(We.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s("/dashboard/play")},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-js/10 text-js hover:bg-js/20 transition-colors",children:[h.jsx(ge,{className:"w-4 h-4"}),h.jsx("span",{children:"Powrót do menu"})]})}),h.jsx(Ri,{title:e.title}),h.jsx("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:h.jsx("div",{className:"lg:col-span-12",children:h.jsx(Gi,{})})})]})})}));Bi.displayName="GameplaySection";const Mi=u.memo((()=>{const{slug:e}=oe(),{data:s}=Si();if(!(null==s?void 0:s.games))return null;const t=s.games.find((s=>s.slug===e));return t?h.jsx(Bi,{game:t}):h.jsx(le,{to:"/dashboard/play",replace:!0})}));Mi.displayName="GameplayRouter";const Ui=Object.freeze(Object.defineProperty({__proto__:null,GameplayRouter:Mi},Symbol.toStringTag,{value:"Module"})),Fi=({code:e,onChange:s,onMount:t,isEditorReady:a})=>h.jsxs("div",{className:"h-[calc(100%-4rem)] rounded overflow-hidden relative",children:[!a&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark/50",children:h.jsx(ye,{className:"w-8 h-8 text-js animate-spin"})}),h.jsx(be,{theme:"vs-dark",language:"javascript",height:"100%",defaultLanguage:"javascript",value:e,onChange:s,onMount:t})]}),Wi=u.memo((({output:e,onClear:s,isExecuting:t})=>h.jsxs("div",{className:"h-[calc(100%-4rem)] bg-[#1e1e1e] rounded-lg overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-dark/30 border-b border-js/10",children:[h.jsx("span",{className:"text-sm text-gray-400",children:t?"Wykonywanie...":"Gotowe"}),h.jsx("button",{"data-testid":"clear-console-btn",onClick:s,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść konsolę",children:h.jsx(de,{className:"w-4 h-4"})})]}),h.jsx("div",{"data-testid":"console-output",className:"flex-1 p-4 font-mono text-sm overflow-auto",children:e.map(((e,s)=>h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-gray-300 mb-1",children:e},s)))})]})));Wi.displayName="ConsoleOutput";const Ii=({output:e,isExecuting:s,onClear:t,onRun:a})=>h.jsxs("div",{className:"bg-dark/50 rounded-lg p-4 border border-js/10",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-js",children:"Konsola"}),h.jsx("button",{"data-testid":"run-code-btn",onClick:a,disabled:s,className:"px-4 py-2 bg-js text-dark font-medium rounded hover:bg-js/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Wykonywanie...":"Uruchom"})]}),h.jsx(Wi,{output:e,onClear:t,isExecuting:s})]}),Hi="code_history",qi=u.memo((({history:e,onSelect:s,onClear:t})=>h.jsxs("div",{"data-testid":"history-panel",className:"absolute top-full right-0 mt-2 w-64 bg-dark/95 rounded-lg border border-js/10 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-js/10",children:[h.jsxs("div",{className:"flex items-center gap-2 text-js",children:[h.jsx(ve,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"Historia"})]}),e.length>0&&h.jsx("button",{"data-testid":"clear-history-btn",onClick:t,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść historię",children:h.jsx(de,{className:"w-4 h-4"})})]}),h.jsx("div",{className:"max-h-64 overflow-y-auto",children:0===e.length?h.jsx("div",{className:"p-3 text-sm text-gray-400",children:"Brak historii"}):e.map(((e,t)=>h.jsxs(We.button,{"data-testid":`history-item-${t}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>s(e.code),className:"w-full p-3 text-left hover:bg-js/10 transition-colors border-b border-js/5 last:border-0",children:[h.jsx("div",{className:"text-sm text-gray-300 truncate",children:e.code.split("\n")[0]}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]},e.timestamp)))})]})));qi.displayName="CodeHistory";const Ji=u.memo((()=>{const{output:e,isExecuting:s,executeCode:t,clearConsole:a}=(()=>{const[e,s]=u.useState([]),[t,a]=u.useState(!1),i=u.useCallback((()=>{s([])}),[]);return{output:e,isExecuting:t,executeCode:u.useCallback((e=>{a(!0);const t=[],i=console.log;return new Promise(((n,r)=>{const o=setTimeout((()=>{r(new Error("Przekroczono limit czasu wykonania"))}),3e3);try{console.log=(...e)=>{t.push(e.map((e=>"object"==typeof e?JSON.stringify(e,null,2):String(e))).join(" "))},c(void 0,null,(function*(){try{new Function("console",`\n              "use strict";\n              ${e}\n            `)(console),s(t),clearTimeout(o),n()}catch(a){s([`Błąd: ${a instanceof Error?a.message:"Nieznany błąd"}`]),r(a)}}))}finally{console.log=i,a(!1)}}))}),[]),clearConsole:i}})(),{history:i,addToHistory:n,clearHistory:r}=(()=>{const[e,s]=u.useState((()=>{const e=localStorage.getItem(Hi);return e?JSON.parse(e):[]}));return{history:e,addToHistory:u.useCallback((e=>{s((s=>{const t=[{code:e,timestamp:Date.now()},...s.filter((s=>s.code!==e))].slice(0,10);return localStorage.setItem(Hi,JSON.stringify(t)),t}))}),[]),clearHistory:u.useCallback((()=>{localStorage.removeItem(Hi),s([])}),[])}})(),{code:o,isEditorReady:l,handleEditorDidMount:d,handleEditorChange:m}=(e=>{const s=u.useRef(null),[t,a]=u.useState(e),[i,n]=u.useState(!1),r=u.useCallback((e=>{e&&a(e)}),[]);return u.useEffect((()=>{rs.init().then((e=>{e.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})}))}),[]),{code:t,isEditorReady:i,handleEditorDidMount:e=>{s.current=e,n(!0)},handleEditorChange:r}})('// Witaj w edytorze CodeLinesJS!\n// Napisz swój kod JavaScript tutaj\n\nfunction przywitajSie(imie) {\n  return `Cześć, ${imie}!`;\n}\n\nconsole.log(przywitajSie("Programisto"));'),{saveToFile:x}={saveToFile:u.useCallback((e=>{const s=new Blob([e],{type:"text/javascript"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`code_${(new Date).toISOString().slice(0,10)}.js`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}),[])},[p,j]=u.useState(!1),g=u.useCallback((()=>c(void 0,null,(function*(){yield t(o),n(o)}))),[o,t,n]);return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full p-6",children:[h.jsxs(F,{children:[h.jsx("title",{children:"Edytor Kodu | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Edytor kodu JavaScript - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Edytor Kodu JavaScript"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{"data-testid":"save-code-btn",onClick:()=>x(o),disabled:!l,className:"px-4 py-2 text-sm text-js border border-js/20 rounded hover:bg-js/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(fe,{className:"w-4 h-4 mr-2 inline-block"}),"Zapisz do Pliku"]}),h.jsx("button",{"data-testid":"history-btn",onClick:()=>j((e=>!e)),className:"p-2 text-gray-400 hover:text-js transition-colors",title:"Historia kodu",children:h.jsx(ve,{className:"w-5 h-5"})}),p&&h.jsx(qi,{history:i,onSelect:()=>{j(!1)},onClear:r})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[h.jsx(Fi,{code:o,onChange:m,onMount:()=>d(null),isEditorReady:l}),h.jsx(Ii,{output:e,isExecuting:s,onClear:a,onRun:g})]})]})}));Ji.displayName="CodeEditor";const Vi=Object.freeze(Object.defineProperty({__proto__:null,CodeEditor:Ji},Symbol.toStringTag,{value:"Module"})),Zi=u.memo((()=>h.jsx("div",{className:"absolute inset-0",children:h.jsxs("div",{className:"absolute inset-0",children:[h.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-[#1a1a1a] opacity-90"}),h.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),h.jsx("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-[#f7df1e] rounded-full blur-[150px] opacity-20"}),h.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"}),h.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-32 h-32 bg-[#f7df1e] rounded-full blur-[100px] opacity-10"})]})})));Zi.displayName="PageBackground";const Ki=u.memo((({title:e="Zgłoś błąd lub sugestię",description:s="Znalazłeś błąd w aplikacji lub masz pomysł na nową funkcję? Daj nam znać! Twoje opinie pomagają nam ulepszać CodeLinesJS."})=>h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-js mb-4",children:e}),h.jsx("p",{className:"text-gray-400 text-lg",children:s})]})));Ki.displayName="PageHeader";const Qi=()=>{const{token:e}=m(),[s,t]=u.useState(!1),[a,i]=u.useState(!1),[n,r]=u.useState(null),[d,p]=u.useState({title:"",description:"",category:"bug",email:""}),[h,j]=u.useState({});return{formData:d,errors:h,isSubmitting:s,submitSuccess:a,submitError:n,handleChange:e=>{const{name:s,value:t}=e.target;p((e=>l(o({},e),{[s]:t})))},handleSubmit:s=>c(void 0,null,(function*(){if(s.preventDefault(),(()=>{const e={};return d.title.trim()?d.title.length<5&&(e.title="Tytuł musi mieć co najmniej 5 znaków"):e.title="Tytuł jest wymagany",d.description.trim()?d.description.length<20&&(e.description="Opis musi mieć co najmniej 20 znaków"):e.description="Opis jest wymagany",d.category||(e.category="Kategoria jest wymagana"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(e.email="Podaj prawidłowy adres email"):e.email="Email jest wymagany",j(e),0===Object.keys(e).length})()){t(!0),r(null);try{yield((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${x}reports`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!t.ok)throw new Error("Nie udało się wysłać zgłoszenia");return t.json()})))(e||"",d),i(!0),p({title:"",description:"",category:"bug",email:""}),j({})}catch(a){r(a instanceof Error?a.message:"Wystąpił nieznany błąd")}finally{t(!1)}}})),resetSuccess:()=>{i(!1)}}},Xi=u.memo((({id:e,name:s,label:t,type:a="text",value:i,onChange:n,error:r,placeholder:o,options:l,rows:c=5})=>{const d=`w-full bg-dark/50 border ${r?"border-red-500":"border-js/20"} rounded-lg p-3 text-white focus:border-js focus:outline-none`;return h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:e,className:"block text-gray-300 mb-1",children:t}),"textarea"===a?h.jsx("textarea",{id:e,name:s,value:i,onChange:n,rows:c,className:d,placeholder:o}):"select"===a?h.jsx("select",{id:e,name:s,value:i,onChange:n,className:d,children:null==l?void 0:l.map((e=>h.jsx("option",{value:e.value,children:e.label},e.value)))}):h.jsx("input",{type:a,id:e,name:s,value:i,onChange:n,className:d,placeholder:o}),r&&h.jsx("p",{className:"text-red-500 text-sm mt-1",children:r})]})}));Xi.displayName="FormField";const Yi=u.memo((({isSubmitting:e,label:s="Wyślij zgłoszenie",loadingLabel:t="Wysyłanie..."})=>h.jsx(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:e,className:"w-full bg-js text-dark font-medium py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-js/90 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:e?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-dark border-t-transparent rounded-full"}),h.jsx("span",{children:t})]}):h.jsxs(h.Fragment,{children:[h.jsx(we,{}),h.jsx("span",{children:s})]})})));Yi.displayName="SubmitButton";const en=u.memo((({onReset:e,title:s="Dziękujemy za zgłoszenie!",message:t="Twoje zgłoszenie zostało przyjęte. Odpowiemy najszybciej jak to możliwe.",buttonLabel:a="Zgłoś kolejny błąd"})=>h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[h.jsx("p",{className:"text-green-400 font-medium mb-2",children:s}),h.jsx("p",{className:"text-gray-400",children:t}),h.jsx("button",{onClick:e,className:"mt-4 bg-js text-dark font-medium px-4 py-2 rounded-lg hover:bg-js/90 transition-colors",children:a})]})));en.displayName="SuccessMessage";const sn=u.memo((({message:e})=>h.jsx("div",{className:"mb-4 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:h.jsx("p",{className:"text-red-400",children:e})})));sn.displayName="ErrorMessage";const tn=u.memo((({title:e="Zgłoś błąd"})=>h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"p-3 rounded-lg bg-js/10",children:h.jsx(C,{className:"w-6 h-6 text-js"})}),h.jsx("h2",{className:"text-2xl font-bold text-js",children:e})]})));tn.displayName="FormHeader";const an=[{value:"bug",label:"Błąd w aplikacji"},{value:"feature",label:"Propozycja funkcji"},{value:"content",label:"Problem z treścią"},{value:"other",label:"Inne"}],nn=u.memo((()=>{const{formData:e,errors:s,isSubmitting:t,submitSuccess:a,submitError:i,handleChange:n,handleSubmit:r,resetSuccess:o}=Qi();return h.jsxs("div",{className:"w-full max-w-3xl mx-auto bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:[h.jsx(tn,{}),a?h.jsx(en,{onReset:o}):h.jsxs("form",{onSubmit:r,children:[h.jsx(Xi,{id:"title",name:"title",label:"Tytuł",value:e.title,onChange:n,error:s.title,placeholder:"Krótki opis problemu"}),h.jsx(Xi,{id:"category",name:"category",label:"Kategoria",type:"select",value:e.category,onChange:n,error:s.category,options:an}),h.jsx(Xi,{id:"description",name:"description",label:"Szczegółowy opis",type:"textarea",value:e.description,onChange:n,error:s.description,placeholder:"Opisz dokładnie napotkany problem, podaj kroki do jego odtworzenia"}),h.jsx(Xi,{id:"email",name:"email",label:"Email kontaktowy",type:"email",value:e.email,onChange:n,error:s.email,placeholder:"Twój adres email"}),i&&h.jsx(sn,{message:i}),h.jsx(Yi,{isSubmitting:t})]})]})}));nn.displayName="ReportForm";const rn=u.memo((({email:e="kontakt@codelinesjs.pl"})=>h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[h.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Inne sposoby kontaktu"}),h.jsxs("p",{className:"text-gray-400",children:["Możesz również skontaktować się z nami bezpośrednio przez email:"," ",h.jsx("a",{href:`mailto:${e}`,className:"text-js hover:underline",children:e})]})]})));rn.displayName="ContactSection";const on=u.memo((()=>{const e=u.useMemo((()=>({container:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}}})),[]);return h.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-dark via-dark-medium to-dark py-16 md:py-24 relative overflow-hidden",children:[h.jsx(Zi,{}),h.jsxs(F,{children:[h.jsx("title",{children:"Zgłoś Błąd | CodeLinesJS"}),h.jsx("meta",{name:"description",content:"Zgłoś błąd w CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),h.jsx("div",{className:"container mx-auto px-4 relative z-10",children:h.jsxs(We.div,{variants:e.container,initial:"hidden",animate:"show",className:"flex flex-col items-center gap-12",children:[h.jsx(We.div,{variants:e.item,children:h.jsx(Ki,{})}),h.jsx(We.div,{variants:e.item,className:"w-full",children:h.jsx(nn,{})}),h.jsx(We.div,{variants:e.item,children:h.jsx(rn,{})})]})})]})}));on.displayName="ReportBugPage";const ln=Object.freeze(Object.defineProperty({__proto__:null,ReportBugPage:on},Symbol.toStringTag,{value:"Module"})),cn=()=>{var e,s;const{token:t}=m(),{data:a,isLoading:i,error:n,refetch:r}=P({queryKey:["activeUsers"],queryFn:()=>(e=>c(void 0,null,(function*(){const s=yield fetch(`${x}users/active`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Błąd podczas pobierania aktywnych użytkowników");return s.json()})))(t||""),retry:2,refetchInterval:3e4,staleTime:6e4,enabled:!!t}),o=(null==(e=null==a?void 0:a.data)?void 0:e.users)||[],l=o.slice(0,8);return{users:o,visibleUsers:l,extraUsers:o.length>8?o.length-8:0,totalActive:(null==(s=null==a?void 0:a.data)?void 0:s.totalActive)||0,isLoading:i,error:n,refetch:r}},dn=u.memo((()=>{const{visibleUsers:e,extraUsers:s,isLoading:t,error:a}=cn();return t?h.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[h.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),h.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map(((e,s)=>h.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-700 animate-pulse"},s)))})]}):a?null:h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 mb-6",children:[h.jsx("h3",{className:"text-js text-sm font-medium mb-3",children:"Aktywni użytkownicy"}),h.jsxs("div",{className:"flex items-center gap-2",children:[e.map((e=>h.jsx(We.div,{className:"relative group",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:17},children:h.jsxs("div",{className:"w-10 h-10 rounded-full relative",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-js flex items-center justify-center",children:h.jsx("span",{className:"text-dark font-bold text-xl",children:e.username.charAt(0).toUpperCase()})}),h.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-dark",children:h.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"})})]})},e._id))),s>0&&h.jsxs(We.div,{whileHover:{scale:1.1},className:"w-10 h-10 rounded-full bg-js/10 flex items-center justify-center\r\n                     text-js text-sm font-medium border-2 border-dark/50",children:["+",s]})]})]})}));dn.displayName="ActiveUsers";const mn=u.memo((()=>h.jsx("div",{className:"space-y-6",children:h.jsx(dn,{})})));mn.displayName="CommunityFeed";const xn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),un=u.memo((({username:e,avatar:s,size:t="md",className:a=""})=>{const i=e.charAt(0).toUpperCase();return h.jsx("div",{className:`\n      rounded-full bg-js/30 flex items-center justify-center text-dark\n      ${{sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"}[t]} ${a}\n    `,children:s||h.jsx("span",{className:`font-bold ${{sm:"text-sm",md:"text-base",lg:"text-xl"}[t]}`,children:i})})}));un.displayName="UserAvatar";const pn=u.memo((({user:e,index:s,animationDelay:t=.1})=>{var a,i;const n=e.position||s+1,r=(null==(a=e.stats)?void 0:a.points)||e.points,o=(null==(i=e.stats)?void 0:i.level)||e.level;return h.jsx(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*t},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 hover:border-js/20 transition-colors",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(un,{username:e.username,avatar:e.avatar,size:"lg"}),s<3&&h.jsx("div",{className:"absolute -top-2 -right-2 rounded-full p-1 shadow-lg flex items-center justify-center w-8 h-8 text-sm font-bold text-dark",style:{background:0===s?"linear-gradient(45deg, #FFD700, #FFC107)":1===s?"linear-gradient(45deg, #C0C0C0, #B0B0B0)":"linear-gradient(45deg, #CD7F32, #B87333)"},children:n})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-gray-200",children:e.username}),h.jsxs("div",{className:"text-sm text-gray-400",children:["Poziom ",o," • ",r," punktów"]})]})]})})}));pn.displayName="RankingItem";const hn=u.memo((({users:e})=>(null==e?void 0:e.length)?h.jsx("div",{className:"space-y-4",children:e.map(((e,s)=>h.jsx(pn,{user:e,index:s},e.id||e._id||s)))}):h.jsxs("div",{className:"text-center text-gray-400 py-8",children:[h.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),h.jsx("div",{children:"Brak danych rankingowych do wyświetlenia"})]})));hn.displayName="RankingList";const jn=u.memo((({icon:e,label:s,value:t,className:a=""})=>h.jsxs(We.div,{className:`bg-dark/20 rounded-lg p-4 border border-js/5 ${a}`,whileHover:{scale:1.02},transition:{duration:.2},children:[h.jsx(e,{className:"w-6 h-6 text-js mb-2"}),h.jsx("p",{className:"text-gray-400 text-sm",children:s}),h.jsx("p",{className:"text-2xl font-bold text-js",children:t})]})));jn.displayName="StatCard";const gn=u.memo((({currentUserStats:e})=>{if(!e)return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-js mb-6",children:"Twoje Statystyki"}),h.jsx("p",{className:"text-gray-400",children:"Nie udało się załadować twoich statystyk. Zaloguj się, aby zobaczyć swoje miejsce w rankingu."})]});const s=[{icon:$,label:"Twoja pozycja",value:`#${e.rank}`},{icon:B,label:"Poziom",value:"number"==typeof e.level?e.level.toLocaleString():e.level},{icon:ke,label:"Punkty",value:"number"==typeof e.points?e.points.toLocaleString():e.points}];return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[h.jsxs("h2",{className:"text-xl font-bold text-js mb-6",children:["Twoje Statystyki ",e.username&&`(${e.username})`]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.map((e=>h.jsx(jn,{icon:e.icon,label:e.label,value:e.value},e.label)))})]})}));gn.displayName="RankingStats";const yn=()=>{const{token:e}=m(),{data:s,isLoading:t,error:a,refetch:i}=P({queryKey:["ranking"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak autoryzacji - zaloguj się, aby zobaczyć ranking");try{const t=yield fetch(`${x}ranking`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(401===t.status)throw new Error("Brak autoryzacji - zaloguj się ponownie");if(429===t.status)throw new Error("Zbyt wiele zapytań. Spróbuj ponownie za chwilę");if(!t.ok){const e=yield t.text();let a="Błąd podczas pobierania rankingu";try{const s=JSON.parse(e);a=s.message||s.error||a}catch(s){}throw new Error(a)}return yield t.json()}catch(a){throw a instanceof Error?a:new Error("Nieznany błąd podczas pobierania rankingu")}})))(e||""),staleTime:3e5,retry:(e,s)=>e<3&&!s.message.includes("autoryzacji"),enabled:!!e}),n=null==s?void 0:s.data;return{data:n,ranking:(null==n?void 0:n.ranking)||[],totalUsers:(null==n?void 0:n.totalUsers)||0,userStats:(null==n?void 0:n.userStats)||null,isLoading:t,error:a,refetch:i}},bn=u.memo((()=>{const{users:e,currentUserStats:s,isLoading:t,error:a}=(()=>{const{data:e,ranking:s,userStats:t,isLoading:a,error:i}=yn();return{users:u.useMemo((()=>s&&s.length>0?s:e&&"ranking"in e?e.ranking:[]),[s,e]),currentUserStats:u.useMemo((()=>{var s,a,i,n;if(t)return{username:t.username,rank:t.rank,level:(null==(s=t.stats)?void 0:s.level)||"-",points:(null==(a=t.stats)?void 0:a.points)||"-"};if(e&&"userStats"in e){const s=e.userStats;return{username:s.username,rank:s.rank,level:(null==(i=s.stats)?void 0:i.level)||"-",points:(null==(n=s.stats)?void 0:n.points)||"-"}}return null}),[t,e]),isLoading:a,error:i}})();return t?h.jsx(_e,{text:"Ładowanie rankingu..."}):a?h.jsxs("div",{className:"text-center p-8",children:[h.jsx("div",{className:"text-red-500 text-2xl mb-2",children:"Błąd ładowania"}),h.jsx("p",{className:"text-gray-400",children:a instanceof Error?a.message:"Nie udało się załadować danych rankingu. Spróbuj ponownie później."})]}):h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-2 space-y-6",children:h.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-6 shadow-lg",children:[h.jsx("div",{className:"flex items-center justify-between mb-6",children:h.jsx("h2",{className:"text-xl font-bold text-js",children:"Ranking"})}),h.jsx(hn,{users:e})]})}),h.jsx("div",{className:"space-y-6",children:h.jsx(gn,{currentUserStats:s})})]})}));bn.displayName="CommunityRanking";const vn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),fn=u.memo((({category:e,stats:s})=>{const t=(()=>{switch(e){case"scope":return v;case"closure":return ze;case"hoisting":return Se}})(),a=s.correct/s.total*100;return h.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(t,{className:"w-4 h-4 text-js"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:"text-sm text-gray-400",children:(()=>{switch(e){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}})()}),h.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),h.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})}));fn.displayName="CategoryProgress";const wn=u.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(v,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),h.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{className:"w-full",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),h.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:h.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]}),h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[h.jsx(fn,{category:"scope",stats:e.categoryStats.scope}),h.jsx(fn,{category:"closure",stats:e.categoryStats.closure}),h.jsx(fn,{category:"hoisting",stats:e.categoryStats.hoisting})]})]})}));wn.displayName="ScopeExplorerStats";const Nn=u.memo((({gameContent:e,onStart:s})=>h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-4 text-center",children:e.title}),h.jsx("div",{className:"mb-6 text-gray-400 text-center",children:e.description}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Poziom trudności"}),h.jsx("div",{className:"text-lg font-bold text-js capitalize",children:e.difficulty})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Punkty do zdobycia"}),h.jsxs("div",{className:"text-lg font-bold text-js flex items-center justify-center gap-1",children:[h.jsx(B,{className:"w-4 h-4"}),e.rewardPoints]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Szacowany czas"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e.estimatedTime," min"]})]})]}),h.jsxs("button",{onClick:s,className:"w-full px-6 py-4 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors flex items-center justify-center gap-2",children:[h.jsx(pe,{className:"w-4 h-4"}),h.jsx("span",{children:"Rozpocznij grę"})]})]})));Nn.displayName="GameIntro";const kn=({maxTime:e,onTimeEnd:s,isPaused:t})=>{const[a,i]=u.useState(0),[n,r]=u.useState(!1),o=u.useCallback((()=>{r(!0)}),[]),l=u.useCallback((()=>{r(!1)}),[]),c=u.useCallback((()=>{i(0),r(!1)}),[]);return u.useEffect((()=>{let a;return n&&!t&&(a=window.setInterval((()=>{i((t=>{const a=t+1;return a>=e?(l(),s(),e):a}))}),1e3)),()=>{a&&window.clearInterval(a)}}),[n,t,e,s,l]),{timeElapsed:a,resetTimer:c,startTimer:o,stopTimer:l,isRunning:n}},Sn=u.memo((({isLoading:e,error:s,children:t})=>e?h.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:h.jsxs(We.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[h.jsx(We.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:h.jsx(ye,{})}),h.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):s?h.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:h.jsxs(We.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[h.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:h.jsx(W,{})}),h.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),h.jsx("div",{className:"text-gray-400",children:s.message})]})}):h.jsx(h.Fragment,{children:t})));Sn.displayName="LoadingErrorContainer";const zn=e=>{switch(e){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},Cn=e=>{switch(e){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Ln=e=>{switch(e){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},Tn=({onEscape:e,onEnter:s,onNumber1:t,onNumber2:a,onNumber3:i,onNumber4:n,disabled:r=!1})=>{const o=u.useCallback((o=>{if(!r)switch(o.key){case"Escape":null==e||e();break;case"Enter":null==s||s();break;case"1":null==t||t();break;case"2":null==a||a();break;case"3":null==i||i();break;case"4":null==n||n()}}),[e,s,t,a,i,n,r]);u.useEffect((()=>(window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o))),[o])},Pn=u.memo((({currentLevel:e,totalLevels:s})=>{const t=(e-1)/s*100;return h.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full bg-js",transition:{duration:.3}})})}));Pn.displayName="ScopeExplorerProgress";const En=Le,An=u.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,currentLevel:a,totalLevels:i,onGameOver:n})=>{const[r,o]=u.useState(null),[l,c]=u.useState(!1),[d,m]=u.useState(null),[x,p]=u.useState(!1),j=u.useCallback((a=>{o(a);const i=a===e.correct;m(i),c(!0),i?(s(e.points||10,e.category),setTimeout((()=>{t(),o(null),c(!1),m(null),p(!1)}),1500)):setTimeout((()=>{n()}),2e3)}),[e,s,t,n]),g=u.useCallback((s=>{!l&&s<e.options.length&&j(e.options[s])}),[l,e.options,j]);Tn({onNumber1:()=>g(0),onNumber2:()=>g(1),onNumber3:()=>g(2),disabled:l});const y=(e=>{switch(e){case"scope":return v;case"closure":return ze;case"hoisting":return Se}})(e.category);return h.jsxs(We.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[h.jsx(Pn,{currentLevel:a,totalLevels:i}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(y,{className:"w-4 h-4 text-js"})}),h.jsx("div",{className:"text-sm text-gray-400",children:zn(e.category)})]}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Cn(e.difficulty)}`,children:Ln(e.difficulty)})]}),h.jsx("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg overflow-hidden",children:h.jsx(En,{language:"javascript",style:Ce,customStyle:{padding:"1.5rem",borderRadius:"0.5rem",fontSize:"1.1rem",background:"transparent"},children:e.code})}),h.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.options.map(((e,s)=>h.jsxs(We.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(e),disabled:l,className:`\n              w-full break-words\n              relative p-4 rounded-lg font-mono text-lg transition-colors\n              ${r===e?d?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}\n            `,children:[h.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:s+1}),e]},e)))}),h.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-3) aby wybrać odpowiedź"}),l&&h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+(d?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"),children:h.jsxs("p",{className:"text-sm "+(d?"text-green-400":"text-red-400"),children:[d?"Świetnie! ":"Spróbuj jeszcze raz. ",e.explanation]})}),x&&!d&&h.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-js/10 border border-js/20 rounded-lg",children:h.jsxs("p",{className:"text-sm text-js",children:[h.jsx("span",{className:"font-medium",children:"Podpowiedź:"})," Zwróć uwagę na zakres zmiennych i ich dostępność w różnych kontekstach."]})})]},a)}));An.displayName="ScopeExplorerGame";const On=()=>{const{token:e}=m(),s=E(),t=A({mutationFn:s=>c(void 0,null,(function*(){return((e,s)=>c(void 0,null,(function*(){try{const t=yield fetch(`${x}progress/points`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({points:s})});if(!t.ok)throw new Error("Nie udało się zaktualizować punktów");return yield t.json()}catch(t){throw t}})))(e||"",s)})),onSuccess:()=>{s.invalidateQueries({queryKey:["userProgress"]})}});return{updatePoints:t.mutate,isUpdating:t.isPending,error:t.error}},Rn=u.memo((({score:e,timeElapsed:s,challenges:t,correctAnswers:a,categoryStats:i,onRestart:n})=>{const{updatePoints:r}=On();u.useEffect((()=>{r(e)}),[e,r]);return h.jsxs(We.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===t.length?"Gratulacje!":"Koniec gry!"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",t.length]})]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),h.jsx("div",{className:"text-lg font-bold text-js",children:(o=s,`${Math.floor(o/60)}:${(o%60).toString().padStart(2,"0")}`)})]})]})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),Object.entries(i).map((([e,s])=>{const t=(e=>{switch(e){case"scope":default:return v;case"closure":return ze;case"hoisting":return Se}})(e);return h.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(t,{className:"w-4 h-4 text-js"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-js",children:"scope"===e?"Zakres zmiennych":"closure"===e?"Domknięcia":"Hoisting"}),h.jsxs("div",{className:"text-xs text-gray-400",children:["Ukończone zadania: ",s.correct,"/",s.total]})]})]}),h.jsxs("div",{className:"text-sm font-medium text-js",children:[s.points," pkt"]})]},e)}))]}),h.jsx("button",{onClick:n,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var o}));Rn.displayName="ScopeExplorerSummary";const $n=()=>({containerAnimation:u.useMemo((()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})),[]),gameAnimation:u.useMemo((()=>({initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3}})),[]),summaryAnimation:u.useMemo((()=>({initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}})),[])}),_n=u.memo((({isGameOver:e,gameStats:s,currentChallenge:t,finalTime:a,challenges:i,onScoreUpdate:n,onLevelComplete:r,onGameOver:o,onRestart:l})=>{const{gameAnimation:c,summaryAnimation:d}=$n();return t||e?h.jsx(Ie,{mode:"wait",children:h.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:e?h.jsx(We.div,{initial:d.initial,animate:d.animate,exit:d.exit,transition:d.transition,children:h.jsx(Rn,{score:s.score,timeElapsed:a,challenges:i||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):h.jsx(We.div,{initial:c.initial,animate:c.animate,exit:c.exit,transition:c.transition,className:"w-full",children:h.jsx(An,{currentChallenge:t,onScoreUpdate:n,onLevelComplete:r,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:o})},`level-${s.currentLevel}`)})}):null}));_n.displayName="GameContent";const Dn=({title:e,description:s,gameName:t="JSTypoHunter"}={})=>({pageTitle:u.useMemo((()=>e?`${e} | CodeLinesJS`:`${t} - Gra programistyczna | CodeLinesJS`),[e,t]),pageDescription:u.useMemo((()=>s||`Zagraj w ${t} - interaktywną grę programistyczną, która pomoże Ci rozwinąć umiejętności kodowania.`),[s,t])}),Gn=u.memo((({isPaused:e=!1})=>{const{gameContent:s,isLoading:t,error:a}=(()=>{const{data:e,isLoading:s,error:t}=Si();return{gameContent:u.useMemo((()=>null==e?void 0:e.games.find((e=>"scope-explorer"===e.slug))),[null==e?void 0:e.games]),isLoading:s,error:t}})(),{containerAnimation:i}=$n(),{pageTitle:n,pageDescription:r}=Dn(),{isGameStarted:c,isGameOver:d,finalTime:m,gameStats:x,currentChallenge:p,handleScoreUpdate:j,handleLevelComplete:y,handleRestart:b,handleStartGame:v,handleGameOver:f}=(({gameContent:e,isPaused:s})=>{var t;const[a,i]=u.useState(!1),[n,r]=u.useState(!1),[c,d]=u.useState(0),[m,x]=u.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}}}),{timeElapsed:p,resetTimer:h,startTimer:j,stopTimer:g}=kn({maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,onTimeEnd:()=>{r(!0),d(p),g()},isPaused:s});u.useEffect((()=>{x((e=>l(o({},e),{timeElapsed:p})))}),[p]),u.useEffect((()=>{if(!(null==e?void 0:e.gameData))return;const s={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};e.gameData.forEach((e=>{const t=e.category;s[t].total++,s[t].points+=e.points||0})),x((t=>l(o({},t),{totalLevels:e.gameData.length,maxTime:e.estimatedTime?60*e.estimatedTime:300,categoryStats:s})))}),[e]);const y=u.useCallback(((e,s)=>{x((t=>l(o({},t),{score:t.score+e,correctAnswers:t.correctAnswers+1,categoryStats:l(o({},t.categoryStats),{[s]:l(o({},t.categoryStats[s]),{correct:t.categoryStats[s].correct+1})})})))}),[]),b=u.useCallback((()=>{var s;const t=m.currentLevel+1;if(t>((null==(s=null==e?void 0:e.gameData)?void 0:s.length)||0))return r(!0),d(p),void g();x((e=>l(o({},e),{currentLevel:t})))}),[m.currentLevel,p,null==(t=null==e?void 0:e.gameData)?void 0:t.length,g]),v=u.useCallback((()=>{if(!(null==e?void 0:e.gameData))return;const s={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};e.gameData.forEach((e=>{const t=e.category;s[t].total++,s[t].points+=e.points||0})),x({currentLevel:1,totalLevels:e.gameData.length,score:0,timeElapsed:0,maxTime:e.estimatedTime?60*e.estimatedTime:300,correctAnswers:0,categoryStats:s}),r(!1),d(0),h(),j()}),[h,j,e]),f=u.useCallback((()=>{i(!0),j()}),[j]),w=u.useCallback((()=>{r(!0),d(p),g()}),[p,g]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:m,currentChallenge:(null==e?void 0:e.gameData)?e.gameData[m.currentLevel-1]:void 0,handleScoreUpdate:y,handleLevelComplete:b,handleRestart:v,handleStartGame:f,handleGameOver:w}})({gameContent:s,isPaused:e});return h.jsx(Sn,{isLoading:t,error:a,children:s&&h.jsx(h.Fragment,{children:c?h.jsxs(We.div,l(o({},i),{className:"w-full h-full flex flex-col",children:[h.jsxs(g,{children:[h.jsx("title",{children:n}),h.jsx("meta",{name:"description",content:r})]}),h.jsx(wn,{stats:x,isGameOver:d,finalTime:m}),h.jsx(_n,{isGameOver:d,gameStats:x,currentChallenge:p,finalTime:m,challenges:s.gameData,onScoreUpdate:j,onLevelComplete:y,onGameOver:f,onRestart:b})]})):h.jsx(Nn,{gameContent:s,onStart:v})})})}));Gn.displayName="ScopeExplorer";const Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),Mn=u.memo((({stats:e})=>{const s=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(v,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),h.jsx("div",{className:"text-lg font-bold text-js",children:e.score})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 gap-3 flex items-center",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{className:"w-full",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),h.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:h.jsxs("span",{className:"block w-full break-words",children:[s(e.timeElapsed),"/",s(e.maxTime)]})})]})]})]})}));Mn.displayName="JSTypoHunterStats";const Un=u.memo((({isLoading:e,error:s,children:t})=>e?h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ye,{className:"animate-spin text-4xl text-js mx-auto mb-4"}),h.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Ładowanie gry..."})]})}):s?h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx(W,{className:"text-4xl text-red-500 mx-auto mb-4"}),h.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),h.jsx("div",{className:"text-red-400",children:s.message})]})}):t?h.jsx(h.Fragment,{children:t}):h.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-64 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx(W,{className:"text-4xl text-yellow-500 mx-auto mb-4"}),h.jsx("div",{className:"text-xl font-medium text-gray-100",children:"Gra niedostępna"})]})})));Un.displayName="LoadingError";const Fn=u.memo((({type:e,message:s})=>e?h.jsx(Ie,{children:h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`\n          absolute top-4 left-1/2 -translate-x-1/2 \n          px-4 py-2 rounded-lg flex items-center gap-2\n          ${"success"===e?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}\n        `,children:["success"===e?h.jsx(H,{className:"w-4 h-4"}):h.jsx(re,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:s})]})}):null));Fn.displayName="JSTypoHunterFeedback";const Wn=u.memo((({hint:e,isVisible:s})=>s?h.jsxs(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 p-3 bg-js/10 border border-js/20 rounded-lg flex items-start gap-3",children:[h.jsx(ee,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-js mb-1",children:"Podpowiedź:"}),h.jsx("div",{className:"text-sm text-gray-400",children:e})]})]}):null));Wn.displayName="JSTypoHunterHint";const In=e=>{switch(e){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Hn=u.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,onIncorrectAnswer:a})=>{const[i,n]=u.useState(e.code),[r,o]=u.useState({type:null,message:""}),[l,c]=u.useState(0),d=(e,s)=>{const t=e.trim().replace(/\s+/g," "),a=s.trim().replace(/\s+/g," ");if(t.includes(a))return!0;return((e,s)=>{if(e===s)return 1;let t=0;const a=e.length>s.length?e:s,i=e.length>s.length?s:e;for(let n=0;n<i.length;n++)i[n]===a[n]&&t++;return t/a.length})(t,a)>.8},m=u.useCallback((()=>{const r=i.split("\n");let m=!1;for(const s of r)if(d(s,e.correct)){m=!0;break}if(m){o({type:"success",message:"Świetnie! Poprawna odpowiedź!"});const a=Math.max(10-2*l,1);s(a),setTimeout((()=>{t(),n(e.code),o({type:null,message:""}),c(0)}),1500)}else c((e=>e+1)),l+1>=3?(o({type:"error",message:"Niestety, przekroczyłeś liczbę prób. Koniec gry!"}),setTimeout((()=>{a()}),1500)):(o({type:"error",message:"Niestety, to nie jest prawidłowa odpowiedź. Pozostałe próby: "+(3-l-1)}),setTimeout((()=>{o({type:null,message:""})}),1500))}),[i,e,l,s,t,a]),x=(e=>{switch(e){case"syntax":return v;case"naming":return Te;case"logic":return ee}})(e.category);return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[h.jsx(Fn,{type:r.type,message:r.message}),h.jsxs("div",{className:"mb-4 p-5",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(x,{className:"w-4 h-4 text-js"})}),h.jsx("div",{className:"text-sm text-gray-400",children:"syntax"===e.category?"Błąd składni":"naming"===e.category?"Błąd nazewnictwa":"Błąd logiki"})]}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${In(e.difficulty)}`,children:"easy"===e.difficulty?"Łatwy":"medium"===e.difficulty?"Średni":"Trudny"})]}),h.jsx("p",{className:"text-gray-400 text-sm",children:e.explanation||"Znajdź i popraw błąd w kodzie."}),h.jsxs("p",{className:"mt-1 text-gray-500 text-sm",children:["Pozostałe próby: ",3-l]})]}),h.jsx("div",{className:"rounded-lg",children:h.jsx(be,{className:"w-full h-full flex flex-wrap",theme:"vs-dark",height:"400px",defaultLanguage:"javascript",value:i,onChange:e=>{void 0!==e&&n(e)},options:{selectOnLineNumbers:!0,automaticLayout:!0,theme:"vs-dark",wordWrap:"on"}})}),h.jsx("div",{className:"flex justify-end mt-4",children:h.jsx("button",{onClick:m,className:"px-4 py-2 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Sprawdź"})}),h.jsx(Wn,{hint:e.hint||"",isVisible:l>0})]})}));Hn.displayName="JSTypoHunterGame";const qn=u.memo((({score:e,timeElapsed:s,correctAnswers:t,totalLevels:a,onRestart:i})=>{const{updatePoints:n}=On();u.useEffect((()=>{n(e)}),[e,n]);return h.jsxs(We.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:t===a?"Gratulacje!":"Koniec gry!"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",t,"/",a]})]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),h.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap",children:(r=s,`${Math.floor(r/60)}:${(r%60).toString().padStart(2,"0")}`)})]})]})]}),h.jsx("button",{onClick:i,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var r}));qn.displayName="JSTypoHunterSummary";const Jn=u.memo((({isGameOver:e,gameStats:s,finalTime:t,currentChallenge:a,totalLevels:i,onScoreUpdate:n,onLevelComplete:r,onIncorrectAnswer:o,onRestart:l})=>h.jsx(Ie,{mode:"wait",children:e?h.jsx(qn,{score:s.score,timeElapsed:t,correctAnswers:s.correctAnswers,totalLevels:i,onRestart:l},"game-over"):h.jsx(We.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:h.jsx(Hn,{currentChallenge:a,onScoreUpdate:n,onLevelComplete:r,onIncorrectAnswer:o})},`level-${s.currentLevel}`)})));Jn.displayName="GameContent";const Vn=u.memo((({isPaused:e=!1})=>{var s;const{gameContent:t,isLoading:a,error:i}=(()=>{const{data:e,isLoading:s,error:t}=Si();return{gameContent:u.useMemo((()=>null==e?void 0:e.games.find((e=>"js-typo-hunter"===e.slug))),[e]),isLoading:s,error:t}})(),{pageTitle:n,pageDescription:r}=(({title:e,description:s,gameName:t="JSTypoHunter"}={})=>({pageTitle:u.useMemo((()=>e||`${t} | CodeLinesJS`),[e,t]),pageDescription:u.useMemo((()=>s||`${t} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`),[s,t])}))(),{isGameStarted:c,isGameOver:d,gameStats:m,finalTime:x,currentChallenge:p,handleScoreUpdate:j,handleIncorrectAnswer:y,handleLevelComplete:b,handleRestart:v,handleStartGame:f}=(({gameContent:e,isPaused:s})=>{var t;const[a,i]=u.useState(!1),[n,r]=u.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[c,d]=u.useState(!1),[m,x]=u.useState(0),{timeElapsed:p,resetTimer:h,startTimer:j,stopTimer:g}=kn({maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,onTimeEnd:()=>{d(!0),x(p),g()},isPaused:s}),y=u.useCallback((s=>{var t;const a=null==(t=null==e?void 0:e.gameData)?void 0:t[n.currentLevel-1],i=s+(e=>{switch(e){case"easy":default:return 10;case"medium":return 20;case"hard":return 30}})((null==a?void 0:a.difficulty)||"easy");r((e=>l(o({},e),{score:e.score+i,correctAnswers:e.correctAnswers+1})))}),[n.currentLevel,e]),b=u.useCallback((()=>{d(!0),x(p),g()}),[p,g]),v=u.useCallback((()=>{setTimeout((()=>{var s;const t=n.currentLevel+1;t>((null==(s=null==e?void 0:e.gameData)?void 0:s.length)||0)?(d(!0),x(p),g()):r((e=>l(o({},e),{currentLevel:t})))}),1e3)}),[n.currentLevel,e,p,g]),f=u.useCallback((()=>{var s;e&&(r({currentLevel:1,totalLevels:(null==(s=null==e?void 0:e.gameData)?void 0:s.length)||0,score:0,timeElapsed:0,maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,correctAnswers:0}),d(!1),x(0),h(),j())}),[h,j,e]),w=u.useCallback((()=>{i(!0),j()}),[j]);u.useEffect((()=>{r((e=>l(o({},e),{timeElapsed:p})))}),[p]),u.useEffect((()=>{e&&r((s=>{var t;return l(o({},s),{totalLevels:(null==(t=e.gameData)?void 0:t.length)||0,maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300})}))}),[e]);const N=null==(t=null==e?void 0:e.gameData)?void 0:t[n.currentLevel-1];return{isGameStarted:a,isGameOver:c,gameStats:n,finalTime:m,currentChallenge:N,handleScoreUpdate:y,handleIncorrectAnswer:b,handleLevelComplete:v,handleRestart:f,handleStartGame:w}})({gameContent:t,isPaused:e});return h.jsx(Un,{isLoading:a,error:i,children:t&&h.jsx(h.Fragment,{children:c?h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[h.jsxs(g,{children:[h.jsx("title",{children:n}),h.jsx("meta",{name:"description",content:r})]}),h.jsx(Mn,{stats:m}),h.jsx(Jn,{isGameOver:d,gameStats:m,finalTime:x,currentChallenge:p,totalLevels:(null==(s=null==t?void 0:t.gameData)?void 0:s.length)||0,onScoreUpdate:j,onLevelComplete:b,onIncorrectAnswer:y,onRestart:v})]}):h.jsx(Nn,{gameContent:t,onStart:f})})})}));Vn.displayName="JSTypoHunter";const Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Kn=()=>{const{data:e,isLoading:s,error:t}=Si();return{gameContent:u.useMemo((()=>{if(e&&e.games&&Array.isArray(e.games))return e.games.find((e=>"async-quest"===e.slug))}),[e]),isLoading:s,error:t}},Qn=u.memo((({isLoading:e,error:s,children:t})=>e?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[h.jsx(We.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-purple-300 mb-4",children:h.jsx(ye,{})}),h.jsx("p",{className:"text-xl font-medium text-purple-200",children:"Ładowanie gry..."})]}):s?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[h.jsx(We.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:h.jsx(W,{})}),h.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),h.jsx("p",{className:"text-md text-red-200",children:s.message})]}):t?h.jsx(h.Fragment,{children:t}):h.jsx("div",{className:"h-full flex items-center justify-center",children:h.jsx("p",{className:"text-lg text-purple-300",children:"Gra niedostępna"})})));Qn.displayName="LoadingError";const Xn=u.memo((({currentLevel:e,totalLevels:s})=>{const t=(e-1)/s*100;return h.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full bg-js",transition:{duration:.3}})})}));Xn.displayName="AsyncQuestProgress";const Yn=u.memo((({type:e,message:s,code:t,explanation:a})=>h.jsx(We.div,{initial:{opacity:0,y:"hint"===e?-10:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+("hint"===e?"bg-js/10 border border-js/20":"bg-red-500/20 border border-red-500/30"),children:h.jsxs("div",{className:"flex items-start gap-3",children:["hint"===e?h.jsx(ee,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}):h.jsx(W,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-medium "+("hint"===e?"text-js":"text-red-400"),children:"hint"===e?"Podpowiedź:":"Błąd:"}),h.jsx("div",{className:"text-sm text-gray-400",children:s}),t&&h.jsx("div",{className:"mt-2 p-2 bg-dark-900 rounded-lg font-mono text-sm text-gray-300",children:t}),a&&h.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[h.jsx("span",{className:"font-medium text-js",children:"Wyjaśnienie: "}),a]})]})]})})));Yn.displayName="AsyncQuestHint";const er=(e,s)=>{if("async-await"===s){if(!e.includes("async"))return{message:"Funkcja powinna być oznaczona jako asynchroniczna.",explanation:"Użyj słowa kluczowego async przed deklaracją funkcji.",example:"async function getData() { ... }"};if(!e.includes("await"))return{message:"Brak słowa kluczowego await przy wywołaniu asynchronicznym.",explanation:"Użyj await aby poczekać na wynik operacji asynchronicznej.",example:"const data = await fetchData();"}}if("promises"===s){if(!e.includes(".catch"))return{message:"Brak obsługi błędów w łańcuchu Promise.",explanation:"Dodaj .catch() aby obsłużyć potencjalne błędy.",example:"fetch(url).then(...).catch(error => { ... })"};if(!e.includes(".then"))return{message:"Brak obsługi wyniku Promise.",explanation:"Użyj .then() aby obsłużyć wynik pomyślnego wykonania.",example:"promise.then(result => { ... })"}}return"callbacks"!==s||e.includes("new Promise")?{message:"Sprawdź poprawność składni kodu.",explanation:"Upewnij się, że kod jest zgodny z wymaganiami zadania."}:{message:"Przekształć callback w Promise.",explanation:"Użyj konstruktora Promise aby opakować callback.",example:"new Promise((resolve, reject) => { ... })"}},sr=u.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,currentLevel:a,totalLevels:i,onGameOver:n})=>{const[r,d]=u.useState(e.code),[m,x]=u.useState(!1),[p,j]=u.useState(null),[g,y]=u.useState(null),[b,v]=u.useState(!1),f=u.useRef(null),w=u.useRef(null),N=u.useRef(null),{executeCode:k,isRunning:S,clearOutput:z}=(()=>{const[e,s]=u.useState(!1),[t,a]=u.useState([]);return{executeCode:u.useCallback((e=>c(void 0,null,(function*(){s(!0),a([]);try{const s={console:{log:(...e)=>{a((s=>[...s,e.map((e=>String(e))).join(" ")]))},error:(...e)=>{a((s=>[...s,`Error: ${e.map((e=>String(e))).join(" ")}`]))}},fetch:()=>Promise.resolve({json:()=>Promise.resolve({data:"mock data"})}),setTimeout:(e,s)=>setTimeout(e,Math.min(s,1e3)),Promise:Promise},i=`\n        with (context) {\n          ${e}\n        }\n      `;return yield new Function("context",i)(s),{success:!0,output:t}}catch(i){return{success:!1,output:t,error:i.message}}finally{s(!1)}}))),[]),isRunning:e,output:t,clearOutput:()=>a([])}})();u.useEffect((()=>{w.current&&w.current.scrollIntoView({behavior:"smooth",block:"center"})}),[]);const C=u.useCallback((e=>{void 0!==e&&(d(e),j(null),y(null),z())}),[z]),L=u.useCallback((()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"center"})}),[]),T=u.useCallback((()=>c(void 0,null,(function*(){if(r){x(!1),z(),y(null);try{const a=yield((e,s)=>{const t=e=>e.replace(/\s+/g," ").trim();if(t(e)===t(s))return!0;const a=e=>e.includes("async")&&e.includes("function"),i=e=>e.includes(".then(")&&e.includes(".catch("),n=e=>e.includes("try")&&e.includes("catch");return!(a(s)&&!a(e)||i(s)&&!i(e)||n(s)&&!n(e))})(r,e.correct),i=yield k(r);if(a&&i.success)j(!0),x(!0),s(e.points,e.category),setTimeout((()=>{L()}),100),setTimeout((()=>{t()}),1500);else{j(!1),x(!0);const s=er(r,e.category);y(s),setTimeout((()=>{L()}),100),setTimeout((()=>{n()}),2e3)}}catch(a){j(!1),x(!0);const s=er(r,e.category);y(s),setTimeout((()=>{L()}),100),setTimeout((()=>{n()}),2e3)}}}))),[r,e,k,s,t,n,z,L]);return h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-6xl mx-auto p-4 space-y-6",children:[h.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-js",children:e.title}),h.jsx(Xn,{currentLevel:a,totalLevels:i})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-js mb-3",children:"Opis zadania"}),h.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:e.description}),h.jsxs("div",{className:"p-4 bg-dark-700/50 border border-js/20 rounded-lg",children:[h.jsx("h3",{className:"text-lg font-semibold text-js mb-2",children:"Zadanie"}),h.jsx("p",{className:"text-gray-300 text-base",children:e.task})]})]})]}),h.jsxs("div",{ref:w,className:"bg-dark-800/50 rounded-xl p-6",children:[h.jsx("div",{className:"h-[500px] relative rounded-lg overflow-hidden border border-js/10",children:h.jsx(Pe,{height:"100%",defaultLanguage:"javascript",value:r,onChange:C,onMount:e=>{f.current=e,v(!0),setTimeout((()=>{e.focus()}),100)},options:l(o({},{minimap:{enabled:!1},fontSize:14,lineHeight:24,fontFamily:"JetBrains Mono, monospace",fontLigatures:!0,wordWrap:"on",automaticLayout:!0,padding:{top:16,bottom:16},scrollBeyondLastLine:!1,folding:!0,lineNumbers:"on",renderLineHighlight:"all",suggestOnTriggerCharacters:!0,parameterHints:{enabled:!0},tabSize:2,theme:"vs-dark"}),{fontSize:16,lineHeight:26}),className:"w-full"})}),h.jsx("button",{onClick:T,disabled:S||!b,className:"mt-4 w-full px-6 py-3 rounded-lg font-medium transition-colors "+(S||!b?"bg-gray-500 cursor-not-allowed":"bg-js text-dark hover:bg-js/90"),children:S?"Wykonywanie...":"Uruchom kod"})]}),m&&h.jsx(We.div,{ref:N,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-6",children:h.jsx(Yn,{type:p?"hint":"error",message:p?"Świetnie! Rozwiązanie jest poprawne.":e.error,explanation:p||null==g?void 0:g.explanation,code:p||null==g?void 0:g.example})})]})}));sr.displayName="AsyncQuestGame";const tr=u.memo((({category:e,stats:s})=>{const t=(()=>{switch(e){case"promises":return v;case"async-await":return Ae;case"callbacks":return Ee}})(),a=s.correct/s.total*100;return h.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(t,{className:"w-4 h-4 text-js"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:"text-sm text-gray-400",children:(()=>{switch(e){case"promises":return"Promises";case"async-await":return"Async/Await";case"callbacks":return"Callbacks"}})()}),h.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),h.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:h.jsx(We.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})}));tr.displayName="CategoryProgress";const ar=u.memo((({score:e,timeElapsed:s,challenges:t,correctAnswers:a,categoryStats:i,onRestart:n})=>{const{updatePoints:r}=On();u.useEffect((()=>{r(e)}),[e,r]);return h.jsxs(We.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===t.length?"Gratulacje!":"Koniec gry!"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",t.length]})]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),h.jsx("div",{className:"text-lg font-bold text-js",children:(o=s,`${Math.floor(o/60)}:${(o%60).toString().padStart(2,"0")}`)})]})]})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),h.jsx(tr,{category:"promises",stats:i.promises}),h.jsx(tr,{category:"async-await",stats:i["async-await"]}),h.jsx(tr,{category:"callbacks",stats:i.callbacks})]}),h.jsx("button",{onClick:n,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var o}));ar.displayName="AsyncQuestSummary";const ir=u.memo((({isGameOver:e,gameStats:s,finalTime:t,currentChallenge:a,gameContent:i,onScoreUpdate:n,onLevelComplete:r,onGameOver:o,onRestart:l})=>h.jsx(Ie,{mode:"wait",children:h.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:e?h.jsx(We.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:h.jsx(ar,{score:s.score,timeElapsed:t,challenges:(null==i?void 0:i.gameData)||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):h.jsx(We.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:h.jsx(sr,{currentChallenge:a,onScoreUpdate:n,onLevelComplete:r,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:o})},`level-${s.currentLevel}`)})})));ir.displayName="GameContent";const nr=u.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return h.jsxs("div",{className:"space-y-4",children:[h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(v,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),h.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{className:"w-full",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),h.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:h.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]}),h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[h.jsx(tr,{category:"promises",stats:e.categoryStats.promises}),h.jsx(tr,{category:"async-await",stats:e.categoryStats["async-await"]}),h.jsx(tr,{category:"callbacks",stats:e.categoryStats.callbacks})]})]})}));nr.displayName="AsyncQuestStats";const rr=u.memo((({isGameStarted:e,isGameOver:s,gameStats:t,onGameStart:a})=>{const{gameContent:i}=Kn();return e?h.jsx(nr,{stats:t,isGameOver:s,finalTime:t.timeElapsed}):i?h.jsx(Nn,{gameContent:i,onStart:a}):h.jsxs("div",{className:"w-full p-6 text-center",children:[h.jsx("p",{className:"text-lg text-purple-200",children:"Brak danych gry"}),h.jsx("button",{className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",onClick:a,children:"Rozpocznij mimo to"})]})}));rr.displayName="GameHeader";const or=u.memo((()=>{const{gameContent:e,isLoading:s,error:t}=Kn(),{isGameStarted:a,isGameOver:i,gameStats:n,finalTime:r,currentChallenge:c,handleScoreUpdate:d,handleLevelComplete:m,handleGameOver:x,handleRestart:p,handleStartGame:j}=(({gameContent:e,isPaused:s})=>{var t;const[a,i]=u.useState(!1),[n,r]=u.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,correctAnswers:0,categoryStats:{promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}}}),[c,d]=u.useState(!1),[m,x]=u.useState(0),{timeElapsed:p,resetTimer:h,startTimer:j,stopTimer:g}=kn({maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,onTimeEnd:()=>{d(!0),x(p),g()},isPaused:s});u.useEffect((()=>{e&&r((s=>{var t;return l(o({},s),{totalLevels:(null==(t=e.gameData)?void 0:t.length)||0})}))}),[e]),u.useEffect((()=>{c||s||r((e=>l(o({},e),{timeElapsed:p})))}),[p,c,s]),u.useEffect((()=>{c||s||j()}),[c,s,j]);const y=u.useCallback(((e,s)=>{r((t=>l(o({},t),{score:t.score+e,correctAnswers:t.correctAnswers+1,categoryStats:l(o({},t.categoryStats),{[s]:l(o({},t.categoryStats[s]),{total:t.categoryStats[s].total+1,correct:t.categoryStats[s].correct+1,points:t.categoryStats[s].points+e})})})))}),[]),b=u.useCallback((()=>{const e=n.currentLevel+1;e>n.totalLevels?(d(!0),x(p),g()):r((s=>l(o({},s),{currentLevel:e})))}),[n.currentLevel,n.totalLevels,p,g]),v=u.useCallback((()=>{d(!0),x(p),g()}),[p,g]),f=u.useCallback((()=>{var s,t;if(!e)return;const a={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}};null==(s=e.gameData)||s.forEach((e=>{e.category&&a[e.category].total++})),r({currentLevel:1,totalLevels:(null==(t=e.gameData)?void 0:t.length)||0,score:0,timeElapsed:0,maxTime:e.estimatedTime?60*e.estimatedTime:300,correctAnswers:0,categoryStats:a}),d(!1),h(),j()}),[e,h,j]),w=u.useCallback((()=>{i(!0),j()}),[j]),N=null==(t=null==e?void 0:e.gameData)?void 0:t[n.currentLevel-1];return{isGameStarted:a,isGameOver:c,gameStats:n,finalTime:m,currentChallenge:N,handleScoreUpdate:y,handleLevelComplete:b,handleGameOver:v,handleRestart:f,handleStartGame:w}})({gameContent:e,isPaused:!1}),{pageTitle:y,pageDescription:b}=(({title:e,description:s,gameName:t="Async Quest"}={})=>({pageTitle:u.useMemo((()=>e||`${t} | CodeLinesJS`),[e,t]),pageDescription:u.useMemo((()=>s||`${t} CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku.`),[s,t])}))();return h.jsxs("div",{className:"flex flex-col h-full text-white rounded-lg shadow-xl overflow-hidden",children:[h.jsxs(g,{children:[h.jsx("title",{children:y}),h.jsx("meta",{name:"description",content:b})]}),h.jsx(Qn,{isLoading:s,error:t,children:h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsx(rr,{isGameStarted:a,isGameOver:i,gameStats:n,onGameStart:j}),a&&h.jsx(ir,{isGameOver:i,gameStats:n,finalTime:r,currentChallenge:c,gameContent:e,onScoreUpdate:d,onLevelComplete:m,onGameOver:x,onRestart:p})]})})]})}));or.displayName="AsyncQuest";const lr=Object.freeze(Object.defineProperty({__proto__:null,default:or},Symbol.toStringTag,{value:"Module"})),cr=u.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(v,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{className:"w-full",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),h.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),h.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),h.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:h.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]})}));cr.displayName="RegexRaiderStats";const dr=()=>({containerAnimation:u.useMemo((()=>({initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})),[]),gameAnimation:u.useMemo((()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}})),[]),summaryAnimation:u.useMemo((()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3}})),[])}),mr=u.memo((({isLoading:e,error:s,children:t})=>e?h.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:h.jsxs(We.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[h.jsx(We.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-js text-4xl mx-auto mb-4",children:h.jsx(ye,{})}),h.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Ładowanie gry..."})]})}):s?h.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:h.jsxs(We.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[h.jsx("div",{className:"text-red-500 text-4xl mx-auto mb-4",children:h.jsx(W,{})}),h.jsx("div",{className:"text-xl font-medium text-gray-100 mb-2",children:"Wystąpił błąd"}),h.jsx("div",{className:"text-gray-400",children:s.message})]})}):h.jsx(h.Fragment,{children:t})));mr.displayName="LoadingErrorContainer";const xr=u.memo((({pattern:e,explanation:s,example:t})=>h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(ee,{className:"w-4 h-4 text-js"})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm text-gray-400",children:s}),e&&h.jsx("div",{className:"font-mono text-sm bg-dark-900/50 p-2 rounded text-js",children:e}),t&&h.jsxs("div",{className:"text-xs text-gray-500",children:["Przykład: ",h.jsx("span",{className:"text-gray-400",children:t})]})]})]})})));xr.displayName="RegexRaiderHint";const ur=u.memo((({onScoreUpdate:e,onLevelComplete:s,currentLevel:t,onGameOver:a})=>{const{data:i}=Si(),n=null==i?void 0:i.games.find((e=>"regex-raider"===e.slug)),[r,o]=u.useState(""),[l,c]=u.useState([]),[d,m]=u.useState(null);if(!n)return null;const x=n.gameData[t-1],p=u.useCallback((e=>{const s=e.target.value;o(s),m(null);try{const e=new RegExp(s,"g"),t=x.text.match(e)||[];c(t)}catch(t){c([])}}),[x]),j=u.useCallback((()=>{try{const t=x.text.match(new RegExp(r,"g"))||[],i=x.text.match(new RegExp(x.correctRegex,"g"))||[],n=t.length===i.length&&t.every((e=>i.includes(e)));m(n),n?(e(10),setTimeout((()=>{s(),o(""),c([]),m(null)}),1500)):setTimeout((()=>{a()}),1500)}catch(t){m(!1),setTimeout((()=>{a()}),1500)}}),[r,x,e,s,a]);return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[h.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Zadanie:"}),h.jsx("div",{className:"text-lg text-js mb-4",children:x.task}),h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Tekst:"}),h.jsx("div",{className:"font-mono bg-dark-900/50 p-4 rounded-lg text-gray-300",children:x.text})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex gap-4",children:[h.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Wpisz wyrażenie regularne...",style:{backgroundColor:"#1a1a1a"},className:"bg-dark-900 flex-1 border border-js/10 rounded-lg px-4 py-2 text-js font-mono placeholder-yellow-500"}),h.jsx("button",{onClick:j,className:"px-6 py-2 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Sprawdź"})]}),l.length>0&&h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-dark-900/50 rounded-lg",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Znalezione dopasowania:"}),h.jsx("div",{className:"space-y-1",children:l.map(((e,s)=>h.jsx("div",{className:"font-mono text-js",children:e},s)))})]}),null!==d&&h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+(d?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"),children:h.jsx("p",{className:"text-sm "+(d?"text-green-400":"text-red-400"),children:d?"Świetnie! Wyrażenie regularne jest poprawne!":"Wyrażenie nie znajduje wszystkich wymaganych dopasowań."})}),!1===d&&h.jsx(xr,{pattern:x.correctRegex,explanation:"Niepoprawne wyrażenie regularne. Gra zostanie zakończona...",example:`Poprawne wyrażenie: ${x.correctRegex}`})]})]})}));ur.displayName="RegexRaiderGame";const pr=u.memo((({score:e,timeElapsed:s,correctAnswers:t,totalLevels:a,onRestart:i})=>{const{updatePoints:n}=On();u.useEffect((()=>{n(e)}),[e,n]);return h.jsxs(We.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:"Koniec gry!"}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(B,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]})]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx($,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Rozwiązane zadania"}),h.jsxs("div",{className:"text-lg font-bold text-js",children:[t,"/",a]})]})]}),h.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[h.jsx(q,{className:"w-5 h-5 text-js"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Czas gry"}),h.jsx("div",{className:"text-lg font-bold text-js",children:(r=s,`${Math.floor(r/60)}:${(r%60).toString().padStart(2,"0")}`)})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("button",{onClick:i,className:"px-6 py-3 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})})]});var r}));pr.displayName="RegexRaiderSummary";const hr=u.memo((({isGameOver:e,gameStats:s,finalTime:t,onScoreUpdate:a,onLevelComplete:i,onGameOver:n,onRestart:r})=>{const{gameAnimation:o,summaryAnimation:l}=dr();return h.jsx(Ie,{mode:"wait",children:e?h.jsx(We.div,{initial:l.initial,animate:l.animate,exit:l.exit,transition:l.transition,children:h.jsx(pr,{score:s.score,timeElapsed:t,correctAnswers:s.correctAnswers,totalLevels:s.totalLevels,onRestart:r})},"game-over"):h.jsx(We.div,{initial:o.initial,animate:o.animate,exit:o.exit,transition:o.transition,className:"w-full",children:h.jsx(ur,{onScoreUpdate:a,onLevelComplete:i,currentLevel:s.currentLevel,onGameOver:n})},`level-${s.currentLevel}`)})}));hr.displayName="GameContent";const jr=u.memo((({isPaused:e=!1})=>{const{gameContent:s,isLoading:t,error:a}=(()=>{const{data:e,isLoading:s,error:t}=Si();return{gameContent:u.useMemo((()=>null==e?void 0:e.games.find((e=>"regex-raider"===e.slug))),[null==e?void 0:e.games]),isLoading:s,error:t}})(),{containerAnimation:i}=dr(),{pageTitle:n,pageDescription:r}=Dn(),{isGameStarted:c,isGameOver:d,finalTime:m,gameStats:x,handleScoreUpdate:p,handleLevelComplete:j,handleRestart:y,handleStartGame:b,handleGameOver:v}=(({gameContent:e,isPaused:s})=>{const[t,a]=u.useState(!1),[i,n]=u.useState(!1),[r,c]=u.useState(0),[d,m]=u.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),{timeElapsed:x,resetTimer:p,startTimer:h,stopTimer:j}=kn({maxTime:d.maxTime,onTimeEnd:()=>{n(!0),c(x),j()},isPaused:s});u.useEffect((()=>{(null==e?void 0:e.gameData)&&m((s=>l(o({},s),{totalLevels:e.gameData.length})))}),[e]),u.useEffect((()=>{i||m((e=>l(o({},e),{timeElapsed:x})))}),[x,i]);const g=u.useCallback((e=>{m((s=>l(o({},s),{score:s.score+e,correctAnswers:s.correctAnswers+1})))}),[]),y=u.useCallback((()=>{m((e=>{const s=e.currentLevel+1;return s>e.totalLevels&&(n(!0),c(x),j()),l(o({},e),{currentLevel:s})}))}),[x,j]),b=u.useCallback((()=>{m((e=>({currentLevel:1,totalLevels:e.totalLevels,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}))),n(!1),p(),h()}),[p,h]),v=u.useCallback((()=>{n(!0),c(x),j()}),[x,j]),f=u.useCallback((()=>{a(!0),h()}),[h]);return{isGameStarted:t,isGameOver:i,finalTime:r,gameStats:d,currentChallenge:(null==e?void 0:e.gameData)?e.gameData[d.currentLevel-1]:void 0,handleScoreUpdate:g,handleLevelComplete:y,handleRestart:b,handleStartGame:f,handleGameOver:v}})({gameContent:s,isPaused:e});return h.jsx(mr,{isLoading:t,error:a,children:s&&h.jsx(h.Fragment,{children:c?h.jsxs(We.div,l(o({},i),{className:"w-full space-y-6",children:[h.jsxs(g,{children:[h.jsx("title",{children:n}),h.jsx("meta",{name:"description",content:r})]}),h.jsx(cr,{stats:x,isGameOver:d,finalTime:m}),h.jsx(hr,{isGameOver:d,gameStats:x,finalTime:m,onScoreUpdate:p,onLevelComplete:j,onGameOver:v,onRestart:y})]})):h.jsx(Nn,{gameContent:s,onStart:b})})})}));jr.displayName="RegexRaider";const gr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),yr=()=>{const{data:e,isLoading:s,error:t}=Si();return{gameContent:u.useMemo((()=>{if(e&&e.games&&Array.isArray(e.games))return e.games.find((e=>"js-quiz"===e.slug))}),[e]),isLoading:s,error:t}},br=u.memo((({isLoading:e,error:s,children:t})=>e?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[h.jsx(We.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl text-js mb-4",children:h.jsx(ye,{})}),h.jsx("p",{className:"text-xl font-medium text-js/80",children:"Ładowanie gry..."})]}):s?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[h.jsx(We.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-4xl text-red-400 mb-4",children:h.jsx(W,{})}),h.jsx("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Wystąpił błąd"}),h.jsx("p",{className:"text-md text-red-200",children:s.message})]}):t?h.jsx(h.Fragment,{children:t}):h.jsx("div",{className:"h-full flex items-center justify-center",children:h.jsx("p",{className:"text-lg text-js/80",children:"Gra niedostępna"})})));br.displayName="LoadingErrorContainer";const vr=e=>{switch(e){case"basics":default:return v;case"advanced":return Re;case"frameworks":return Oe}},fr=e=>{switch(e){case"basics":return"Podstawy JavaScript";case"advanced":return"Zaawansowany JS";case"frameworks":return"Frameworki JS"}},wr=e=>{switch(e){case"easy":return"bg-green-500/20 text-green-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"hard":return"bg-red-500/20 text-red-400"}},Nr=e=>{switch(e){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},kr=u.memo((({currentLevel:e,totalLevels:s})=>{const t=e/s*100;return h.jsxs("div",{className:"w-full",children:[h.jsxs("div",{className:"flex justify-between mb-1 text-sm text-gray-400",children:[h.jsxs("span",{children:["Pytanie ",e," z ",s]}),h.jsxs("span",{children:[Math.round(t),"%"]})]}),h.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:h.jsx(We.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.5}})})]})}));kr.displayName="JSQuizProgress";const Sr=()=>({containerAnimation:u.useMemo((()=>({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}})),[]),gameAnimation:u.useMemo((()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4}})),[]),summaryAnimation:u.useMemo((()=>({initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4}})),[]),optionAnimation:u.useMemo((()=>({initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.3}})),[])}),zr=u.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,currentLevel:a,totalLevels:i,onGameOver:n})=>{const[r,c]=u.useState(null),[d,m]=u.useState(!1),[x,p]=u.useState(null),{optionAnimation:j}=Sr(),g=u.useCallback((a=>{c(a);const i=a===e.correct;p(i),m(!0),i?(s(e.points||10,e.category),setTimeout((()=>{t(),c(null),m(!1),p(null)}),1500)):setTimeout((()=>{n()}),2e3)}),[e,s,t,n]),y=u.useCallback((s=>{!d&&s<e.options.length&&g(e.options[s])}),[d,e.options,g]);Tn({onNumber1:()=>y(0),onNumber2:()=>y(1),onNumber3:()=>y(2),onNumber4:()=>y(3),disabled:d});const b=vr(e.category)||v;return h.jsxs(We.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[h.jsx(kr,{currentLevel:a,totalLevels:i}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:h.jsx(b,{className:"w-4 h-4 text-js"})}),h.jsx("div",{className:"text-sm text-gray-400",children:fr(e.category)})]}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${wr(e.difficulty)}`,children:Nr(e.difficulty)})]}),h.jsx("div",{className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg mb-6",children:h.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:e.question})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.options.map(((e,s)=>h.jsxs(We.button,l(o({whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>g(e),disabled:d,className:`\n              w-full\n              relative p-4 rounded-lg font-medium text-left transition-colors\n              ${r===e?x?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}\n            `},j),{transition:l(o({},j.transition),{delay:.1*s}),children:[h.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:s+1}),e]}),e)))}),h.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-4) aby wybrać odpowiedź"}),d&&h.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+(x?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"),children:h.jsxs("p",{className:"text-sm "+(x?"text-green-400":"text-red-400"),children:[x?"Świetnie! ":"Spróbuj jeszcze raz. ",e.explanation]})})]},a)}));zr.displayName="JSQuizGame";const Cr=u.memo((({score:e,timeElapsed:s,challenges:t,correctAnswers:a,categoryStats:i,onRestart:n})=>{const{updatePoints:r}=On();u.useEffect((()=>{r(e)}),[e,r]);return h.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6",children:[h.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Koniec Quizu!"}),h.jsxs("p",{className:"text-gray-400",children:["Ukończyłeś quiz z wynikiem ",e," punktów, odpowiadając poprawnie na ",a," z"," ",(null==t?void 0:t.length)||0," pytań."]})]}),h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4 mb-8",children:[h.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[h.jsx($,{className:"text-3xl text-js mb-2"}),h.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),h.jsx("div",{className:"text-2xl font-bold",children:e})]}),h.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[h.jsx(H,{className:"text-3xl text-green-400 mb-2"}),h.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne odpowiedzi"}),h.jsxs("div",{className:"text-2xl font-bold",children:[a,"/",(null==t?void 0:t.length)||0]})]}),h.jsxs("div",{className:"bg-dark-800/50 p-4 rounded-lg flex flex-col items-center justify-center",children:[h.jsx(q,{className:"text-3xl text-js mb-2"}),h.jsx("div",{className:"text-xs text-gray-400",children:"Całkowity czas"}),h.jsx("div",{className:"text-2xl font-bold",children:(e=>{const s=e%60;return`${Math.floor(e/60)}:${s<10?"0":""}${s}`})(s)})]})]}),h.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Wyniki według kategorii"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i?Object.entries(i).filter((([e,s])=>s&&"object"==typeof s)).map((([e,s])=>{const t=vr(e),a=(i=s.correct||0,(n=s.total||0)>0?Math.round(i/n*100):0);var i,n;return h.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800/50 p-4 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(t,{className:"text-js"}),h.jsx("h3",{className:"text-lg font-medium",children:fr(e)})]}),h.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[h.jsxs("span",{children:["Poprawne: ",s.correct||0,"/",s.total||0]}),h.jsxs("span",{children:[a,"%"]})]}),h.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:h.jsx(We.div,{className:"h-full bg-js",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5,delay:.5}})})]},e)})):null})]}),h.jsx(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center",children:h.jsxs("button",{onClick:n,className:"bg-js/80 hover:bg-js text-dark px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[h.jsx($e,{className:"text-dark"}),"Zagraj jeszcze raz"]})})]})}));Cr.displayName="JSQuizSummary";const Lr=u.memo((({isGameOver:e,gameStats:s,currentChallenge:t,finalTime:a,gameContent:i,onScoreUpdate:n,onLevelComplete:r,onGameOver:o,onRestart:l})=>{const{gameAnimation:c,summaryAnimation:d}=Sr();return t||e?h.jsx(Ie,{mode:"wait",children:h.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:e?h.jsx(We.div,{initial:d.initial,animate:d.animate,exit:d.exit,transition:d.transition,children:h.jsx(Cr,{score:s.score,timeElapsed:a,challenges:(null==i?void 0:i.gameData)||[],correctAnswers:s.correctAnswers,categoryStats:s.categoryStats,onRestart:l})},"game-over"):h.jsx(We.div,{initial:c.initial,animate:c.animate,exit:c.exit,transition:c.transition,className:"w-full",children:t&&h.jsx(zr,{currentChallenge:t,onScoreUpdate:n,onLevelComplete:r,currentLevel:s.currentLevel,totalLevels:s.totalLevels,onGameOver:o})},`level-${s.currentLevel}`)})}):h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsx("p",{className:"text-js",children:"Ładowanie pytania..."})})}));Lr.displayName="GameContent";const Tr=u.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=s?t:e.timeElapsed;return h.jsx("div",{className:"w-full p-4 bg-dark-800/50 rounded-lg mb-4",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs(We.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:[h.jsx($,{className:"text-lg"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-gray-400",children:"Punkty"}),h.jsx("div",{className:"font-semibold",children:e.score})]})]}),h.jsxs(We.div,{className:"flex items-center gap-2 text-green-400",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[h.jsx(H,{className:"text-lg"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-gray-400",children:"Poprawne"}),h.jsxs("div",{className:"font-semibold",children:[e.correctAnswers," / ",e.totalLevels]})]})]}),h.jsxs(We.div,{className:"flex items-center gap-2 text-js",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[h.jsx(q,{className:"text-lg"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-gray-400",children:"Czas"}),h.jsx("div",{className:"font-semibold",children:(e=>{const s=e%60;return`${Math.floor(e/60)}:${s<10?"0":""}${s}`})(a)})]})]})]})})}));Tr.displayName="JSQuizStats";const Pr=u.memo((({isGameStarted:e,isGameOver:s,gameStats:t,onGameStart:a})=>{const{gameContent:i}=yr();return e?h.jsx(Tr,{stats:t,isGameOver:s,finalTime:t.timeElapsed}):i?h.jsx(Nn,{gameContent:i,onStart:a}):h.jsxs("div",{className:"w-full p-6 text-center",children:[h.jsx("p",{className:"text-lg text-js/80",children:"Brak danych gry"}),h.jsx("button",{className:"mt-4 px-6 py-2 bg-js/80 hover:bg-js text-white rounded-md transition-colors",onClick:a,children:"Rozpocznij mimo to"})]})}));Pr.displayName="GameHeader";const Er=u.memo((({isPaused:e=!1})=>{const{gameContent:s,isLoading:t,error:a}=yr(),{containerAnimation:i}=Sr(),{pageTitle:n,pageDescription:r}=(({title:e,description:s,gameName:t="JS Quiz"}={})=>({pageTitle:u.useMemo((()=>e||`${t} - Quiz JavaScript | CodeLinesJS`),[e,t]),pageDescription:u.useMemo((()=>s||`Sprawdź swoją wiedzę z JavaScript w quizie ${t}. Odpowiadaj na pytania i zdobywaj punkty za poprawne odpowiedzi.`),[s,t])}))(),{isGameStarted:c,isGameOver:d,finalTime:m,gameStats:x,currentChallenge:p,handleScoreUpdate:j,handleLevelComplete:y,handleRestart:b,handleStartGame:v,handleGameOver:f}=(({gameContent:e,isPaused:s})=>{var t;const[a,i]=u.useState(!1),[n,r]=u.useState(!1),[c,d]=u.useState(0),[m,x]=u.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}}}),{timeElapsed:p,resetTimer:h,startTimer:j,stopTimer:g}=kn({maxTime:(null==e?void 0:e.estimatedTime)?60*e.estimatedTime:300,onTimeEnd:()=>{r(!0),d(p),g()},isPaused:s});u.useEffect((()=>{x((e=>l(o({},e),{timeElapsed:p})))}),[p]),u.useEffect((()=>{if(!(null==e?void 0:e.gameData))return;const s={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};e.gameData.forEach((e=>{const t=e.category;t&&s[t]&&(s[t].total++,s[t].points+=e.points||0)})),x((t=>l(o({},t),{totalLevels:e.gameData.length,maxTime:e.estimatedTime?60*e.estimatedTime:300,categoryStats:s})))}),[e]);const y=u.useCallback(((e,s)=>{x((t=>l(o({},t),{score:t.score+e,correctAnswers:t.correctAnswers+1,categoryStats:l(o({},t.categoryStats),{[s]:t.categoryStats[s]?l(o({},t.categoryStats[s]),{correct:t.categoryStats[s].correct+1}):{total:0,correct:1,points:e}})})))}),[]),b=u.useCallback((()=>{var s;const t=m.currentLevel+1;if(t>((null==(s=null==e?void 0:e.gameData)?void 0:s.length)||0))return r(!0),d(p),void g();x((e=>l(o({},e),{currentLevel:t})))}),[m.currentLevel,p,null==(t=null==e?void 0:e.gameData)?void 0:t.length,g]),v=u.useCallback((()=>{if(!(null==e?void 0:e.gameData))return;const s={basics:{total:0,correct:0,points:0},advanced:{total:0,correct:0,points:0},frameworks:{total:0,correct:0,points:0}};e.gameData.forEach((e=>{const t=e.category;t&&s[t]&&(s[t].total++,s[t].points+=e.points||0)})),x({currentLevel:1,totalLevels:e.gameData.length,score:0,timeElapsed:0,maxTime:e.estimatedTime?60*e.estimatedTime:300,correctAnswers:0,categoryStats:s}),r(!1),d(0),h(),j()}),[h,j,e]),f=u.useCallback((()=>{i(!0),j()}),[j]),w=u.useCallback((()=>{r(!0),d(p),g()}),[p,g]);return{isGameStarted:a,isGameOver:n,finalTime:c,gameStats:m,currentChallenge:(null==e?void 0:e.gameData)?e.gameData[m.currentLevel-1]:void 0,handleScoreUpdate:y,handleLevelComplete:b,handleRestart:v,handleStartGame:f,handleGameOver:w}})({gameContent:s,isPaused:e});return h.jsx(br,{isLoading:t,error:a,children:s&&h.jsx(h.Fragment,{children:c?h.jsxs(We.div,l(o({},i),{className:"w-full h-full flex flex-col",children:[h.jsxs(g,{children:[h.jsx("title",{children:n}),h.jsx("meta",{name:"description",content:r})]}),h.jsx(Pr,{isGameStarted:c,isGameOver:d,gameStats:x,onGameStart:v}),h.jsx(Lr,{isGameOver:d,gameStats:x,currentChallenge:p,finalTime:m,gameContent:s,onScoreUpdate:j,onLevelComplete:y,onGameOver:f,onRestart:b})]})):h.jsx(Pr,{isGameStarted:c,isGameOver:d,gameStats:x,onGameStart:v})})})}));Er.displayName="JSQuiz";const Ar=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"}));export{us as C,Us as D,Oi as G,Yt as L,ln as R,bt as S,tt as a,Sa as b,vi as c,Ui as d,Vi as e};
