var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,o=(e,s)=>{for(var t in s||(s={}))i.call(s,t)&&n(e,t,s[t]);if(a)for(var t of a(s))r.call(s,t)&&n(e,t,s[t]);return e},l=(e,a)=>s(e,t(a)),c=(e,s,t)=>new Promise(((a,i)=>{var r=e=>{try{o(t.next(e))}catch(s){i(s)}},n=e=>{try{o(t.throw(e))}catch(s){i(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,n);o((t=t.apply(e,s)).next())}));import{r as d,X as m,j as x,n as u,y as p,Y as h,x as j,P as g,Z as y,u as b,_ as f,$ as v,a0 as N,a1 as w,a2 as k,m as S,z,p as C,L,a3 as P,a4 as T,q as E,J as A,a5 as $,c as O,a6 as R,t as D,D as _,h as B,a7 as F,a8 as I,a9 as W,aa as H,ab as q,ac as M,O as U,ad as V,ae as G,af as K,ag as Z,ah as J,v as Q,d as X,N as Y,l as ee,ai as se,e as te,g as ae,aj as ie,ak as re,al as ne,am as oe,f as le,an as ce,ao as de,ap as me,aq as xe,ar as ue,as as pe,at as he,au as je,av as ge,aw as ye,ax as be,ay as fe}from"./vendor-react-BrljAIm9.js";import{u as ve,A as Ne,_ as we}from"./app-auth-Ds4toxtE.js";import{m as ke,A as Se,a as ze}from"./vendor-framer-motion-BYbXV8U8.js";import{f as Ce,p as Le,z as Pe,t as Te}from"./vendor-other-BKBUpLlT.js";import{L as Ee,e as Ae,d as $e,c as Oe,B as Re}from"./app-components-CXUCMe1v.js";import{R as De,L as _e,C as Be,X as Fe,Y as Ie,T as We,b as He}from"./vendor-charts-Cjr02Eox.js";import{l as qe}from"./vendor-monaco-BcgKd7i0.js";const Me={expanded:{width:"240px",transition:{type:"spring",stiffness:300,damping:30}},collapsed:{width:"100px",transition:{type:"spring",stiffness:300,damping:30}}},Ue={expanded:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:30}},collapsed:{opacity:0,x:-10,transition:{duration:.2}}},Ve=d.memo((({isExpanded:e})=>x.jsx("div",{className:"px-4 mb-8",children:x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-js/20 flex items-center justify-center",children:x.jsx(u,{className:"text-xl text-js"})}),x.jsx(Se,{mode:"wait",children:e&&x.jsx(ke.span,{variants:Ue,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-bold text-js font-space",children:"CodeLinesJS"})})]})})));Ve.displayName="NavigationLogo";const Ge=d.memo((({icon:e,label:s,isActive:t=!1,isExpanded:a,onClick:i,variant:r="default",id:n})=>x.jsxs(ke.button,{onClick:i,"data-testid":`nav-button-${null==s?void 0:s.toLowerCase().replace(/\s/g,"-")}`,className:`\n      ${"code"===n&&"hidden lg:flex"}\n      w-full flex items-center gap-3 px-4 py-3 \n      rounded-lg transition-all duration-200\n      backdrop-blur-sm\n      ${"default"===r?t?"bg-js/20 border-l-2 border-js text-js":"text-gray-400 hover:text-js hover:bg-js/10":t?"bg-red-500/20 text-red-400":"text-red-400 hover:bg-red-500/10"}\n    `,whileHover:{scale:1.02,x:5},whileTap:{scale:.98},children:[x.jsx(ke.span,{className:"text-xl min-w-[24px]",whileHover:{rotate:10},style:{color:"currentColor"},children:e}),x.jsx(Se,{mode:"wait",children:a&&s&&x.jsx(ke.span,{variants:Ue,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"font-medium font-space whitespace-nowrap",style:{color:"currentColor"},children:s})})]})));Ge.displayName="NavigationButton";const Ke=d.memo((({title:e,items:s,isExpanded:t,activeItem:a,onItemClick:i,index:r,isLastSection:n})=>x.jsxs(ke.div,{className:"space-y-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:[t&&x.jsx(ke.h2,{variants:Ue,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"text-xs font-bold text-js/60 uppercase tracking-wider px-3 mb-2",children:e}),s.map((e=>x.jsx(Ge,{id:e.id,icon:e.icon,label:e.label,isActive:a===e.id,isExpanded:t,onClick:()=>i(e)},e.id))),!n&&x.jsx("div",{className:"mx-3 my-4",children:x.jsx("div",{className:"border-t border-js/5"})})]},e)));Ke.displayName="NavigationSection";const Ze=()=>{const e=m();return["/dashboard/community","/dashboard/community/ranking","/dashboard/community/groups","/dashboard/learn","/dashboard/play","/dashboard/learn/lesson/js-variables","/dashboard/learn/lesson/js-functions","/dashboard/play/regex-raider","/dashboard/play/async-quest","/dashboard/play/js-typo-hunter","/dashboard/play/scope-explorer","/dashboard/settings"].includes(e.pathname)},Je=[{id:"dashboard",label:"Dashboard",icon:x.jsx(p,{}),section:"main",path:"/dashboard"},{id:"stats",label:"Statystyki",icon:x.jsx(h,{}),section:"main",path:"/dashboard/stats"},{id:"play",label:"Graj",icon:x.jsx(j,{}),section:"game",path:"/dashboard/play"},{id:"learn",label:"Nauka",icon:x.jsx(g,{}),section:"game",path:"/dashboard/learn"},{id:"code",label:"Edytor",icon:x.jsx(u,{}),section:"game",path:"/dashboard/code"},{id:"settings",label:"Ustawienia",icon:x.jsx(y,{}),section:"social",path:"/dashboard/settings"}],Qe={main:"Główne",game:"Nauka"},Xe=()=>{const e=b(),{isExpanded:s,setIsExpanded:t,activeItem:a,setActiveItem:i}=(()=>{const[e,s]=d.useState(!1),[t,a]=d.useState("dashboard"),i=m();return d.useEffect((()=>{const e=i.pathname.split("/").pop()||"dashboard";a(e)}),[i]),d.useEffect((()=>{const e=()=>{window.innerWidth<768&&s(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),{isExpanded:e,setIsExpanded:s,activeItem:t,setActiveItem:a}})(),{logout:r}=ve(),n=Ze(),o=d.useCallback((s=>{i(s.id),s.path&&e(s.path)}),[e,i,t]),l=d.useMemo((()=>Object.entries(Je.reduce(((e,s)=>(e[s.section]||(e[s.section]=[]),e[s.section].push(s),e)),{}))),[]);return x.jsx(x.Fragment,{children:x.jsxs(ke.nav,{initial:"collapsed",animate:s?"expanded":"collapsed",variants:Me,className:(n?"hidden md:flex":"")+" fixed left-0 top-0 bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg border-r border-js/10 flex flex-col py-6 z-40 shadow-xl shadow-black/10 h-full",children:[x.jsx(Ve,{isExpanded:s}),x.jsx(ke.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!s),className:"absolute -right-3 top-8 w-6 h-6 bg-js rounded-full flex items-center justify-center hover:opacity-90 transition-all shadow-lg shadow-js/20",children:x.jsx(ke.span,{animate:{rotate:s?180:0},className:"text-dark text-sm font-bold",initial:"collapsed",children:"→"})}),x.jsx("div",{className:"overflow-x-hidden flex-1 px-3 space-y-6",children:x.jsx(Se,{mode:"sync",children:l.map((([e,t],i)=>x.jsx(Ke,{title:Qe[e],items:t,isExpanded:s,activeItem:a,onItemClick:o,index:i,isLastSection:i===l.length-1},e)))})}),x.jsx("div",{className:"pt-4 border-t border-js/10",children:x.jsx(Ge,{id:"logout",icon:x.jsx(f,{}),label:"Wyloguj się",isExpanded:s,onClick:r,variant:"danger"})})]})})};Xe.displayName="DashboardNavigation";const Ye=d.memo((({username:e})=>x.jsx(ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:x.jsxs("div",{children:[x.jsxs("h2",{className:"text-js font-bold text-xl",children:["Witaj, ",e,"! 👋"]}),x.jsx("p",{className:"text-gray-400 text-sm",children:"Miło Cię znów widzieć"})]})})));Ye.displayName="WelcomeSection";const es=()=>{const{token:e}=ve();return v({queryKey:["userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("Brak autoryzacji");const s=yield fetch(`${Ne}users/stats`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw new Error("Brak autoryzacji - zaloguj się ponownie");const e=yield s.json();throw new Error(e.message||"Błąd podczas pobierania danych")}return s.json()})))(e||""),enabled:!!e,staleTime:3e5,refetchInterval:6e4,retry:(e,s)=>e<2&&!s.message.includes("autoryzacji")})},ss={dropdown:{container:"\n      absolute right-0 top-12 w-80 bg-dark/95 rounded-xl \n      border border-js/10 shadow-xl backdrop-blur-sm z-50\n    ",header:{wrapper:"flex justify-between items-center mb-4 p-4",title:"text-xl font-bold text-js",badge:"px-2 py-1 text-xs bg-js/20 text-js rounded-full"},content:{wrapper:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar p-4",loading:"py-8 text-center text-gray-400",empty:"py-8 text-center text-gray-400",item:{wrapper:"\n          p-3 rounded-lg bg-dark/50 hover:bg-dark/70\n          border border-js/10 hover:border-js/20\n          cursor-pointer transition-all duration-200\n        ",content:"flex items-start gap-3",icon:"mt-1",text:{wrapper:"flex-1",message:"text-white",time:"text-sm text-gray-400 mt-1"}}}},button:{wrapper:"hidden xl:block relative",base:"\n      relative p-2 rounded-lg\n      hover:bg-js/5 transition-colors duration-200\n    ",active:"bg-dark/50",icon:{base:"w-5 h-5",active:"text-js",inactive:"text-gray-400"},badge:"\n      absolute -top-1 -right-1 bg-red-500 text-white \n      rounded-full min-w-[18px] h-[18px] text-xs \n      flex items-center justify-center px-1 font-medium\n    "}},ts=e=>{switch(e){case"challenge":return x.jsx(C,{className:"text-yellow-500"});case"achievement":return x.jsx(z,{className:"text-green-500"});case"social":return x.jsx(S,{className:"text-blue-500"});default:return x.jsx(k,{className:"text-gray-400"})}},as=d.memo((({notification:e,onRead:s})=>{return x.jsx(ke.div,{className:`\n      ${ss.dropdown.content.item.wrapper}\n      ${e.read?"opacity-60":""}\n    `,whileHover:{x:5},onClick:()=>!e.read&&s(e._id),children:x.jsxs("div",{className:ss.dropdown.content.item.content,children:[x.jsx("div",{className:ss.dropdown.content.item.icon,children:ts(e.type)}),x.jsxs("div",{className:ss.dropdown.content.item.text.wrapper,children:[x.jsx("p",{className:ss.dropdown.content.item.text.message,children:e.message}),x.jsx("span",{className:ss.dropdown.content.item.text.time,children:(t=e.createdAt,Ce(new Date(t),"dd MMM, HH:mm",{locale:Le}))})]})]})});var t}));as.displayName="NotificationItem";const is=d.memo((({unreadCount:e})=>x.jsxs("div",{className:ss.dropdown.header.wrapper,children:[x.jsx("h3",{className:ss.dropdown.header.title,children:"Powiadomienia"}),e>0&&x.jsxs("span",{className:ss.dropdown.header.badge,children:[e," nowe"]})]})));is.displayName="NotificationsHeader";const rs=d.memo((({onClose:e})=>{var s,t;const{data:a,isLoading:i}=es(),{markAsRead:r}=(()=>{const{token:e}=ve(),s=N();return{markAsRead:w({mutationFn:s=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}/dashboard/notifications/${s}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Nie udało się oznaczyć jako przeczytane");return t.json()})),onSuccess:()=>{s.invalidateQueries({queryKey:["dashboard"]})}})}})();return d.useEffect((()=>{const s=s=>{"Escape"===s.key&&e()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)}),[e]),x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:ss.dropdown.container,onClick:e=>e.stopPropagation(),children:[x.jsx(is,{unreadCount:null!=(s=null==a?void 0:a.unreadCount)?s:0}),i?x.jsx("div",{className:ss.dropdown.content.loading,children:"Ładowanie powiadomień..."}):(null==(t=null==a?void 0:a.notifications)?void 0:t.length)?x.jsx("div",{className:ss.dropdown.content.wrapper,children:a.notifications.map((e=>x.jsx(as,{notification:e,onRead:e=>r.mutate(e)},e._id)))}):x.jsx("div",{className:ss.dropdown.content.empty,children:"Brak nowych powiadomień"})]})}));rs.displayName="NotificationsDropdown";const ns=d.memo((()=>{var e;const[s,t]=d.useState(!1),{data:a}=es(),i=null!=(e=null==a?void 0:a.unreadCount)?e:0,r=d.useCallback((()=>t(!1)),[]),n=d.useCallback((e=>{e.stopPropagation(),t((e=>!e))}),[]);return x.jsxs("div",{className:ss.button.wrapper,children:[x.jsxs(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:`${ss.button.base} ${s?ss.button.active:""}`,children:[x.jsx(k,{className:`\n          ${ss.button.icon.base}\n          ${s?ss.button.icon.active:ss.button.icon.inactive}\n        `}),x.jsx(Se,{children:i>0&&x.jsx(ke.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:ss.button.badge,children:i>9?"9+":i})})]}),x.jsx(Se,{children:s&&x.jsx(rs,{onClose:r})})]})}));ns.displayName="NotificationsButton";const os={container:"\n    w-[90%]\n    xl:w-full\n    flex justify-between items-center\n    xl:block\n    mt-5\n    pb-2\n    bg-dark/50 backdrop-blur-sm\n    border-b border-js/10 \n    fixed top-0\n    md:top-4 right-0\n    h-14\n    z-[0]\n    rounded-lg mx-4\n  ",content:"\n    h-full\n    ml-32\n    sm:ml-auto\n    flex justify-between items-center\n    max-w-[1000px]\n    mx-auto\n    relative\n  ",actions:"flex items-center gap-3 absolute right-6",gradients:{text:"bg-gradient-to-r from-js to-js/80 bg-clip-text text-transparent",hover:"hover:bg-js/5",base:"bg-gradient-to-br from-js/5 to-js/10"},borders:{base:"border-js/20",hover:"hover:border-js/30"},transitions:{base:"transition-all duration-200"},text:{heading:"text-lg font-bold text-js",primary:"text-white",secondary:"text-gray-400"}},ls=["userProfile"],cs=()=>{const{token:e}=ve();return v({queryKey:ls,queryFn:()=>(e=>c(void 0,null,(function*(){const s=yield fetch(`${Ne}users/profile`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Nie udało się pobrać danych użytkownika");return s.json()})))(e)})},ds=d.memo((()=>{const e=d.useMemo((()=>({container:{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}}}})),[]),{data:s,isLoading:t}=cs(),a=d.useMemo((()=>t?"Ładowanie...":(null==s?void 0:s.data.username)?null==s?void 0:s.data.username:"Użytkowniku"),[null==s?void 0:s.data.username,t]);return x.jsx(ke.nav,{variants:e.container,initial:"initial",animate:"animate",className:os.container,children:x.jsxs("div",{className:os.content,children:[x.jsx(Ye,{username:a}),x.jsx("div",{className:os.actions,children:x.jsx(ns,{})})]})})}));ds.displayName="TopNavigation";const ms=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=Ze();return x.jsxs("main",{className:"bg-gradient-to-b from-dark via-dark-medium to-dark backdrop-blur-lg flex min-h-screen",children:[x.jsx(Xe,{}),x.jsxs("div",{className:`flex-1 ${!e&&"ml-[100px]"} md:ml-[100px]`,children:[x.jsx(ds,{}),x.jsx("div",{className:"mt-20 p-6 ",children:x.jsxs("div",{className:(e?"flex":"")+" flex-col justify-center items-center gap-4 md:block",children:[e&&x.jsx(L,{to:"/dashboard",className:"mb-4 md:hidden",children:x.jsx("button",{className:"bg-js text-dark px-4 py-2 rounded-md",children:"Wróć do Home"})}),x.jsx(P,{})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),xs={text:{heading:"font-bold text-js"},grid:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",card:{base:"bg-dark/50 backdrop-blur-sm border border-js/10 shadow-xl",community:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-2 lg:order-1\n    ",game:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-1 lg:order-2\n    ",stats:"\n      col-span-1 md:col-span-2 lg:col-span-1\n      order-3\n    "}},us="bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",ps={wrapper:"flex justify-between items-center mb-6",title:"text-xl font-bold text-js flex items-center gap-2",icon:"w-5 h-5"},hs={wrapper:"space-y-6",description:"text-gray-400 text-sm leading-relaxed",button:{wrapper:"flex justify-center",base:"px-6 py-3 bg-js text-dark font-medium rounded-lg transition-all duration-200",hover:"hover:bg-js/90 hover:shadow-lg hover:shadow-js/20",active:"active:scale-95"}},js=()=>d.useMemo((()=>({container:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},button:{hover:{scale:1.05},tap:{scale:.95}}})),[]),gs=d.memo((()=>{const e=b(),s=js();return x.jsxs(ke.div,{variants:s.container,initial:"hidden",animate:"show",className:us,children:[x.jsx("div",{className:ps.wrapper,children:x.jsxs("h2",{className:ps.title,children:[x.jsx(S,{className:ps.icon}),"Społeczność"]})}),x.jsxs("div",{className:hs.wrapper,children:[x.jsx("p",{className:hs.description,children:"Sprawdź najnowsze informacje i aktualności społeczności."}),x.jsx("div",{className:hs.button.wrapper,children:x.jsx(ke.button,{onClick:()=>{e("/dashboard/community")},whileHover:"hover",whileTap:"tap",variants:s.button,className:`\n              ${hs.button.base}\n              ${hs.button.hover}\n              ${hs.button.active}\n            `,children:"Sprawdź aktualności"})})]})]})}));gs.displayName="CommunityBlock";const ys=d.memo((()=>{const e=b(),s=js();return x.jsxs(ke.div,{variants:s.container,initial:"hidden",animate:"show",className:us,children:[x.jsx("div",{className:ps.wrapper,children:x.jsxs("h2",{className:ps.title,children:[x.jsx(j,{className:ps.icon}),"Tryb Gry"]})}),x.jsxs("div",{className:hs.wrapper,children:[x.jsx("p",{className:hs.description,children:"Rozpocznij nową sesję gry, rozwiązuj wyzwania i zdobywaj punkty. Sprawdź swoje umiejętności w praktyce!"}),x.jsx("div",{className:hs.button.wrapper,children:x.jsx(ke.button,{onClick:()=>{e("/dashboard/play")},whileHover:"hover",whileTap:"tap",variants:s.button,className:`\n              ${hs.button.base}\n              ${hs.button.hover}\n              ${hs.button.active}\n            `,children:"Rozpocznij Grę"})})]})]})}));ys.displayName="GameBlock";const bs="bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",fs={grid:"grid grid-cols-1 sm:grid-cols-2 gap-4",item:{wrapper:"flex items-center gap-4 p-4 bg-dark/30 rounded-lg",icon:"text-2xl text-js",content:{wrapper:"flex flex-col",label:"text-sm text-gray-400",value:"text-xl font-bold text-js"}}},vs="text-sm text-gray-400 mt-4",Ns=d.memo((({icon:e,label:s,value:t})=>x.jsxs("div",{className:fs.item.wrapper,children:[x.jsx("div",{className:fs.item.icon,children:e}),x.jsxs("div",{className:fs.item.content.wrapper,children:[x.jsx("p",{className:fs.item.content.label,children:s}),x.jsx("p",{className:fs.item.content.value,children:t})]})]})));Ns.displayName="StatItem";const ws=d.memo((({stats:e})=>{const s=d.useCallback((e=>{try{if(!e)return"Brak danych";const s=new Date(e);return isNaN(s.getTime())?"Nieprawidłowa data":Ce(s,"dd MMM, HH:mm",{locale:Le})}catch(s){return"Nieprawidłowa data"}}),[]);return x.jsxs("div",{className:bs,children:[x.jsxs("div",{className:fs.grid,children:[x.jsx(Ns,{icon:x.jsx(T,{}),label:"Poziom",value:e.level}),x.jsx(Ns,{icon:x.jsx(E,{}),label:"Punkty",value:e.points}),x.jsx(Ns,{icon:x.jsx(A,{}),label:"Seria",value:`${e.streak} dni`})]}),x.jsxs("p",{className:vs,children:["Ostatnia aktywność: ",s(e.lastActive)]})]})}));ws.displayName="StatsBlock";const ks=d.memo((({type:e,message:s})=>x.jsx("div",{className:"p-8 w-full flex items-center justify-center min-h-[400px]",children:x.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"text-xl "+("error"===e?"text-red-400":"text-gray-400"),children:s||("loading"===e?"Ładowanie danych...":"error"===e?"Wystąpił błąd podczas ładowania danych":"Brak danych do wyświetlenia")})})));ks.displayName="DashboardState";const Ss=d.memo((()=>{const{data:e,isLoading:s,error:t}=es(),a=d.useMemo((()=>({container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}}})),[]);return s?x.jsx(Ee,{}):t?x.jsx(ks,{type:"error",message:t.message}):e?x.jsxs(ke.div,{className:"p-1 md:p-12 w-full overflow-y-auto",variants:a.container,initial:"hidden",animate:"visible",children:[x.jsx(ke.h1,{className:`${xs.text.heading} text-3xl mb-12`,variants:a.item,children:"Dashboard"}),x.jsxs("div",{className:xs.grid,children:[x.jsx(ke.div,{variants:a.item,className:xs.card.community,children:x.jsx(gs,{})}),x.jsx(ke.div,{variants:a.item,className:xs.card.game,children:x.jsx(ys,{})}),x.jsx(ke.div,{variants:a.item,className:xs.card.stats,children:x.jsx(ws,{stats:e.data})})]})]}):x.jsx(ks,{type:"empty"})}));Ss.displayName="DashboardContent";const zs=Object.freeze(Object.defineProperty({__proto__:null,DashboardContent:Ss},Symbol.toStringTag,{value:"Module"})),Cs=()=>{const{token:e,isAuthenticated:s}=ve(),{data:t,isLoading:a,error:i}=v({queryKey:["userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){var s,t;const a=yield fetch(`${Ne}users/stats`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw new Error("Brak autoryzacji");throw new Error("Błąd podczas pobierania statystyk")}const i=yield a.json();return l(o({},i),{chartData:{daily:(null==(s=i.chartData)?void 0:s.daily)||[],categories:(null==(t=i.chartData)?void 0:t.categories)||[]}})})))(e),enabled:s&&!!e,staleTime:3e5,gcTime:18e5,retry:(e,s)=>"Brak autoryzacji"!==s.message&&e<3});return{stats:t,isLoading:a,error:i}},Ls={base:"bg-dark/50 backdrop-blur-sm rounded-xl border border-js/10 p-6",title:"text-xl font-bold text-js mb-6",content:"h-full"},Ps=d.memo((({level:e,experience:s,nextLevel:t})=>{const a=s/t*100;return x.jsxs("div",{className:Ls.base,children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsxs("h3",{className:Ls.title,children:["Poziom ",e]}),x.jsxs("p",{className:"text-gray-400 text-sm",children:[s," / ",t," XP do następnego poziomu"]})]}),x.jsx("div",{className:"hidden w-16 h-16 rounded-full bg-js/20 md:flex items-center justify-center",children:x.jsx("span",{className:"text-2xl font-bold text-js",children:e})})]}),x.jsx("div",{className:"relative h-4 bg-dark/50 rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,ease:"easeOut"},className:"absolute top-0 left-0 h-full bg-js/50"})})]})}));Ps.displayName="LevelProgress";const Ts={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},Es=d.memo((({icon:e,label:s,value:t,subValue:a})=>x.jsx(ke.div,{variants:Ts,className:`${Ls.base} hover:border-js/30 transition-all p-3 md:p-4`,children:x.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[x.jsx("div",{className:"p-2 md:p-3 rounded-lg bg-js/10 shrink-0",children:x.jsx(e,{className:"w-5 h-5 md:w-6 md:h-6 text-js"})}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-0.5 md:mb-1",children:s}),x.jsx("p",{className:"text-xl md:text-2xl font-bold font-space text-js truncate",children:t}),a&&x.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5 md:mt-1",children:a})]})]})})));Es.displayName="StatCard";const As={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},$s={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},Os=d.memo((({badge:e})=>{const s=e=>{try{const s=new Date(e);return isNaN(s.getTime())?"Data nieznana":s.toLocaleDateString("pl-PL",{year:"numeric",month:"short",day:"numeric"})}catch(s){return"Data nieznana"}};return x.jsxs(ke.div,{variants:$s,className:"min-w-[8rem] flex flex-col items-center p-4 bg-dark/30 rounded-lg border border-js/10 hover:border-js/30 transition-colors",children:[x.jsx("span",{className:"text-3xl mb-2",children:e.icon||"🏆"}),x.jsx("h4",{className:"text-js font-medium text-sm text-center",children:e.name}),x.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s(e.earnedAt)}),e.description&&x.jsx("p",{className:"text-gray-400 text-xs mt-1 text-center",children:e.description})]})}));Os.displayName="BadgeCard";const Rs=d.memo((()=>x.jsxs("div",{className:Ls.base,children:[x.jsx("h3",{className:Ls.title,children:"Odznaki"}),x.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nie zdobyto jeszcze żadnych odznak"})]})));Rs.displayName="EmptyBadges";const Ds=d.memo((({badges:e})=>(null==e?void 0:e.length)?x.jsxs("div",{className:Ls.base,children:[x.jsx("h3",{className:Ls.title,children:"Odznaki"}),x.jsx(ke.div,{variants:As,initial:"hidden",animate:"show",className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:e.map((e=>x.jsx(Os,{badge:e},e.id)))})]}):x.jsx(Rs,{})));Ds.displayName="BadgesGrid";const _s=d.memo((({message:e})=>x.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:x.jsx("p",{className:"text-red-500",children:e})})));_s.displayName="ErrorState";const Bs={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Fs=d.memo((({stats:e,isLoading:s,error:t})=>{const a=(e=>d.useMemo((()=>{var s;return e?[{icon:C,label:"Ukończone Lekcje",value:(null==(s=e.data.completedLessons)?void 0:s.toString())||"0",gradient:"from-amber-500 to-orange-500"},{icon:$,label:"Aktualny Streak",value:`${e.data.streak||0} dni`,subValue:`Najlepszy: ${e.data.bestStreak||0} dni`,gradient:"from-red-500 to-pink-500"}]:[]}),[e]))(e);return s?x.jsx(Ee,{}):t?x.jsx(_s,{message:`Wystąpił błąd podczas ładowania statystyk: ${t.message}`}):e?x.jsxs(ke.div,{variants:Bs,initial:"hidden",animate:"show",className:"space-y-6",children:[x.jsx(Ps,{level:e.data.level,experience:e.data.points,nextLevel:e.data.pointsToNextLevel}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map(((e,s)=>x.jsx(Es,o({},e),s)))}),x.jsx(Ds,{badges:e.data.badges})]}):x.jsx("div",{className:"p-4 bg-dark/50 rounded-lg",children:x.jsx("p",{className:"text-gray-400",children:"Brak dostępnych statystyk"})})}));Fs.displayName="StatsOverview";const Is=d.memo((({data:e})=>x.jsx(De,{width:"100%",height:300,children:x.jsxs(_e,{data:e,margin:{top:5,right:20,bottom:5,left:0},children:[x.jsx(Be,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),x.jsx(Fe,{dataKey:"date",stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"}}),x.jsx(Ie,{stroke:"#666",tickLine:!1,tick:{fill:"#666"},axisLine:{stroke:"#333"},label:{value:"Punkty",angle:-90,position:"insideLeft",fill:"#666"}}),x.jsx(We,{contentStyle:{background:"#1A1A1A",border:"1px solid #333",borderRadius:"4px",padding:"8px"},labelStyle:{color:"#666"},itemStyle:{color:"#F7DF1E"}}),x.jsx(He,{type:"monotone",dataKey:"points",stroke:"#F7DF1E",strokeWidth:2,dot:{fill:"#F7DF1E",strokeWidth:2},activeDot:{r:6,fill:"#F7DF1E"}})]})})));Is.displayName="DailyChart";const Ws=d.memo((({data:e,isLoading:s})=>s?x.jsx(Ee,{}):e?x.jsx("div",{className:"hidden md:flex flex-col gap-6 h-full",children:x.jsxs("div",{className:"bg-dark/50 rounded-lg p-6 flex-1",children:[x.jsx("h3",{className:"text-xl font-bold text-js mb-6",children:"Aktywność"}),x.jsx("div",{className:"h-[300px]",children:x.jsx(Is,{data:e.daily})})]})}):null));Ws.displayName="StatsCharts";const Hs=d.memo((()=>{var e;const{stats:s,isLoading:t,error:a}=Cs(),[i,r]=d.useState(!1),[n,o]=d.useState(null);return d.useEffect((()=>{(null==s?void 0:s.data.levelUp)&&(o({level:s.data.level,rewards:s.data.rewards}),r(!0))}),[s]),t?x.jsx(Ee,{}):a?x.jsx(ks,{type:"error",message:"Nie udało się załadować statystyk. Spróbuj ponownie później."}):s?x.jsxs(x.Fragment,{children:[x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[x.jsx(ke.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:x.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Statystyki i Postępy"})}),x.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 flex-1",children:[x.jsx("div",{className:"flex flex-col gap-6",children:x.jsx(Fs,{stats:s,isLoading:t,error:a})}),x.jsx("div",{className:"flex flex-col gap-6 h-full",children:x.jsx(Ws,{data:null==(e=null==s?void 0:s.data)?void 0:e.chartData,isLoading:t})})]})]}),x.jsx(Ae,{isVisible:i,onClose:()=>r(!1),level:(null==n?void 0:n.level)||0,rewards:null==n?void 0:n.rewards})]}):x.jsx(ks,{type:"empty",message:"Brak dostępnych statystyk."})}));Hs.displayName="StatsSection";const qs=Object.freeze(Object.defineProperty({__proto__:null,StatsSection:Hs},Symbol.toStringTag,{value:"Module"})),Ms=d.memo((({message:e,onRetry:s})=>x.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[x.jsx(O,{className:"w-12 h-12 text-red-500 mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Wystąpił błąd"}),x.jsx("p",{className:"text-gray-400 mb-4",children:e}),s&&x.jsx("button",{onClick:s,className:"px-4 py-2 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:"Spróbuj ponownie"})]}))),Us=[{id:"all",label:"Wszystkie"},{id:"beginner",label:"Podstawowe"},{id:"intermediate",label:"Średnie"},{id:"advanced",label:"Zaawansowane"}],Vs=d.memo((({onFilterChange:e,className:s=""})=>{const[t,a]=R(),i=t.get("filter")||"all";d.useEffect((()=>{e(i)}),[i,e]);return x.jsx("div",{className:`flex gap-2 flex-wrap ${s}`,children:Us.map((e=>{const s=i===e.id;return x.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{return s=e.id,void a("all"===s?{tab:"lessons"}:{filter:s,tab:"lessons"});var s},className:"w-fit px-3 py-1.5 rounded-lg text-sm font-medium transition-all\n              "+(s?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"),children:e.label},e.id)}))})}));Vs.displayName="LessonsFilter";const Gs=d.memo((({onFilterChange:e})=>x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Dostępne lekcje"}),x.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz interesującą Cię lekcję i rozpocznij naukę"})]}),x.jsx(Vs,{onFilterChange:e})]})));Gs.displayName="LessonsHeader";const Ks={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},Zs=d.memo((({lesson:e})=>{const{title:s,description:t,duration:a,slug:i,isCompleted:r,isLocked:n,requiredLevel:o=1}=e,l=x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"flex justify-between items-start",children:x.jsxs("div",{className:"space-y-1 flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"text-lg font-semibold "+(n?"text-gray-500":"text-js"),children:s}),r&&x.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-js/10 text-js",children:[x.jsx(D,{className:"w-3 h-3 mr-1"}),"Ukończono"]})]}),x.jsx("p",{className:`text-sm ${n?"text-gray-600":"text-gray-400"} line-clamp-2`,children:t})]})}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[x.jsxs("span",{className:"flex items-center gap-1 "+(n?"text-gray-600":"text-gray-400"),children:[x.jsx(_,{className:"w-3.5 h-3.5"}),a," min"]}),n&&x.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[x.jsx(B,{className:"w-3.5 h-3.5"}),"Poziom ",o]})]}),!n&&x.jsxs("div",{className:"flex items-center gap-2 text-js",children:[x.jsx("span",{children:r?"Powtórz":"Rozpocznij"}),x.jsx(F,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]});return x.jsx(ke.div,{variants:Ks,className:"group relative "+(n?"opacity-75":""),children:n?x.jsx("div",{className:"block p-6 rounded-xl bg-dark-800 border border-gray-800 cursor-not-allowed",children:l}):x.jsx(L,{to:`/dashboard/learn/lesson/${i}`,className:"block p-6 rounded-xl bg-dark-800 border border-js/10 hover:border-js/20 transition-colors",children:l})})}));Zs.displayName="LessonCard";const Js={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Qs=e=>{switch(e){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},Xs=d.memo((({lessons:e,filter:s,userData:t})=>{const a=e.map((e=>l(o({},e),{isLocked:!!e.requiredLevel&&e.requiredLevel>t.userLevel})));return 0===a.length?x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[x.jsxs("div",{className:"relative mb-6",children:[x.jsx(I,{className:"w-20 h-20 text-gray-600 opacity-20"}),x.jsx("div",{className:"absolute -right-2 -bottom-2",children:x.jsx(W,{className:"w-8 h-8 text-gray-500"})})]}),x.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"all"===s?"Brak dostępnych lekcji":`Brak lekcji o poziomie ${Qs(s)}`}),x.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"all"===s?"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później.":"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności."})]}):x.jsx(ke.div,{variants:Js,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((e=>x.jsx(Zs,{lesson:e},e.slug)))})}));Xs.displayName="LessonsList";const Ys=e=>c(void 0,[e],(function*({userId:e,lessonId:s,pathId:t,token:a}){if(!a)throw new Error("No authentication token found");const i=yield fetch(`${Ne}lessons/${s}/complete`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e,pathId:t})});if(!i.ok){const e=yield i.text();throw new Error(e||"Failed to complete lesson")}return i.json()})),et=e=>{switch(e){case"beginner":return"podstawowym";case"intermediate":return"średnim";case"advanced":return"zaawansowanym";default:return""}},st=()=>{var e,s,t;const[a,i]=d.useState("all"),[r]=d.useState("javascript"),{token:n}=ve(),{data:o,isLoading:l,error:m,refetch:x}=v({queryKey:["lessons"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("No authentication token found");const s=yield fetch(`${Ne}lessons`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Unauthorized - please log in again");throw new Error("Failed to fetch lessons")}return yield s.json()})))(n||""),retry:2,staleTime:3e5,refetchOnWindowFocus:!0,enabled:!!n}),u=null!=(s=null==(e=null==o?void 0:o.lessons)?void 0:e[r])?s:[],p=null!=(t=null==o?void 0:o.stats)?t:{total:0,completed:0,progress:0},h=d.useMemo((()=>"all"===a?u:u.filter((e=>e.difficulty===a))),[u,a]),j=!u||0===u.length,g=!j&&0===h.length,y={currentFilter:a,label:et(a),isEmpty:j,hasNoLessonsForFilter:g,messages:{title:g?`Brak lekcji o poziomie ${et(a)}`:"Brak dostępnych lekcji",description:g?"W tej kategorii nie znaleziono żadnych lekcji. Wybierz inny poziom trudności lub wyświetl wszystkie lekcje.":"Aktualnie nie ma żadnych dostępnych lekcji. Sprawdź ponownie później."}};return{filteredLessons:h,filter:a,setFilter:i,resetFilter:()=>i("all"),isLoading:l,error:m,refetch:x,isEmpty:j,hasNoLessonsForFilter:g,filterState:y,requiredLevel:null==o?void 0:o.requiredLevel,stats:p}},tt=d.memo((()=>{const{filteredLessons:e,filter:s,setFilter:t,isLoading:a,requiredLevel:i,error:r,refetch:n}=st();return r?x.jsx(Ms,{message:"Nie udało się pobrać listy lekcji. Spróbuj ponownie później.",onRetry:()=>n()}):a?x.jsx(Ee,{}):x.jsxs("div",{className:"space-y-6",children:[x.jsx(Gs,{onFilterChange:t}),x.jsx(Xs,{lessons:e,filter:s,userId:"current-user",userData:{userLevel:1,requiredLevel:i||1}})]})}));tt.displayName="Lessons";const at={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},it=d.memo((({resource:e,isRecommended:s})=>x.jsxs(ke.div,{variants:at,whileHover:{scale:1.02},className:"group relative bg-dark-800/50 border border-js/10 rounded-xl p-5 hover:border-js/20 transition-colors",children:[s&&x.jsxs("div",{className:"absolute -top-2 -right-2 bg-js text-dark px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[x.jsx(E,{className:"w-3 h-3"}),"Polecane"]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("h3",{className:"text-lg font-bold text-js mb-1 line-clamp-1",children:e.title}),x.jsx("p",{className:"text-gray-400 text-sm line-clamp-2",children:e.description})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[x.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("documentation"===e.type?"bg-blue-500/10 text-blue-400":"tutorial"===e.type?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400"),children:"documentation"===e.type?"Dokumentacja":"tutorial"===e.type?"Tutorial":"Artykuł"}),x.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("beginner"===e.difficulty?"bg-green-500/10 text-green-400":"intermediate"===e.difficulty?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"),children:"beginner"===e.difficulty?"Podstawowy":"intermediate"===e.difficulty?"Średni":"Zaawansowany"})]}),x.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors text-sm",children:["Otwórz materiał",x.jsx(H,{className:"w-3 h-3"})]})]})]})));it.displayName="ResourceCard";const rt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},nt=d.memo((({title:e,subtitle:s,resources:t,isRecommended:a})=>x.jsxs("section",{children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:e}),x.jsx("p",{className:"text-gray-400 text-sm",children:s})]}),x.jsx(ke.div,{variants:rt,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e=>x.jsx(it,{resource:e,isRecommended:a},e.id)))})]})));nt.displayName="ResourceSection";const ot=()=>{const{token:e}=ve(),{data:s,isLoading:t,error:a,refetch:i}=v({queryKey:["resources"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("No authentication token found");const s=yield fetch(`${Ne}resources`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Unauthorized - please log in again");throw new Error("Failed to fetch resources")}return yield s.json()})))(e||""),retry:2,staleTime:3e5,enabled:!!e});return{recommendedResources:(null==s?void 0:s.resources.filter((e=>e.isRecommended)))||[],otherResources:(null==s?void 0:s.resources.filter((e=>!e.isRecommended)))||[],isLoading:t,error:a,refetch:i}},lt=d.memo((()=>{const{recommendedResources:e,otherResources:s,isLoading:t,error:a,refetch:i}=ot();return a?x.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:x.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:x.jsx(Ms,{message:"Nie udało się pobrać materiałów. Spróbuj ponownie później.",onRetry:()=>i()})})}):t?x.jsx("div",{className:"flex justify-center py-12",children:x.jsx(Ee,{})}):(null==e?void 0:e.length)||(null==s?void 0:s.length)?x.jsxs("div",{className:"space-y-8",children:[(null==e?void 0:e.length)>0&&x.jsx(nt,{title:"Polecane materiały",subtitle:"Wyselekcjonowane materiały, które pomogą Ci w nauce",resources:e,isRecommended:!0}),(null==s?void 0:s.length)>0&&x.jsx(nt,{title:"Wszystkie materiały",subtitle:"Przeglądaj wszystkie dostępne materiały",resources:s})]}):x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[x.jsxs("div",{className:"relative mb-6",children:[x.jsx(q,{className:"w-20 h-20 text-gray-600 opacity-20"}),x.jsx("div",{className:"absolute -right-2 -bottom-2",children:x.jsx(W,{className:"w-8 h-8 text-gray-500"})})]}),x.jsx("h3",{className:"text-xl font-bold text-js mb-3",children:"Brak dostępnych materiałów"}),x.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:"Aktualnie nie ma żadnych dostępnych materiałów. Sprawdź ponownie później lub skontaktuj się z administratorem."}),x.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(),className:"mt-6 px-4 py-2 bg-js/10 text-js border border-js/20 rounded-lg text-sm font-medium hover:bg-js/20 transition-colors",children:"Odśwież materiały"})]})}));lt.displayName="Resources";const ct=d.memo((({icon:e,title:s,label:t,value:a})=>x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx(e,{className:"w-5 h-5 text-js"}),x.jsx("h4",{className:"font-medium text-gray-200",children:s})]}),x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsx("span",{className:"text-gray-400",children:t}),x.jsx("span",{className:"text-js",children:a})]})]}))),dt=d.memo((({stats:e})=>x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx(ct,{icon:M,title:"Postęp nauki",label:"Ukończone ścieżki",value:`${e.completedPaths}/${e.totalPaths}`}),x.jsx(ct,{icon:A,title:"Punkty XP",label:"Zdobyte punkty",value:`${e.totalPoints} XP`}),x.jsx(ct,{icon:_,title:"W trakcie",label:"Aktywne ścieżki",value:e.pathsInProgress})]}))),mt=()=>{const{token:e}=ve(),{data:s,isLoading:t,error:a,refetch:i}=v({queryKey:["learningPaths","userProgress"],queryFn:()=>(e=>c(void 0,null,(function*(){if(!e)throw new Error("No authentication token found");const s=yield fetch(`${Ne}Learning-paths`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)throw new Error("Unauthorized - please log in again");throw new Error("Failed to fetch learning paths")}return yield s.json()})))(e||""),staleTime:3e5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!!e});return{paths:(null==s?void 0:s.paths)||[],userStats:null==s?void 0:s.userStats,isLoading:t,error:a,refetch:i,isEmpty:!(null==s?void 0:s.paths)||0===s.paths.length}},xt=d.memo((()=>x.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[x.jsx("h3",{className:"text-xl font-bold text-js mb-2",children:"Brak dostępnych ścieżek nauki"}),x.jsx("p",{className:"text-gray-400 text-sm",children:"Aktualnie nie ma żadnych dostępnych ścieżek nauki. Sprawdź ponownie później."})]}))),ut=d.memo((({title:e,isLocked:s,requiredLevel:t})=>x.jsxs("div",{className:"flex items-start justify-between gap-4",children:[x.jsx("h3",{className:"text-lg font-bold "+(s?"text-gray-400":"text-js"),children:e}),s&&x.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[x.jsx(B,{className:"w-4 h-4"}),x.jsxs("span",{children:["Poziom ",t]})]})]})));ut.displayName="PathHeader";const pt=d.memo((({description:e,outcomes:s,requirements:t})=>x.jsxs("div",{className:"space-y-4",children:[x.jsx("p",{className:"text-gray-400 text-sm",children:e}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("h4",{className:"text-sm font-medium text-js",children:"Czego się nauczysz:"}),x.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:s.map(((e,s)=>x.jsx("li",{children:e},s)))})]}),t.length>0&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("h4",{className:"text-sm font-medium text-js",children:"Wymagania:"}),x.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:t.map(((e,s)=>x.jsx("li",{children:e},s)))})]})]})));pt.displayName="PathContent";const ht=d.memo((({progress:e})=>x.jsxs("div",{children:[x.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${e.percentage}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),x.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[x.jsxs("span",{children:[e.completed,"/",e.total," ukończone"]}),x.jsxs("span",{children:[e.percentage,"%"]})]})]})));ht.displayName="ProgressBar";const jt=d.memo((({id:e,isLocked:s,estimatedTime:t,progress:a})=>x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[x.jsx(_,{className:"w-4 h-4"}),t," min"]}),!s&&x.jsx(L,{to:`/dashboard/learn?tab=lessons&pathId=${e}`,className:"text-js hover:text-js/80 transition-colors",children:x.jsx(F,{className:"w-4 h-4"})})]}),x.jsx(ht,{progress:a})]})));jt.displayName="PathFooter";const gt=d.memo((({path:e})=>{const{safeData:s,cardStyles:t,hoverAnimation:a}=(e=>{const s=d.useMemo((()=>{var s,t,a,i;return{id:e.id,title:e.title||"Brak tytułu",description:e.description||"Brak opisu",estimatedTime:e.estimatedTime||0,isLocked:e.isLocked,requiredLevel:e.requiredLevel,progress:{completed:Array.isArray(null==(s=e.progress)?void 0:s.completed)?e.progress.completed.length:Number(null==(t=e.progress)?void 0:t.completed)||0,total:Number(null==(a=e.progress)?void 0:a.total)||0,percentage:Number(null==(i=e.progress)?void 0:i.percentage)||0},outcomes:Array.isArray(e.outcomes)?e.outcomes.map((e=>String(e))):[],requirements:Array.isArray(e.requirements)?e.requirements.map((e=>String(e))):[]}}),[e]),t=d.useMemo((()=>`\n    bg-dark-800/50 border rounded-xl p-6 transition-all\n    ${s.isLocked?"border-gray-700/50 opacity-75":"border-js/10 hover:border-js/20"}\n  `),[s.isLocked]),a=d.useMemo((()=>s.isLocked?{}:{scale:1.02}),[s.isLocked]);return{safeData:s,cardStyles:t,hoverAnimation:a}})(e);return x.jsx(ke.div,{whileHover:a,className:t,children:x.jsxs("div",{className:"space-y-4",children:[x.jsx(ut,{title:s.title,isLocked:s.isLocked,requiredLevel:s.requiredLevel}),x.jsx(pt,{description:s.description,outcomes:s.outcomes,requirements:s.requirements}),x.jsx(jt,{id:s.id,isLocked:s.isLocked,estimatedTime:s.estimatedTime,progress:s.progress})]})})}));gt.displayName="PathCard";const yt=d.memo((()=>{const{paths:e,userStats:s,isLoading:t,error:a,refetch:i,isEmpty:r}=mt();return t?x.jsx(Ee,{}):a?x.jsx(Ms,{message:"Nie udało się pobrać ścieżek nauki. Spróbuj ponownie później.",onRetry:i}):r?x.jsx(xt,{}):x.jsxs("div",{className:"space-y-8",children:[x.jsx(dt,{stats:s||{completedPaths:0,totalPaths:0,totalPoints:0,pathsInProgress:0,recentActivity:[]}}),x.jsxs("section",{children:[x.jsx("header",{className:"flex items-center justify-between mb-6",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-js mb-1",children:"Ścieżki nauki"}),x.jsx("p",{className:"text-gray-400 text-sm",children:"Wybierz ścieżkę nauki dopasowaną do Twoich potrzeb"})]})}),x.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map((e=>x.jsx(gt,{path:e},e.id)))})]})]})}));yt.displayName="LearningPaths";const bt=[{id:"paths",label:"Ścieżki nauki",icon:M},{id:"lessons",label:"Lekcje",icon:g},{id:"resources",label:"Materiały",icon:U}],ft=d.memo((({activeTab:e,onTabChange:s})=>x.jsx("div",{className:"flex gap-2 flex-wrap",children:bt.map((t=>x.jsxs(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s(t.id),className:"relative flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all\n            "+(e===t.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"),children:[x.jsx(t.icon,{className:"w-4 h-4"}),t.label,e===t.id&&x.jsx(ke.div,{layoutId:"activeTab",className:"absolute inset-0 bg-js/5 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},t.id)))})));ft.displayName="LearnTabs";const vt=()=>{const[e,s]=d.useState((()=>localStorage.getItem("token")||sessionStorage.getItem("token"))),t=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}").id;return d.useEffect((()=>{const e=()=>{s(localStorage.getItem("token")||sessionStorage.getItem("token"))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),{token:e,isAuthenticated:!!e,userId:t}},Nt=d.memo((()=>{const[e,s]=R(),{isAuthenticated:t}=vt(),a=e.get("tab")||"paths";return t?x.jsx(ke.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},initial:"hidden",animate:"visible",className:"min-h-screen bg-dark/50 backdrop-blur-sm",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x.jsx($e,{title:"Nauka JavaScript",subtitle:"Wybierz swoją ścieżkę nauki i rozpocznij przygodę z JS",className:"mb-8",titleClassName:"text-js drop-shadow-lg",subtitleClassName:"text-gray-400"}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-xl p-6",children:[x.jsx(ft,{activeTab:a,onTabChange:e=>{s((s=>("paths"===e?(s.delete("tab"),s.delete("filter")):s.set("tab",e),s)))}}),x.jsxs(ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,type:"spring",stiffness:200,damping:20},className:"mt-8",children:["paths"===a&&x.jsx(yt,{}),"lessons"===a&&x.jsx(tt,{}),"resources"===a&&x.jsx(lt,{})]},a)]})]})}):x.jsx("div",{className:"flex justify-center py-12",children:x.jsx(Ee,{})})}));Nt.displayName="LearnSection";const wt=Object.freeze(Object.defineProperty({__proto__:null,LearnSection:Nt},Symbol.toStringTag,{value:"Module"})),kt=e=>{const{userId:s,token:t}=vt(),a=N(),{refetch:i}=mt(),[r,n]=d.useState(0),{data:o,isLoading:l,error:m,refetch:x}=v({queryKey:["lesson",e],queryFn:()=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}lessons/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!t.ok){if(404===t.status)throw new Error("lesson_not_found");throw new Error("Failed to fetch lesson")}return t.json()})))(e,t),enabled:!!e,retry:!1}),u="lesson_not_found"===(null==m?void 0:m.message),p=w({mutationFn:Ys,onSuccess:()=>{a.invalidateQueries({queryKey:["userProgress"]}),a.invalidateQueries({queryKey:["lessons"]}),a.invalidateQueries({queryKey:["lesson",e]}),i()}}),h=w({mutationFn:a=>((e,s,t,a)=>c(void 0,null,(function*(){const i=yield fetch(`${Ne}users/${e}/lessons/${s}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)});if(!i.ok)throw new Error("Failed to update progress");return i.json()})))(s,e,a,t),onSuccess:()=>{a.invalidateQueries({queryKey:["userProgress"]})}});return{lesson:o,isLoading:l,error:m,isNotFound:u,activeSection:r,progress:null==o?void 0:o.progress,refetch:x,handleSectionChange:e=>{n(e)},handleSectionComplete:t=>c(void 0,null,(function*(){s&&e&&(yield h.mutateAsync({completedSections:[...(null==o?void 0:o.completedSections)||[],t],isCompleted:!1,points:0}))})),handleQuizComplete:t=>c(void 0,null,(function*(){s&&e&&(yield h.mutateAsync({completedSections:(null==o?void 0:o.completedSections)||[],isCompleted:!1,points:t}))})),handleLessonComplete:()=>c(void 0,null,(function*(){if(!s||!e||!o)return Promise.reject(new Error("Brak wymaganych danych"));try{const e=yield p.mutateAsync({userId:s,lessonId:o.id,pathId:o.pathId,token:t});return yield x(),yield i(),V.success("Lekcja ukończona!",{duration:3e3,position:"bottom-right"}),e}catch(a){throw V.error("Nie udało się ukończyć lekcji. Spróbuj ponownie.",{duration:4e3,position:"bottom-right"}),a}})),completeLessonMutation:p}},St=d.memo((({children:e})=>x.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e})})));St.displayName="LessonLayout";const zt=d.memo((()=>x.jsxs(L,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors mb-6",children:[x.jsx(G,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})));zt.displayName="BackToLessons";const Ct="beginner",Lt="intermediate",Pt="advanced",Tt={[Ct]:"bg-green-500/10 text-green-400",[Lt]:"bg-yellow-500/10 text-yellow-400",[Pt]:"bg-red-500/10 text-red-400"},Et=d.memo((({difficulty:e})=>x.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${Tt[e]}`,children:"beginner"===e?"Podstawowy":"intermediate"===e?"Średni":"Zaawansowany"})));Et.displayName="DifficultyBadge";const At=d.memo((({xp:e})=>x.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2.5 py-1 rounded-lg text-sm",children:[x.jsx(E,{className:"w-4 h-4"}),e," XP"]})));At.displayName="XpBadge";const $t=d.memo((({title:e,duration:s,difficulty:t,xp:a})=>x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx(Et,{difficulty:t}),x.jsx(At,{xp:a})]}),x.jsx("h1",{className:"text-3xl font-bold text-js mb-4",children:e}),x.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(_,{className:"w-4 h-4"}),s," min"]})})]}))),Ot=J,Rt=d.memo((({code:e,language:s,showLineNumbers:t=!0,className:a})=>x.jsxs("div",{className:`relative group ${a}`,children:[x.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e)},className:"absolute right-2 top-2 p-2 rounded-lg bg-dark/50 text-gray-400 \r\n          opacity-0 group-hover:opacity-100 transition-opacity hover:text-js",title:"Kopiuj kod",children:x.jsx(K,{className:"w-4 h-4"})}),x.jsx(Ot,{language:s,style:Z,showLineNumbers:t,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.5rem",background:"transparent"},codeTagProps:{style:{fontFamily:"JetBrains Mono, monospace"}},children:e})]})));Rt.displayName="CodeBlock";const Dt=d.memo((({example:e,index:s})=>e.code?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("h3",{className:"text-lg font-medium text-gray-200",children:["Przykład ",s+1,":"]}),x.jsx(Rt,{code:e.code,language:e.language||"javascript",showLineNumbers:!0,className:"rounded-lg border border-js/10"}),e.explanation&&x.jsx("p",{className:"text-gray-400 text-sm",children:e.explanation})]}):x.jsx("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-js/10",children:x.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Ten przykład nie zawiera jeszcze kodu."})}))),_t=d.memo((({section:e,index:s})=>x.jsxs("section",{className:"space-y-4",children:[x.jsxs("h2",{className:"text-xl font-bold text-js",children:[s+1,". ",e.title]}),x.jsx("div",{className:"prose prose-invert max-w-none",children:e.content}),x.jsx("div",{className:"space-y-8 mt-8",children:e.examples&&e.examples.length>0&&x.jsx("div",{className:"space-y-8 mt-8",children:e.examples.map(((e,s)=>x.jsx(Dt,{example:e,index:s},s)))})})]})));_t.displayName="LessonSection";const Bt={perfect:{icon:C,label:"Perfekcyjnie!",color:"text-yellow-500"},excellent:{icon:T,label:"Świetnie!",color:"text-js"},good:{icon:E,label:"Mogło być lepiej!",color:"text-blue-500"}},Ft=d.memo((({correctAnswers:e,totalQuestions:s})=>{const t=e/s*100,a=(e=>100===e?Bt.perfect:e>=80?Bt.excellent:Bt.good)(t),i=a.icon;return x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 text-center",children:[x.jsx("div",{className:"flex justify-center mb-4",children:x.jsxs("div",{className:"relative",children:[x.jsx(i,{className:`w-12 h-12 ${a.color}`}),x.jsx(ke.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},className:"absolute -right-2 -bottom-2",children:x.jsx(E,{className:"w-6 h-6 text-yellow-500 animate-pulse"})})]})}),x.jsx("h3",{className:`text-xl font-bold ${a.color} mb-2`,children:a.label}),x.jsxs("p",{className:"text-gray-400 mb-4",children:["Poprawne odpowiedzi: ",e," z ",s]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(ke.div,{initial:{width:0},animate:{width:"100%"},className:"h-2 bg-dark rounded-full overflow-hidden mx-auto",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full "+(100===t?"bg-yellow-500":"bg-js"),transition:{delay:.5,duration:.8}})}),x.jsxs("p",{className:"text-sm text-gray-400",children:[Math.round(t),"% poprawnych odpowiedzi"]})]})]})})),It=d.memo((({questions:e,onComplete:s})=>{const[t,a]=d.useState(0),[i,r]=d.useState(null),[n,o]=d.useState(0),[l,c]=d.useState(!1),[m,u]=d.useState(!1),p=t/e.length*100;return l?x.jsx(Ft,{correctAnswers:n,totalQuestions:e.length,earnedXP:Math.round(n/e.length*100)}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("span",{className:"text-sm text-gray-400",children:["Pytanie ",t+1," z ",e.length]}),x.jsx("span",{className:"text-js",children:"•"})]}),x.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(p),"% ukończone"]})]}),m&&x.jsx(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg text-gray-400 text-sm",children:e[t].explanation}),null!==i&&x.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{t<e.length-1?(a((e=>e+1)),r(null),u(!1)):(s(n,e.length),c(!0))},className:"w-full py-3 bg-js/10 text-js rounded-lg hover:bg-js/20 transition-colors",children:t<e.length-1?"Następne pytanie":"Zakończ quiz"}),x.jsx("div",{className:"text-lg font-medium text-gray-200",children:e[t].question}),x.jsx("div",{className:"space-y-3",children:e[t].options.map(((s,a)=>x.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:null!==i,onClick:()=>{return r(s=a),u(!0),void(s===e[t].correctAnswer&&o((e=>e+1)));var s},className:"w-full p-4 rounded-lg border text-left transition-colors\n              "+(null===i?"border-js/10 hover:border-js/20":a===e[t].correctAnswer?"border-green-500 bg-green-500/10 text-green-400":i===a?"border-red-500 bg-red-500/10 text-red-400":"border-js/10 opacity-50"),children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{children:s}),null!==i&&(a===e[t].correctAnswer?x.jsx(D,{className:"w-4 h-4 text-green-400"}):i===a?x.jsx(Q,{className:"w-4 h-4 text-red-400"}):null)]})},a)))})]})}));It.displayName="LessonQuiz",Ft.displayName="QuizSummary";const Wt=d.memo((({lesson:e,onQuizComplete:s})=>{if(!e)return null;const{sections:t=[]}=e.content;return x.jsx("div",{className:"w-[85vw] mb-32 md:w-auto md:mb-auto col-span-9 lesson-content overflow-y-auto max-h-[calc(100vh-200px)]",children:x.jsx(ke.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-dark-800/50 border border-js/10 rounded-xl p-6 md:p-8",children:x.jsxs("div",{className:"space-y-8",children:[x.jsx($t,{title:e.title,duration:String(e.duration),difficulty:e.difficulty,xp:e.points}),x.jsxs("div",{className:"space-y-8",children:[t.map(((e,s)=>x.jsx(_t,{section:e,index:s},s))),e.content.quiz&&x.jsx(It,{questions:e.content.quiz,onComplete:s})]})]})})})}));Wt.displayName="LessonMainContent";const Ht=d.memo((({isCompleted:e,onComplete:s})=>{const[t,a]=d.useState(0),[i,r]=d.useState(!1),n=ze(0),o=b();d.useEffect((()=>{const e=document.querySelector(".lesson-content");if(!e)return;const s=()=>{const{scrollTop:s,scrollHeight:t,clientHeight:i}=e,r=s/(t-i)*100;a(Math.min(r,100)),n.set(Math.min(r,100))};return e.addEventListener("scroll",s),s(),()=>e.removeEventListener("scroll",s)}),[n]);const l=t>=98&&!e;return x.jsx("div",{className:"mb-5 fixed bottom-0 left-0 right-0 bg-dark-800/95 border-t border-js/10 backdrop-blur-sm",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[x.jsxs("div",{className:"flex-1 mr-8",children:[x.jsx("div",{className:"relative h-2 bg-dark rounded-full overflow-hidden",children:x.jsx(ke.div,{style:{width:`${t}%`},className:"absolute inset-y-0 left-0 bg-js rounded-full"})}),x.jsx("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:x.jsxs("span",{children:[Math.round(t),"% przeczytane"]})})]}),x.jsxs(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(void 0,null,(function*(){if(l&&!i)try{r(!0),yield s(),o("/dashboard/learn?tab=lessons")}catch(e){}finally{r(!1)}})),disabled:!l||i,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors\n            "+(l&&!i?"bg-js/10 text-js hover:bg-js/20":"bg-gray-800/50 text-gray-500 cursor-not-allowed"),children:[x.jsx(D,{className:"w-4 h-4"}),i?"Zapisywanie...":l?"Zakończ lekcję":"Przeczytaj całą lekcję"]})]})})}));Ht.displayName="LessonProgress";const qt=d.memo((({lesson:e,activeSection:s,progress:t,onSectionComplete:a,onQuizComplete:i,onLessonComplete:r})=>{if(!e)return null;const n=(e.sections||[]).length;return x.jsx(x.Fragment,{children:x.jsxs(St,{children:[x.jsx(zt,{}),x.jsx("div",{className:"w-full flex items-center justify-center",children:x.jsx(Wt,{lesson:e,onSectionComplete:a,onQuizComplete:i})}),x.jsx(Ht,{currentSection:s,totalSections:n,progress:t,isCompleted:e.isCompleted||!1,onComplete:r})]})})}));qt.displayName="LessonContent";const Mt=d.memo((()=>x.jsx("div",{className:"min-h-screen bg-dark/50 backdrop-blur-sm py-8",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"text-center",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-4",children:"Lekcja nie została znaleziona"}),x.jsxs(L,{to:"/dashboard/learn",className:"inline-flex items-center gap-2 text-js hover:text-js/80 transition-colors",children:[x.jsx(G,{className:"w-4 h-4"}),"Wróć do listy lekcji"]})]})})})));Mt.displayName="LessonNotFound";const Ut=()=>{const{lessonSlug:e}=X();if(!e)return x.jsx(Y,{to:"/dashboard/learn",replace:!0});const{lesson:s,isLoading:t,error:a,isNotFound:i,activeSection:r,progress:n,handleSectionComplete:o,handleQuizComplete:l,handleLessonComplete:c}=kt(e);return t?x.jsx(Vt,{}):i?x.jsx(Mt,{}):a?x.jsx(Gt,{onRetry:()=>window.location.reload()}):s?x.jsx(qt,{lesson:s,activeSection:r,progress:"number"==typeof n?n:0,onSectionComplete:o,onQuizComplete:l,onLessonComplete:c}):x.jsx(Mt,{})},Vt=()=>x.jsx(St,{children:x.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:x.jsx(Ee,{})})}),Gt=({onRetry:e})=>x.jsx(St,{children:x.jsx(Ms,{message:"Nie udało się pobrać lekcji. Spróbuj ponownie później.",onRetry:e})});Ut.displayName="LessonPage";const Kt=Object.freeze(Object.defineProperty({__proto__:null,LessonPage:Ut},Symbol.toStringTag,{value:"Module"})),Zt=[{id:"profile",label:"Profil",icon:ee},{id:"security",label:"Bezpieczeństwo",icon:B},{id:"preferences",label:"Preferencje",icon:y},{id:"delete",label:"Usuń konto",icon:se}],Jt="bg-dark/30 backdrop-blur-sm rounded-xl border border-js/10 p-4 h-fit shadow-lg",Qt="flex flex-col gap-2",Xt=e=>`\n    flex items-center gap-3 p-3 rounded-lg text-left\n    transition-colors duration-200\n    ${e?"bg-js/20 text-js":"text-gray-400 hover:text-js hover:bg-js/10"}\n  `,Yt="w-5 h-5",ea=d.memo((({activeView:e,onViewChange:s})=>{const t=d.useCallback((e=>{s(e)}),[s]);return x.jsx("div",{className:Jt,children:x.jsx("nav",{className:Qt,children:Zt.map((s=>x.jsxs(ke.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:()=>t(s.id),className:Xt(e===s.id),children:[x.jsx(s.icon,{className:Yt}),s.label]},s.id)))})})}));ea.displayName="SettingsSidebar";const sa=e=>({Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),ta=["profile"],aa=()=>{var e;const s=N(),{token:t}=ve(),{data:a,isLoading:i,error:r}=v({queryKey:ta,queryFn:()=>(e=>c(void 0,null,(function*(){var s;const t=yield fetch(`${Ne}settings/profile`,{headers:sa(e)});if(!t.ok)throw new Error("Failed to fetch profile");const a=yield t.json();return{username:a.username,email:a.email,profile:{bio:(null==(s=a.profile)?void 0:s.bio)||""}}})))(t||""),enabled:!!t,staleTime:3e5}),n=w({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}settings/profile`,{method:"PUT",headers:sa(s),body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update profile");return t.json()})))(e,t||""),onSuccess:e=>{s.setQueryData(ta,e),s.invalidateQueries({queryKey:ta})}});return{profile:a,bio:(null==(e=null==a?void 0:a.profile)?void 0:e.bio)||"",isLoading:i,error:r,updateProfile:n}},ia=Pe.object({username:Pe.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika może mieć maksymalnie 20 znaków"),email:Pe.string().email("Nieprawidłowy adres email"),profile:Pe.object({bio:Pe.string().max(160,"Bio może mieć maksymalnie 160 znaków").optional(),avatar:Pe.string().optional()})}),ra=e=>{var s;const{updateProfile:t}=aa(),a=d.useCallback((e=>c(void 0,null,(function*(){var s;try{yield t.mutateAsync({username:e.username,email:e.email,profile:{bio:(null==(s=e.profile)?void 0:s.bio)||""}}),V.success("Profil został zaktualizowany")}catch(a){V.error("Nie udało się zaktualizować profilu")}}))),[t]),i={username:(null==e?void 0:e.username)||"",email:(null==e?void 0:e.email)||"",profile:{bio:(null==(s=null==e?void 0:e.profile)?void 0:s.bio)||""}},{form:r,onSubmit:n}=(({onSubmit:e,defaultValues:s})=>{var t,a;const i=te({resolver:Te(ia),defaultValues:{username:(null==s?void 0:s.username)||"",email:(null==s?void 0:s.email)||"",profile:{bio:(null==(t=null==s?void 0:s.profile)?void 0:t.bio)||"",avatar:(null==(a=null==s?void 0:s.profile)?void 0:a.avatar)||""}}});return{form:i,onSubmit:i.handleSubmit((s=>c(void 0,null,(function*(){try{yield e(s)}catch(t){}}))))}})({onSubmit:a,defaultValues:i});return{form:r,onSubmit:n}},na={form:"w-full max-w-2xl sm:ml-0 sm:mr-auto \n    space-y-8 px-4 sm:px-0",usernameContainer:"flex flex-col gap-4",container:"bg-dark/30 backdrop-blur-sm rounded-xl \n    p-4 sm:p-6 md:p-8 border border-js/10 \n    space-y-6 md:space-y-8",header:"flex flex-col md:flex-row gap-6 md:gap-8",infoSection:"w-full md:w-2/3 space-y-6",bioSection:"space-y-4",bioLabel:"block text-gray-400 \n    text-sm sm:text-base \n    font-medium",bioTextarea:"w-full px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    text-sm sm:text-base \n    min-h-[120px] max-h-[240px] \n    resize-y\n    transition-colors duration-200",error:"text-red-500 text-sm mt-1"},oa=d.memo((({register:e,errors:s})=>{var t,a;return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:na.usernameContainer,children:x.jsx(Oe,o({type:"text",label:"Nazwa użytkownika",placeholder:"Wprowadź nazwę użytkownika",icon:x.jsx(ee,{}),error:null==(t=s.username)?void 0:t.message},e("username")))}),x.jsx(Oe,o({type:"email",label:"Email",placeholder:"Wprowadź adres email",icon:x.jsx(ae,{}),error:null==(a=s.email)?void 0:a.message},e("email")))]})}));oa.displayName="UserInfoFields";const la={container:"space-y-2",label:"block text-gray-400 text-sm",textarea:"w-full h-32 px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10\n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    resize-none",error:"text-red-500 text-sm"},ca=d.memo((({register:e,errors:s,defaultValue:t})=>{var a;return x.jsxs("div",{className:la.container,children:[x.jsx("label",{className:la.label,children:"Bio"}),x.jsx("textarea",l(o({},e("profile.bio")),{className:la.textarea,placeholder:t||"Napisz coś o sobie..."})),(null==(a=s.profile)?void 0:a.bio)&&x.jsx("span",{className:la.error,children:s.profile.bio.message})]})}));ca.displayName="BioField";const da={container:"flex flex-col-reverse sm:flex-row justify-end gap-3 sm:gap-4\n    w-full sm:w-auto mt-6 sm:mt-8",cancelButton:"w-full sm:w-auto order-1 sm:order-none\n    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg\n    bg-dark/50 text-gray-400\n    border border-js/10 hover:border-js/30 hover:bg-dark/60\n    disabled:opacity-50 disabled:cursor-not-allowed\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base font-medium\n  ",submitButton:"w-full sm:w-auto\n    px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg\n    bg-js text-dark\n    hover:bg-js/90\n    disabled:opacity-50 disabled:cursor-not-allowed\n    transition-colors duration-200\n    text-sm sm:text-base font-medium\n    flex items-center justify-center\n  "},ma=d.memo((({onCancel:e,isSubmitting:s,submitText:t="Zapisz zmiany",loadingText:a="Zapisywanie"})=>x.jsxs("div",{className:da.container,children:[x.jsx(Re,{type:"button",onClick:e,className:da.cancelButton,disabled:s,children:"Anuluj zmiany"}),x.jsx(Re,{type:"submit",disabled:s,className:da.submitButton,children:s?x.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-[100px]",children:[x.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),x.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:a})]}):x.jsx("span",{className:"text-sm sm:text-base whitespace-nowrap",children:t})})]})));ma.displayName="FormButtons";const xa=d.memo((({handleCancel:e,register:s,errors:t,defaultBio:a,isSubmitting:i,isPending:r,onSubmit:n})=>x.jsxs(ke.form,{onSubmit:n,className:na.form,initial:{opacity:0},animate:{opacity:1},children:[x.jsx("div",{className:na.container,children:x.jsx("div",{className:na.header,children:x.jsxs("div",{className:na.infoSection,children:[x.jsx(oa,{register:s,errors:t}),x.jsx(ca,{register:s,errors:t,defaultValue:a})]})})}),x.jsx(ma,{onCancel:e,isSubmitting:i||r,submitText:"Zapisz profil",loadingText:"Zapisywanie"})]}))),ua=d.memo((()=>{var e;const{profile:s,isLoading:t,updateProfile:a}=aa(),{form:i,onSubmit:r}=ra(s||null),n=N(),{register:o,formState:{errors:l,isSubmitting:m},reset:u,setValue:p}=i;d.useEffect((()=>{var e;s&&(p("username",s.username),p("email",s.email),p("profile.bio",(null==(e=s.profile)?void 0:e.bio)||""))}),[s,p]);const h=d.useCallback((()=>{try{s&&(u(s),V.success("Zmiany zostały anulowane"))}catch(e){V.error("Nie udało się anulować zmian")}}),[s,u]);return t?x.jsx(Ee,{}):x.jsx(xa,{handleCancel:h,register:o,errors:l,defaultBio:null==(e=null==s?void 0:s.profile)?void 0:e.bio,isSubmitting:m,isPending:a.isPending,onSubmit:e=>c(void 0,null,(function*(){try{yield r(e),yield n.invalidateQueries({queryKey:["userProfile"]})}catch(s){V.error("Wystąpił błąd podczas aktualizacji profilu")}}))})}));ua.displayName="ProfileForm";const pa=d.memo((({form:e,errors:s})=>{var t,a,i;const{register:r}=e;return x.jsxs("div",{className:"space-y-6",children:[x.jsx(Oe,o({type:"password",label:"Aktualne hasło",placeholder:"Wprowadź aktualne hasło",icon:x.jsx(B,{}),error:null==(t=s.currentPassword)?void 0:t.message},r("currentPassword"))),x.jsx(Oe,o({type:"password",label:"Nowe hasło",placeholder:"Wprowadź nowe hasło",icon:x.jsx(B,{}),error:null==(a=s.newPassword)?void 0:a.message},r("newPassword"))),x.jsx(Oe,o({type:"password",label:"Powtórz nowe hasło",placeholder:"Powtórz nowe hasło",icon:x.jsx(B,{}),error:null==(i=s.confirmPassword)?void 0:i.message},r("confirmPassword")))]})}));pa.displayName="PasswordFields";const ha=Pe.object({currentPassword:Pe.string().min(1,"Aktualne hasło jest wymagane").min(8,"Hasło musi mieć minimum 8 znaków"),newPassword:Pe.string().min(1,"Nowe hasło jest wymagane").min(8,"Nowe hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać wielką literę").regex(/[0-9]/,"Hasło musi zawierać cyfrę"),confirmPassword:Pe.string().min(1,"Potwierdzenie hasła jest wymagane")}).refine((e=>e.newPassword===e.confirmPassword),{message:"Hasła muszą być takie same",path:["confirmPassword"]});class ja extends Error{constructor(e,s){super(s),this.code=e,this.name="SecurityError"}}const ga=({onSuccess:e,onError:s}={})=>{const{token:t}=ve(),a=te({resolver:Te(ha),mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),i=w({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}settings/security/password`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){if("INVALID_CURRENT_PASSWORD"===(yield t.json()).code)throw new ja("INVALID_CURRENT_PASSWORD","Aktualne hasło jest nieprawidłowe");throw new ja("UNKNOWN_ERROR","Wystąpił błąd podczas zmiany hasła")}})))({currentPassword:e.currentPassword,newPassword:e.newPassword},t||""),onSuccess:()=>{a.reset(),null==e||e()},onError:s});return{form:a,onSubmit:a.handleSubmit((e=>i.mutateAsync(e))),isUpdating:i.isPending}},ya={initial:{opacity:0},animate:{opacity:1}},ba=d.memo((()=>{const{handleSuccess:e,handleError:s,handleCancel:t,handleCancelError:a}={handleSuccess:d.useCallback((()=>{V.success("Hasło zostało zmienione")}),[]),handleError:d.useCallback((e=>{e instanceof ja&&"INVALID_CURRENT_PASSWORD"===e.code?V.error("Aktualne hasło jest nieprawidłowe"):V.error("Wystąpił błąd podczas zmiany hasła")}),[]),handleCancel:d.useCallback((()=>{V.success("Zmiany zostały anulowane")}),[]),handleCancelError:d.useCallback((()=>{V.error("Nie udało się anulować zmian")}),[])},{form:i,onSubmit:r,isUpdating:n}=ga({onSuccess:()=>{e(),i.reset()},onError:s}),{formState:{errors:c,isSubmitting:m},reset:u}=i,p=d.useCallback((()=>{try{u(),t()}catch(e){a()}}),[u,t,a]);return x.jsxs(ke.form,l(o({onSubmit:r,className:"w-full max-w-md sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0"},ya),{children:[x.jsx(pa,{form:i,errors:c}),x.jsx(ma,{onCancel:p,isSubmitting:m||n,submitText:"Zmień hasło",loadingText:"Zmienianie hasła"})]}))}));ba.displayName="SecurityForm";const fa=Pe.object({emailNotifications:Pe.boolean(),pushNotifications:Pe.boolean(),language:Pe.literal("pl")});class va extends Error{constructor(e,s){super(s),this.code=e,this.name="PreferencesError"}}const Na=()=>{const{token:e}=ve(),s=N(),{data:t,isLoading:a}=v({queryKey:["preferences"],queryFn:()=>(e=>c(void 0,null,(function*(){var s,t;const a=yield fetch(`${Ne}settings/preferences`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch preferences");const i=yield a.json();return{emailNotifications:null!=(s=i.emailNotifications)&&s,pushNotifications:null!=(t=i.pushNotifications)&&t,language:"pl"}})))(e||""),enabled:!!e}),i=w({mutationFn:s=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}settings/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=yield t.json();if("VALIDATION_ERROR"===e.code)throw new va("VALIDATION_ERROR","Nieprawidłowe dane preferencji");if("SAVE_ERROR"===e.code)throw new va("SAVE_ERROR","Nie udało się zapisać preferencji");throw new va("UNKNOWN_ERROR","Wystąpił błąd podczas aktualizacji preferencji")}const a=yield t.json();return{emailNotifications:a.emailNotifications,pushNotifications:a.pushNotifications,language:"pl"}})))(s,e||""),onSuccess:()=>{s.invalidateQueries({queryKey:["preferences"]})}});return{preferences:t,isLoading:a,updatePreferences:i}},wa=()=>{const{preferences:e,isLoading:s,updatePreferences:t}=Na(),{form:a,onSubmit:i}=(({onSubmit:e,defaultValues:s})=>{const t=te({resolver:Te(fa),defaultValues:s||{emailNotifications:!1,pushNotifications:!1,language:"pl"}}),a=t.handleSubmit((s=>c(void 0,null,(function*(){try{yield e(s)}catch(t){}}))));return{form:t,onSubmit:a}})({onSubmit:e=>c(void 0,null,(function*(){try{yield t.mutateAsync({emailNotifications:e.emailNotifications,pushNotifications:e.pushNotifications,language:"pl"}),V.success("Preferencje zostały zaktualizowane")}catch(s){V.error("Nie udało się zaktualizować preferencji")}}))}),{register:r,formState:{isSubmitting:n},setValue:o,watch:l}=a,m=l();d.useEffect((()=>{e&&(o("emailNotifications",e.emailNotifications),o("pushNotifications",e.pushNotifications),o("language","pl"))}),[e,o]);return{isLoading:s,register:r,formValues:m,isSubmitting:n,updatePreferences:t,handleCancel:()=>{try{e&&(o("emailNotifications",e.emailNotifications),o("pushNotifications",e.pushNotifications),o("language","pl"),V.success("Zmiany zostały anulowane"))}catch(s){V.error("Nie udało się anulować zmian")}},onSubmit:i,setValue:o}},ka={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",optionsContainer:"space-y-4 ml-4 sm:ml-8",optionLabel:"flex items-start sm:items-center gap-3 hover:cursor-pointer group\n    transition-colors duration-200",checkbox:"w-5 h-5 rounded border-gray-600 bg-gray-700 text-js \n    focus:ring-js/50 mt-1 sm:mt-0",optionText:"group-hover:text-js transition-colors duration-200",optionTitle:"block text-gray-200 text-base sm:text-lg",optionDescription:"block text-sm text-gray-400 mt-1"},Sa=d.memo((({register:e,values:s,onChange:t})=>x.jsxs("div",{className:ka.section,children:[x.jsxs("h3",{className:ka.title,children:[x.jsx(k,{className:ka.icon}),"Powiadomienia"]}),x.jsx("div",{className:ka.optionsContainer,children:x.jsxs("label",{className:ka.optionLabel,children:[x.jsx("input",l(o({type:"checkbox"},e("emailNotifications")),{checked:s.emailNotifications,onChange:e=>t("emailNotifications",e.target.checked),className:ka.checkbox})),x.jsxs("div",{className:ka.optionText,children:[x.jsx("span",{className:ka.optionTitle,children:"Powiadomienia email"}),x.jsx("span",{className:ka.optionDescription,children:"Otrzymuj powiadomienia na email"})]})]})})]})));Sa.displayName="NotificationsSection";const za={section:"space-y-4",title:"text-lg sm:text-xl font-medium text-gray-200 flex items-center gap-2",icon:"text-js text-xl sm:text-2xl",container:"ml-4 sm:ml-8",select:"w-full max-w-xs px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 text-base sm:text-lg\n    focus:ring-2 focus:ring-js/50 focus:border-transparent \n    transition-colors"},Ca=d.memo((({register:e})=>x.jsxs("div",{className:za.section,children:[x.jsxs("h3",{className:za.title,children:[x.jsx(ie,{className:za.icon}),"Język"]}),x.jsx("div",{className:za.container,children:x.jsx("select",l(o({},e("language")),{className:za.select,children:x.jsx("option",{value:"pl",children:"Polski"})}))})]})));Ca.displayName="LanguageSection";const La=d.memo((({register:e,formValues:s,setValue:t,onSubmit:a,onCancel:i,isSubmitting:r,isPending:n})=>x.jsxs(ke.form,{onSubmit:a,className:"w-full max-w-2xl sm:ml-0 sm:mr-auto space-y-8 px-4 sm:px-0",initial:{opacity:0},animate:{opacity:1},children:[x.jsxs("div",{className:"bg-dark/30 backdrop-blur-sm rounded-xl p-4 sm:p-6 md:p-8 border border-js/10 space-y-6",children:[x.jsx(Sa,{register:e,values:s,onChange:(e,s)=>t(e,s)}),x.jsx("div",{className:"w-full h-px bg-js/10"}),x.jsx(Ca,{register:e})]}),x.jsx(ma,{onCancel:i,isSubmitting:r||n,submitText:"Zapisz preferencje",loadingText:"Zapisywanie"})]})));La.displayName="PreferencesFormContent";const Pa=d.memo((()=>{const{isLoading:e,register:s,formValues:t,isSubmitting:a,updatePreferences:i,handleCancel:r,onSubmit:n,setValue:o}=wa();return e?x.jsx(Ee,{}):x.jsx(La,{register:s,formValues:t,setValue:o,onSubmit:n,onCancel:r,isSubmitting:a,isPending:i.isPending})}));Pa.displayName="PreferencesForm";class Ta extends Error{constructor(e,s){super(s),this.code=e,this.name="AccountError"}}const Ea=Pe.object({password:Pe.string().min(1,"Hasło jest wymagane"),confirmation:Pe.string().refine((e=>"USUŃ KONTO"===e),{message:"Wpisz dokładnie 'USUŃ KONTO' aby potwierdzić"})}),Aa=({onSuccess:e,onError:s}={})=>{const t=te({resolver:Te(Ea)}),{token:a}=ve(),i=w({mutationFn:e=>((e,s)=>c(void 0,null,(function*(){const t=yield fetch(`${Ne}settings/account`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=yield t.json();if("INVALID_PASSWORD"===e.code)throw new Ta("INVALID_PASSWORD","Podane hasło jest nieprawidłowe");if("INVALID_CONFIRMATION"===e.code)throw new Ta("INVALID_CONFIRMATION","Nieprawidłowe potwierdzenie");throw new Ta("UNKNOWN_ERROR","Wystąpił błąd podczas usuwania konta")}})))(e,a||""),onSuccess:()=>{t.reset(),null==e||e(),window.location.href="/logowanie"},onError:s}),r=t.handleSubmit((e=>c(void 0,null,(function*(){yield i.mutateAsync(e)}))));return{form:t,onSubmit:r,isDeleting:i.isPending}},$a=["Wszystkie twoje dane zostaną usunięte","Stracisz dostęp do wszystkich kursów","Twoje postępy w nauce zostaną utracone","Nie będzie możliwości przywrócenia konta"],Oa={container:"\n    bg-red-500/10 border border-red-500/20 rounded-lg p-4 sm:p-6 mb-6\n    backdrop-blur-sm\n  ",content:"flex flex-col sm:flex-row items-start gap-4",icon:"text-red-500 text-xl sm:text-2xl mt-1 flex-shrink-0",title:"text-red-400 font-medium text-lg sm:text-xl mb-2",list:"\n    text-gray-400 space-y-2 list-disc list-inside\n    text-sm sm:text-base leading-relaxed\n  "},Ra=d.memo((()=>x.jsx("div",{className:Oa.container,children:x.jsxs("div",{className:Oa.content,children:[x.jsx(O,{className:Oa.icon,"data-testid":"warning-icon"}),x.jsxs("div",{children:[x.jsx("h3",{className:Oa.title,children:"Usuwanie konta jest nieodwracalne"}),x.jsx("ul",{className:Oa.list,children:$a.map(((e,s)=>x.jsx("li",{children:e},s)))})]})]})})));Ra.displayName="WarningBox";const Da=d.memo((({onConfirm:e})=>x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md sm:ml-0 sm:mr-auto px-4 sm:px-0",children:[x.jsx(Ra,{}),x.jsx(Re,{type:"button",onClick:e,className:"w-full px-6 py-3 rounded-lg bg-red-500/20 text-red-400 \r\n        hover:bg-red-500/30 transition-colors duration-200 shadow-none\r\n        text-base sm:text-lg font-medium",children:"Chcę usunąć konto"})]})));Da.displayName="InitialWarning";const _a={form:"space-y-6",confirmationField:"space-y-2",label:"block text-gray-400 text-sm sm:text-base",hint:"text-sm text-gray-500",input:"w-full px-4 py-3 rounded-lg \n    bg-dark/50 border border-js/10 \n    text-gray-300 placeholder-gray-500\n    focus:outline-none focus:ring-2 focus:ring-js/50\n    text-base sm:text-lg\n  ",error:"text-red-500 text-sm",buttons:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 mt-8",submitButton:"w-full sm:w-auto order-2 sm:order-1\n    px-4 sm:px-6 py-3 rounded-lg\n    bg-red-500/20 text-red-400 \n    hover:bg-red-500/30\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base font-medium\n    disabled:opacity-50 disabled:cursor-not-allowed\n    whitespace-nowrap\n  ",cancelButton:"w-full sm:w-auto order-1 sm:order-2\n    px-4 sm:px-6 py-3 rounded-lg\n    bg-dark/50 text-gray-400\n    border border-js/10\n    hover:text-js hover:border-js/30\n    hover:bg-dark/60\n    transition-colors duration-200 shadow-none\n    text-sm sm:text-base\n    disabled:opacity-50 disabled:cursor-not-allowed\n    whitespace-nowrap\n  "},Ba=d.memo((({register:e,errors:s,isSubmitting:t,onCancel:a,onSubmit:i})=>{var r;return x.jsxs(ke.form,{initial:{opacity:0},animate:{opacity:1},className:_a.form,onSubmit:i,children:[x.jsx(Oe,o({id:"password",type:"password",label:"Hasło",placeholder:"Wprowadź hasło aby potwierdzić",icon:x.jsx(B,{}),error:null==(r=s.password)?void 0:r.message},e("password"))),x.jsxs("div",{className:_a.confirmationField,children:[x.jsx("label",{htmlFor:"confirmation",className:_a.label,children:"Potwierdzenie"}),x.jsx("p",{className:_a.hint,children:'Wpisz "USUŃ KONTO" aby potwierdzić'}),x.jsx("input",l(o({id:"confirmation",type:"text"},e("confirmation")),{className:_a.input})),s.confirmation&&x.jsx("p",{className:_a.error,children:s.confirmation.message})]}),x.jsxs("div",{className:_a.buttons,children:[x.jsx(Re,{type:"submit",disabled:t,className:_a.submitButton,children:t?x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-4 border-2 border-dark border-t-transparent rounded-full animate-spin"}),x.jsx("span",{children:"Usuwanie"})]}):"Definitywnie usuń konto"}),x.jsx(Re,{type:"button",onClick:a,disabled:t,className:_a.cancelButton,children:"Anuluj"})]})]})}));Ba.displayName="ConfirmationForm";const Fa=d.memo((()=>{const{showConfirmation:e,handleShowConfirmation:s,handleHideConfirmation:t}=(()=>{const[e,s]=d.useState(!1);return{showConfirmation:e,handleShowConfirmation:d.useCallback((()=>{s(!0)}),[]),handleHideConfirmation:d.useCallback((()=>{s(!1)}),[])}})(),{form:a,onSubmit:i,isDeleting:r,handleCancel:n}=(e=>{const s=d.useCallback((()=>{V.success("Konto zostało usunięte")}),[]),t=d.useCallback((e=>{if(e instanceof Ta)switch(e.code){case"INVALID_PASSWORD":return void V.error("Podane hasło jest nieprawidłowe");case"INVALID_CONFIRMATION":return void V.error("Nieprawidłowe potwierdzenie")}V.error("Nie udało się usunąć konta")}),[]),a=d.useCallback((()=>{try{e(),V.success("Operacja została anulowana")}catch(s){V.error("Nie udało się anulować operacji")}}),[e]),{form:i,onSubmit:r,isDeleting:n}=Aa({onSuccess:s,onError:t});return{form:i,onSubmit:r,isDeleting:n,handleCancel:a}})(t);return e?x.jsx(Ba,{register:a.register,errors:a.formState.errors,isSubmitting:r,onCancel:n,onSubmit:i}):x.jsx(Da,{onConfirm:s})}));Fa.displayName="DeleteAccountForm";const Ia=d.memo((({activeView:e})=>x.jsx(Se,{mode:"wait",children:x.jsxs(ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-dark/30 backdrop-blur-sm rounded-xl p-6 border border-js/10 shadow-lg",children:[x.jsxs("h2",{className:"text-2xl font-bold font-space text-js mb-6",children:["profile"===e&&"Edytuj Profil","security"===e&&"Bezpieczeństwo","preferences"===e&&"Preferencje","delete"===e&&"Usuń Konto"]}),"profile"===e&&x.jsx(ua,{}),"security"===e&&x.jsx(ba,{}),"preferences"===e&&x.jsx(Pa,{}),"delete"===e&&x.jsx(Fa,{})]},e)})));Ia.displayName="SettingsContent";const Wa=d.memo((()=>{const[e,s]=d.useState("profile");return x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col h-full p-6 gap-6",children:[x.jsx(ke.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center justify-between",children:x.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Ustawienia"})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[x.jsx(ea,{activeView:e,onViewChange:s}),x.jsx("div",{className:"lg:col-span-3",children:x.jsx(Ia,{activeView:e})})]})]})}));Wa.displayName="SettingsSection";const Ha=Object.freeze(Object.defineProperty({__proto__:null,SettingsSection:Wa},Symbol.toStringTag,{value:"Module"})),qa=d.memo((()=>x.jsx(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(ke.div,{whileHover:{scale:1.1,rotate:15},className:"p-3 rounded-xl bg-gradient-to-br from-js/20 to-js/20",children:x.jsx(j,{className:"w-8 h-8 text-js"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold font-space text-transparent bg-clip-text bg-gradient-to-r from-js to-js",children:"Gry JavaScript"}),x.jsx("p",{className:"text-gray-400 mt-1",children:"Ucz się JavaScriptu poprzez zabawę i wyzwania"})]})]})})));qa.displayName="GamesHeader";const Ma=d.memo((()=>x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map((e=>x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*e},className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700/50 overflow-hidden",children:[x.jsx("div",{className:"aspect-video bg-gray-800/50 animate-pulse"}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsx("div",{className:"h-6 bg-gray-800/50 rounded animate-pulse w-3/4"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse"}),x.jsx("div",{className:"h-4 bg-gray-800/50 rounded animate-pulse w-4/5"})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex gap-3",children:[x.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"}),x.jsx("div",{className:"h-4 w-16 bg-gray-800/50 rounded animate-pulse"})]}),x.jsx("div",{className:"h-8 w-24 bg-gray-800/50 rounded animate-pulse"})]})]})]},e)))})));Ma.displayName="GamesListSkeleton";const Ua=d.memo((({query:e})=>{const s=e?{title:"Brak wyników wyszukiwania",description:`Nie znaleziono gier dla zapytania "${e}"`,icon:I}:{title:"Brak gier w tej kategorii",description:"Spróbuj wybrać inną kategorię lub wróć później",icon:W};return x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16",children:[x.jsx(ke.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",bounce:.4},className:"w-20 h-20 mb-6 rounded-full bg-js/10 flex items-center justify-center",children:x.jsx(s.icon,{className:"w-10 h-10 text-js"})}),x.jsx(ke.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold text-js mb-2 text-center",children:s.title}),x.jsx(ke.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400 text-center max-w-md",children:s.description})]})}));Ua.displayName="NoGamesFound";const Va=d.memo((({game:e})=>{const s=b();return x.jsxs(ke.div,{whileHover:{scale:1.02},className:"group bg-dark-800/50 border border-js/10 rounded-xl overflow-hidden hover:border-js/20 transition-all",children:[x.jsxs("div",{className:"relative aspect-video",children:[x.jsx("div",{className:"w-full h-full bg-gradient-to-br from-js/5 to-js/20 flex items-center justify-center",children:x.jsx("div",{className:"bg-js/10 px-4 py-2 rounded-lg border border-js/20",children:x.jsx("span",{className:"font-mono text-js/80 font-medium",children:e.slug})})}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark/90 to-transparent"}),x.jsx(ke.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{s(`/dashboard/play/${e.slug}`)},className:"absolute inset-0 m-auto w-12 h-12 bg-js text-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:x.jsx(re,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"p-4",children:[x.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[x.jsx("h3",{className:"text-lg font-bold text-js line-clamp-1",children:e.title}),x.jsxs("span",{className:"flex items-center gap-1 text-js bg-js/10 px-2 py-0.5 rounded-lg text-sm",children:[x.jsx(C,{className:"w-3.5 h-3.5"}),e.rewardPoints]})]}),x.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:e.description}),x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsxs("div",{className:"flex items-center gap-4 text-gray-400",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(S,{className:"w-4 h-4"}),e.completions.count]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(E,{className:"w-4 h-4"}),e.rating.average.toFixed(1)]})]}),x.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium\n            "+("easy"===e.difficulty?"bg-green-500/10 text-green-400":"medium"===e.difficulty?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"),children:"easy"===e.difficulty?"Łatwy":"medium"===e.difficulty?"Średni":"Trudny"})]})]})]})}));Va.displayName="GameCard";const Ga=()=>{const{token:e}=ve();return v({queryKey:["games"],queryFn:()=>(e=>c(void 0,null,(function*(){const s=yield fetch(`${Ne}games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Nie udało się pobrać gier");return s.json()})))(e||""),select:e=>({games:e.data.games,pagination:e.data.pagination}),staleTime:3e5})},Ka=d.memo((({sortBy:e,searchQuery:s,selectedDifficulty:t})=>{const{data:a,isLoading:i,isError:r}=Ga();if(i)return x.jsx(Ma,{});if(r)return x.jsx("div",{className:"text-center py-8",children:x.jsx("p",{className:"text-red-400",children:"Wystąpił błąd podczas ładowania gier. Spróbuj ponownie później."})});if(!(null==a?void 0:a.games))return null;const n=a.games.filter((e=>("all"===t||e.difficulty===t)&&(e.title.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())))).sort(((s,t)=>{switch(e){case"newest":return new Date(t.createdAt).getTime()-new Date(s.createdAt).getTime();case"popular":return t.completions.count-s.completions.count;case"difficulty":return t.difficulty.localeCompare(s.difficulty);case"xp":return t.rewardPoints-s.rewardPoints;default:return 0}}));return n.length?x.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4 sm:gap-6",children:n.map((e=>{const s={_id:e._id,id:e._id,slug:e.slug,title:e.title,description:e.description,difficulty:e.difficulty,category:"game",isCompleted:!1,rating:{average:0,count:0},completions:e.completions,completedCount:e.completions.count,totalPlayers:0,thumbnailUrl:"",rewardPoints:e.rewardPoints,xpPoints:e.rewardPoints};return x.jsx(Va,{game:s},s._id)}))}):x.jsx(Ua,{query:s})}));Ka.displayName="GamesList";const Za=[{id:"newest",label:"Najnowsze",icon:_},{id:"popular",label:"Popularne",icon:$},{id:"difficulty",label:"Trudność",icon:E},{id:"xp",label:"Punkty XP",icon:C}],Ja=d.memo((({activeSortOption:e,onSortChange:s})=>x.jsxs("div",{className:"flex items-center gap-4 lg:ml-auto",children:[x.jsx("span",{className:"text-gray-400 text-sm",children:"Sortuj:"}),x.jsx("div",{className:"flex gap-2 flex-wrap",children:Za.map((t=>{const a=t.icon;return x.jsxs(ke.button,{onClick:()=>s(t.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium\n                transition-all duration-200\n                ${e===t.id?"text-js bg-js/10 border border-js/20":"text-gray-400 hover:text-js/80 border border-transparent"}\n              `,children:[x.jsx(a,{className:"w-4 h-4"}),t.label]},t.id)}))})]})));Ja.displayName="GamesSorting";const Qa=d.memo((({value:e,onChange:s})=>{const t=d.useCallback((e=>{s(e.target.value)}),[s]);return x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:e,onChange:t,placeholder:"Szukaj gry...",className:"\r\n            w-full pl-10 pr-4 py-1.5 \r\n            bg-dark-800/50 border border-js/10\r\n            rounded-lg text-sm text-gray-200\r\n            placeholder-gray-400\r\n            focus:outline-none focus:border-js/30\r\n            transition-colors duration-200\r\n          "}),x.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-js/50"})]}),x.jsx(ke.div,{initial:!1,animate:{width:e?"100%":"0%",opacity:e?1:0},className:"absolute bottom-0 left-0 h-0.5 bg-js/20 rounded-full"})]})}));Qa.displayName="GamesSearch";const Xa=[{value:"all",label:"Wszystkie"},{value:"easy",label:"Łatwe",color:"text-emerald-400"},{value:"medium",label:"Średnie",color:"text-indigo-400"},{value:"hard",label:"Trudne",color:"text-rose-400"}],Ya=d.memo((({selectedDifficulty:e,onDifficultyChange:s})=>x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 flex-wrap",children:[x.jsx("span",{className:"text-gray-400 text-sm",children:"Poziom:"}),x.jsx("div",{className:"flex gap-3 flex-wrap",children:Xa.map((t=>x.jsxs(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(t.value),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all relative\n              "+(e===t.value?`text-${t.color||"gray-200"}`:"text-gray-400 hover:text-gray-300"),children:[e===t.value&&x.jsx(ke.div,{layoutId:"difficulty-background",className:`absolute inset-0 bg-gray-800/50 border rounded-lg -z-10 border-${t.color||"gray-400"}`,transition:{type:"spring",bounce:.2,duration:.6}}),x.jsx(Se,{mode:"wait",children:x.jsx(ke.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:e===t.value?x.jsx(ne,{className:`w-3 h-3 ${t.color||"text-gray-400"}`}):x.jsx(oe,{className:"w-3 h-3"})},e===t.value?"circle":"circle-outline")}),t.label]},t.value)))})]})));Ya.displayName="GamesDifficulty";const ei=d.memo((()=>{const[e,s]=d.useState("newest"),[t,a]=d.useState(""),[i,r]=d.useState("all");return x.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full m-0 min-h-screen bg-dark/50 backdrop-blur-sm",children:x.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x.jsx(qa,{}),x.jsxs("div",{className:"mt-8 bg-dark-800/50 border border-js/10 rounded-xl p-4 sm:p-6",children:[x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsx("div",{className:"w-full sm:w-72",children:x.jsx(Qa,{value:t,onChange:a})}),x.jsx(Ja,{activeSortOption:e,onSortChange:s})]}),x.jsx("div",{className:"mt-4",children:x.jsx(Ya,{selectedDifficulty:i,onDifficultyChange:r})})]}),x.jsx("div",{className:"mt-6",children:x.jsx(Ka,{sortBy:e,searchQuery:t,selectedDifficulty:i})})]})]})})}));ei.displayName="GamesSection";const si=Object.freeze(Object.defineProperty({__proto__:null,GamesSection:ei},Symbol.toStringTag,{value:"Module"})),ti=d.memo((({title:e})=>x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("h1",{className:"text-2xl font-bold text-js",children:e})}))),ai=d.createContext(null),ii=({children:e})=>{const[s,t]=d.useState(null),[a,i]=d.useState(!1),[r,n]=d.useState(null),o=d.useCallback((e=>c(void 0,null,(function*(){i(!0),n(null);const{token:s}=ve();try{const a=yield fetch(`${Ne}/games`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error("Nie udało się pobrać zawartości gry");const i=(yield a.json()).data.games.find((s=>s.slug===e));if(!i)throw new Error("Nie znaleziono gry");t({title:i.title,description:i.description,difficulty:i.difficulty,rating:i.rating,completions:i.completions,rewardPoints:i.rewardPoints,gameData:i.gameData,estimatedTime:i.estimatedTime,isCompleted:i.isCompleted})}catch(a){n(a instanceof Error?a.message:"Wystąpił nieznany błąd")}finally{i(!1)}}))),[]);return x.jsx(ai.Provider,{value:{gameContent:s,isLoading:a,error:r,fetchGameContent:o},children:e})},ri={"scope-explorer":d.lazy((()=>we((()=>Promise.resolve().then((()=>Ti))),void 0))),"js-typo-hunter":d.lazy((()=>we((()=>Promise.resolve().then((()=>Bi))),void 0))),"async-quest":d.lazy((()=>we((()=>Promise.resolve().then((()=>Gi))),void 0))),"regex-raider":d.lazy((()=>we((()=>Promise.resolve().then((()=>Yi))),void 0)))},ni=d.memo((()=>{const{slug:e}=X();if(!e||!ri[e])return x.jsx("div",{className:"w-full h-full flex items-center justify-center",children:x.jsx("div",{className:"text-gray-400",children:"Gra nie została znaleziona"})});const s=ri[e];return x.jsx(ii,{children:x.jsx("div",{className:"w-full h-full",children:x.jsx(d.Suspense,{fallback:x.jsx("div",{children:"Ładowanie gry..."}),children:x.jsx(s,{})})})})}));ni.displayName="GameplayArea";const oi=d.memo((({game:e})=>{const s=b();return x.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-dark-800 flex items-center justify-center",children:x.jsxs("div",{className:"max-w-7xl w-full mx-auto px-4 py-6",children:[x.jsx("div",{className:"flex items-center justify-between mb-6",children:x.jsxs(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s("/dashboard/play")},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-js/10 text-js hover:bg-js/20 transition-colors",children:[x.jsx(le,{className:"w-4 h-4"}),x.jsx("span",{children:"Powrót do menu"})]})}),x.jsx(ti,{title:e.title}),x.jsx("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:x.jsx("div",{className:"lg:col-span-12",children:x.jsx(ni,{})})})]})})}));oi.displayName="GameplaySection";const li=d.memo((()=>{const{slug:e}=X(),{data:s}=Ga();if(!(null==s?void 0:s.games))return null;const t=s.games.find((s=>s.slug===e));return t?x.jsx(oi,{game:t}):x.jsx(Y,{to:"/dashboard/play",replace:!0})}));li.displayName="GameplayRouter";const ci=Object.freeze(Object.defineProperty({__proto__:null,GameplayRouter:li},Symbol.toStringTag,{value:"Module"})),di=({code:e,onChange:s,onMount:t,isEditorReady:a})=>x.jsxs("div",{className:"h-[calc(100%-4rem)] rounded overflow-hidden relative",children:[!a&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark/50",children:x.jsx(ce,{className:"w-8 h-8 text-js animate-spin"})}),x.jsx(de,{theme:"vs-dark",language:"javascript",height:"100%",defaultLanguage:"javascript",value:e,onChange:s,onMount:t})]}),mi=d.memo((({output:e,onClear:s,isExecuting:t})=>x.jsxs("div",{className:"h-[calc(100%-4rem)] bg-[#1e1e1e] rounded-lg overflow-hidden flex flex-col",children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-dark/30 border-b border-js/10",children:[x.jsx("span",{className:"text-sm text-gray-400",children:t?"Wykonywanie...":"Gotowe"}),x.jsx("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść konsolę",children:x.jsx(se,{className:"w-4 h-4"})})]}),x.jsx("div",{className:"flex-1 p-4 font-mono text-sm overflow-auto",children:e.map(((e,s)=>x.jsx(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-gray-300 mb-1",children:e},s)))})]})));mi.displayName="ConsoleOutput";const xi=({output:e,isExecuting:s,onClear:t,onRun:a})=>x.jsxs("div",{className:"bg-dark/50 rounded-lg p-4 border border-js/10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-xl font-bold text-js",children:"Konsola"}),x.jsx("button",{onClick:a,disabled:s,className:"px-4 py-2 bg-js text-dark font-medium rounded hover:bg-js/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Wykonywanie...":"Uruchom"})]}),x.jsx(mi,{output:e,onClear:t,isExecuting:s})]}),ui="code_history",pi=d.memo((({history:e,onSelect:s,onClear:t})=>x.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-dark/95 rounded-lg border border-js/10 shadow-xl",children:[x.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-js/10",children:[x.jsxs("div",{className:"flex items-center gap-2 text-js",children:[x.jsx(me,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Historia"})]}),e.length>0&&x.jsx("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-js transition-colors",title:"Wyczyść historię",children:x.jsx(se,{className:"w-4 h-4"})})]}),x.jsx("div",{className:"max-h-64 overflow-y-auto",children:0===e.length?x.jsx("div",{className:"p-3 text-sm text-gray-400",children:"Brak historii"}):e.map(((e,t)=>x.jsxs(ke.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>s(e.code),className:"w-full p-3 text-left hover:bg-js/10 transition-colors border-b border-js/5 last:border-0",children:[x.jsx("div",{className:"text-sm text-gray-300 truncate",children:e.code.split("\n")[0]}),x.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]},e.timestamp)))})]})));pi.displayName="CodeHistory";const hi=d.memo((()=>{const{output:e,isExecuting:s,executeCode:t,clearConsole:a}=(()=>{const[e,s]=d.useState([]),[t,a]=d.useState(!1),i=d.useCallback((()=>{s([])}),[]);return{output:e,isExecuting:t,executeCode:d.useCallback((e=>{a(!0);const t=[],i=console.log;return new Promise(((r,n)=>{const o=setTimeout((()=>{n(new Error("Przekroczono limit czasu wykonania"))}),3e3);try{console.log=(...e)=>{t.push(e.map((e=>"object"==typeof e?JSON.stringify(e,null,2):String(e))).join(" "))},c(void 0,null,(function*(){try{new Function("console",`\n              "use strict";\n              ${e}\n            `)(console),s(t),clearTimeout(o),r()}catch(a){s([`Błąd: ${a instanceof Error?a.message:"Nieznany błąd"}`]),n(a)}}))}finally{console.log=i,a(!1)}}))}),[]),clearConsole:i}})(),{history:i,addToHistory:r,clearHistory:n}=(()=>{const[e,s]=d.useState((()=>{const e=localStorage.getItem(ui);return e?JSON.parse(e):[]}));return{history:e,addToHistory:d.useCallback((e=>{s((s=>{const t=[{code:e,timestamp:Date.now()},...s.filter((s=>s.code!==e))].slice(0,10);return localStorage.setItem(ui,JSON.stringify(t)),t}))}),[]),clearHistory:d.useCallback((()=>{localStorage.removeItem(ui),s([])}),[])}})(),{code:o,isEditorReady:l,handleEditorDidMount:m,handleEditorChange:u}=(e=>{const s=d.useRef(null),[t,a]=d.useState(e),[i,r]=d.useState(!1),n=d.useCallback((e=>{e&&a(e)}),[]);return d.useEffect((()=>{qe.init().then((e=>{e.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})}))}),[]),{code:t,isEditorReady:i,handleEditorDidMount:e=>{s.current=e,r(!0)},handleEditorChange:n}})('// Witaj w edytorze CodeLinesJS!\n// Napisz swój kod JavaScript tutaj\n\nfunction przywitajSie(imie) {\n  return `Cześć, ${imie}!`;\n}\n\nconsole.log(przywitajSie("Programisto"));'),{saveToFile:p}={saveToFile:d.useCallback((e=>{const s=new Blob([e],{type:"text/javascript"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`code_${(new Date).toISOString().slice(0,10)}.js`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}),[])},[h,j]=d.useState(!1),g=d.useCallback((()=>c(void 0,null,(function*(){yield t(o),r(o)}))),[o,t,r]);return x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full p-6",children:[x.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[x.jsx("h1",{className:"text-3xl font-bold font-space text-js",children:"Edytor Kodu JavaScript"}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("button",{onClick:()=>p(o),disabled:!l,className:"px-4 py-2 text-sm text-js border border-js/20 rounded hover:bg-js/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(xe,{className:"w-4 h-4 mr-2 inline-block"}),"Zapisz do Pliku"]}),x.jsx("button",{onClick:()=>j((e=>!e)),className:"p-2 text-gray-400 hover:text-js transition-colors",title:"Historia kodu",children:x.jsx(me,{className:"w-5 h-5"})}),h&&x.jsx(pi,{history:i,onSelect:()=>{j(!1)},onClear:n})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-12rem)]",children:[x.jsx(di,{code:o,onChange:u,onMount:()=>m(null),isEditorReady:l}),x.jsx(xi,{output:e,isExecuting:s,onClear:a,onRun:g})]})]})}));hi.displayName="CodeEditor";const ji=Object.freeze(Object.defineProperty({__proto__:null,CodeEditor:hi},Symbol.toStringTag,{value:"Module"})),gi=({maxTime:e,onTimeEnd:s,isPaused:t})=>{const[a,i]=d.useState(0),[r,n]=d.useState(!1),o=d.useCallback((()=>{n(!0)}),[]),l=d.useCallback((()=>{n(!1)}),[]),c=d.useCallback((()=>{i(0),n(!1)}),[]);return d.useEffect((()=>{let a;return r&&!t&&(a=window.setInterval((()=>{i((t=>{const a=t+1;return a>=e?(l(),s(),e):a}))}),1e3)),()=>{a&&window.clearInterval(a)}}),[r,t,e,s,l]),{timeElapsed:a,resetTimer:c,startTimer:o,stopTimer:l,isRunning:r}},yi=d.memo((({category:e,stats:s})=>{const t=(()=>{switch(e){case"scope":return u;case"closure":return pe;case"hoisting":return ue}})(),a=s.correct/s.total*100;return x.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(t,{className:"w-4 h-4 text-js"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsx("span",{className:"text-sm text-gray-400",children:(()=>{switch(e){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}})()}),x.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),x.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})}));yi.displayName="CategoryProgress";const bi=d.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return x.jsxs("div",{className:"space-y-4",children:[x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(u,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),x.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{className:"w-full",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),x.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:x.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]}),x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[x.jsx(yi,{category:"scope",stats:e.categoryStats.scope}),x.jsx(yi,{category:"closure",stats:e.categoryStats.closure}),x.jsx(yi,{category:"hoisting",stats:e.categoryStats.hoisting})]})]})}));bi.displayName="ScopeExplorerStats";const fi=e=>{switch(e){case"scope":return"Zakres zmiennych";case"closure":return"Domknięcia";case"hoisting":return"Hoisting"}},vi=e=>{switch(e){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Ni=e=>{switch(e){case"easy":return"Łatwy";case"medium":return"Średni";case"hard":return"Trudny"}},wi=d.memo((({currentLevel:e,totalLevels:s})=>{const t=(e-1)/s*100;return x.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full bg-js",transition:{duration:.3}})})}));wi.displayName="ScopeExplorerProgress";const ki=je,Si=d.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,currentLevel:a,totalLevels:i,onGameOver:r})=>{const[n,o]=d.useState(null),[l,c]=d.useState(!1),[m,p]=d.useState(null),[h,j]=d.useState(!1),g=d.useCallback((a=>{o(a);const i=a===e.correct;p(i),c(!0),i?(s(e.points||10,e.category),setTimeout((()=>{t(),o(null),c(!1),p(null),j(!1)}),1500)):setTimeout((()=>{r()}),2e3)}),[e,s,t,r]),y=d.useCallback((s=>{!l&&s<e.options.length&&g(e.options[s])}),[l,e.options,g]);(({onEscape:e,onEnter:s,onNumber1:t,onNumber2:a,onNumber3:i,disabled:r=!1})=>{const n=d.useCallback((n=>{if(!r)switch(n.key){case"Escape":null==e||e();break;case"Enter":null==s||s();break;case"1":null==t||t();break;case"2":null==a||a();break;case"3":null==i||i()}}),[e,s,t,a,i,r]);d.useEffect((()=>(window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n))),[n])})({onNumber1:()=>y(0),onNumber2:()=>y(1),onNumber3:()=>y(2),disabled:l});const b=(e=>{switch(e){case"scope":return u;case"closure":return pe;case"hoisting":return ue}})(e.category);return x.jsxs(ke.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"w-full space-y-6",children:[x.jsx(wi,{currentLevel:a,totalLevels:i}),x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(b,{className:"w-4 h-4 text-js"})}),x.jsx("div",{className:"text-sm text-gray-400",children:fi(e.category)})]}),x.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${vi(e.difficulty)}`,children:Ni(e.difficulty)})]}),x.jsx("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg overflow-hidden",children:x.jsx(ki,{language:"javascript",style:he,customStyle:{padding:"1.5rem",borderRadius:"0.5rem",fontSize:"1.1rem",background:"transparent"},children:e.code})}),x.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.options.map(((e,s)=>x.jsxs(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>g(e),disabled:l,className:`\n              w-full break-words\n              relative p-4 rounded-lg font-mono text-lg transition-colors\n              ${n===e?m?"bg-green-500/20 border-green-500/30 text-green-400":"bg-red-500/20 border-red-500/30 text-red-400":"bg-dark-800/50 border border-js/10 text-gray-300 hover:border-js/30"}\n            `,children:[x.jsx("span",{className:"absolute top-2 left-2 text-xs text-gray-500",children:s+1}),e]},e)))}),x.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Użyj klawiszy numerycznych (1-3) aby wybrać odpowiedź"}),l&&x.jsx(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+(m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"),children:x.jsxs("p",{className:"text-sm "+(m?"text-green-400":"text-red-400"),children:[m?"Świetnie! ":"Spróbuj jeszcze raz. ",e.explanation]})}),h&&!m&&x.jsx(ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-js/10 border border-js/20 rounded-lg",children:x.jsxs("p",{className:"text-sm text-js",children:[x.jsx("span",{className:"font-medium",children:"Podpowiedź:"})," Zwróć uwagę na zakres zmiennych i ich dostępność w różnych kontekstach."]})})]},a)}));Si.displayName="ScopeExplorerGame";const zi=()=>{const{token:e}=ve(),s=N(),t=w({mutationFn:s=>c(void 0,null,(function*(){return((e,s)=>c(void 0,null,(function*(){try{const t=yield fetch(`${Ne}progress/points`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({points:s})});if(!t.ok)throw new Error("Nie udało się zaktualizować punktów");return yield t.json()}catch(t){throw t}})))(e||"",s)})),onSuccess:()=>{s.invalidateQueries({queryKey:["userProgress"]})}});return{updatePoints:t.mutate,isUpdating:t.isPending,error:t.error}},Ci=d.memo((({score:e,timeElapsed:s,challenges:t,correctAnswers:a,categoryStats:i,onRestart:r})=>{const{updatePoints:n}=zi();d.useEffect((()=>{n(e)}),[e,n]);return x.jsxs(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===t.length?"Gratulacje!":"Koniec gry!"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",t.length]})]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),x.jsx("div",{className:"text-lg font-bold text-js",children:(o=s,`${Math.floor(o/60)}:${(o%60).toString().padStart(2,"0")}`)})]})]})]}),x.jsxs("div",{className:"space-y-4 mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),Object.entries(i).map((([e,s])=>{const t=(e=>{switch(e){case"scope":default:return u;case"closure":return pe;case"hoisting":return ue}})(e);return x.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900/50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(t,{className:"w-4 h-4 text-js"})}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-js",children:"scope"===e?"Zakres zmiennych":"closure"===e?"Domknięcia":"Hoisting"}),x.jsxs("div",{className:"text-xs text-gray-400",children:["Ukończone zadania: ",s.correct,"/",s.total]})]})]}),x.jsxs("div",{className:"text-sm font-medium text-js",children:[s.points," pkt"]})]},e)}))]}),x.jsx("button",{onClick:r,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var o}));Ci.displayName="ScopeExplorerSummary";const Li=d.memo((({gameContent:e,onStart:s})=>x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-4 text-center",children:e.title}),x.jsx("div",{className:"mb-6 text-gray-400 text-center",children:e.description}),x.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Poziom trudności"}),x.jsx("div",{className:"text-lg font-bold text-js capitalize",children:e.difficulty})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Punkty do zdobycia"}),x.jsxs("div",{className:"text-lg font-bold text-js flex items-center justify-center gap-1",children:[x.jsx(E,{className:"w-4 h-4"}),e.rewardPoints]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg text-center",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Szacowany czas"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e.estimatedTime," min"]})]})]}),x.jsxs("button",{onClick:s,className:"w-full px-6 py-4 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors flex items-center justify-center gap-2",children:[x.jsx(re,{className:"w-4 h-4"}),x.jsx("span",{children:"Rozpocznij grę"})]})]})));Li.displayName="GameIntro";const Pi=d.memo((({isPaused:e=!1})=>{const{data:s,isLoading:t,error:a}=Ga(),i=null==s?void 0:s.games.find((e=>"scope-explorer"===e.slug)),[r,n]=d.useState(!1),[c,m]=d.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0,categoryStats:{scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}}}),[u,p]=d.useState(!1),[h,j]=d.useState(0),{timeElapsed:g,resetTimer:y,startTimer:b,stopTimer:f}=gi({maxTime:(null==i?void 0:i.estimatedTime)?60*i.estimatedTime:300,onTimeEnd:()=>{p(!0),j(g),f()},isPaused:e});d.useEffect((()=>{m((e=>l(o({},e),{timeElapsed:g})))}),[g]),d.useEffect((()=>{const e={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};null==i||i.gameData.forEach((s=>{const t=s.category;e[t].total++,e[t].points+=s.points||0})),m((s=>l(o({},s),{categoryStats:e})))}),[i]);const v=d.useCallback(((e,s)=>{m((t=>l(o({},t),{score:t.score+e,correctAnswers:t.correctAnswers+1,categoryStats:l(o({},t.categoryStats),{[s]:l(o({},t.categoryStats[s]),{correct:t.categoryStats[s].correct+1})})})))}),[]),N=d.useCallback((()=>{const e=c.currentLevel+1;if(e>((null==i?void 0:i.gameData.length)||0))return p(!0),j(g),void y();m((s=>l(o({},s),{currentLevel:e})))}),[c.currentLevel,y,g,i]),w=d.useCallback((()=>{const e={scope:{total:0,correct:0,points:0},closure:{total:0,correct:0,points:0},hoisting:{total:0,correct:0,points:0}};null==i||i.gameData.forEach((s=>{const t=s.category;e[t].total++,e[t].points+=s.points||0})),m({currentLevel:1,totalLevels:(null==i?void 0:i.gameData.length)||0,score:0,timeElapsed:0,maxTime:(null==i?void 0:i.estimatedTime)?60*i.estimatedTime:300,correctAnswers:0,categoryStats:e}),p(!1),j(0),y(),b()}),[y,b,i]),k=()=>{n(!0),b()},S=d.useCallback((()=>{p(!0),j(g),f()}),[g,f]);return t?x.jsx("div",{children:"Ładowanie..."}):a?x.jsxs("div",{children:["Błąd: ",a.message]}):i?r?x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full flex flex-col",children:[x.jsx(bi,{stats:c,isGameOver:u,finalTime:h}),x.jsx(Se,{mode:"wait",children:x.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:u?x.jsx(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:x.jsx(Ci,{score:c.score,timeElapsed:h,challenges:i.gameData,correctAnswers:c.correctAnswers,categoryStats:c.categoryStats,onRestart:w})},"game-over"):x.jsx(ke.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:x.jsx(Si,{currentChallenge:i.gameData[c.currentLevel-1],onScoreUpdate:v,onLevelComplete:N,currentLevel:c.currentLevel,totalLevels:c.totalLevels,onGameOver:S})},`level-${c.currentLevel}`)})})]}):x.jsx(Li,{gameContent:i,onStart:k}):null}));Pi.displayName="ScopeExplorer";const Ti=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"})),Ei=d.memo((({stats:e})=>{const s=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(u,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),x.jsx("div",{className:"text-lg font-bold text-js",children:e.score})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 gap-3 flex items-center",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{className:"w-full",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),x.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:x.jsxs("span",{className:"block w-full break-words",children:[s(e.timeElapsed),"/",s(e.maxTime)]})})]})]})]})}));Ei.displayName="JSTypoHunterStats";const Ai=d.memo((({type:e,message:s})=>e?x.jsx(Se,{children:x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`\n          absolute top-4 left-1/2 -translate-x-1/2 \n          px-4 py-2 rounded-lg flex items-center gap-2\n          ${"success"===e?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}\n        `,children:["success"===e?x.jsx(D,{className:"w-4 h-4"}):x.jsx(Q,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:s})]})}):null));Ai.displayName="JSTypoHunterFeedback";const $i=d.memo((({hint:e,isVisible:s})=>s?x.jsxs(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 p-3 bg-js/10 border border-js/20 rounded-lg flex items-start gap-3",children:[x.jsx(U,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-js mb-1",children:"Podpowiedź:"}),x.jsx("div",{className:"text-sm text-gray-400",children:e})]})]}):null));$i.displayName="JSTypoHunterHint";const Oi=e=>{switch(e){case"easy":return"text-green-400 bg-green-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"hard":return"text-red-400 bg-red-500/10"}},Ri=d.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,onIncorrectAnswer:a})=>{const[i,r]=d.useState(e.code),[n,o]=d.useState({type:null,message:""}),l=d.useCallback((()=>{i.replace(/\s+/g,"")===e.correct.replace(/\s+/g,"")?(o({type:"success",message:"Świetnie! Poprawna odpowiedź!"}),s(10),setTimeout((()=>{t(),r(e.code),o({type:null,message:""})}),1500)):(o({type:"error",message:"Niestety, to nie jest prawidłowa odpowiedź."}),setTimeout((()=>{a()}),1500))}),[i,e,s,t,a]),c=(e=>{switch(e){case"syntax":return u;case"naming":return ge;case"logic":return U}})(e.category);return x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[x.jsx(Ai,{type:n.type,message:n.message}),x.jsxs("div",{className:"mb-4 p-5",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(c,{className:"w-4 h-4 text-js"})}),x.jsx("div",{className:"text-sm text-gray-400",children:"syntax"===e.category?"Błąd składni":"naming"===e.category?"Błąd nazewnictwa":"Błąd logiki"})]}),x.jsx("div",{className:`px-3 py-1 rounded-lg text-sm ${Oi(e.difficulty)}`,children:"easy"===e.difficulty?"Łatwy":"medium"===e.difficulty?"Średni":"Trudny"})]}),x.jsx("p",{className:"text-gray-400 text-sm",children:"Znajdź i popraw błąd w kodzie."}),x.jsx("p",{className:"mt-1 text-gray-500 text-sm",children:"Wskazówka: Naciśnij przycisk, aby zatwierdzić."})]}),x.jsx("div",{className:"rounded-lg",children:x.jsx(de,{className:"w-full h-full flex flex-wrap",theme:"vs-dark",height:"400px",defaultLanguage:"javascript",value:i,onChange:e=>{void 0!==e&&r(e)},options:{selectOnLineNumbers:!0,automaticLayout:!0,theme:"vs-dark",wordWrap:"on"}})}),x.jsx("div",{className:"flex justify-end mt-4",children:x.jsx("button",{onClick:l,className:"px-4 py-2 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Sprawdź"})}),x.jsx($i,{hint:e.hint||"",isVisible:!0})]})}));Ri.displayName="JSTypoHunterGame";const Di=d.memo((({score:e,timeElapsed:s,correctAnswers:t,totalLevels:a,onRestart:i})=>{const{updatePoints:r}=zi();d.useEffect((()=>{r(e)}),[e,r]);return x.jsxs(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:t===a?"Gratulacje!":"Koniec gry!"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",t,"/",a]})]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),x.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap",children:(n=s,`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`)})]})]})]}),x.jsx("button",{onClick:i,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var n}));Di.displayName="JSTypoHunterSummary";const _i=d.memo((({isPaused:e=!1})=>{const{data:s,isLoading:t,error:a}=Ga(),i=null==s?void 0:s.games.find((e=>"js-typo-hunter"===e.slug)),[r,n]=d.useState(!1),[c,m]=d.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[u,p]=d.useState(!1),{timeElapsed:h,resetTimer:j,startTimer:g,stopTimer:y}=gi({maxTime:c.maxTime,onTimeEnd:()=>{p(!0),y()},isPaused:e}),b=d.useCallback((e=>{const s=null==i?void 0:i.gameData[c.currentLevel-1],t=e+(e=>{switch(e){case"easy":default:return 10;case"medium":return 20;case"hard":return 30}})((null==s?void 0:s.difficulty)||"easy");m((e=>l(o({},e),{score:e.score+t,correctAnswers:e.correctAnswers+1})))}),[c.currentLevel,i]),f=d.useCallback((()=>{p(!0),y()}),[y]),v=d.useCallback((()=>{setTimeout((()=>{const e=c.currentLevel+1;e>((null==i?void 0:i.gameData.length)||0)?(p(!0),y()):m((s=>l(o({},s),{currentLevel:e})))}),1e3)}),[c.currentLevel,i,y]),N=d.useCallback((()=>{m({currentLevel:1,totalLevels:(null==i?void 0:i.gameData.length)||0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),p(!1),j(),g()}),[j,g,i]),w=()=>{n(!0),g()};return d.useEffect((()=>{m((e=>l(o({},e),{timeElapsed:h})))}),[h]),d.useEffect((()=>{i&&m((e=>l(o({},e),{totalLevels:i.gameData.length})))}),[i]),t?x.jsx("div",{children:"Ładowanie..."}):a?x.jsxs("div",{children:["Błąd: ",a.message]}):i?r?x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[x.jsx(Ei,{stats:c}),x.jsx(Se,{mode:"wait",children:u?x.jsx(Di,{score:c.score,timeElapsed:h,correctAnswers:c.correctAnswers,totalLevels:(null==i?void 0:i.gameData.length)||0,onRestart:N},"game-over"):x.jsx(ke.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:x.jsx(Ri,{currentChallenge:null==i?void 0:i.gameData[c.currentLevel-1],onScoreUpdate:b,onLevelComplete:v,onIncorrectAnswer:f})},`level-${c.currentLevel}`)})]}):x.jsx(Li,{gameContent:i,onStart:w}):null}));_i.displayName="JSTypoHunter";const Bi=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),Fi=d.memo((({category:e,stats:s})=>{const t=(()=>{switch(e){case"promises":return u;case"async-await":return be;case"callbacks":return ye}})(),a=s.correct/s.total*100;return x.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-800/50 rounded-lg",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(t,{className:"w-4 h-4 text-js"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsx("span",{className:"text-sm text-gray-400",children:(()=>{switch(e){case"promises":return"Promises";case"async-await":return"Async/Await";case"callbacks":return"Callbacks"}})()}),x.jsxs("span",{className:"text-xs text-gray-500",children:[s.correct,"/",s.total]})]}),x.jsx("div",{className:"h-1 bg-dark-900 rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${a}%`},className:"h-full bg-js",transition:{duration:.3}})})]})]})}));Fi.displayName="CategoryProgress";const Ii=d.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return x.jsxs("div",{className:"space-y-4",children:[x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(u,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),x.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{className:"w-full",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),x.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:x.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]}),x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[x.jsx(Fi,{category:"promises",stats:e.categoryStats.promises}),x.jsx(Fi,{category:"async-await",stats:e.categoryStats["async-await"]}),x.jsx(Fi,{category:"callbacks",stats:e.categoryStats.callbacks})]})]})}));Ii.displayName="AsyncQuestStats";const Wi=d.memo((({score:e,timeElapsed:s,challenges:t,correctAnswers:a,categoryStats:i,onRestart:r})=>{const{updatePoints:n}=zi();d.useEffect((()=>{n(e)}),[e,n]);return x.jsxs(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:a===t.length?"Gratulacje!":"Koniec gry!"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne odpowiedzi: ",a,"/",t.length]})]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas ukończenia"}),x.jsx("div",{className:"text-lg font-bold text-js",children:(o=s,`${Math.floor(o/60)}:${(o%60).toString().padStart(2,"0")}`)})]})]})]}),x.jsxs("div",{className:"space-y-4 mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-js",children:"Statystyki kategorii:"}),x.jsx(Fi,{category:"promises",stats:i.promises}),x.jsx(Fi,{category:"async-await",stats:i["async-await"]}),x.jsx(Fi,{category:"callbacks",stats:i.callbacks})]}),x.jsx("button",{onClick:r,className:"w-full px-6 py-3 rounded-lg bg-js text-dark font-medium hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})]});var o}));Wi.displayName="AsyncQuestSummary";const Hi=d.memo((({currentLevel:e,totalLevels:s})=>{const t=(e-1)/s*100;return x.jsx("div",{className:"w-full bg-dark-800/50 h-1 rounded-full overflow-hidden",children:x.jsx(ke.div,{initial:{width:0},animate:{width:`${t}%`},className:"h-full bg-js",transition:{duration:.3}})})}));Hi.displayName="AsyncQuestProgress";const qi=d.memo((({type:e,message:s,code:t,explanation:a})=>x.jsx(ke.div,{initial:{opacity:0,y:"hint"===e?-10:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+("hint"===e?"bg-js/10 border border-js/20":"bg-red-500/20 border border-red-500/30"),children:x.jsxs("div",{className:"flex items-start gap-3",children:["hint"===e?x.jsx(U,{className:"w-5 h-5 text-js flex-shrink-0 mt-0.5"}):x.jsx(O,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"text-sm font-medium "+("hint"===e?"text-js":"text-red-400"),children:"hint"===e?"Podpowiedź:":"Błąd:"}),x.jsx("div",{className:"text-sm text-gray-400",children:s}),t&&x.jsx("div",{className:"mt-2 p-2 bg-dark-900 rounded-lg font-mono text-sm text-gray-300",children:t}),a&&x.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[x.jsx("span",{className:"font-medium text-js",children:"Wyjaśnienie: "}),a]})]})]})})));qi.displayName="AsyncQuestHint";const Mi=(e,s)=>{if("async-await"===s){if(!e.includes("async"))return{message:"Funkcja powinna być oznaczona jako asynchroniczna.",explanation:"Użyj słowa kluczowego async przed deklaracją funkcji.",example:"async function getData() { ... }"};if(!e.includes("await"))return{message:"Brak słowa kluczowego await przy wywołaniu asynchronicznym.",explanation:"Użyj await aby poczekać na wynik operacji asynchronicznej.",example:"const data = await fetchData();"}}if("promises"===s){if(!e.includes(".catch"))return{message:"Brak obsługi błędów w łańcuchu Promise.",explanation:"Dodaj .catch() aby obsłużyć potencjalne błędy.",example:"fetch(url).then(...).catch(error => { ... })"};if(!e.includes(".then"))return{message:"Brak obsługi wyniku Promise.",explanation:"Użyj .then() aby obsłużyć wynik pomyślnego wykonania.",example:"promise.then(result => { ... })"}}return"callbacks"!==s||e.includes("new Promise")?{message:"Sprawdź poprawność składni kodu.",explanation:"Upewnij się, że kod jest zgodny z wymaganiami zadania."}:{message:"Przekształć callback w Promise.",explanation:"Użyj konstruktora Promise aby opakować callback.",example:"new Promise((resolve, reject) => { ... })"}},Ui=d.memo((({currentChallenge:e,onScoreUpdate:s,onLevelComplete:t,currentLevel:a,totalLevels:i,onGameOver:r})=>{const[n,m]=d.useState(e.code),[u,p]=d.useState(!1),[h,j]=d.useState(null),[g,y]=d.useState(null),[b,f]=d.useState(!1),v=d.useRef(null),N=d.useRef(null),w=d.useRef(null),{executeCode:k,isRunning:S,clearOutput:z}=(()=>{const[e,s]=d.useState(!1),[t,a]=d.useState([]);return{executeCode:d.useCallback((e=>c(void 0,null,(function*(){s(!0),a([]);try{const s={console:{log:(...e)=>{a((s=>[...s,e.map((e=>String(e))).join(" ")]))},error:(...e)=>{a((s=>[...s,`Error: ${e.map((e=>String(e))).join(" ")}`]))}},fetch:()=>Promise.resolve({json:()=>Promise.resolve({data:"mock data"})}),setTimeout:(e,s)=>setTimeout(e,Math.min(s,1e3)),Promise:Promise},i=`\n        with (context) {\n          ${e}\n        }\n      `;return yield new Function("context",i)(s),{success:!0,output:t}}catch(i){return{success:!1,output:t,error:i.message}}finally{s(!1)}}))),[]),isRunning:e,output:t,clearOutput:()=>a([])}})();d.useEffect((()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"center"})}),[]);const C=d.useCallback((e=>{void 0!==e&&(m(e),j(null),y(null),z())}),[z]),L=d.useCallback((()=>{w.current&&w.current.scrollIntoView({behavior:"smooth",block:"center"})}),[]),P=d.useCallback((()=>c(void 0,null,(function*(){if(n){p(!1),z(),y(null);try{const a=yield((e,s)=>{const t=e=>e.replace(/\s+/g," ").trim();if(t(e)===t(s))return!0;const a=e=>e.includes("async")&&e.includes("function"),i=e=>e.includes(".then(")&&e.includes(".catch("),r=e=>e.includes("try")&&e.includes("catch");return!(a(s)&&!a(e)||i(s)&&!i(e)||r(s)&&!r(e))})(n,e.correct),i=yield k(n);if(a&&i.success)j(!0),p(!0),s(e.points,e.category),setTimeout((()=>{L()}),100),setTimeout((()=>{t()}),1500);else{j(!1),p(!0);const s=Mi(n,e.category);y(s),setTimeout((()=>{L()}),100),setTimeout((()=>{r()}),2e3)}}catch(a){j(!1),p(!0);const s=Mi(n,e.category);y(s),setTimeout((()=>{L()}),100),setTimeout((()=>{r()}),2e3)}}}))),[n,e,k,s,t,r,z,L]);return x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-6xl mx-auto p-4 space-y-6",children:[x.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-2xl font-bold text-js",children:e.title}),x.jsx(Hi,{currentLevel:a,totalLevels:i})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-6 mb-6",children:[x.jsx("h2",{className:"text-xl font-bold text-js mb-3",children:"Opis zadania"}),x.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:e.description}),x.jsxs("div",{className:"p-4 bg-dark-700/50 border border-js/20 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-semibold text-js mb-2",children:"Zadanie"}),x.jsx("p",{className:"text-gray-300 text-base",children:e.task})]})]})]}),x.jsxs("div",{ref:N,className:"bg-dark-800/50 rounded-xl p-6",children:[x.jsx("div",{className:"h-[500px] relative rounded-lg overflow-hidden border border-js/10",children:x.jsx(fe,{height:"100%",defaultLanguage:"javascript",value:n,onChange:C,onMount:e=>{v.current=e,f(!0),setTimeout((()=>{e.focus()}),100)},options:l(o({},{minimap:{enabled:!1},fontSize:14,lineHeight:24,fontFamily:"JetBrains Mono, monospace",fontLigatures:!0,wordWrap:"on",automaticLayout:!0,padding:{top:16,bottom:16},scrollBeyondLastLine:!1,folding:!0,lineNumbers:"on",renderLineHighlight:"all",suggestOnTriggerCharacters:!0,parameterHints:{enabled:!0},tabSize:2,theme:"vs-dark"}),{fontSize:16,lineHeight:26}),className:"w-full"})}),x.jsx("button",{onClick:P,disabled:S||!b,className:"mt-4 w-full px-6 py-3 rounded-lg font-medium transition-colors "+(S||!b?"bg-gray-500 cursor-not-allowed":"bg-js text-dark hover:bg-js/90"),children:S?"Wykonywanie...":"Uruchom kod"})]}),u&&x.jsx(ke.div,{ref:w,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-6",children:x.jsx(qi,{type:h?"hint":"error",message:h?"Świetnie! Rozwiązanie jest poprawne.":e.error,explanation:h||null==g?void 0:g.explanation,code:h||null==g?void 0:g.example})})]})}));Ui.displayName="AsyncQuestGame";const Vi=d.memo((({isPaused:e=!1})=>{const{data:s,isLoading:t,error:a}=Ga(),i=null==s?void 0:s.games.find((e=>"async-quest"===e.slug)),[r,n]=d.useState(!1),[c,m]=d.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:(null==i?void 0:i.estimatedTime)?60*i.estimatedTime:300,correctAnswers:0,categoryStats:{promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}}}),[u,p]=d.useState(!1),[h,j]=d.useState(0),{timeElapsed:g,resetTimer:y,startTimer:b,stopTimer:f}=gi({maxTime:(null==i?void 0:i.estimatedTime)?60*i.estimatedTime:300,onTimeEnd:()=>{p(!0),j(g),f()},isPaused:e});d.useEffect((()=>{i&&m((e=>l(o({},e),{totalLevels:i.gameData.length})))}),[i]),d.useEffect((()=>{u||e||m((e=>l(o({},e),{timeElapsed:g})))}),[g,u,e]),d.useEffect((()=>{u||e||b()}),[u,e,b]);const v=()=>{n(!0),b()};return t?x.jsx("div",{children:"Ładowanie..."}):a?x.jsxs("div",{children:["Błąd: ",a.message]}):i?r?x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full flex flex-col",children:[x.jsx(Ii,{stats:c,isGameOver:u,finalTime:h}),x.jsx(Se,{mode:"wait",children:x.jsx("div",{className:"flex-1 overflow-y-auto py-6",children:u?x.jsx(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:x.jsx(Wi,{score:c.score,timeElapsed:h,challenges:i.gameData,correctAnswers:c.correctAnswers,categoryStats:c.categoryStats,onRestart:()=>{const e={promises:{total:0,correct:0,points:0},"async-await":{total:0,correct:0,points:0},callbacks:{total:0,correct:0,points:0}};null==i||i.gameData.forEach((s=>{s.category&&e[s.category].total++})),m({currentLevel:1,totalLevels:(null==i?void 0:i.gameData.length)||0,score:0,timeElapsed:0,maxTime:(null==i?void 0:i.estimatedTime)?60*i.estimatedTime:300,correctAnswers:0,categoryStats:e}),p(!1),y(),b()}})},"game-over"):x.jsx(ke.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3},className:"w-full",children:x.jsx(Ui,{currentChallenge:i.gameData[c.currentLevel-1],onScoreUpdate:(e,s)=>{m((t=>l(o({},t),{score:t.score+e,correctAnswers:t.correctAnswers+1,categoryStats:l(o({},t.categoryStats),{[s]:l(o({},t.categoryStats[s]),{total:t.categoryStats[s].total+1,correct:t.categoryStats[s].correct+1,points:t.categoryStats[s].points+e})})})))},onLevelComplete:()=>{const e=c.currentLevel+1;e>c.totalLevels?(p(!0),j(g),f()):m((s=>l(o({},s),{currentLevel:e})))},currentLevel:c.currentLevel,totalLevels:c.totalLevels,onGameOver:()=>{p(!0),j(g),f()}})},`level-${c.currentLevel}`)})})]}):x.jsx(Li,{gameContent:i,onStart:v}):null}));Vi.displayName="AsyncQuest";const Gi=Object.freeze(Object.defineProperty({__proto__:null,default:Vi},Symbol.toStringTag,{value:"Module"})),Ki=d.memo((({stats:e,isGameOver:s,finalTime:t})=>{const a=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,i=s?t:e.timeElapsed;return x.jsxs(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(u,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Poziom"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e.currentLevel,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{className:"w-full",children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Punkty"}),x.jsx("div",{className:"text-lg font-bold text-js",children:e.score}),x.jsxs("div",{className:"text-xs text-gray-500",children:["Poprawne: ",e.correctAnswers,"/",e.totalLevels]})]})]}),x.jsxs("div",{className:"bg-dark-800/50 border border-js/10 rounded-lg p-4 flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas"}),x.jsx("div",{className:"text-lg font-bold text-js flex flex-wrap w-full",children:x.jsxs("span",{className:"block w-full break-words",children:[a(i),"/",a(e.maxTime)]})})]})]})]})}));Ki.displayName="RegexRaiderStats";const Zi=d.memo((({pattern:e,explanation:s,example:t})=>x.jsx(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"p-2 rounded-lg bg-js/10",children:x.jsx(U,{className:"w-4 h-4 text-js"})}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"text-sm text-gray-400",children:s}),e&&x.jsx("div",{className:"font-mono text-sm bg-dark-900/50 p-2 rounded text-js",children:e}),t&&x.jsxs("div",{className:"text-xs text-gray-500",children:["Przykład: ",x.jsx("span",{className:"text-gray-400",children:t})]})]})]})})));Zi.displayName="RegexRaiderHint";const Ji=d.memo((({onScoreUpdate:e,onLevelComplete:s,currentLevel:t,onGameOver:a})=>{const{data:i}=Ga(),r=null==i?void 0:i.games.find((e=>"regex-raider"===e.slug)),[n,o]=d.useState(""),[l,c]=d.useState([]),[m,u]=d.useState(null);if(!r)return null;const p=r.gameData[t-1],h=d.useCallback((e=>{const s=e.target.value;o(s),u(null);try{const e=new RegExp(s,"g"),t=p.text.match(e)||[];c(t)}catch(t){c([])}}),[p]),j=d.useCallback((()=>{try{const t=p.text.match(new RegExp(n,"g"))||[],i=p.text.match(new RegExp(p.correctRegex,"g"))||[],r=t.length===i.length&&t.every((e=>i.includes(e)));u(r),r?(e(10),setTimeout((()=>{s(),o(""),c([]),u(null)}),1500)):setTimeout((()=>{a()}),1500)}catch(t){u(!1),setTimeout((()=>{a()}),1500)}}),[n,p,e,s,a]);return x.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[x.jsxs("div",{className:"p-4 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Zadanie:"}),x.jsx("div",{className:"text-lg text-js mb-4",children:p.task}),x.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Tekst:"}),x.jsx("div",{className:"font-mono bg-dark-900/50 p-4 rounded-lg text-gray-300",children:p.text})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex gap-4",children:[x.jsx("input",{type:"text",value:n,onChange:h,placeholder:"Wpisz wyrażenie regularne...",className:"flex-1 bg-dark-900/50 border border-js/10 rounded-lg px-4 py-2 text-gray-300 font-mono"}),x.jsx("button",{onClick:j,className:"px-6 py-2 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Sprawdź"})]}),l.length>0&&x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-dark-900/50 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Znalezione dopasowania:"}),x.jsx("div",{className:"space-y-1",children:l.map(((e,s)=>x.jsx("div",{className:"font-mono text-js",children:e},s)))})]}),null!==m&&x.jsx(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+(m?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"),children:x.jsx("p",{className:"text-sm "+(m?"text-green-400":"text-red-400"),children:m?"Świetnie! Wyrażenie regularne jest poprawne!":"Wyrażenie nie znajduje wszystkich wymaganych dopasowań."})}),!1===m&&x.jsx(Zi,{pattern:p.correctRegex,explanation:"Niepoprawne wyrażenie regularne. Gra zostanie zakończona...",example:`Poprawne wyrażenie: ${p.correctRegex}`})]})]})}));Ji.displayName="RegexRaiderGame";const Qi=d.memo((({score:e,timeElapsed:s,correctAnswers:t,totalLevels:a,onRestart:i})=>{const{updatePoints:r}=zi();d.useEffect((()=>{r(e)}),[e,r]);return x.jsxs(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 bg-dark-800/50 border border-js/10 rounded-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-js mb-6 text-center",children:"Koniec gry!"}),x.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(E,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Wynik końcowy"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[e," punktów"]})]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(C,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Rozwiązane zadania"}),x.jsxs("div",{className:"text-lg font-bold text-js",children:[t,"/",a]})]})]}),x.jsxs("div",{className:"p-4 bg-dark-900/50 rounded-lg flex items-center gap-3",children:[x.jsx(_,{className:"w-5 h-5 text-js"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-gray-400",children:"Czas gry"}),x.jsx("div",{className:"text-lg font-bold text-js",children:(n=s,`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`)})]})]})]}),x.jsx("div",{className:"text-center",children:x.jsx("button",{onClick:i,className:"px-6 py-3 bg-js text-dark font-medium rounded-lg hover:bg-js/90 transition-colors",children:"Zagraj ponownie"})})]});var n}));Qi.displayName="RegexRaiderSummary";const Xi=d.memo((({isPaused:e=!1})=>{const{data:s,isLoading:t,error:a}=Ga(),i=null==s?void 0:s.games.find((e=>"regex-raider"===e.slug)),[r,n]=d.useState(!1),[c,m]=d.useState({currentLevel:1,totalLevels:0,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),[u,p]=d.useState(!1),[h,j]=d.useState(0),{timeElapsed:g,resetTimer:y,startTimer:b,stopTimer:f}=gi({maxTime:c.maxTime,onTimeEnd:()=>{p(!0),j(g),f()},isPaused:e});d.useEffect((()=>{i&&m((e=>l(o({},e),{totalLevels:i.gameData.length})))}),[i]),d.useEffect((()=>(b(),()=>f())),[b,f]),d.useEffect((()=>{u||m((e=>l(o({},e),{timeElapsed:g})))}),[g,u]);const v=d.useCallback((e=>{m((s=>l(o({},s),{score:s.score+e,correctAnswers:s.correctAnswers+1})))}),[]),N=d.useCallback((()=>{m((e=>{const s=e.currentLevel+1;return s>e.totalLevels&&(p(!0),j(g),f()),l(o({},e),{currentLevel:s})}))}),[g,f]),w=d.useCallback((()=>{m({currentLevel:1,totalLevels:c.totalLevels,score:0,timeElapsed:0,maxTime:300,correctAnswers:0}),p(!1),y(),b()}),[y,b]),k=d.useCallback((()=>{p(!0),j(g),f()}),[g,f]),S=()=>{n(!0),b()};return t?x.jsx("div",{children:"Ładowanie..."}):a?x.jsxs("div",{children:["Błąd: ",a.message]}):i?r?x.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[x.jsx(Ki,{stats:c,isGameOver:u,finalTime:h}),x.jsx(Se,{mode:"wait",children:u?x.jsx(Qi,{score:c.score,timeElapsed:h,correctAnswers:c.correctAnswers,totalLevels:c.totalLevels,onRestart:w},"game-over"):x.jsx(Ji,{onScoreUpdate:v,onLevelComplete:N,currentLevel:c.currentLevel,onGameOver:k},`level-${c.currentLevel}`)})]}):x.jsx(Li,{gameContent:i,onStart:S}):null}));Xi.displayName="RegexRaider";const Yi=Object.freeze(Object.defineProperty({__proto__:null,default:Xi},Symbol.toStringTag,{value:"Module"}));export{ji as C,ms as D,si as G,wt as L,qs as S,zs as a,Kt as b,Ha as c,ci as d};
