#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Sprawd≈∫ zmiany w katalogu client
if git diff --cached --name-only | grep -q "^client/"; then
  echo "üîç Znaleziono zmiany w katalogu client, uruchamiam lint-staged..."
  cd "C:/Users/oliwi/Desktop/CodeLinesJS/client"
  npx lint-staged
  EXIT_CODE_CLIENT=$?
else
  EXIT_CODE_CLIENT=0
fi

# Sprawd≈∫ zmiany w katalogu server
if git diff --cached --name-only | grep -q "^server/"; then
  echo "üîç Znaleziono zmiany w katalogu server, uruchamiam lint-staged..."
  cd "C:/Users/oliwi/Desktop/CodeLinesJS/server"
  npx lint-staged
  EXIT_CODE_SERVER=$?
else
  EXIT_CODE_SERVER=0
fi

# Zako≈Ñcz z b≈Çƒôdem, je≈õli kt√≥rykolwiek proces siƒô nie powi√≥d≈Ç
if [ $EXIT_CODE_CLIENT -ne 0 ] || [ $EXIT_CODE_SERVER -ne 0 ]; then
  exit 1
fi

exit 0
