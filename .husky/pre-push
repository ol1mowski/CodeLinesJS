#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Uruchom testy dla client
if git diff --name-only HEAD@{u}..HEAD | grep -q "^client/"; then
  echo "üß™ Uruchamiam testy dla client..."
  cd "C:/Users/oliwi/Desktop/CodeLinesJS/client"
  npm run test
  EXIT_CODE_CLIENT=$?
else
  echo "‚ÑπÔ∏è Brak zmian w katalogu client, pomijam testy client"
  EXIT_CODE_CLIENT=0
fi

# Uruchom testy dla server
if git diff --name-only HEAD@{u}..HEAD | grep -q "^server/"; then
  echo "üß™ Uruchamiam testy dla server..."
  cd "C:/Users/oliwi/Desktop/CodeLinesJS/server"
  npm run test
  EXIT_CODE_SERVER=$?
else
  echo "‚ÑπÔ∏è Brak zmian w katalogu server, pomijam testy server"
  EXIT_CODE_SERVER=0
fi

# Zako≈Ñcz z b≈Çƒôdem, je≈õli kt√≥rykolwiek proces siƒô nie powi√≥d≈Ç
if [ $EXIT_CODE_CLIENT -ne 0 ] || [ $EXIT_CODE_SERVER -ne 0 ]; then
  exit 1
fi

exit 0
